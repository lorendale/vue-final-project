(function(){"use strict";var e={8862:function(e,t,a){var r=a(5130),s=a(6768),o=a(4232);const i={class:"app-container"},l={class:"navbar navbar-expand-lg navbar-dark"},n={class:"container"},c={class:"collapse navbar-collapse",id:"navbarContent",ref:"navbarCollapse"},d={class:"navbar-nav me-auto mb-2 mb-lg-0"},u={key:0,class:"nav-item"},m={key:1,class:"nav-item"},p={key:2,class:"nav-item"},g={key:3,class:"nav-item"},h={key:4,class:"nav-item"},k={key:0,class:"cart-badge"},b={key:5,class:"nav-item"},v={class:"navbar-nav ms-auto"},f={key:0,class:"nav-item"},y={key:1,class:"nav-item d-flex align-items-center user-nav-item"},L={class:"user-info d-flex align-items-center"},w={class:"main-content"},P={class:"footer mt-auto py-3"},C={class:"container"},x={class:"row"},S={class:"col-md-4 mb-3 mb-md-0"},M={class:"footer-links"};function I(e,t,a,I,_,E){const O=(0,s.g2)("router-link"),D=(0,s.g2)("router-view"),T=(0,s.g2)("ToastNotification");return(0,s.uX)(),(0,s.CE)("div",i,[(0,s.Lk)("nav",l,[(0,s.Lk)("div",n,[(0,s.bF)(O,{class:"navbar-brand",to:I.auth&&I.auth.isLoggedIn?I.auth.isStaff?"/monitor":"/products":"/login"},{default:(0,s.k6)((()=>t[2]||(t[2]=[(0,s.Lk)("i",{class:"bi bi-bag-heart-fill me-2"},null,-1),(0,s.eW)("Bluora ")]))),_:1},8,["to"]),(0,s.Lk)("button",{class:"navbar-toggler",type:"button",onClick:t[0]||(t[0]=(...e)=>I.toggleNavbar&&I.toggleNavbar(...e)),"aria-controls":"navbarContent","aria-expanded":"false","aria-label":"Toggle navigation"},t[3]||(t[3]=[(0,s.Lk)("span",{class:"navbar-toggler-icon"},null,-1)])),(0,s.Lk)("div",c,[(0,s.Lk)("ul",d,[I.auth.isLoggedIn&&I.auth.isStaff?((0,s.uX)(),(0,s.CE)("li",u,[(0,s.bF)(O,{class:"nav-link",to:"/monitor-products",onClick:I.closeNavbar},{default:(0,s.k6)((()=>t[4]||(t[4]=[(0,s.Lk)("i",{class:"bi bi-box-seam me-1"},null,-1),(0,s.eW)(" Products ")]))),_:1},8,["onClick"])])):(0,s.Q3)("",!0),I.auth.isLoggedIn&&I.auth.isStaff?((0,s.uX)(),(0,s.CE)("li",m,[(0,s.bF)(O,{class:"nav-link",to:"/add-product",onClick:I.closeNavbar},{default:(0,s.k6)((()=>t[5]||(t[5]=[(0,s.Lk)("i",{class:"bi bi-plus-circle me-1"},null,-1),(0,s.eW)(" Add Product ")]))),_:1},8,["onClick"])])):(0,s.Q3)("",!0),I.auth.isLoggedIn&&I.auth.isStaff?((0,s.uX)(),(0,s.CE)("li",p,[(0,s.bF)(O,{class:"nav-link",to:"/monitor",onClick:I.closeNavbar},{default:(0,s.k6)((()=>t[6]||(t[6]=[(0,s.Lk)("i",{class:"bi bi-clipboard-check me-1"},null,-1),(0,s.eW)(" Orders ")]))),_:1},8,["onClick"])])):(0,s.Q3)("",!0),I.auth.isLoggedIn&&!I.auth.isStaff?((0,s.uX)(),(0,s.CE)("li",g,[(0,s.bF)(O,{class:"nav-link",to:"/products",onClick:I.closeNavbar},{default:(0,s.k6)((()=>t[7]||(t[7]=[(0,s.Lk)("i",{class:"bi bi-shop me-1"},null,-1),(0,s.eW)(" Shop ")]))),_:1},8,["onClick"])])):(0,s.Q3)("",!0),I.auth.isLoggedIn&&!I.auth.isStaff?((0,s.uX)(),(0,s.CE)("li",h,[(0,s.bF)(O,{class:"nav-link position-relative",to:"/cart",onClick:I.closeNavbar},{default:(0,s.k6)((()=>[t[8]||(t[8]=(0,s.Lk)("i",{class:"bi bi-cart me-1"},null,-1)),t[9]||(t[9]=(0,s.eW)(" Cart ")),I.cartCount>0?((0,s.uX)(),(0,s.CE)("span",k,(0,o.v_)(I.cartCount),1)):(0,s.Q3)("",!0)])),_:1},8,["onClick"])])):(0,s.Q3)("",!0),I.auth.isLoggedIn&&!I.auth.isStaff?((0,s.uX)(),(0,s.CE)("li",b,[(0,s.bF)(O,{class:"nav-link",to:"/orders",onClick:I.closeNavbar},{default:(0,s.k6)((()=>t[10]||(t[10]=[(0,s.Lk)("i",{class:"bi bi-clock-history me-1"},null,-1),(0,s.eW)(" Orders ")]))),_:1},8,["onClick"])])):(0,s.Q3)("",!0)]),(0,s.Lk)("ul",v,[I.auth.isLoggedIn?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("li",f,["register"===e.$route.name?((0,s.uX)(),(0,s.Wv)(O,{key:0,class:"nav-link",to:"/login",onClick:I.closeNavbar},{default:(0,s.k6)((()=>t[11]||(t[11]=[(0,s.Lk)("i",{class:"bi bi-box-arrow-in-right me-1"},null,-1),(0,s.eW)(" Login ")]))),_:1},8,["onClick"])):((0,s.uX)(),(0,s.Wv)(O,{key:1,class:"nav-link",to:"/register",onClick:I.closeNavbar},{default:(0,s.k6)((()=>t[12]||(t[12]=[(0,s.Lk)("i",{class:"bi bi-person-plus me-1"},null,-1),(0,s.eW)(" Register ")]))),_:1},8,["onClick"]))])),I.auth.isLoggedIn?((0,s.uX)(),(0,s.CE)("li",y,[(0,s.Lk)("div",L,[t[13]||(t[13]=(0,s.Lk)("i",{class:"bi bi-person-circle me-1"},null,-1)),(0,s.Lk)("span",null,(0,o.v_)(I.username),1)]),(0,s.Lk)("button",{class:"btn btn-outline-light btn-sm ms-2",onClick:t[1]||(t[1]=(...e)=>I.logout&&I.logout(...e))},t[14]||(t[14]=[(0,s.Lk)("i",{class:"bi bi-box-arrow-right me-1"},null,-1),(0,s.eW)(" Logout ")]))])):(0,s.Q3)("",!0)])],512)])]),(0,s.Lk)("main",w,[(0,s.bF)(D,null,{default:(0,s.k6)((({Component:e})=>[(0,s.bF)(r.eB,{name:"fade",mode:"out-in"},{default:(0,s.k6)((()=>[((0,s.uX)(),(0,s.Wv)((0,s.$y)(e)))])),_:2},1024)])),_:1})]),(0,s.Lk)("footer",P,[(0,s.Lk)("div",C,[(0,s.Lk)("div",x,[t[19]||(t[19]=(0,s.Lk)("div",{class:"col-md-4 mb-3 mb-md-0"},[(0,s.Lk)("h5",{class:"footer-heading"},"Bluora"),(0,s.Lk)("p",{class:"footer-text"},"Your one-stop shop for all your needs. Quality products at affordable prices.")],-1)),(0,s.Lk)("div",S,[t[18]||(t[18]=(0,s.Lk)("h5",{class:"footer-heading"},"Quick Links",-1)),(0,s.Lk)("ul",M,[(0,s.Lk)("li",null,[(0,s.bF)(O,{to:"/products"},{default:(0,s.k6)((()=>t[15]||(t[15]=[(0,s.eW)("Products")]))),_:1})]),(0,s.Lk)("li",null,[(0,s.bF)(O,{to:"/cart"},{default:(0,s.k6)((()=>t[16]||(t[16]=[(0,s.eW)("Cart")]))),_:1})]),(0,s.Lk)("li",null,[(0,s.bF)(O,{to:"/orders"},{default:(0,s.k6)((()=>t[17]||(t[17]=[(0,s.eW)("Orders")]))),_:1})])])]),t[20]||(t[20]=(0,s.Fv)('<div class="col-md-4"><h5 class="footer-heading">Contact Us</h5><p class="footer-text"><i class="bi bi-envelope me-2"></i> support@bluora.com<br><i class="bi bi-telephone me-2"></i> +1 (123) 456-7890<br><i class="bi bi-geo-alt me-2"></i> 123 E-Commerce St, Digital City </p></div>',1))]),t[21]||(t[21]=(0,s.Fv)('<div class="footer-bottom"><p class="mb-0">Â© 2025 Bluora. All rights reserved.</p><div class="social-icons"><a href="#" class="social-icon"><i class="bi bi-facebook"></i></a><a href="#" class="social-icon"><i class="bi bi-twitter"></i></a><a href="#" class="social-icon"><i class="bi bi-instagram"></i></a></div></div>',1))])]),(0,s.bF)(T)])}a(4114);var _=a(144),E=a(4373);a(8111),a(2489),a(116),a(7588),a(1701);const O=()=>[{id:1,name:"Premium Wireless Headphones",description:"Experience crystal-clear sound with our premium wireless headphones. Features noise cancellation and 20-hour battery life.",price:1299.99,stock:15,image:"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8cHJvZHVjdHxlbnwwfHwwfHx8MA%3D%3D"},{id:2,name:"Smart Fitness Watch",description:"Track your fitness goals with this advanced smartwatch. Monitors heart rate, steps, sleep quality and more.",price:899.5,stock:8,image:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTB8fHByb2R1Y3R8ZW58MHx8MHx8fDA%3D"},{id:3,name:"Ultra HD Smart TV",description:"Transform your living room with this 55-inch Ultra HD Smart TV. Features AI-powered picture quality and immersive sound.",price:3499.99,stock:5,image:"https://images.unsplash.com/photo-1567690187548-f07b1d7bf5a9?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8OHx8dHZ8ZW58MHx8MHx8fDA%3D"},{id:4,name:"Professional Camera Kit",description:"Capture stunning photos and videos with this professional-grade camera kit. Includes multiple lenses and accessories.",price:4999,stock:3,image:"https://images.unsplash.com/photo-1526170375885-4d8ecf77b99f?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8cHJvZHVjdHxlbnwwfHwwfHx8MA%3D%3D"},{id:5,name:"Ergonomic Office Chair",description:"Work in comfort with this ergonomic office chair. Features adjustable height, lumbar support, and breathable mesh back.",price:1299,stock:12,image:"https://images.unsplash.com/photo-1596162954151-cdcb4c0f70a8?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTJ8fGNoYWlyfGVufDB8fDB8fHww"},{id:6,name:"Portable Bluetooth Speaker",description:"Take your music anywhere with this waterproof portable Bluetooth speaker. Features 12-hour battery life and deep bass.",price:599.99,stock:20,image:"https://images.unsplash.com/photo-1608043152269-423dbba4e7e1?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8Ymx1ZXRvb3RoJTIwc3BlYWtlcnxlbnwwfHwwfHx8MA%3D%3D"},{id:7,name:"Gaming Laptop",description:"Experience lag-free gaming with this high-performance gaming laptop. Features dedicated graphics card and RGB keyboard.",price:5999,stock:7,image:"https://images.unsplash.com/photo-1603302576837-37561b2e2302?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTh8fGxhcHRvcHxlbnwwfHwwfHx8MA%3D%3D"},{id:8,name:"Coffee Maker Deluxe",description:"Brew perfect coffee every time with this programmable coffee maker. Features multiple brewing options and built-in grinder.",price:799.5,stock:9,image:"https://images.unsplash.com/photo-1565452344518-47faca79dc69?q=80&w=1935&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{id:9,name:"Smartphone Pro Max",description:"Stay connected with our latest smartphone. Features high-resolution camera, all-day battery life, and fast processor.",price:4299,stock:0,image:"https://images.unsplash.com/photo-1598327105666-5b89351aff97?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTZ8fHNtYXJ0cGhvbmV8ZW58MHx8MHx8fDA%3D"},{id:10,name:"Wireless Charging Pad",description:"Charge your devices without the hassle of cables. Compatible with all Qi-enabled smartphones and accessories.",price:299.99,stock:25,image:"https://images.unsplash.com/photo-1622445275463-afa2ab738c34?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8Y2hhcmdlcnxlbnwwfHwwfHx8MA%3D%3D"},{id:11,name:"Smart Home Hub",description:"Control all your smart home devices from one central hub. Compatible with most popular smart home brands.",price:899,stock:4,image:"https://images.unsplash.com/photo-1558002038-1055907df827?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8c21hcnQlMjBob21lfGVufDB8fDB8fHww"},{id:12,name:"Mechanical Keyboard",description:"Enhance your typing experience with this mechanical keyboard. Features customizable RGB lighting and tactile feedback.",price:499.5,stock:15,image:"https://images.unsplash.com/photo-1618384887929-16ec33fab9ef?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8a2V5Ym9hcmR8ZW58MHx8MHx8fDA%3D"}],D=e=>{const t=[{id:1,name:"John Doe"},{id:2,name:"Jane Smith"},{id:3,name:"Robert Johnson"}],a=()=>{const e=new Date,t=Math.floor(30*Math.random());return e.setDate(e.getDate()-t),e.toISOString()},r=t=>{const a=Math.floor(4*Math.random())+1,r=[];for(let s=0;s<a;s++){const a=e[Math.floor(Math.random()*e.length)],o=r.find((e=>e.product===a.id));o?o.quantity+=Math.floor(2*Math.random())+1:r.push({id:100*t+s,order:t,product:a.id,quantity:Math.floor(3*Math.random())+1})}return r},s=[];for(let o=1;o<=10;o++){const e=t[Math.floor(Math.random()*t.length)];s.push({id:o,customer:e.name,date_ordered:a(),complete:!0,items:r(o)})}return s},T=()=>{if(!localStorage.getItem("mockProducts")){const e=O();localStorage.setItem("mockProducts",JSON.stringify(e))}if(!localStorage.getItem("mockOrders")){const e=JSON.parse(localStorage.getItem("mockProducts")),t=D(e);localStorage.setItem("mockOrders",JSON.stringify(t))}return{products:JSON.parse(localStorage.getItem("mockProducts")),orders:JSON.parse(localStorage.getItem("mockOrders"))}},A=()=>JSON.parse(localStorage.getItem("mockProducts"))||[],F=()=>JSON.parse(localStorage.getItem("mockOrders"))||[],W=e=>{const t=A(),a={...e,id:t.length>0?Math.max(...t.map((e=>e.id)))+1:1};return t.push(a),localStorage.setItem("mockProducts",JSON.stringify(t)),a},R=(e,t)=>{const a=A(),r=a.findIndex((t=>t.id===e));return-1!==r?(a[r]={...a[r],...t},localStorage.setItem("mockProducts",JSON.stringify(a)),a[r]):null},X=e=>{const t=A(),a=t.filter((t=>t.id!==e));return a.length<t.length&&(localStorage.setItem("mockProducts",JSON.stringify(a)),!0)},q=e=>{const t=F(),a={...e,id:t.length>0?Math.max(...t.map((e=>e.id)))+1:1,date_ordered:(new Date).toISOString(),complete:!0};if(t.push(a),localStorage.setItem("mockOrders",JSON.stringify(t)),a.items&&a.items.length>0){const e=A();a.items.forEach((t=>{const a=e.findIndex((e=>e.id===t.product));-1!==a&&(e[a].stock=Math.max(0,e[a].stock-t.quantity))})),localStorage.setItem("mockProducts",JSON.stringify(e))}return a};var H={initializeMockData:T,getMockProducts:A,getMockOrders:F,addMockProduct:W,updateMockProduct:R,deleteMockProduct:X,addMockOrder:q};H.initializeMockData();const N=(e=300)=>new Promise((t=>setTimeout(t,e))),B={getProducts:async()=>(await N(),{data:H.getMockProducts()}),getProduct:async e=>{await N();const t=H.getMockProducts(),a=t.find((t=>t.id===e));return a?{data:a}:Promise.reject({response:{status:404,data:{error:"Product not found"}}})},createProduct:async e=>{await N(500);const t=H.addMockProduct(e);return{data:t}},updateProduct:async(e,t)=>{await N(500);const a=H.updateMockProduct(e,t);return a?{data:a}:Promise.reject({response:{status:404,data:{error:"Product not found"}}})},deleteProduct:async e=>{await N(500);const t=H.deleteMockProduct(e);return t?{data:{success:!0}}:Promise.reject({response:{status:404,data:{error:"Product not found"}}})},getOrders:async()=>(await N(),{data:H.getMockOrders()}),createOrder:async e=>{await N(800);const t=H.addMockOrder(e);return{data:t}},login:async e=>(await N(1e3),"admin"===e.username&&"admin"===e.password?{data:{access:"mock-token-admin",refresh:"mock-refresh-token",user:{id:1,username:"admin",is_staff:!0}}}:"user"===e.username&&"user"===e.password?{data:{access:"mock-token-user",refresh:"mock-refresh-token",user:{id:2,username:"user",is_staff:!1}}}:Promise.reject({response:{status:401,data:{detail:"Invalid username or password"}}})),register:async e=>(await N(1e3),"admin"===e.username||"user"===e.username?Promise.reject({response:{status:400,data:{username:["This username is already taken."]}}}):{data:{id:3,username:e.username,is_staff:!1}}),getUser:async()=>{await N();const e="true"===localStorage.getItem("is_staff"),t=localStorage.getItem("user_id")||(e?"1":"2"),a=localStorage.getItem("username")||(e?"admin":"user");return{data:{id:parseInt(t),username:a,is_staff:e}}},request:async e=>{const{method:t="get",url:a,data:r}=e,s=a.split("/").filter(Boolean),o=s[0],i=s[1]?parseInt(s[1]):null;switch(o){case"products":if("get"===t)return i?B.getProduct(i):B.getProducts();if("post"===t)return B.createProduct(r);if("put"===t||"patch"===t)return B.updateProduct(i,r);if("delete"===t)return B.deleteProduct(i);break;case"orders":if("get"===t)return B.getOrders();if("post"===t)return B.createOrder(r);break;case"token":if("post"===t)return B.login(r);break;case"register":if("post"===t)return B.register(r);break;case"user":if("get"===t)return B.getUser();break;case"order-items":if("post"===t)return await N(300),{data:{...r,id:Math.floor(1e3*Math.random())}};break}return Promise.reject({response:{status:404,data:{error:"Endpoint not found"}}})}},K=new Proxy(B,{get:(e,t)=>["get","post","put","patch","delete"].includes(t)?(a,r,s={})=>e.request({method:t,url:a,data:r,...s}):e[t]});var J=K;a(8237),a(3579),a(7642),a(8004),a(3853),a(5876),a(2475),a(5024),a(1698);const j=()=>[{id:1,name:"Premium Wireless Headphones",description:"Experience crystal-clear sound with our premium wireless headphones. Features active noise cancellation, 20-hour battery life, and premium leather comfort padding.",price:1299.99,stock:15,image:"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8cHJvZHVjdHxlbnwwfHwwfHx8MA%3D%3D",category:"Electronics",sku:"WH-001",created_at:"2024-01-15T10:30:00Z",updated_at:"2024-01-20T14:45:00Z"},{id:2,name:"Smart Fitness Watch",description:"Track your fitness goals with this advanced smartwatch. Monitors heart rate, steps, sleep quality, GPS tracking, and includes 50+ workout modes.",price:899.5,stock:8,image:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTB8fHByb2R1Y3R8ZW58MHx8MHx8fDA%3D",category:"Wearables",sku:"SW-002",created_at:"2024-01-10T09:15:00Z",updated_at:"2024-01-25T16:20:00Z"},{id:3,name:'Ultra HD Smart TV 55"',description:"Transform your living room with this 55-inch Ultra HD Smart TV. Features AI-powered picture quality, Dolby Atmos sound, and built-in streaming apps.",price:3499.99,stock:5,image:"https://images.unsplash.com/photo-1567690187548-f07b1d7bf5a9?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8OHx8dHZ8ZW58MHx8MHx8fDA%3D",category:"Electronics",sku:"TV-003",created_at:"2024-01-05T11:00:00Z",updated_at:"2024-01-30T13:10:00Z"},{id:4,name:"Professional Camera Kit",description:"Capture stunning photos and videos with this professional-grade camera kit. Includes 24-70mm lens, 50mm prime lens, tripod, and camera bag.",price:4999,stock:3,image:"https://images.unsplash.com/photo-1526170375885-4d8ecf77b99f?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8cHJvZHVjdHxlbnwwfHwwfHx8MA%3D%3D",category:"Photography",sku:"CAM-004",created_at:"2024-01-08T14:30:00Z",updated_at:"2024-02-01T10:15:00Z"},{id:5,name:"Ergonomic Office Chair",description:"Work in comfort with this ergonomic office chair. Features adjustable height, lumbar support, breathable mesh back, and 360-degree swivel.",price:1299,stock:12,image:"https://images.unsplash.com/photo-1596162954151-cdcb4c0f70a8?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTJ8fGNoYWlyfGVufDB8fDB8fHww",category:"Furniture",sku:"CHR-005",created_at:"2024-01-12T08:45:00Z",updated_at:"2024-01-28T15:30:00Z"},{id:6,name:"Portable Bluetooth Speaker",description:"Take your music anywhere with this waterproof portable Bluetooth speaker. Features 12-hour battery life, deep bass, and hands-free calling.",price:599.99,stock:20,image:"https://images.unsplash.com/photo-1608043152269-423dbba4e7e1?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8Ymx1ZXRvb3RoJTIwc3BlYWtlcnxlbnwwfHwwfHx8MA%3D%3D",category:"Audio",sku:"SPK-006",created_at:"2024-01-18T12:20:00Z",updated_at:"2024-02-03T09:40:00Z"},{id:7,name:"Gaming Laptop Pro",description:"Experience lag-free gaming with this high-performance gaming laptop. Features RTX 4070 graphics, 32GB RAM, 1TB SSD, and RGB mechanical keyboard.",price:5999,stock:7,image:"https://images.unsplash.com/photo-1603302576837-37561b2e2302?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTh8fGxhcHRvcHxlbnwwfHwwfHx8MA%3D%3D",category:"Computers",sku:"LAP-007",created_at:"2024-01-22T16:10:00Z",updated_at:"2024-02-05T11:25:00Z"},{id:8,name:"Coffee Maker Deluxe",description:"Brew perfect coffee every time with this programmable coffee maker. Features built-in grinder, thermal carafe, and multiple brewing strength options.",price:799.5,stock:9,image:"https://images.unsplash.com/photo-1570286424717-86d8a0082d0b?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTB8fGNvZmZlZSUyMG1ha2VyfGVufDB8fDB8fHww",category:"Kitchen",sku:"COF-008",created_at:"2024-01-25T13:55:00Z",updated_at:"2024-02-07T14:20:00Z"},{id:9,name:"Smartphone Pro Max",description:"Stay connected with our latest flagship smartphone. Features 108MP camera system, all-day battery life, 5G connectivity, and premium titanium build.",price:4299,stock:0,image:"https://images.unsplash.com/photo-1598327105666-5b89351aff97?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTZ8fHNtYXJ0cGhvbmV8ZW58MHx8MHx8fDA%3D",category:"Mobile",sku:"PHN-009",created_at:"2024-01-30T10:40:00Z",updated_at:"2024-02-10T16:50:00Z"},{id:10,name:"Wireless Charging Pad",description:"Charge your devices without the hassle of cables. Compatible with all Qi-enabled smartphones, fast charging up to 15W, with LED indicator.",price:299.99,stock:25,image:"https://images.unsplash.com/photo-1622445275463-afa2ab738c34?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8Y2hhcmdlcnxlbnwwfHwwfHx8MA%3D%3D",category:"Accessories",sku:"CHG-010",created_at:"2024-02-01T09:30:00Z",updated_at:"2024-02-12T12:15:00Z"},{id:11,name:"Smart Home Hub",description:"Control all your smart home devices from one central hub. Compatible with Alexa, Google Assistant, and most popular smart home brands.",price:899,stock:4,image:"https://images.unsplash.com/photo-1558002038-1055907df827?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8c21hcnQlMjBob21lfGVufDB8fDB8fHww",category:"Smart Home",sku:"HUB-011",created_at:"2024-02-03T15:20:00Z",updated_at:"2024-02-14T08:45:00Z"},{id:12,name:"Mechanical Gaming Keyboard",description:"Enhance your gaming experience with this mechanical keyboard. Features Cherry MX switches, customizable RGB lighting, and programmable macro keys.",price:499.5,stock:15,image:"https://images.unsplash.com/photo-1618384887929-16ec33fab9ef?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8a2V5Ym9hcmR8ZW58MHx8MHx8fDA%3D",category:"Gaming",sku:"KEY-012",created_at:"2024-02-05T11:10:00Z",updated_at:"2024-02-15T13:30:00Z"},{id:13,name:"4K Webcam Pro",description:"Professional 4K webcam for streaming and video calls. Features auto-focus, noise reduction, wide-angle lens, and plug-and-play setup.",price:399.99,stock:18,image:"https://images.unsplash.com/photo-1587825140708-dfaf72ae4b04?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8d2ViY2FtfGVufDB8fDB8fHww",category:"Electronics",sku:"WEB-013",created_at:"2024-02-08T14:25:00Z",updated_at:"2024-02-16T10:20:00Z"},{id:14,name:"Wireless Mouse Elite",description:"Precision wireless mouse with ergonomic design. Features 16000 DPI sensor, 7 programmable buttons, and 70-hour battery life.",price:199.99,stock:22,image:"https://images.unsplash.com/photo-1527864550417-7fd91fc51a46?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8bW91c2V8ZW58MHx8MHx8fDA%3D",category:"Accessories",sku:"MOU-014",created_at:"2024-02-10T16:40:00Z",updated_at:"2024-02-17T09:15:00Z"},{id:15,name:'Tablet Pro 12.9"',description:"Powerful tablet for work and creativity. Features M2 chip, 12.9-inch Liquid Retina display, Apple Pencil support, and all-day battery life.",price:3299,stock:6,image:"https://images.unsplash.com/photo-1544244015-0df4b3ffc6b0?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8dGFibGV0fGVufDB8fDB8fHww",category:"Mobile",sku:"TAB-015",created_at:"2024-02-12T12:50:00Z",updated_at:"2024-02-18T15:35:00Z"}],Q=e=>{const t=[{id:1,name:"John Doe",email:"john.doe@email.com",phone:"+1-555-0123"},{id:2,name:"Jane Smith",email:"jane.smith@email.com",phone:"+1-555-0124"},{id:3,name:"Robert Johnson",email:"robert.j@email.com",phone:"+1-555-0125"},{id:4,name:"Emily Davis",email:"emily.davis@email.com",phone:"+1-555-0126"},{id:5,name:"Michael Brown",email:"m.brown@email.com",phone:"+1-555-0127"},{id:6,name:"Sarah Wilson",email:"sarah.w@email.com",phone:"+1-555-0128"},{id:7,name:"David Miller",email:"david.miller@email.com",phone:"+1-555-0129"},{id:8,name:"Lisa Anderson",email:"lisa.anderson@email.com",phone:"+1-555-0130"},{id:9,name:"James Taylor",email:"james.taylor@email.com",phone:"+1-555-0131"},{id:10,name:"Maria Garcia",email:"maria.garcia@email.com",phone:"+1-555-0132"}],a=(e=60)=>{const t=new Date,a=Math.floor(Math.random()*e);return t.setDate(t.getDate()-a),t.setHours(Math.floor(24*Math.random())),t.setMinutes(Math.floor(60*Math.random())),t.toISOString()},r=["pending","processing","shipped","delivered","cancelled"],s=()=>{const e=[.1,.2,.3,.35,.05],t=Math.random();let a=0;for(let s=0;s<e.length;s++)if(a+=e[s],t<=a)return r[s];return"delivered"},o=["123 Main St, New York, NY 10001","456 Oak Ave, Los Angeles, CA 90210","789 Pine Rd, Chicago, IL 60601","321 Elm St, Houston, TX 77001","654 Maple Dr, Phoenix, AZ 85001","987 Cedar Ln, Philadelphia, PA 19101","147 Birch Way, San Antonio, TX 78201","258 Spruce St, San Diego, CA 92101","369 Willow Ave, Dallas, TX 75201","741 Poplar Rd, San Jose, CA 95101"],i=[{type:"credit_card",last4:"4242",brand:"Visa"},{type:"credit_card",last4:"5555",brand:"Mastercard"},{type:"credit_card",last4:"3782",brand:"American Express"},{type:"paypal",email:"user@paypal.com"},{type:"apple_pay",device:"iPhone"},{type:"google_pay",device:"Android"}],l=t=>{const a=Math.floor(5*Math.random())+1,r=[],s=new Set;for(let o=0;o<a;o++){let a,i=0;do{a=e[Math.floor(Math.random()*e.length)],i++}while(s.has(a.id)&&i<10);s.add(a.id),r.push({id:100*t+o,order:t,product:a.id,quantity:Math.floor(3*Math.random())+1,price_at_time:a.price})}return r},n=(e,t)=>{let a=0;e.forEach((e=>{const r=t.find((t=>t.id===e.product));r&&(a+=(e.price_at_time||r.price)*e.quantity)}));const r=.08*a,s=a>1e3?0:50,o=a+r+s;return{subtotal:a,tax:r,shipping:s,total:o}},c=[];for(let d=1;d<=25;d++){const r=t[Math.floor(Math.random()*t.length)],u=l(d),m=n(u,e),p=s(),g=i[Math.floor(Math.random()*i.length)],h=o[Math.floor(Math.random()*o.length)];c.push({id:d,customer:r.name,customer_email:r.email,customer_phone:r.phone,date_ordered:a(),status:p,complete:"delivered"===p||"shipped"===p,items:u,subtotal:m.subtotal,tax:m.tax,shipping:m.shipping,total:m.total,payment_method:g,shipping_address:h,tracking_number:"shipped"===p||"delivered"===p?`TRK${Math.random().toString(36).substr(2,9).toUpperCase()}`:null,notes:d%5===0?"Customer requested expedited shipping":null})}return c.sort(((e,t)=>new Date(t.date_ordered)-new Date(e.date_ordered)))},U=e=>{const t=new Date,a=new Date(t.getTime()-2592e6),r=new Date(t.getTime()-6048e5),s=e.filter((e=>new Date(e.date_ordered)>=a)),o=e.filter((e=>new Date(e.date_ordered)>=r)),i=e.filter((e=>{const a=new Date(e.date_ordered);return a.toDateString()===t.toDateString()})),l=e=>e.reduce(((e,t)=>(e.revenue+=t.total,e.orders+=1,e.items+=t.items.length,e)),{revenue:0,orders:0,items:0});return{today:l(i),last7Days:l(o),last30Days:l(s),total:l(e)}},Z=e=>{const t=[];return e.forEach((e=>{0===e.stock?t.push({id:`alert-${e.id}`,type:"out_of_stock",product_id:e.id,product_name:e.name,message:`${e.name} is out of stock`,severity:"high",created_at:(new Date).toISOString()}):e.stock<5&&t.push({id:`alert-${e.id}`,type:"low_stock",product_id:e.id,product_name:e.name,message:`${e.name} has low stock (${e.stock} remaining)`,severity:"medium",created_at:(new Date).toISOString()})})),t},z=()=>{if(!localStorage.getItem("adminMockProducts")){const e=j();localStorage.setItem("adminMockProducts",JSON.stringify(e))}if(!localStorage.getItem("adminMockOrders")){const e=JSON.parse(localStorage.getItem("adminMockProducts")),t=Q(e);localStorage.setItem("adminMockOrders",JSON.stringify(t))}const e=JSON.parse(localStorage.getItem("adminMockProducts")),t=JSON.parse(localStorage.getItem("adminMockOrders")),a=U(t),r=Z(e);return localStorage.setItem("adminAnalytics",JSON.stringify(a)),localStorage.setItem("adminAlerts",JSON.stringify(r)),{products:e,orders:t,analytics:a,alerts:r}},$=()=>JSON.parse(localStorage.getItem("adminAnalytics"))||{},V=()=>JSON.parse(localStorage.getItem("adminAlerts"))||[],Y=(e,t)=>{const a=JSON.parse(localStorage.getItem("adminMockOrders"))||[],r=a.findIndex((t=>t.id===e));return-1!==r?(a[r].status=t,a[r].complete="delivered"===t||"shipped"===t,"shipped"!==t||a[r].tracking_number||(a[r].tracking_number=`TRK${Math.random().toString(36).substr(2,9).toUpperCase()}`),localStorage.setItem("adminMockOrders",JSON.stringify(a)),a[r]):null};var G={initializeAdminMockData:z,getAdminAnalytics:$,getAdminAlerts:V,updateOrderStatus:Y};G.initializeAdminMockData();const ee=(e=300)=>new Promise((t=>setTimeout(t,e))),te={getProducts:async()=>(await ee(),{data:JSON.parse(localStorage.getItem("adminMockProducts"))||[]}),getProduct:async e=>{await ee();const t=JSON.parse(localStorage.getItem("adminMockProducts"))||[],a=t.find((t=>t.id===parseInt(e)));return a?{data:a}:Promise.reject({response:{status:404,data:{error:"Product not found"}}})},createProduct:async e=>{await ee(800);const t=JSON.parse(localStorage.getItem("adminMockProducts"))||[],a={...e,id:t.length>0?Math.max(...t.map((e=>e.id)))+1:1,sku:`PRD-${String(t.length+1).padStart(3,"0")}`,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),category:e.category||"General"};t.push(a),localStorage.setItem("adminMockProducts",JSON.stringify(t));const r=JSON.parse(localStorage.getItem("mockProducts"))||[];return r.push(a),localStorage.setItem("mockProducts",JSON.stringify(r)),{data:a}},updateProduct:async(e,t)=>{await ee(600);const a=JSON.parse(localStorage.getItem("adminMockProducts"))||[],r=a.findIndex((t=>t.id===parseInt(e)));if(-1===r)return Promise.reject({response:{status:404,data:{error:"Product not found"}}});a[r]={...a[r],...t,updated_at:(new Date).toISOString()},localStorage.setItem("adminMockProducts",JSON.stringify(a));const s=JSON.parse(localStorage.getItem("mockProducts"))||[],o=s.findIndex((t=>t.id===parseInt(e)));return-1!==o&&(s[o]=a[r],localStorage.setItem("mockProducts",JSON.stringify(s))),{data:a[r]}},deleteProduct:async e=>{await ee(500);const t=JSON.parse(localStorage.getItem("adminMockProducts"))||[],a=JSON.parse(localStorage.getItem("adminMockOrders"))||[],r=a.some((t=>t.items.some((t=>t.product===parseInt(e)))));if(r)return Promise.reject({response:{status:400,data:{error:"Cannot delete product. It exists in one or more orders."}}});const s=t.filter((t=>t.id!==parseInt(e)));if(s.length===t.length)return Promise.reject({response:{status:404,data:{error:"Product not found"}}});localStorage.setItem("adminMockProducts",JSON.stringify(s));const o=JSON.parse(localStorage.getItem("mockProducts"))||[],i=o.filter((t=>t.id!==parseInt(e)));return localStorage.setItem("mockProducts",JSON.stringify(i)),{data:{success:!0}}},getOrders:async()=>(await ee(),{data:JSON.parse(localStorage.getItem("adminMockOrders"))||[]}),getOrder:async e=>{await ee();const t=JSON.parse(localStorage.getItem("adminMockOrders"))||[],a=t.find((t=>t.id===parseInt(e)));return a?{data:a}:Promise.reject({response:{status:404,data:{error:"Order not found"}}})},updateOrderStatus:async(e,t)=>{await ee(400);const a=G.updateOrderStatus(parseInt(e),t.status);return a?{data:a}:Promise.reject({response:{status:404,data:{error:"Order not found"}}})},createOrder:async e=>{await ee(800);const t=JSON.parse(localStorage.getItem("adminMockOrders"))||[],a=JSON.parse(localStorage.getItem("adminMockProducts"))||[],r={...e,id:t.length>0?Math.max(...t.map((e=>e.id)))+1:1,date_ordered:(new Date).toISOString(),status:"pending",complete:!1};t.push(r),localStorage.setItem("adminMockOrders",JSON.stringify(t));const s=JSON.parse(localStorage.getItem("mockOrders"))||[];if(s.push(r),localStorage.setItem("mockOrders",JSON.stringify(s)),r.items&&r.items.length>0){r.items.forEach((e=>{const t=a.findIndex((t=>t.id===e.product));-1!==t&&(a[t].stock=Math.max(0,a[t].stock-e.quantity))})),localStorage.setItem("adminMockProducts",JSON.stringify(a));const e=JSON.parse(localStorage.getItem("mockProducts"))||[];r.items.forEach((t=>{const a=e.findIndex((e=>e.id===t.product));-1!==a&&(e[a].stock=Math.max(0,e[a].stock-t.quantity))})),localStorage.setItem("mockProducts",JSON.stringify(e))}return{data:r}},getAnalytics:async()=>(await ee(),{data:G.getAdminAnalytics()}),getAlerts:async()=>(await ee(),{data:G.getAdminAlerts()}),getDashboardStats:async()=>{await ee();const e=JSON.parse(localStorage.getItem("adminMockProducts"))||[],t=JSON.parse(localStorage.getItem("adminMockOrders"))||[],a=G.getAdminAnalytics(),r=e.filter((e=>e.stock<5)).length,s=e.filter((e=>0===e.stock)).length,o=t.filter((e=>"pending"===e.status)).length,i=t.reduce(((e,t)=>e+t.total),0);return{data:{totalProducts:e.length,totalOrders:t.length,totalRevenue:i,lowStockCount:r,outOfStockCount:s,pendingOrders:o,analytics:a}}},getUser:async()=>{await ee();const e="true"===localStorage.getItem("is_staff"),t=localStorage.getItem("user_id")||(e?"1":"2"),a=localStorage.getItem("username")||(e?"admin":"user");return{data:{id:parseInt(t),username:a,is_staff:e,email:e?"admin@bluora.com":"user@bluora.com",first_name:e?"Admin":"User",last_name:e?"User":"Customer",date_joined:"2024-01-01T00:00:00Z"}}},login:async e=>(await ee(1e3),"admin"===e.username&&"admin"===e.password?{data:{access:"mock-token-admin",refresh:"mock-refresh-token"}}:"user"===e.username&&"user"===e.password?{data:{access:"mock-token-user",refresh:"mock-refresh-token"}}:Promise.reject({response:{status:401,data:{detail:"Invalid username or password"}}})),request:async e=>{const{method:t="get",url:a,data:r}=e,s=a.split("/").filter(Boolean),o=s[0],i=s[1]?parseInt(s[1]):null;switch(o){case"products":if("get"===t)return i?te.getProduct(i):te.getProducts();if("post"===t)return te.createProduct(r);if("put"===t||"patch"===t)return te.updateProduct(i,r);if("delete"===t)return te.deleteProduct(i);break;case"orders":if("get"===t)return i?te.getOrder(i):te.getOrders();if("post"===t)return te.createOrder(r);if("patch"===t)return te.updateOrderStatus(i,r);break;case"analytics":if("get"===t)return te.getAnalytics();break;case"alerts":if("get"===t)return te.getAlerts();break;case"dashboard":if("get"===t)return te.getDashboardStats();break;case"token":if("post"===t)return te.login(r);break;case"user":if("get"===t)return te.getUser();break;case"order-items":if("post"===t)return await ee(300),{data:{...r,id:Math.floor(1e3*Math.random())}};break}return Promise.reject({response:{status:404,data:{error:"Endpoint not found"}}})}},ae=new Proxy(te,{get:(e,t)=>["get","post","put","patch","delete"].includes(t)?(a,r,s={})=>e.request({method:t,url:a,data:r,...s}):e[t]});var re=ae;const se=()=>window.location.hostname.includes("github.io")||!0,oe=()=>{if(!se())return E.A.create({baseURL:"http://127.0.0.1:8000/api/"});const e="true"===localStorage.getItem("is_staff");return e?re:J},ie=E.A.create({baseURL:"http://127.0.0.1:8000/api/",timeout:1e4,headers:{"Content-Type":"application/json",Accept:"application/json"}});!se()&&ie.interceptors&&(ie.interceptors.request.use((e=>{const t=localStorage.getItem("access");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),(e=>Promise.reject(e))),ie.interceptors.response.use((e=>e),(e=>(e.response&&401===e.response.status&&(console.error("Unauthorized access:",e),localStorage.clear(),window.location.href="/login"),Promise.reject(e)))));const le={get:(e,t)=>{const a=oe();return a.get(e,t)},post:(e,t,a)=>{const r=oe();return r.post(e,t,a)},put:(e,t,a)=>{const r=oe();return r.put(e,t,a)},patch:(e,t,a)=>{const r=oe();return r.patch(e,t,a)},delete:(e,t)=>{const a=oe();return a.delete(e,t)},request:e=>{const t=oe();return t.request(e)}};var ne=se()?le:ie;let ce=!1;const de=(0,_.Kh)({isLoggedIn:!1,isStaff:!1,isInitialized:!1,init(){console.log("Auth init called");const e=window.location.hostname.includes("github.io")||!0;this.isLoggedIn=!!localStorage.getItem("access"),this.isStaff="true"===localStorage.getItem("is_staff"),console.log(`Auth initialized: loggedIn=${this.isLoggedIn}, isStaff=${this.isStaff}, isDemoMode=${e}`),this.isInitialized=!0,ce=!0},async checkTokenValidity(){return this.isInitialized=!0,ce=!0,!0},logout(e=!1){console.log("Logout called");const t=localStorage.getItem("cart");localStorage.removeItem("access"),localStorage.removeItem("refresh"),localStorage.removeItem("is_staff"),localStorage.removeItem("user_id"),localStorage.removeItem("username"),t&&localStorage.setItem("cart",t),this.isLoggedIn=!1,this.isStaff=!1,this.isInitialized=!0,ce=!0},async waitForInitialization(){return console.log("Wait for initialization called, current status:",this.isInitialized),this.isInitialized?Promise.resolve():new Promise((e=>{if(this.isInitialized)return void e();const t=setInterval((()=>{(this.isInitialized||ce)&&(clearInterval(t),e())}),50)}))},reinitialize(){console.log("Auth reinitialize called"),this.isInitialized=!1,ce=!1,this.init()}});de.init();var ue=a(1387);a(323);const me={class:"toast-container"},pe={class:"toast-icon"},ge={class:"toast-content"},he={class:"toast-message"},ke=["onClick"];function be(e,t,a,i,l,n){return(0,s.uX)(),(0,s.CE)("div",me,[(0,s.bF)(r.F,{name:"toast"},{default:(0,s.k6)((()=>[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.toasts,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:(0,o.C4)(["toast-notification",[`toast-${e.type}`,{"toast-visible":e.visible}]]),role:"alert","aria-live":"assertive"},[(0,s.Lk)("div",pe,[(0,s.Lk)("i",{class:(0,o.C4)(["bi",{"bi-check-circle-fill":"success"===e.type,"bi-exclamation-triangle-fill":"warning"===e.type,"bi-x-circle-fill":"error"===e.type,"bi-info-circle-fill":"info"===e.type}])},null,2)]),(0,s.Lk)("div",ge,[(0,s.Lk)("p",he,(0,o.v_)(e.message),1)]),(0,s.Lk)("button",{class:"toast-close",onClick:t=>i.removeToast(e.id),"aria-label":"Close notification"},t[0]||(t[0]=[(0,s.Lk)("i",{class:"bi bi-x"},null,-1)]),8,ke),(0,s.Lk)("div",{class:"toast-progress",style:(0,o.Tr)({animationDuration:`${e.duration}ms`})},null,4)],2)))),128))])),_:1})])}const ve=(0,_.KR)([]);let fe=1;const ye=()=>{const e=(e,a="info",r=5e3)=>{const s=window.innerWidth<768,o=s?3:5;if(ve.value.length>=o){const e=[...ve.value].sort(((e,t)=>e.id-t.id)).slice(0,ve.value.length-o+1);e.forEach((e=>{t(e.id)}))}const i=fe++,l=(0,_.Kh)({id:i,message:e,type:a,visible:!1,duration:s?Math.min(r,4e3):r});return ve.value.push(l),setTimeout((()=>{l.visible=!0}),10),setTimeout((()=>{t(i)}),l.duration),i},t=e=>{const t=ve.value.findIndex((t=>t.id===e));-1!==t&&(ve.value[t].visible=!1,setTimeout((()=>{ve.value=ve.value.filter((t=>t.id!==e))}),300))},a=(t,a)=>e(t,"success",a),r=(t,a)=>e(t,"error",a),s=(t,a)=>e(t,"warning",a),o=(t,a)=>e(t,"info",a);return{toasts:ve,addToast:e,removeToast:t,success:a,error:r,warning:s,info:o}},Le=ye;var we={setup(){const{toasts:e,removeToast:t}=ye();return{toasts:e,removeToast:t}}},Pe=a(1241);const Ce=(0,Pe.A)(we,[["render",be],["__scopeId","data-v-83af5984"]]);var xe=Ce,Se=a(8077),Me={components:{ToastNotification:xe},setup(){const e=(0,ue.rd)(),t=(0,_.KR)(0),a=(0,_.KR)(""),r=(0,_.KR)(null);let o=null;const i=(0,_.KR)(!1),l=()=>{const e=JSON.parse(localStorage.getItem("cart"))||[];t.value=e.length},n=()=>{de.logout(),window.location.hostname.includes("github.io")?window.location.href="https://lorendale.github.io/vue-final-project/#/login":e.push("/login")},c=()=>{o&&(i.value?o.hide():o.show(),i.value=!i.value)},d=()=>{o&&i.value&&(o.hide(),i.value=!1)},u=e=>{"cart"===e.key&&l()},m=()=>{l()},p=async()=>{if(de.isLoggedIn)try{await de.waitForInitialization();const e=window.location.hostname.includes("github.io")||!0;if(e)a.value=localStorage.getItem("username")||"Demo User";else{const e=await ne.get("user/");a.value=e.data.username}}catch(e){console.error("Failed to fetch username:",e),a.value=localStorage.getItem("username")||"User"}};return(0,s.sV)((async()=>{await de.waitForInitialization();const e=window.location.hostname.includes("github.io")||!0;de.isLoggedIn&&!e&&await de.checkTokenValidity(),de.isLoggedIn&&await p(),l(),window.addEventListener("storage",u),window.addEventListener("cart-updated",m);const t=document.getElementById("navbarContent");t&&(o=new Se.SD(t,{toggle:!1}),t.addEventListener("shown.bs.collapse",(()=>{i.value=!0})),t.addEventListener("hidden.bs.collapse",(()=>{i.value=!1})),document.addEventListener("click",(e=>{if(!i.value)return;const t=e.target.closest(".navbar-toggler"),a=e.target.closest(".navbar-collapse");t||a||d()}))),window.history&&window.addEventListener("popstate",d),window.addEventListener("resize",(()=>{window.innerWidth>=992&&i.value&&d()}))})),(0,s.hi)((()=>{window.removeEventListener("storage",u),window.removeEventListener("cart-updated",m),window.removeEventListener("popstate",d),window.removeEventListener("resize",(()=>{}));const e=document.getElementById("navbarContent");e&&(e.removeEventListener("shown.bs.collapse",(()=>{})),e.removeEventListener("hidden.bs.collapse",(()=>{}))),document.removeEventListener("click",(()=>{}))})),(0,s.wB)((()=>localStorage.getItem("cart")),(()=>{l()})),(0,s.wB)((()=>de.isLoggedIn),(async e=>{e&&de.isInitialized?(await p(),l()):e||(a.value="",t.value=0)})),{auth:de,cartCount:t,username:a,logout:n,updateCartCount:l,closeNavbar:d,toggleNavbar:c,navbarCollapse:r}}};const Ie=(0,Pe.A)(Me,[["render",I]]);var _e=Ie;const Ee={class:"auth-container"},Oe={class:"auth-card"},De={class:"form-group"},Te={key:0,class:"invalid-feedback"},Ae={class:"form-group"},Fe=["type"],We={key:0,class:"invalid-feedback"},Re={class:"form-check mb-3"},Xe=["disabled"],qe={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},He={key:1,class:"bi bi-box-arrow-in-right me-2"},Ne={key:0,class:"auth-error mt-3"},Be={class:"auth-footer"};function Ke(e,t,a,i,l,n){const c=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",Ee,[(0,s.Lk)("div",Oe,[t[15]||(t[15]=(0,s.Lk)("div",{class:"auth-header"},[(0,s.Lk)("i",{class:"bi bi-bag-heart-fill me-2 bag-icon"}),(0,s.Lk)("h2",null,"Welcome Back"),(0,s.Lk)("p",null,"Sign in to your account to continue")],-1)),(0,s.Lk)("form",{onSubmit:t[6]||(t[6]=(0,r.D$)(((...e)=>i.validateAndLogin&&i.validateAndLogin(...e)),["prevent"])),class:"auth-form",novalidate:""},[(0,s.Lk)("div",De,[t[8]||(t[8]=(0,s.Lk)("label",{for:"username"},"Username",-1)),(0,s.Lk)("div",{class:(0,o.C4)(["input-group",{"is-invalid":i.errors.username}])},[t[7]||(t[7]=(0,s.Lk)("span",{class:"input-group-text"},[(0,s.Lk)("i",{class:"bi bi-person"})],-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.username=e),id:"username",type:"text",class:(0,o.C4)(["form-control",{"is-invalid":i.errors.username}]),placeholder:"Enter your username",onBlur:t[1]||(t[1]=(...e)=>i.validateUsername&&i.validateUsername(...e))},null,34),[[r.Jo,i.username]])],2),i.errors.username?((0,s.uX)(),(0,s.CE)("div",Te,(0,o.v_)(i.errors.username),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",Ae,[t[10]||(t[10]=(0,s.Lk)("label",{for:"password"},"Password",-1)),(0,s.Lk)("div",{class:(0,o.C4)(["input-group",{"is-invalid":i.errors.password}])},[t[9]||(t[9]=(0,s.Lk)("span",{class:"input-group-text"},[(0,s.Lk)("i",{class:"bi bi-key"})],-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>i.password=e),id:"password",type:i.showPassword?"text":"password",class:(0,o.C4)(["form-control",{"is-invalid":i.errors.password}]),placeholder:"Enter your password",onBlur:t[3]||(t[3]=(...e)=>i.validatePassword&&i.validatePassword(...e))},null,42,Fe),[[r.hp,i.password]]),(0,s.Lk)("button",{type:"button",class:"input-group-text password-toggle",onClick:t[4]||(t[4]=e=>i.showPassword=!i.showPassword)},[(0,s.Lk)("i",{class:(0,o.C4)(i.showPassword?"bi bi-eye-slash":"bi bi-eye")},null,2)])],2),i.errors.password?((0,s.uX)(),(0,s.CE)("div",We,(0,o.v_)(i.errors.password),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",Re,[(0,s.bo)((0,s.Lk)("input",{class:"form-check-input",type:"checkbox",id:"rememberMe","onUpdate:modelValue":t[5]||(t[5]=e=>i.rememberMe=e)},null,512),[[r.lH,i.rememberMe]]),t[11]||(t[11]=(0,s.Lk)("label",{class:"form-check-label",for:"rememberMe"},"Remember me",-1))]),(0,s.Lk)("button",{type:"submit",class:"btn btn-primary w-100",disabled:i.isLoading},[i.isLoading?((0,s.uX)(),(0,s.CE)("span",qe)):((0,s.uX)(),(0,s.CE)("i",He)),(0,s.eW)(" "+(0,o.v_)(i.isLoading?"Signing in...":"Sign In"),1)],8,Xe),i.error?((0,s.uX)(),(0,s.CE)("div",Ne,[t[12]||(t[12]=(0,s.Lk)("i",{class:"bi bi-exclamation-triangle-fill me-2"},null,-1)),(0,s.eW)(" "+(0,o.v_)(i.error),1)])):(0,s.Q3)("",!0)],32),(0,s.Lk)("div",Be,[(0,s.Lk)("p",null,[t[14]||(t[14]=(0,s.eW)("Don't have an account? ")),(0,s.bF)(c,{to:"/register",class:"auth-link"},{default:(0,s.k6)((()=>t[13]||(t[13]=[(0,s.eW)("Create Account")]))),_:1})])])])])}var Je={name:"UserLogin",setup(){const e=(0,ue.rd)(),t=(0,_.KR)(""),a=(0,_.KR)(""),r=(0,_.KR)(!1),s=(0,_.KR)(!1),o=(0,_.KR)(!1),i=(0,_.KR)(null),l=(0,_.Kh)({username:"",password:""}),{error:n}=ye(),c=()=>t.value.trim()?(l.username="",!0):(l.username="Username is required",!1),d=()=>a.value?(l.password="",!0):(l.password="Password is required",!1),u=()=>{const e=c(),t=d();return e&&t},m=()=>{u()?p():n("Please fix the errors in the form")},p=async()=>{o.value=!0,i.value=null;try{const s=window.location.hostname.includes("github.io")||!0;if(s){const e="admin"===t.value.trim().toLowerCase();localStorage.removeItem("access"),localStorage.removeItem("refresh"),localStorage.removeItem("is_staff"),localStorage.removeItem("user_id"),localStorage.removeItem("username"),localStorage.setItem("access","demo-token"),localStorage.setItem("refresh","demo-refresh"),localStorage.setItem("is_staff",e?"true":"false"),localStorage.setItem("user_id",e?"1":"2"),localStorage.setItem("username",t.value||"demo_user");const a=e?"/monitor":"/products",r=window.location.origin+window.location.pathname;return window.location.href=`${r}#${a}`,void window.location.reload()}const o=await ne.post("token/",{username:t.value,password:a.value});localStorage.setItem("access",o.data.access),localStorage.setItem("refresh",o.data.refresh),r.value&&localStorage.setItem("remember_me","true");const i=await ne.get("user/");localStorage.setItem("is_staff",i.data.is_staff),localStorage.setItem("user_id",i.data.id),localStorage.setItem("username",i.data.username),de.reinitialize(),await new Promise((e=>setTimeout(e,200))),e.push(i.data.is_staff?"/monitor":"/products")}catch(s){console.error("Login error:",s),i.value="Invalid username or password. Please try again.",n("Login failed: Check your username or password.")}finally{o.value=!1}};return{username:t,password:a,rememberMe:r,showPassword:s,isLoading:o,error:i,errors:l,validateUsername:c,validatePassword:d,validateAndLogin:m}}};const je=(0,Pe.A)(Je,[["render",Ke],["__scopeId","data-v-3bd9587a"]]);var Qe=je;const Ue={class:"auth-container"},Ze={class:"auth-card"},ze={class:"form-group"},$e={key:0,class:"invalid-feedback"},Ve={class:"form-group"},Ye=["type"],Ge={key:0,class:"invalid-feedback"},et={key:1,class:"password-strength mt-2"},tt={class:"strength-meter"},at={class:"form-group"},rt=["type"],st={key:0,class:"invalid-feedback"},ot={class:"form-check mb-3"},it={class:"form-check-label",for:"termsAgreed"},lt={key:0,class:"invalid-feedback"},nt=["disabled"],ct={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},dt={key:1,class:"bi bi-person-plus me-2"},ut={key:0,class:"auth-error mt-3"},mt={class:"auth-footer"},pt={class:"modal fade",ref:"termsModal",tabindex:"-1"},gt={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable"},ht={class:"modal-content"},kt={class:"modal-header"},bt={class:"modal-footer"};function vt(e,t,a,i,l,n){const c=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",Ue,[(0,s.Lk)("div",Ze,[t[25]||(t[25]=(0,s.Lk)("div",{class:"auth-header"},[(0,s.Lk)("i",{class:"bi bi-person-plus auth-icon"}),(0,s.Lk)("h2",null,"Create Account"),(0,s.Lk)("p",null,"Join our community and start shopping")],-1)),(0,s.Lk)("form",{onSubmit:t[11]||(t[11]=(0,r.D$)(((...e)=>i.validateAndRegister&&i.validateAndRegister(...e)),["prevent"])),class:"auth-form",novalidate:""},[(0,s.Lk)("div",ze,[t[16]||(t[16]=(0,s.Lk)("label",{for:"username"},"Username",-1)),(0,s.Lk)("div",{class:(0,o.C4)(["input-group",{"is-invalid":i.errors.username}])},[t[15]||(t[15]=(0,s.Lk)("span",{class:"input-group-text"},[(0,s.Lk)("i",{class:"bi bi-person"})],-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.username=e),id:"username",type:"text",class:(0,o.C4)(["form-control",{"is-invalid":i.errors.username}]),placeholder:"Choose a username",onBlur:t[1]||(t[1]=(...e)=>i.validateUsername&&i.validateUsername(...e))},null,34),[[r.Jo,i.username]])],2),i.errors.username?((0,s.uX)(),(0,s.CE)("div",$e,(0,o.v_)(i.errors.username),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",Ve,[t[18]||(t[18]=(0,s.Lk)("label",{for:"password"},"Password",-1)),(0,s.Lk)("div",{class:(0,o.C4)(["input-group",{"is-invalid":i.errors.password}])},[t[17]||(t[17]=(0,s.Lk)("span",{class:"input-group-text"},[(0,s.Lk)("i",{class:"bi bi-key"})],-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>i.password=e),id:"password",type:i.showPassword?"text":"password",class:(0,o.C4)(["form-control",{"is-invalid":i.errors.password}]),placeholder:"Create a password",onBlur:t[3]||(t[3]=(...e)=>i.validatePassword&&i.validatePassword(...e)),onInput:t[4]||(t[4]=(...e)=>i.validatePasswordStrength&&i.validatePasswordStrength(...e))},null,42,Ye),[[r.hp,i.password]]),(0,s.Lk)("button",{type:"button",class:"input-group-text password-toggle",onClick:t[5]||(t[5]=e=>i.showPassword=!i.showPassword)},[(0,s.Lk)("i",{class:(0,o.C4)(i.showPassword?"bi bi-eye-slash":"bi bi-eye")},null,2)])],2),i.errors.password?((0,s.uX)(),(0,s.CE)("div",Ge,(0,o.v_)(i.errors.password),1)):(0,s.Q3)("",!0),i.password?((0,s.uX)(),(0,s.CE)("div",et,[(0,s.Lk)("div",tt,[(0,s.Lk)("div",{class:(0,o.C4)(["strength-meter-fill",i.passwordStrength.class]),style:(0,o.Tr)({width:i.passwordStrength.score+"%"})},null,6)]),(0,s.Lk)("div",{class:(0,o.C4)(["strength-text",i.passwordStrength.class])},(0,o.v_)(i.passwordStrength.text),3)])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",at,[t[20]||(t[20]=(0,s.Lk)("label",{for:"confirmPassword"},"Confirm Password",-1)),(0,s.Lk)("div",{class:(0,o.C4)(["input-group",{"is-invalid":i.errors.confirmPassword}])},[t[19]||(t[19]=(0,s.Lk)("span",{class:"input-group-text"},[(0,s.Lk)("i",{class:"bi bi-key-fill"})],-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>i.confirmPassword=e),id:"confirmPassword",type:i.showConfirmPassword?"text":"password",class:(0,o.C4)(["form-control",{"is-invalid":i.errors.confirmPassword}]),placeholder:"Confirm your password",onBlur:t[7]||(t[7]=(...e)=>i.validateConfirmPassword&&i.validateConfirmPassword(...e))},null,42,rt),[[r.hp,i.confirmPassword]]),(0,s.Lk)("button",{type:"button",class:"input-group-text password-toggle",onClick:t[8]||(t[8]=e=>i.showConfirmPassword=!i.showConfirmPassword)},[(0,s.Lk)("i",{class:(0,o.C4)(i.showConfirmPassword?"bi bi-eye-slash":"bi bi-eye")},null,2)])],2),i.errors.confirmPassword?((0,s.uX)(),(0,s.CE)("div",st,(0,o.v_)(i.errors.confirmPassword),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",ot,[(0,s.bo)((0,s.Lk)("input",{class:(0,o.C4)(["form-check-input",{"is-invalid":i.errors.termsAgreed}]),type:"checkbox",id:"termsAgreed","onUpdate:modelValue":t[9]||(t[9]=e=>i.termsAgreed=e)},null,2),[[r.lH,i.termsAgreed]]),(0,s.Lk)("label",it,[t[21]||(t[21]=(0,s.eW)(" I agree to the ")),(0,s.Lk)("a",{href:"#",onClick:t[10]||(t[10]=(0,r.D$)(((...e)=>i.showTerms&&i.showTerms(...e)),["prevent"]))},"Terms and Conditions")]),i.errors.termsAgreed?((0,s.uX)(),(0,s.CE)("div",lt,(0,o.v_)(i.errors.termsAgreed),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("button",{type:"submit",class:"btn btn-primary w-100",disabled:i.isLoading},[i.isLoading?((0,s.uX)(),(0,s.CE)("span",ct)):((0,s.uX)(),(0,s.CE)("i",dt)),(0,s.eW)(" "+(0,o.v_)(i.isLoading?"Creating account...":"Create Account"),1)],8,nt),i.error?((0,s.uX)(),(0,s.CE)("div",ut,[t[22]||(t[22]=(0,s.Lk)("i",{class:"bi bi-exclamation-triangle-fill me-2"},null,-1)),(0,s.eW)(" "+(0,o.v_)(i.error),1)])):(0,s.Q3)("",!0)],32),(0,s.Lk)("div",mt,[(0,s.Lk)("p",null,[t[24]||(t[24]=(0,s.eW)("Already have an account? ")),(0,s.bF)(c,{to:"/login",class:"auth-link"},{default:(0,s.k6)((()=>t[23]||(t[23]=[(0,s.eW)("Sign In")]))),_:1})])])]),(0,s.Lk)("div",pt,[(0,s.Lk)("div",gt,[(0,s.Lk)("div",ht,[(0,s.Lk)("div",kt,[t[26]||(t[26]=(0,s.Lk)("h5",{class:"modal-title"},"Terms and Conditions",-1)),(0,s.Lk)("button",{type:"button",class:"btn-close",onClick:t[12]||(t[12]=(...e)=>i.hideTerms&&i.hideTerms(...e))})]),t[27]||(t[27]=(0,s.Fv)('<div class="modal-body" data-v-410489ce><h6 data-v-410489ce>1. Acceptance of Terms</h6><p data-v-410489ce>By accessing and using this e-commerce platform, you agree to be bound by these Terms and Conditions.</p><h6 data-v-410489ce>2. User Accounts</h6><p data-v-410489ce>You are responsible for maintaining the confidentiality of your account information and password.</p><h6 data-v-410489ce>3. Privacy Policy</h6><p data-v-410489ce>Your use of our service is also governed by our Privacy Policy.</p><h6 data-v-410489ce>4. Product Information</h6><p data-v-410489ce>We strive to provide accurate product information, but we do not warrant that product descriptions or other content is accurate, complete, or error-free.</p><h6 data-v-410489ce>5. Pricing and Payment</h6><p data-v-410489ce>All prices are subject to change without notice. We reserve the right to refuse or cancel orders in cases of pricing errors.</p></div>',1)),(0,s.Lk)("div",bt,[(0,s.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[13]||(t[13]=(...e)=>i.hideTerms&&i.hideTerms(...e))},"Close"),(0,s.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[14]||(t[14]=(...e)=>i.acceptTerms&&i.acceptTerms(...e))},"Accept")])])])],512)])}var ft={name:"UserRegister",setup(){const e=(0,_.KR)(""),t=(0,_.KR)(""),a=(0,_.KR)(""),r=(0,_.KR)(!1),o=(0,_.KR)(!1),i=(0,_.KR)(!1),l=(0,_.KR)(!1),n=(0,_.KR)(null),c=(0,_.KR)(null),d=(0,_.KR)(null),u=(0,ue.rd)(),{success:m,error:p}=Le(),g=(0,_.Kh)({username:"",password:"",confirmPassword:"",termsAgreed:""}),h=(0,s.EW)((()=>{if(!t.value)return{score:0,text:"",class:""};let e=0,a="Very Weak",r="very-weak";return t.value.length>=8&&(e+=20),/[A-Z]/.test(t.value)&&(e+=20),/[a-z]/.test(t.value)&&(e+=20),/[0-9]/.test(t.value)&&(e+=20),/[^A-Za-z0-9]/.test(t.value)&&(e+=20),e>=80?(a="Very Strong",r="very-strong"):e>=60?(a="Strong",r="strong"):e>=40?(a="Medium",r="medium"):e>=20&&(a="Weak",r="weak"),{score:e,text:a,class:r}})),k=()=>e.value.trim()?e.value.length<3?(g.username="Username must be at least 3 characters",!1):/^[a-zA-Z0-9_]+$/.test(e.value)?(g.username="",!0):(g.username="Username can only contain letters, numbers, and underscores",!1):(g.username="Username is required",!1),b=()=>t.value?t.value.length<8?(g.password="Password must be at least 8 characters",!1):(g.password="",!0):(g.password="Password is required",!1),v=()=>h.value.score>0,f=()=>a.value?a.value!==t.value?(g.confirmPassword="Passwords do not match",!1):(g.confirmPassword="",!0):(g.confirmPassword="Please confirm your password",!1),y=()=>r.value?(g.termsAgreed="",!0):(g.termsAgreed="You must agree to the Terms and Conditions",!1),L=()=>{const e=k(),t=b(),a=f(),r=y();return e&&t&&a&&r},w=()=>{L()?P():p("Please fix the errors in the form")},P=async()=>{l.value=!0,n.value=null;try{await ne.post("register/",{username:e.value,password:t.value}),m("Registration successful! Please log in."),setTimeout((()=>{u.push("/login")}),1500)}catch(a){console.error("Registration error:",a),a.response&&a.response.data?(a.response.data.username&&(g.username=a.response.data.username[0]),n.value="Registration failed. Please check the form for errors."):n.value="Registration failed. Please try again later.",p("Registration failed. Please try again.")}finally{l.value=!1}},C=()=>{d.value&&d.value.show()},x=()=>{d.value&&d.value.hide()},S=()=>{r.value=!0,g.termsAgreed="",x()};return(0,s.sV)((()=>{c.value&&(d.value=new Se.aF(c.value))})),{username:e,password:t,confirmPassword:a,termsAgreed:r,showPassword:o,showConfirmPassword:i,isLoading:l,error:n,errors:g,passwordStrength:h,termsModal:c,validateUsername:k,validatePassword:b,validatePasswordStrength:v,validateConfirmPassword:f,validateAndRegister:w,showTerms:C,hideTerms:x,acceptTerms:S}}};const yt=(0,Pe.A)(ft,[["render",vt],["__scopeId","data-v-410489ce"]]);var Lt=yt,wt={setup(){const e=(0,_.KR)([]),t=(0,_.KR)(!0),a=(0,_.KR)(""),r=ye(),o=(0,_.Kh)({}),i=(0,_.KR)(1),l=(0,_.KR)(12),n=()=>{window.dispatchEvent(new CustomEvent("cart-updated"))},c=(0,s.EW)((()=>{if(!a.value)return e.value;const t=a.value.toLowerCase();return e.value.filter((e=>e.name.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)))})),d=(0,s.EW)((()=>Math.ceil(c.value.length/l.value))),u=(0,s.EW)((()=>(i.value-1)*l.value)),m=(0,s.EW)((()=>{const e=u.value,t=e+l.value;return c.value.slice(e,t)})),p=(0,s.EW)((()=>{const e=[],t=Math.max(1,i.value-2),a=Math.min(d.value,i.value+2);for(let r=t;r<=a;r++)e.push(r);return e}));(0,s.wB)(a,(()=>{i.value=1}));const g=e=>{e>=1&&e<=d.value&&(i.value=e,document.querySelector(".product-grid")?.scrollIntoView({behavior:"smooth",block:"start"}))},h=e=>e?e.startsWith("http")?e:`http://127.0.0.1:8000${e.startsWith("/")?e:"/media/"+e}`:"",k=e=>parseFloat(e).toFixed(2),b=(e,t)=>e?e.length>t?e.substring(0,t)+"...":e:"",v=()=>{a.value=""},f=e=>7*e.id%3+3,y=e=>7*e.id%115+5,L=e=>e.id%4===0,w=e=>0===e.stock?"stock-count-out":e.stock<5?"stock-count-low":e.stock<20?"stock-count-medium":"stock-count-high",P=e=>{o[e.id]||(o[e.id]=1),o[e.id]<e.stock&&o[e.id]++},C=e=>{o[e.id]||(o[e.id]=1),o[e.id]>1&&o[e.id]--},x=async()=>{console.log("Fetching products..."),t.value=!0;try{await de.waitForInitialization(),await new Promise((e=>setTimeout(e,300))),console.log("Auth initialized, fetching products...");const t=await ne.get("products/");console.log("Products fetched:",t.data.length),e.value=t.data,e.value.forEach((e=>{o[e.id]=1}))}catch(a){console.error("Error fetching products:",a),r.error("Failed to load products. Please try again.")}finally{t.value=!1}},S=e=>{if(0!==e.stock)try{let t=[];const a=localStorage.getItem("cart");a&&(t=JSON.parse(a));const s=t.find((t=>t.product&&t.product.id===e.id)),i=o[e.id]||1;if(s){if(!(s.quantity+i<=e.stock))return void r.warning(`Cannot add ${i} more ${e.name}. Maximum stock reached.`);s.quantity+=i,r.success(`Added ${i} ${e.name} to your cart.`)}else t.push({product:{id:e.id,name:e.name,price:e.price,description:e.description,image:e.image,stock:e.stock},quantity:i}),r.success(`Added ${i} ${e.name} to your cart!`);localStorage.setItem("cart",JSON.stringify(t)),o[e.id]=1,window.dispatchEvent(new Event("storage")),n()}catch(t){console.error("Error adding to cart:",t),r.error("Failed to add product to cart.")}else r.error("Sorry, this product is out of stock.")};return(0,s.sV)((async()=>{console.log("ProductList mounted"),await de.waitForInitialization(),await x()})),(0,s.wB)((()=>de.isLoggedIn),(async(e,t)=>{console.log(`Auth state changed: ${t} -> ${e}`),e&&de.isInitialized&&(console.log("Auth is logged in and initialized, fetching products..."),await x())})),{products:e,filteredProducts:c,paginatedProducts:m,isLoading:t,searchQuery:a,quantities:o,currentPage:i,productsPerPage:l,totalPages:d,startIndex:u,visiblePages:p,fullImageUrl:h,formatPrice:k,truncate:b,resetSearch:v,addToCart:S,incrementQuantity:P,decrementQuantity:C,getProductRating:f,getReviewCount:y,isNewProduct:L,getStockCountBadgeClass:w,goToPage:g}}};const Pt=(0,Pe.A)(wt,[["__scopeId","data-v-546eae7a"]]);var Ct=Pt;const xt={class:"container"},St={key:0,class:"empty-cart"},Mt={class:"empty-cart-content"},It={key:1,class:"row"},_t={class:"col-lg-8"},Et={class:"cart-items card mb-4"},Ot={class:"card-header"},Dt={class:"mb-0"},Tt={class:"card-body p-0"},At={class:"cart-item-image"},Ft=["src","alt"],Wt={key:1,class:"image-placeholder"},Rt={class:"cart-item-details"},Xt={class:"cart-item-name"},qt={class:"cart-item-description"},Ht={class:"cart-item-price"},Nt={key:0,class:"stock-warning"},Bt={class:"cart-item-quantity"},Kt={class:"quantity-selector"},Jt=["onClick","disabled"],jt=["onUpdate:modelValue","max","disabled","onChange"],Qt=["onClick","disabled"],Ut={class:"cart-item-total"},Zt={class:"cart-item-actions"},zt=["onClick"],$t={class:"card-footer"},Vt={class:"d-flex justify-content-between flex-wrap gap-2"},Yt={class:"col-lg-4"},Gt={class:"cart-summary card"},ea={class:"card-body"},ta={class:"summary-item"},aa={class:"summary-item"},ra={class:"summary-item"},sa={class:"summary-total"},oa={class:"promo-section mt-3"},ia=["disabled"],la={key:0,class:"spinner-border spinner-border-sm",role:"status"},na={key:1},ca={key:0,class:"invalid-feedback"},da={key:1,class:"promo-success"},ua={class:"card-footer"},ma=["disabled"],pa={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},ga={key:1,class:"bi bi-credit-card me-2"},ha={key:0,class:"checkout-warning mt-2"},ka={class:"modal fade confirm-modal",ref:"confirmModal",tabindex:"-1","aria-labelledby":"confirmModalLabel","aria-hidden":"true"},ba={class:"modal-dialog modal-dialog-centered modal-sm"},va={class:"modal-content"},fa={class:"modal-header"},ya={class:"modal-body"},La={class:"mb-0"},wa={class:"modal-footer"};function Pa(e,t,a,i,l,n){const c=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",xt,[t[28]||(t[28]=(0,s.Lk)("div",{class:"cart-header mb-4"},[(0,s.Lk)("h2",{class:"section-title"},[(0,s.Lk)("i",{class:"bi bi-cart me-2"}),(0,s.eW)("Shopping Cart ")])],-1)),i.cart&&0!==i.cart.length?((0,s.uX)(),(0,s.CE)("div",It,[(0,s.Lk)("div",_t,[(0,s.Lk)("div",Et,[(0,s.Lk)("div",Ot,[(0,s.Lk)("h5",Dt,"Cart Items ("+(0,o.v_)(i.cart.length)+")",1)]),(0,s.Lk)("div",Tt,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.cart,((e,a)=>((0,s.uX)(),(0,s.CE)("div",{class:"cart-item",key:a},[(0,s.Lk)("div",At,[e&&e.product&&e.product.image?((0,s.uX)(),(0,s.CE)("img",{key:0,src:i.fullImageUrl(e.product.image),alt:e.product?e.product.name:"Product",loading:"lazy"},null,8,Ft)):((0,s.uX)(),(0,s.CE)("div",Wt,t[11]||(t[11]=[(0,s.Lk)("i",{class:"bi bi-image"},null,-1)])))]),(0,s.Lk)("div",Rt,[(0,s.Lk)("h5",Xt,(0,o.v_)(e&&e.product?e.product.name:"Unknown Product"),1),(0,s.Lk)("p",qt,(0,o.v_)(e&&e.product?i.truncate(e.product.description,100):"No description available"),1),(0,s.Lk)("div",Ht,"â±"+(0,o.v_)(i.formatPrice(e&&e.product?e.product.price:0)),1),e&&e.product&&0===e.product.stock?((0,s.uX)(),(0,s.CE)("div",Nt,t[12]||(t[12]=[(0,s.Lk)("i",{class:"bi bi-exclamation-triangle-fill me-1"},null,-1),(0,s.eW)(" Out of stock ")]))):(0,s.Q3)("",!0)]),(0,s.Lk)("div",Bt,[(0,s.Lk)("div",Kt,[(0,s.Lk)("button",{class:"btn btn-sm btn-outline-secondary",onClick:e=>i.decrementQuantity(a),disabled:!e||e.quantity<=1||e.product&&0===e.product.stock,"aria-label":"Decrease quantity"},t[13]||(t[13]=[(0,s.Lk)("i",{class:"bi bi-dash"},null,-1)]),8,Jt),(0,s.bo)((0,s.Lk)("input",{type:"number",class:"form-control form-control-sm","onUpdate:modelValue":t=>e.quantity=t,min:"1",max:e&&e.product?e.product.stock:1,disabled:e&&e.product&&0===e.product.stock,onChange:t=>i.validateQuantity(a,e&&e.product?e.product.stock:1),"aria-label":"Quantity"},null,40,jt),[[r.Jo,e.quantity,void 0,{number:!0}]]),(0,s.Lk)("button",{class:"btn btn-sm btn-outline-secondary",onClick:t=>i.incrementQuantity(a,e&&e.product?e.product.stock:1),disabled:!e||!e.product||e.quantity>=e.product.stock||0===e.product.stock,"aria-label":"Increase quantity"},t[14]||(t[14]=[(0,s.Lk)("i",{class:"bi bi-plus"},null,-1)]),8,Qt)])]),(0,s.Lk)("div",Ut," â±"+(0,o.v_)(i.formatPrice(e&&e.product?e.product.price*e.quantity:0)),1),(0,s.Lk)("div",Zt,[(0,s.Lk)("button",{class:"btn btn-sm btn-danger",onClick:e=>i.removeItem(a),"aria-label":"Remove item"},t[15]||(t[15]=[(0,s.Lk)("i",{class:"bi bi-trash"},null,-1)]),8,zt)])])))),128))]),(0,s.Lk)("div",$t,[(0,s.Lk)("div",Vt,[(0,s.Lk)("button",{class:"btn btn-outline-danger",onClick:t[0]||(t[0]=(...e)=>i.confirmClearCart&&i.confirmClearCart(...e))},t[16]||(t[16]=[(0,s.Lk)("i",{class:"bi bi-trash me-2"},null,-1),(0,s.eW)("Clear Cart ")])),(0,s.bF)(c,{to:"/products",class:"btn btn-outline-primary"},{default:(0,s.k6)((()=>t[17]||(t[17]=[(0,s.Lk)("i",{class:"bi bi-shop me-2"},null,-1),(0,s.eW)("Continue Shopping ")]))),_:1})])])])]),(0,s.Lk)("div",Yt,[(0,s.Lk)("div",Gt,[t[25]||(t[25]=(0,s.Lk)("div",{class:"card-header"},[(0,s.Lk)("h5",{class:"mb-0"},"Order Summary")],-1)),(0,s.Lk)("div",ea,[(0,s.Lk)("div",ta,[t[18]||(t[18]=(0,s.Lk)("span",null,"Subtotal",-1)),(0,s.Lk)("span",null,"â±"+(0,o.v_)(i.formatPrice(i.calculateSubtotal())),1)]),(0,s.Lk)("div",aa,[t[19]||(t[19]=(0,s.Lk)("span",null,"Shipping",-1)),(0,s.Lk)("span",null,"â±"+(0,o.v_)(i.formatPrice(i.shippingCost)),1)]),(0,s.Lk)("div",ra,[t[20]||(t[20]=(0,s.Lk)("span",null,"Tax (12%)",-1)),(0,s.Lk)("span",null,"â±"+(0,o.v_)(i.formatPrice(i.calculateTax())),1)]),t[23]||(t[23]=(0,s.Lk)("div",{class:"summary-divider"},null,-1)),(0,s.Lk)("div",sa,[t[21]||(t[21]=(0,s.Lk)("span",null,"Total",-1)),(0,s.Lk)("span",null,"â±"+(0,o.v_)(i.formatPrice(i.calculateTotal())),1)]),(0,s.Lk)("div",oa,[(0,s.Lk)("div",{class:(0,o.C4)(["input-group",{"is-invalid":i.promoError}])},[(0,s.bo)((0,s.Lk)("input",{type:"text",class:(0,o.C4)(["form-control",{"is-invalid":i.promoError}]),placeholder:"Promo code","onUpdate:modelValue":t[1]||(t[1]=e=>i.promoCode=e),"aria-label":"Promo code"},null,2),[[r.Jo,i.promoCode]]),(0,s.Lk)("button",{class:"btn btn-outline-primary",type:"button",onClick:t[2]||(t[2]=(...e)=>i.applyPromoCode&&i.applyPromoCode(...e)),disabled:i.isApplyingPromo||!i.promoCode},[i.isApplyingPromo?((0,s.uX)(),(0,s.CE)("span",la)):((0,s.uX)(),(0,s.CE)("span",na,"Apply"))],8,ia)],2),i.promoError?((0,s.uX)(),(0,s.CE)("div",ca,(0,o.v_)(i.promoError),1)):(0,s.Q3)("",!0),i.activePromo?((0,s.uX)(),(0,s.CE)("div",da,[t[22]||(t[22]=(0,s.Lk)("i",{class:"bi bi-check-circle-fill me-1"},null,-1)),(0,s.eW)(" "+(0,o.v_)(i.activePromo.code)+" applied: "+(0,o.v_)(i.activePromo.discount)+"% off ",1)])):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",ua,[(0,s.Lk)("button",{class:"btn btn-primary w-100",onClick:t[3]||(t[3]=(...e)=>i.proceedToCheckout&&i.proceedToCheckout(...e)),disabled:i.isCheckingOut||i.hasOutOfStockItems||0===i.cart.length},[i.isCheckingOut?((0,s.uX)(),(0,s.CE)("span",pa)):((0,s.uX)(),(0,s.CE)("i",ga)),(0,s.eW)(" "+(0,o.v_)(i.isCheckingOut?"Processing...":"Proceed to Checkout"),1)],8,ma),i.hasOutOfStockItems?((0,s.uX)(),(0,s.CE)("div",ha,t[24]||(t[24]=[(0,s.Lk)("i",{class:"bi bi-exclamation-triangle-fill me-1"},null,-1),(0,s.eW)(" Please remove out of stock items before checkout ")]))):(0,s.Q3)("",!0)])])])])):((0,s.uX)(),(0,s.CE)("div",St,[(0,s.Lk)("div",Mt,[t[8]||(t[8]=(0,s.Lk)("i",{class:"bi bi-cart-x cart-icon"},null,-1)),t[9]||(t[9]=(0,s.Lk)("h3",null,"Your cart is empty",-1)),t[10]||(t[10]=(0,s.Lk)("p",null,"Add some products to your cart to continue shopping.",-1)),(0,s.bF)(c,{to:"/products",class:"btn btn-primary mt-3"},{default:(0,s.k6)((()=>t[7]||(t[7]=[(0,s.Lk)("i",{class:"bi bi-shop me-2"},null,-1),(0,s.eW)("Continue Shopping ")]))),_:1})])])),(0,s.Lk)("div",ka,[(0,s.Lk)("div",ba,[(0,s.Lk)("div",va,[(0,s.Lk)("div",fa,[t[26]||(t[26]=(0,s.Lk)("h5",{class:"modal-title",id:"confirmModalLabel"},"Confirm Action",-1)),(0,s.Lk)("button",{type:"button",class:"btn-close",onClick:t[4]||(t[4]=(...e)=>i.hideConfirmModal&&i.hideConfirmModal(...e)),"aria-label":"Close"})]),(0,s.Lk)("div",ya,[t[27]||(t[27]=(0,s.Lk)("i",{class:"bi bi-question-circle-fill text-warning mb-3",style:{"font-size":"2rem"}},null,-1)),(0,s.Lk)("p",La,(0,o.v_)(i.confirmMessage),1)]),(0,s.Lk)("div",wa,[(0,s.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[5]||(t[5]=(...e)=>i.hideConfirmModal&&i.hideConfirmModal(...e))},"Cancel"),(0,s.Lk)("button",{type:"button",class:"btn btn-danger",onClick:t[6]||(t[6]=(...e)=>i.confirmAction&&i.confirmAction(...e))},"Confirm")])])])],512)])}var Ca={setup(){const e=(0,_.KR)([]),t=(0,_.KR)(50),a=(0,ue.rd)(),{success:r,warning:o,error:i,info:l}=Le(),n=(0,_.KR)([]),c=(0,_.KR)(!1),d=(0,_.KR)(""),u=(0,_.KR)(""),m=(0,_.KR)(!1),p=(0,_.KR)(null),g=(0,_.KR)(null),h=(0,_.KR)(null),k=(0,_.KR)(""),b=(0,_.KR)(null),v=(0,s.EW)((()=>e.value.some((e=>e&&e.product&&0===e.product.stock)))),f=()=>{window.dispatchEvent(new CustomEvent("cart-updated"))},y=e=>e?e.startsWith("http")?e:`http://127.0.0.1:8000${e.startsWith("/")?e:"/media/"+e}`:"",L=e=>parseFloat(e).toFixed(2),w=(e,t)=>e?e.length>t?e.substring(0,t)+"...":e:"",P=()=>{let t=e.value.reduce(((e,t)=>t&&t.product&&0!==t.product.stock?e+t.product.price*t.quantity:e),0);return p.value&&(t*=1-p.value.discount/100),t},C=()=>.12*P(),x=()=>P()+C()+t.value,S=(t,a)=>{try{if(t<0||t>=e.value.length)return;const r=e.value[t];if(!r||!r.product||0===r.product.stock)return;r.quantity<a&&(r.quantity++,T(),l("Quantity updated"))}catch(r){console.error("Error incrementing quantity:",r),i("Failed to update quantity")}},M=t=>{try{if(t<0||t>=e.value.length)return;const a=e.value[t];if(!a||0===a.product.stock)return;a.quantity>1&&(a.quantity--,T(),l("Quantity updated"))}catch(a){console.error("Error decrementing quantity:",a),i("Failed to update quantity")}},I=(t,a)=>{try{if(t<0||t>=e.value.length)return;const r=e.value[t];if(!r)return;if(r.product&&0===r.product.stock)return r.quantity=0,o(`${r.product.name} is out of stock`),void T();r.quantity<1?(r.quantity=1,T()):r.quantity>a&&(r.quantity=a,o(`Maximum stock available: ${a}`),T())}catch(r){console.error("Error validating quantity:",r),i("Failed to update quantity")}},E=t=>{k.value="Are you sure you want to remove this item from your cart?",b.value=()=>{try{if(t<0||t>=e.value.length)return;const a=e.value[t]?.product?.name||"Item";e.value.splice(t,1),T(),r(`Removed ${a} from cart`),B()}catch(a){console.error("Error removing item:",a),i("Failed to remove item")}},N()},O=()=>{try{e.value=[],T(),p.value=null,d.value="",u.value="",l("Cart cleared"),B()}catch(t){console.error("Error clearing cart:",t),i("Failed to clear cart")}},D=()=>{k.value="Are you sure you want to clear your cart? This will remove all items.",b.value=O,N()},T=()=>{try{localStorage.setItem("cart",JSON.stringify(e.value)),window.dispatchEvent(new Event("storage")),f()}catch(t){console.error("Error updating cart:",t),i("Failed to update cart")}},A=[{code:"WELCOME10",discount:10},{code:"SAVE20",discount:20},{code:"SPECIAL30",discount:30}],F=()=>{d.value?(m.value=!0,u.value="",setTimeout((()=>{const e=A.find((e=>e.code===d.value.toUpperCase()));e?(p.value=e,r(`Promo code ${e.code} applied successfully!`)):(u.value="Invalid promo code",i("Invalid promo code. Please try again.")),m.value=!1}),800)):u.value="Please enter a promo code"},W=async()=>{if(v.value)i("Please remove out of stock items before checkout");else if(R()){c.value=!0;try{for(const a of e.value){if(!a||!a.product||!a.product.id)return void i("Invalid item in cart. Please remove it and try again.");if(0===a.product.stock)return void i(`${a.product.name} is out of stock. Please remove it from your cart.`)}const t=await ne.get("user/"),s=await ne.post("orders/",{customer:t.data.id,complete:!0}),o=s.data.id;for(const a of e.value)0!==a.product.stock&&await ne.post("order-items/",{order:o,product:a.product.id,quantity:a.quantity});e.value=[],T(),p.value=null,d.value="",r("Order placed successfully!"),setTimeout((()=>{a.push("/orders")}),1500)}catch(t){console.error("Error during checkout:",t),i("Failed to place order. Please try again.")}finally{c.value=!1}}},R=()=>{let t=!0;return e.value.forEach((e=>e&&e.product&&e.product.id?0===e.product.stock?(o(`${e.product.name} is out of stock. Please remove it from your cart.`),void(t=!1)):void(e.quantity>e.product.stock&&(o(`Quantity for ${e.product.name} exceeds available stock. Adjusting to maximum.`),e.quantity=e.product.stock,T())):(i("Invalid item in cart. Please remove it and try again."),void(t=!1)))),t},X=async()=>{try{const e=await ne.get("products/");n.value=e.data,q()}catch(e){console.error("Error fetching products:",e)}},q=()=>{if(!e.value.length||!n.value.length)return;let t=!1;e.value.forEach((e=>{if(!e||!e.product||!e.product.id)return;const a=n.value.find((t=>t.id===e.product.id));if(a&&(e.product.name!==a.name||e.product.price!==a.price||e.product.image!==a.image||e.product.description!==a.description||e.product.stock!==a.stock)){const r=e.quantity;e.product={id:a.id,name:a.name,price:a.price,description:a.description,image:a.image,stock:a.stock},e.quantity=r,e.quantity>a.stock&&(e.quantity=a.stock>0?a.stock:0,o(`Quantity for ${a.name} adjusted to match available stock`)),t=!0}})),t&&(T(),l("Cart updated with latest product information"))},H=()=>{try{const t=localStorage.getItem("cart");if(t){const a=JSON.parse(t);e.value=a.filter((e=>e&&e.product&&e.product.id)),e.value.length!==a.length&&(T(),o("Some invalid items were removed from your cart"))}}catch(t){console.error("Error loading cart:",t),i("Failed to load cart"),e.value=[]}},N=()=>{h.value&&h.value.show()},B=()=>{h.value&&h.value.hide()},K=()=>{"function"===typeof b.value&&b.value()};let J;return(0,s.sV)((()=>{H(),X(),g.value&&(h.value=new Se.aF(g.value)),J=setInterval((()=>{X()}),6e4),f()})),(0,s.hi)((()=>{J&&clearInterval(J)})),(0,s.wB)(e,(()=>{R()}),{deep:!0}),{cart:e,shippingCost:t,fullImageUrl:y,formatPrice:L,truncate:w,calculateSubtotal:P,calculateTax:C,calculateTotal:x,incrementQuantity:S,decrementQuantity:M,validateQuantity:I,removeItem:E,clearCart:O,confirmClearCart:D,updateCart:T,proceedToCheckout:W,isCheckingOut:c,promoCode:d,promoError:u,isApplyingPromo:m,activePromo:p,applyPromoCode:F,confirmModal:g,confirmMessage:k,hideConfirmModal:B,confirmAction:K,hasOutOfStockItems:v}}};const xa=(0,Pe.A)(Ca,[["render",Pa],["__scopeId","data-v-50fd86d7"]]);var Sa=xa;const Ma={class:"container"},Ia={class:"order-header mb-4"},_a={class:"controls-wrapper mt-3"},Ea={class:"search-wrapper"},Oa={class:"input-group"},Da={class:"sort-wrapper"},Ta={class:"input-group"},Aa={key:0,class:"text-center py-5"},Fa={key:1,class:"empty-orders"},Wa={key:2,class:"empty-orders"},Ra={key:3},Xa={key:0,class:"results-summary mb-3"},qa={class:"card-header"},Ha={class:"d-flex justify-content-between align-items-center"},Na={class:"mb-0"},Ba={class:"order-date"},Ka={class:"card-body"},Ja={class:"order-items"},ja={key:0,class:"order-item-image"},Qa=["src"],Ua={key:1,class:"image-placeholder"},Za={class:"order-item-details"},za={class:"order-item-name"},$a={key:0,class:"order-item-price"},Va={class:"order-item-quantity"},Ya={key:1,class:"stock-warning"},Ga={key:1,class:"order-item-total"},er={class:"order-summary mt-3"},tr={class:"order-total"},ar={class:"card-footer"},rr={class:"d-flex flex-wrap justify-content-between align-items-center gap-2"},sr=["onClick","disabled"],or={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},ir={key:1,class:"bi bi-arrow-repeat me-2"},lr={key:0,class:"reorder-warning mt-2"},nr={key:1,class:"pagination-wrapper"},cr={"aria-label":"Order history pagination"},dr={class:"pagination justify-content-center"},ur=["disabled"],mr=["disabled"],pr=["onClick"],gr=["disabled"],hr=["disabled"],kr={class:"items-per-page"},br={class:"modal fade",ref:"confirmModal",tabindex:"-1","aria-labelledby":"confirmModalLabel","aria-hidden":"true"},vr={class:"modal-dialog modal-dialog-centered"},fr={class:"modal-content"},yr={class:"modal-header"},Lr={class:"modal-body"},wr={class:"confirmation-content"},Pr={class:"confirmation-message"},Cr={key:0,class:"order-preview mt-4"},xr={class:"preview-items"},Sr={class:"preview-item-details"},Mr={class:"preview-item-name"},Ir={class:"preview-item-qty"},_r={key:0,class:"unavailable-badge"},Er={key:1,class:"partial-badge"},Or={key:0,class:"preview-item-price"},Dr={class:"preview-total"},Tr={class:"preview-total-row"},Ar={class:"preview-total-row grand-total"},Fr={class:"validation-section mt-3"},Wr={key:0,class:"validation-message warning"},Rr={class:"validation-desc"},Xr={key:1,class:"validation-message info"},qr={key:2,class:"validation-message error"},Hr={class:"modal-footer"},Nr=["disabled"],Br={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},Kr={key:1,class:"bi bi-check-circle me-2"};function Jr(e,t,a,i,l,n){const c=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",Ma,[(0,s.Lk)("div",Ia,[t[17]||(t[17]=(0,s.Lk)("h2",{class:"section-title"},[(0,s.Lk)("i",{class:"bi bi-clock-history me-2"}),(0,s.eW)("My Orders ")],-1)),(0,s.Lk)("div",_a,[(0,s.Lk)("div",Ea,[(0,s.Lk)("div",Oa,[t[14]||(t[14]=(0,s.Lk)("span",{class:"input-group-text"},[(0,s.Lk)("i",{class:"bi bi-search"})],-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>i.searchTerm=e),placeholder:"Search orders or products..."},null,512),[[r.Jo,i.searchTerm]]),i.searchTerm?((0,s.uX)(),(0,s.CE)("button",{key:0,class:"btn btn-outline-secondary",type:"button",onClick:t[1]||(t[1]=e=>i.searchTerm="")},t[13]||(t[13]=[(0,s.Lk)("i",{class:"bi bi-x"},null,-1)]))):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",Da,[(0,s.Lk)("div",Ta,[t[16]||(t[16]=(0,s.Lk)("label",{class:"input-group-text",for:"sortSelect"},[(0,s.Lk)("i",{class:"bi bi-sort-down"})],-1)),(0,s.bo)((0,s.Lk)("select",{class:"form-select",id:"sortSelect","onUpdate:modelValue":t[2]||(t[2]=e=>i.sortOption=e)},t[15]||(t[15]=[(0,s.Lk)("option",{value:"newest"},"Newest First",-1),(0,s.Lk)("option",{value:"oldest"},"Oldest First",-1),(0,s.Lk)("option",{value:"highest"},"Highest Amount",-1),(0,s.Lk)("option",{value:"lowest"},"Lowest Amount",-1)]),512),[[r.u1,i.sortOption]])])])])]),i.isLoading?((0,s.uX)(),(0,s.CE)("div",Aa,t[18]||(t[18]=[(0,s.Fv)('<div class="spinner" data-v-7ea530a4><div class="bounce1" data-v-7ea530a4></div><div class="bounce2" data-v-7ea530a4></div><div class="bounce3" data-v-7ea530a4></div></div><p class="mt-3" data-v-7ea530a4>Loading your orders...</p>',2)]))):0===i.orders.length?((0,s.uX)(),(0,s.CE)("div",Fa,[t[20]||(t[20]=(0,s.Lk)("i",{class:"bi bi-bag-x"},null,-1)),t[21]||(t[21]=(0,s.Lk)("h3",null,"No orders found",-1)),t[22]||(t[22]=(0,s.Lk)("p",null,"You haven't placed any orders yet.",-1)),(0,s.bF)(c,{to:"/products",class:"btn btn-primary mt-3"},{default:(0,s.k6)((()=>t[19]||(t[19]=[(0,s.Lk)("i",{class:"bi bi-shop me-2"},null,-1),(0,s.eW)("Start Shopping ")]))),_:1})])):0===i.paginatedOrders.length?((0,s.uX)(),(0,s.CE)("div",Wa,[t[24]||(t[24]=(0,s.Lk)("i",{class:"bi bi-search"},null,-1)),t[25]||(t[25]=(0,s.Lk)("h3",null,"No matching orders",-1)),t[26]||(t[26]=(0,s.Lk)("p",null,"No orders match your search criteria.",-1)),(0,s.Lk)("button",{class:"btn btn-primary mt-3",onClick:t[3]||(t[3]=e=>i.searchTerm="")},t[23]||(t[23]=[(0,s.Lk)("i",{class:"bi bi-arrow-counterclockwise me-2"},null,-1),(0,s.eW)("Clear Search ")]))])):((0,s.uX)(),(0,s.CE)("div",Ra,[i.searchTerm?((0,s.uX)(),(0,s.CE)("div",Xa,[(0,s.Lk)("span",null,[(0,s.Lk)("strong",null,(0,o.v_)(i.filteredOrders.length),1),(0,s.eW)(" "+(0,o.v_)(1===i.filteredOrders.length?"result":"results")+" found ",1),(0,s.Lk)("button",{class:"btn btn-sm btn-link p-0 ms-2",onClick:t[4]||(t[4]=e=>i.searchTerm="")},t[27]||(t[27]=[(0,s.Lk)("i",{class:"bi bi-x-circle"},null,-1),(0,s.eW)(" Clear ")]))])])):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.paginatedOrders,(e=>((0,s.uX)(),(0,s.CE)("div",{class:"order-card card mb-4",key:e.id},[(0,s.Lk)("div",qa,[(0,s.Lk)("div",Ha,[(0,s.Lk)("h5",Na,[t[28]||(t[28]=(0,s.Lk)("i",{class:"bi bi-bag-check me-2"},null,-1)),(0,s.eW)("Order #"+(0,o.v_)(e.id),1)]),(0,s.Lk)("span",Ba,(0,o.v_)(i.formatDate(e.date_ordered)),1)])]),(0,s.Lk)("div",Ka,[(0,s.Lk)("div",Ja,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.items,(e=>((0,s.uX)(),(0,s.CE)("div",{class:"order-item",key:e.id},[i.getProductDetails(e.product)?((0,s.uX)(),(0,s.CE)("div",ja,[i.getProductDetails(e.product).image?((0,s.uX)(),(0,s.CE)("img",{key:0,src:i.fullImageUrl(i.getProductDetails(e.product).image),alt:"Product"},null,8,Qa)):((0,s.uX)(),(0,s.CE)("div",Ua,t[29]||(t[29]=[(0,s.Lk)("i",{class:"bi bi-image"},null,-1)])))])):(0,s.Q3)("",!0),(0,s.Lk)("div",Za,[(0,s.Lk)("h6",za,(0,o.v_)(i.getProductDetails(e.product)?i.getProductDetails(e.product).name:`Product #${e.product}`),1),i.getProductDetails(e.product)?((0,s.uX)(),(0,s.CE)("p",$a," â±"+(0,o.v_)(i.getProductDetails(e.product).price)+" Ã "+(0,o.v_)(e.quantity),1)):(0,s.Q3)("",!0),(0,s.Lk)("p",Va," Quantity: "+(0,o.v_)(e.quantity),1),i.getProductDetails(e.product)&&0===i.getProductDetails(e.product).stock?((0,s.uX)(),(0,s.CE)("div",Ya,t[30]||(t[30]=[(0,s.Lk)("i",{class:"bi bi-exclamation-triangle-fill me-1"},null,-1),(0,s.eW)(" Currently out of stock ")]))):(0,s.Q3)("",!0)]),i.getProductDetails(e.product)?((0,s.uX)(),(0,s.CE)("div",Ga," â±"+(0,o.v_)((i.getProductDetails(e.product).price*e.quantity).toFixed(2)),1)):(0,s.Q3)("",!0)])))),128))]),(0,s.Lk)("div",er,[(0,s.Lk)("div",tr,[t[31]||(t[31]=(0,s.Lk)("span",null,"Total:",-1)),(0,s.Lk)("span",null,"â±"+(0,o.v_)(i.calculateOrderTotal(e).toFixed(2)),1)])])]),(0,s.Lk)("div",ar,[(0,s.Lk)("div",rr,[t[32]||(t[32]=(0,s.Lk)("span",{class:"order-status d-flex align-items-center"},[(0,s.Lk)("i",{class:"bi bi-check-circle-fill text-success me-1"}),(0,s.eW)(" Completed ")],-1)),(0,s.Lk)("button",{class:"btn btn-primary btn-sm",onClick:t=>i.reorderItems(e),disabled:i.isReordering||!i.hasAvailableItems(e)},[i.isReordering?((0,s.uX)(),(0,s.CE)("span",or)):((0,s.uX)(),(0,s.CE)("i",ir)),(0,s.eW)(" "+(0,o.v_)(i.isReordering?"Processing...":"Reorder"),1)],8,sr)]),i.hasAvailableItems(e)?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",lr,t[33]||(t[33]=[(0,s.Lk)("i",{class:"bi bi-exclamation-triangle-fill me-1"},null,-1),(0,s.eW)(" Cannot reorder - all items are out of stock ")])))])])))),128)),i.totalPages>1?((0,s.uX)(),(0,s.CE)("div",nr,[(0,s.Lk)("nav",cr,[(0,s.Lk)("ul",dr,[(0,s.Lk)("li",{class:(0,o.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,s.Lk)("button",{class:"page-link",onClick:t[5]||(t[5]=e=>i.currentPage=1),disabled:1===i.currentPage},t[34]||(t[34]=[(0,s.Lk)("i",{class:"bi bi-chevron-double-left"},null,-1)]),8,ur)],2),(0,s.Lk)("li",{class:(0,o.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,s.Lk)("button",{class:"page-link",onClick:t[6]||(t[6]=e=>i.currentPage--),disabled:1===i.currentPage},t[35]||(t[35]=[(0,s.Lk)("i",{class:"bi bi-chevron-left"},null,-1)]),8,mr)],2),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.displayedPages,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e,class:(0,o.C4)(["page-item",{active:i.currentPage===e}])},[(0,s.Lk)("button",{class:"page-link",onClick:t=>i.currentPage=e},(0,o.v_)(e),9,pr)],2)))),128)),(0,s.Lk)("li",{class:(0,o.C4)(["page-item",{disabled:i.currentPage===i.totalPages}])},[(0,s.Lk)("button",{class:"page-link",onClick:t[7]||(t[7]=e=>i.currentPage++),disabled:i.currentPage===i.totalPages},t[36]||(t[36]=[(0,s.Lk)("i",{class:"bi bi-chevron-right"},null,-1)]),8,gr)],2),(0,s.Lk)("li",{class:(0,o.C4)(["page-item",{disabled:i.currentPage===i.totalPages}])},[(0,s.Lk)("button",{class:"page-link",onClick:t[8]||(t[8]=e=>i.currentPage=i.totalPages),disabled:i.currentPage===i.totalPages},t[37]||(t[37]=[(0,s.Lk)("i",{class:"bi bi-chevron-double-right"},null,-1)]),8,hr)],2)])]),(0,s.Lk)("div",kr,[t[39]||(t[39]=(0,s.Lk)("span",null,"Items per page:",-1)),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>i.itemsPerPage=e),class:"form-select form-select-sm"},t[38]||(t[38]=[(0,s.Lk)("option",{value:5},"5",-1),(0,s.Lk)("option",{value:10},"10",-1),(0,s.Lk)("option",{value:20},"20",-1)]),512),[[r.u1,i.itemsPerPage]])])])):(0,s.Q3)("",!0)])),(0,s.Lk)("div",br,[(0,s.Lk)("div",vr,[(0,s.Lk)("div",fr,[(0,s.Lk)("div",yr,[t[40]||(t[40]=(0,s.Lk)("h5",{class:"modal-title",id:"confirmModalLabel"},[(0,s.Lk)("i",{class:"bi bi-cart-check me-2"}),(0,s.eW)("Confirm ")],-1)),(0,s.Lk)("button",{type:"button",class:"btn-close",onClick:t[10]||(t[10]=(...e)=>i.hideConfirmModal&&i.hideConfirmModal(...e)),"aria-label":"Close"})]),(0,s.Lk)("div",Lr,[(0,s.Lk)("div",wr,[(0,s.Lk)("p",Pr,(0,o.v_)(i.confirmMessage),1),i.orderToReorder?((0,s.uX)(),(0,s.CE)("div",Cr,[t[49]||(t[49]=(0,s.Lk)("h6",{class:"preview-heading"},[(0,s.Lk)("i",{class:"bi bi-receipt me-2"}),(0,s.eW)("Order Summary ")],-1)),(0,s.Lk)("div",xr,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.orderToReorder.items,(e=>((0,s.uX)(),(0,s.CE)("div",{class:(0,o.C4)(["preview-item",{unavailable:i.isItemUnavailable(e)}]),key:e.id},[(0,s.Lk)("div",Sr,[(0,s.Lk)("span",Mr,(0,o.v_)(i.getProductDetails(e.product)?i.getProductDetails(e.product).name:`Product #${e.product}`),1),(0,s.Lk)("span",Ir,[(0,s.eW)(" Ã "+(0,o.v_)(e.quantity)+" ",1),i.isItemUnavailable(e)?((0,s.uX)(),(0,s.CE)("span",_r,t[41]||(t[41]=[(0,s.Lk)("i",{class:"bi bi-x-circle-fill"},null,-1),(0,s.eW)(" Out of stock ")]))):i.isItemPartiallyAvailable(e)?((0,s.uX)(),(0,s.CE)("span",Er,[t[42]||(t[42]=(0,s.Lk)("i",{class:"bi bi-exclamation-circle-fill"},null,-1)),(0,s.eW)(" Limited stock ("+(0,o.v_)(i.getProductDetails(e.product).stock)+") ",1)])):(0,s.Q3)("",!0)])]),i.getProductDetails(e.product)?((0,s.uX)(),(0,s.CE)("span",Or," â±"+(0,o.v_)((i.getProductDetails(e.product).price*(i.isItemUnavailable(e)?0:Math.min(e.quantity,i.getProductDetails(e.product).stock))).toFixed(2)),1)):(0,s.Q3)("",!0)],2)))),128))]),(0,s.Lk)("div",Dr,[(0,s.Lk)("div",Tr,[t[43]||(t[43]=(0,s.Lk)("span",null,"Subtotal:",-1)),(0,s.Lk)("span",null,"â±"+(0,o.v_)(i.calculateAvailableTotal(i.orderToReorder).subtotal.toFixed(2)),1)]),(0,s.Lk)("div",Ar,[t[44]||(t[44]=(0,s.Lk)("span",null,"Total:",-1)),(0,s.Lk)("span",null,"â±"+(0,o.v_)(i.calculateAvailableTotal(i.orderToReorder).total.toFixed(2)),1)])]),(0,s.Lk)("div",Fr,[i.unavailableItems.length>0?((0,s.uX)(),(0,s.CE)("div",Wr,[t[46]||(t[46]=(0,s.Lk)("i",{class:"bi bi-exclamation-triangle-fill me-2"},null,-1)),(0,s.Lk)("div",null,[t[45]||(t[45]=(0,s.Lk)("p",{class:"validation-title"},"Some items are unavailable",-1)),(0,s.Lk)("p",Rr,(0,o.v_)(i.unavailableItems.length)+" item(s) will be skipped due to stock issues.",1)])])):(0,s.Q3)("",!0),i.partiallyAvailableItems.length>0?((0,s.uX)(),(0,s.CE)("div",Xr,t[47]||(t[47]=[(0,s.Lk)("i",{class:"bi bi-info-circle-fill me-2"},null,-1),(0,s.Lk)("div",null,[(0,s.Lk)("p",{class:"validation-title"},"Limited stock available"),(0,s.Lk)("p",{class:"validation-desc"},"Some items have limited stock and quantities will be adjusted.")],-1)]))):(0,s.Q3)("",!0),0===i.calculateAvailableTotal(i.orderToReorder).total?((0,s.uX)(),(0,s.CE)("div",qr,t[48]||(t[48]=[(0,s.Lk)("i",{class:"bi bi-x-octagon-fill me-2"},null,-1),(0,s.Lk)("div",null,[(0,s.Lk)("p",{class:"validation-title"},"Cannot proceed"),(0,s.Lk)("p",{class:"validation-desc"},"All items in this order are out of stock.")],-1)]))):(0,s.Q3)("",!0)])])):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",Hr,[(0,s.Lk)("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[11]||(t[11]=(...e)=>i.hideConfirmModal&&i.hideConfirmModal(...e))},t[50]||(t[50]=[(0,s.Lk)("i",{class:"bi bi-x me-1"},null,-1),(0,s.eW)("Cancel ")])),(0,s.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[12]||(t[12]=(...e)=>i.confirmReorder&&i.confirmReorder(...e)),disabled:i.isReordering||i.orderToReorder&&0===i.calculateAvailableTotal(i.orderToReorder).total},[i.isReordering?((0,s.uX)(),(0,s.CE)("span",Br)):((0,s.uX)(),(0,s.CE)("i",Kr)),(0,s.eW)(" "+(0,o.v_)(i.isReordering?"Processing...":"Confirm"),1)],8,Nr)])])])],512)])}var jr={setup(){const e=(0,_.KR)([]),t=(0,_.KR)([]),a=(0,_.KR)(!0),r=(0,_.KR)(!1),o=(0,_.KR)(null),i=(0,_.KR)(null),l=(0,_.KR)(""),n=(0,_.KR)(null),c=(0,_.KR)([]),d=(0,_.KR)([]),u=ye(),m=(0,_.KR)(""),p=(0,_.KR)("newest"),g=(0,_.KR)(1),h=(0,_.KR)(5);(0,s.wB)([m,p,h],(()=>{g.value=1}));const k=(0,s.EW)((()=>{if(!m.value.trim())return e.value;const t=m.value.toLowerCase().trim();return e.value.filter((e=>!!e.id.toString().includes(t)||!!(e.items&&e.items.length>0)&&e.items.some((e=>{const a=P(e.product);return!(!a||!a.name)&&a.name.toLowerCase().includes(t)}))))})),b=(0,s.EW)((()=>{const e=[...k.value];switch(p.value){case"newest":return e.sort(((e,t)=>new Date(t.date_ordered)-new Date(e.date_ordered)));case"oldest":return e.sort(((e,t)=>new Date(e.date_ordered)-new Date(t.date_ordered)));case"highest":return e.sort(((e,t)=>C(t)-C(e)));case"lowest":return e.sort(((e,t)=>C(e)-C(t)));default:return e}})),v=(0,s.EW)((()=>Math.ceil(b.value.length/h.value))),f=(0,s.EW)((()=>{const e=[],t=5;if(v.value<=t)for(let a=1;a<=v.value;a++)e.push(a);else{e.push(1);let t=Math.max(2,g.value-1),a=Math.min(v.value-1,g.value+1);g.value<=3&&(a=4),g.value>=v.value-2&&(t=v.value-3),t>2&&e.push("...");for(let r=t;r<=a;r++)e.push(r);a<v.value-1&&e.push("..."),e.push(v.value)}return e})),y=(0,s.EW)((()=>{const e=(g.value-1)*h.value,t=e+h.value;return b.value.slice(e,t)})),L=e=>{const t={year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(e).toLocaleDateString(void 0,t)},w=e=>e?e.startsWith("http")?e:`http://127.0.0.1:8000${e.startsWith("/")?e:"/media/"+e}`:"",P=e=>t.value.find((t=>t.id===e)),C=e=>{let t=0;return e.items&&e.items.forEach((e=>{const a=P(e.product);a&&(t+=a.price*e.quantity)})),t},x=e=>!(!e.items||0===e.items.length)&&e.items.some((e=>{const t=P(e.product);return t&&t.stock>0})),S=e=>{if(!e.items)return[];const t=[];return e.items.forEach((e=>{const a=P(e.product);a&&0===a.stock&&t.push({id:a.id,name:a.name})})),t},M=e=>{if(!e.items)return[];const t=[];return e.items.forEach((e=>{const a=P(e.product);a&&a.stock>0&&a.stock<e.quantity&&t.push({id:a.id,name:a.name,requestedQty:e.quantity,availableQty:a.stock})})),t},I=e=>{const t=P(e.product);return!t||0===t.stock},E=e=>{const t=P(e.product);return t&&t.stock>0&&t.stock<e.quantity},O=e=>{let t=0;return e&&e.items&&e.items.forEach((e=>{const a=P(e.product);if(a&&a.stock>0){const r=Math.min(e.quantity,a.stock);t+=a.price*r}})),{subtotal:t,total:t}},D=e=>{x(e)?(n.value=e,c.value=S(e),d.value=M(e),c.value.length>0?l.value="Some items in this order are out of stock and will be skipped. Do you want to continue with the reorder?":l.value="Are you sure you want to reorder these items?",W()):u.error("Cannot reorder - all items are out of stock")},T=async()=>{if(n.value){r.value=!0;try{const e=await ne.get("user/"),t=await ne.post("orders/",{customer:e.data.id,complete:!0}),a=t.data.id;let r=0;for(const s of n.value.items){const e=P(s.product);if(!e||e.stock<1)continue;const t=Math.min(s.quantity,e.stock);await ne.post("order-items/",{order:a,product:s.product,quantity:t}),r++}r>0?(u.success("Order placed successfully!"),setTimeout((()=>{A()}),1e3)):u.error("No items could be added to your order."),R()}catch(e){console.error(e),u.error("Failed to reorder. Please try again.")}finally{r.value=!1}}},A=async()=>{try{const t=await ne.get("orders/");e.value=t.data}catch(t){u.error("Failed to load orders."),console.error(t)}},F=async()=>{try{const e=await ne.get("products/");t.value=e.data}catch(e){console.error("Failed to load products:",e)}finally{a.value=!1}},W=()=>{i.value?i.value.show():o.value&&(i.value=new Se.aF(o.value),i.value.show())},R=()=>{i.value&&i.value.hide()},X=async()=>{try{await A(),await F()}catch(e){console.error(e),a.value=!1}};return X(),{orders:e,isLoading:a,isReordering:r,confirmModal:o,confirmMessage:l,orderToReorder:n,unavailableItems:c,partiallyAvailableItems:d,searchTerm:m,sortOption:p,currentPage:g,itemsPerPage:h,filteredOrders:k,sortedOrders:b,paginatedOrders:y,totalPages:v,displayedPages:f,formatDate:L,fullImageUrl:w,getProductDetails:P,calculateOrderTotal:C,hasAvailableItems:x,isItemUnavailable:I,isItemPartiallyAvailable:E,calculateAvailableTotal:O,reorderItems:D,confirmReorder:T,hideConfirmModal:R}}};const Qr=(0,Pe.A)(jr,[["render",Jr],["__scopeId","data-v-7ea530a4"]]);var Ur=Qr;const Zr={class:"container"},zr={class:"row g-3 mb-3 mb-md-4"},$r={class:"col-12 col-md-4"},Vr={class:"stat-card card h-100"},Yr={class:"card-body"},Gr={class:"stat-info"},es={class:"col-12 col-md-4"},ts={class:"stat-card card h-100"},as={class:"card-body"},rs={class:"stat-info"},ss={class:"col-12 col-md-4"},os={class:"stat-card card h-100"},is={class:"card-body"},ls={class:"stat-info"},ns={class:"card mb-3"},cs={class:"card-body"},ds={class:"row g-2"},us={class:"col-12 col-md-4"},ms={class:"form-group"},ps={class:"input-group"},gs={class:"col-12 col-md-4"},hs={class:"form-group"},ks={class:"d-flex gap-2"},bs={class:"input-group"},vs={class:"input-group"},fs={class:"col-12 col-md-4"},ys={class:"form-group"},Ls={class:"d-flex justify-content-end mt-3"},ws={class:"card mb-3 mb-md-4"},Ps={class:"card-header d-flex flex-column flex-md-row justify-content-between align-items-md-center"},Cs={class:"mb-2 mb-md-0"},xs={class:"mobile-pagination-select d-md-none"},Ss={class:"per-page-selector"},Ms={class:"d-none d-md-flex align-items-center"},Is={class:"me-2 text-muted"},_s={class:"per-page-selector ms-2"},Es={class:"d-md-none"},Os={key:0,class:"text-center py-4"},Ds={key:1,class:"mobile-orders-list"},Ts=["onClick"],As={class:"d-flex justify-content-between align-items-center mb-2"},Fs={class:"order-id"},Ws={class:"text-muted small mb-2"},Rs={class:"mb-2"},Xs={class:"d-flex justify-content-between"},qs={key:0,class:"mobile-pagination"},Hs={class:"pagination-info"},Ns={class:"pagination-controls"},Bs=["disabled"],Ks=["disabled"],Js={class:"table-responsive d-none d-md-block"},js={class:"table table-hover mb-0"},Qs={key:0},Us={class:"order-id"},Zs=["onClick"],zs={key:0,class:"card-footer d-none d-md-flex justify-content-between align-items-center"},$s={class:"pagination-info"},Vs={"aria-label":"Orders pagination"},Ys={class:"pagination pagination-sm mb-0"},Gs=["disabled"],eo={key:0,class:"page-link",disabled:""},to=["onClick"],ao=["disabled"],ro={class:"modal fade",ref:"orderModal",id:"orderModal",tabindex:"-1"},so={class:"modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable"},oo={class:"modal-content"},io={class:"modal-header"},lo={class:"modal-title"},no={key:0,class:"modal-body"},co={class:"order-info mb-4"},uo={class:"row"},mo={class:"col-md-6 mb-3 mb-md-0"},po={class:"col-md-6"},go={class:"table-responsive"},ho={class:"table table-bordered mb-0"},ko={class:"d-flex align-items-center"},bo={key:0,class:"order-item-image me-2"},vo=["src"],fo={key:1,class:"image-placeholder"},yo={class:"text-center"},Lo={class:"text-center"},wo={class:"text-center"},Po={class:"text-center"},Co={class:"modal-footer"};function xo(e,t,a,i,l,n){return(0,s.uX)(),(0,s.CE)("div",Zr,[t[52]||(t[52]=(0,s.Lk)("div",{class:"admin-header mb-3 mb-md-4"},[(0,s.Lk)("h2",{class:"section-title"},[(0,s.Lk)("i",{class:"bi bi-clipboard-check me-2"}),(0,s.eW)("Checkout Monitor ")])],-1)),(0,s.Lk)("div",zr,[(0,s.Lk)("div",$r,[(0,s.Lk)("div",Vr,[(0,s.Lk)("div",Yr,[t[15]||(t[15]=(0,s.Lk)("div",{class:"stat-icon"},[(0,s.Lk)("i",{class:"bi bi-cart-check"})],-1)),(0,s.Lk)("div",Gr,[(0,s.Lk)("h3",null,(0,o.v_)(l.orders.length),1),t[14]||(t[14]=(0,s.Lk)("p",null,"Total Orders",-1))])])])]),(0,s.Lk)("div",es,[(0,s.Lk)("div",ts,[(0,s.Lk)("div",as,[t[17]||(t[17]=(0,s.Lk)("div",{class:"stat-icon"},[(0,s.Lk)("span",null,"â±")],-1)),(0,s.Lk)("div",rs,[(0,s.Lk)("h3",null,"â±"+(0,o.v_)(n.calculateTotalSales()),1),t[16]||(t[16]=(0,s.Lk)("p",null,"Total Sales",-1))])])])]),(0,s.Lk)("div",ss,[(0,s.Lk)("div",os,[(0,s.Lk)("div",is,[t[19]||(t[19]=(0,s.Lk)("div",{class:"stat-icon"},[(0,s.Lk)("i",{class:"bi bi-people"})],-1)),(0,s.Lk)("div",ls,[(0,s.Lk)("h3",null,(0,o.v_)(n.uniqueCustomers.length),1),t[18]||(t[18]=(0,s.Lk)("p",null,"Unique Customers",-1))])])])])]),(0,s.Lk)("div",ns,[(0,s.Lk)("div",cs,[t[28]||(t[28]=(0,s.Lk)("h5",{class:"filter-title mb-3"},[(0,s.Lk)("i",{class:"bi bi-funnel me-2"}),(0,s.eW)("Search & Filter")],-1)),(0,s.Lk)("div",ds,[(0,s.Lk)("div",us,[(0,s.Lk)("div",ms,[t[21]||(t[21]=(0,s.Lk)("label",{class:"form-label"},"Search",-1)),(0,s.Lk)("div",ps,[t[20]||(t[20]=(0,s.Lk)("span",{class:"input-group-text"},[(0,s.Lk)("i",{class:"bi bi-search"})],-1)),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchQuery=e),class:"form-control",placeholder:"Order ID..."},null,512),[[r.Jo,l.searchQuery]])])])]),(0,s.Lk)("div",gs,[(0,s.Lk)("div",hs,[t[24]||(t[24]=(0,s.Lk)("label",{class:"form-label"},"Date Range",-1)),(0,s.Lk)("div",ks,[(0,s.Lk)("div",bs,[t[22]||(t[22]=(0,s.Lk)("span",{class:"input-group-text"},[(0,s.Lk)("i",{class:"bi bi-calendar3"})],-1)),(0,s.bo)((0,s.Lk)("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=e=>l.dateFrom=e),class:"form-control",placeholder:"From"},null,512),[[r.Jo,l.dateFrom]])]),(0,s.Lk)("div",vs,[t[23]||(t[23]=(0,s.Lk)("span",{class:"input-group-text"},[(0,s.Lk)("i",{class:"bi bi-calendar3"})],-1)),(0,s.bo)((0,s.Lk)("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=e=>l.dateTo=e),class:"form-control",placeholder:"To"},null,512),[[r.Jo,l.dateTo]])])])])]),(0,s.Lk)("div",fs,[(0,s.Lk)("div",ys,[t[26]||(t[26]=(0,s.Lk)("label",{class:"form-label"},"Sort By",-1)),(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.sortBy=e),class:"form-select"},t[25]||(t[25]=[(0,s.Lk)("option",{value:"date_desc"},"Newest First",-1),(0,s.Lk)("option",{value:"date_asc"},"Oldest First",-1),(0,s.Lk)("option",{value:"amount_desc"},"Highest Amount",-1),(0,s.Lk)("option",{value:"amount_asc"},"Lowest Amount",-1)]),512),[[r.u1,l.sortBy]])])])]),(0,s.Lk)("div",Ls,[(0,s.Lk)("button",{class:"btn btn-outline-secondary me-2",onClick:t[4]||(t[4]=(...e)=>n.resetFilters&&n.resetFilters(...e))},t[27]||(t[27]=[(0,s.Lk)("i",{class:"bi bi-x-circle me-1"},null,-1),(0,s.eW)("Reset ")]))])])]),(0,s.Lk)("div",ws,[(0,s.Lk)("div",Ps,[(0,s.Lk)("h5",Cs,[t[30]||(t[30]=(0,s.Lk)("i",{class:"bi bi-list-check me-2"},null,-1)),t[31]||(t[31]=(0,s.eW)("Recent Orders ")),(0,s.Lk)("div",xs,[(0,s.Lk)("div",Ss,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.perPage=e),class:"form-select form-select-sm","aria-label":"Items per page"},t[29]||(t[29]=[(0,s.Lk)("option",{value:5},"5",-1),(0,s.Lk)("option",{value:10},"10",-1),(0,s.Lk)("option",{value:25},"25",-1),(0,s.Lk)("option",{value:50},"50",-1)]),512),[[r.u1,l.perPage]])])])]),(0,s.Lk)("div",Ms,[(0,s.Lk)("span",Is,(0,o.v_)(n.filteredOrders.length)+" orders found",1),(0,s.Lk)("div",_s,[(0,s.bo)((0,s.Lk)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.perPage=e),class:"form-select form-select-sm","aria-label":"Items per page"},t[32]||(t[32]=[(0,s.Lk)("option",{value:5},"5",-1),(0,s.Lk)("option",{value:10},"10",-1),(0,s.Lk)("option",{value:25},"25",-1),(0,s.Lk)("option",{value:50},"50",-1)]),512),[[r.u1,l.perPage]])])])]),(0,s.Lk)("div",Es,[0===n.filteredOrders.length?((0,s.uX)(),(0,s.CE)("div",Os,t[33]||(t[33]=[(0,s.Lk)("i",{class:"bi bi-search text-muted",style:{"font-size":"2rem"}},null,-1),(0,s.Lk)("p",{class:"mt-2 text-muted"},"No orders found",-1)]))):((0,s.uX)(),(0,s.CE)("div",Ds,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.paginatedOrders,(e=>((0,s.uX)(),(0,s.CE)("div",{key:`mobile-${e.id}`,class:"mobile-order-item",onClick:t=>n.viewOrderDetails(e)},[(0,s.Lk)("div",As,[(0,s.Lk)("strong",Fs,"#"+(0,o.v_)(e.id),1),t[34]||(t[34]=(0,s.Lk)("span",{class:"badge bg-success"},"Completed",-1))]),(0,s.Lk)("div",Ws,(0,o.v_)(n.formatDate(e.date_ordered)),1),(0,s.Lk)("div",Rs,(0,o.v_)(e.customer),1),(0,s.Lk)("div",Xs,[(0,s.Lk)("span",null,(0,o.v_)(e.items?e.items.length:0)+" items",1),(0,s.Lk)("strong",null,"â±"+(0,o.v_)(n.calculateOrderTotal(e).toFixed(2)),1)])],8,Ts)))),128)),n.totalPages>1?((0,s.uX)(),(0,s.CE)("div",qs,[(0,s.Lk)("div",Hs," Page "+(0,o.v_)(l.currentPage)+" of "+(0,o.v_)(n.totalPages),1),(0,s.Lk)("div",Ns,[(0,s.Lk)("button",{class:"btn btn-sm btn-outline-primary",disabled:1===l.currentPage,onClick:t[7]||(t[7]=e=>n.changePage(l.currentPage-1))},t[35]||(t[35]=[(0,s.Lk)("i",{class:"bi bi-chevron-left"},null,-1)]),8,Bs),(0,s.Lk)("button",{class:"btn btn-sm btn-outline-primary",disabled:l.currentPage===n.totalPages,onClick:t[8]||(t[8]=e=>n.changePage(l.currentPage+1))},t[36]||(t[36]=[(0,s.Lk)("i",{class:"bi bi-chevron-right"},null,-1)]),8,Ks)])])):(0,s.Q3)("",!0)]))]),(0,s.Lk)("div",Js,[(0,s.Lk)("table",js,[t[40]||(t[40]=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",{scope:"col"},"Order ID"),(0,s.Lk)("th",{scope:"col"},"Date"),(0,s.Lk)("th",{scope:"col"},"Customer"),(0,s.Lk)("th",{scope:"col"},"Items"),(0,s.Lk)("th",{scope:"col"},"Total"),(0,s.Lk)("th",{scope:"col"},"Status"),(0,s.Lk)("th",{scope:"col"},"Actions")])],-1)),(0,s.Lk)("tbody",null,[0===n.filteredOrders.length?((0,s.uX)(),(0,s.CE)("tr",Qs,t[37]||(t[37]=[(0,s.Lk)("td",{colspan:"7",class:"text-center py-4"},[(0,s.Lk)("i",{class:"bi bi-search text-muted",style:{"font-size":"2rem"}}),(0,s.Lk)("p",{class:"mt-2 text-muted"},"No orders found")],-1)]))):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.paginatedOrders,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:`desktop-${e.id}`},[(0,s.Lk)("td",null,[(0,s.Lk)("span",Us,"#"+(0,o.v_)(e.id),1)]),(0,s.Lk)("td",null,(0,o.v_)(n.formatDate(e.date_ordered)),1),(0,s.Lk)("td",null,(0,o.v_)(e.customer),1),(0,s.Lk)("td",null,(0,o.v_)(e.items?e.items.length:0)+" items",1),(0,s.Lk)("td",null,"â±"+(0,o.v_)(n.calculateOrderTotal(e).toFixed(2)),1),t[39]||(t[39]=(0,s.Lk)("td",null,[(0,s.Lk)("span",{class:"badge bg-success"},"Completed")],-1)),(0,s.Lk)("td",null,[(0,s.Lk)("button",{class:"btn btn-sm btn-primary btn-view",onClick:t=>n.viewOrderDetails(e)},t[38]||(t[38]=[(0,s.Lk)("i",{class:"bi bi-eye"},null,-1)]),8,Zs)])])))),128))])])]),n.filteredOrders.length>0?((0,s.uX)(),(0,s.CE)("div",zs,[(0,s.Lk)("div",$s," Showing "+(0,o.v_)(n.paginationInfo.from)+" to "+(0,o.v_)(n.paginationInfo.to)+" of "+(0,o.v_)(n.filteredOrders.length)+" orders ",1),(0,s.Lk)("nav",Vs,[(0,s.Lk)("ul",Ys,[(0,s.Lk)("li",{class:(0,o.C4)(["page-item",{disabled:1===l.currentPage}])},[(0,s.Lk)("button",{class:"page-link",onClick:t[9]||(t[9]=e=>n.changePage(l.currentPage-1)),disabled:1===l.currentPage,"aria-label":"Previous page"},t[41]||(t[41]=[(0,s.Lk)("i",{class:"bi bi-chevron-left"},null,-1)]),8,Gs)],2),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(n.getPageNumbers(),(e=>((0,s.uX)(),(0,s.CE)("li",{key:e,class:(0,o.C4)(["page-item",{active:l.currentPage===e}])},["..."===e?((0,s.uX)(),(0,s.CE)("button",eo,(0,o.v_)(e),1)):((0,s.uX)(),(0,s.CE)("button",{key:1,class:"page-link",onClick:t=>n.changePage(e)},(0,o.v_)(e),9,to))],2)))),128)),(0,s.Lk)("li",{class:(0,o.C4)(["page-item",{disabled:l.currentPage===n.totalPages}])},[(0,s.Lk)("button",{class:"page-link",onClick:t[10]||(t[10]=e=>n.changePage(l.currentPage+1)),disabled:l.currentPage===n.totalPages,"aria-label":"Next page"},t[42]||(t[42]=[(0,s.Lk)("i",{class:"bi bi-chevron-right"},null,-1)]),8,ao)],2)])])])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",ro,[(0,s.Lk)("div",so,[(0,s.Lk)("div",oo,[(0,s.Lk)("div",io,[(0,s.Lk)("h5",lo,"Order Details #"+(0,o.v_)(l.selectedOrder?.id),1),(0,s.Lk)("button",{type:"button",class:"btn-close",onClick:t[11]||(t[11]=(...e)=>n.closeOrderModal&&n.closeOrderModal(...e)),"aria-label":"Close"})]),l.selectedOrder?((0,s.uX)(),(0,s.CE)("div",no,[(0,s.Lk)("div",co,[(0,s.Lk)("div",uo,[(0,s.Lk)("div",mo,[(0,s.Lk)("p",null,[t[43]||(t[43]=(0,s.Lk)("strong",null,"Customer:",-1)),(0,s.eW)(" "+(0,o.v_)(l.selectedOrder.customer),1)]),(0,s.Lk)("p",null,[t[44]||(t[44]=(0,s.Lk)("strong",null,"Date:",-1)),(0,s.eW)(" "+(0,o.v_)(n.formatDate(l.selectedOrder.date_ordered)),1)])]),(0,s.Lk)("div",po,[t[46]||(t[46]=(0,s.Lk)("p",null,[(0,s.Lk)("strong",null,"Status:"),(0,s.eW)(),(0,s.Lk)("span",{class:"badge bg-success"},"Completed")],-1)),(0,s.Lk)("p",null,[t[45]||(t[45]=(0,s.Lk)("strong",null,"Total:",-1)),(0,s.eW)(" â±"+(0,o.v_)(n.calculateOrderTotal(l.selectedOrder).toFixed(2)),1)])])])]),t[50]||(t[50]=(0,s.Lk)("h6",{class:"mb-3"},"Order Items",-1)),(0,s.Lk)("div",go,[(0,s.Lk)("table",ho,[t[49]||(t[49]=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",{scope:"col"},"Product"),(0,s.Lk)("th",{scope:"col",class:"text-center"},"Price"),(0,s.Lk)("th",{scope:"col",class:"text-center"},"Quantity"),(0,s.Lk)("th",{scope:"col",class:"text-center"},"Total")])],-1)),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.selectedOrder.items,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id},[(0,s.Lk)("td",null,[(0,s.Lk)("div",ko,[n.getProductDetails(e.product)?((0,s.uX)(),(0,s.CE)("div",bo,[n.getProductDetails(e.product).image?((0,s.uX)(),(0,s.CE)("img",{key:0,src:n.fullImageUrl(n.getProductDetails(e.product).image),alt:"Product"},null,8,vo)):((0,s.uX)(),(0,s.CE)("div",fo,t[47]||(t[47]=[(0,s.Lk)("i",{class:"bi bi-image"},null,-1)])))])):(0,s.Q3)("",!0),(0,s.Lk)("span",null,(0,o.v_)(n.getProductDetails(e.product)?n.getProductDetails(e.product).name:`Product #${e.product}`),1)])]),(0,s.Lk)("td",yo,"â±"+(0,o.v_)(n.getProductDetails(e.product)?n.getProductDetails(e.product).price:"N/A"),1),(0,s.Lk)("td",Lo,(0,o.v_)(e.quantity),1),(0,s.Lk)("td",wo,"â±"+(0,o.v_)(n.getProductDetails(e.product)?(n.getProductDetails(e.product).price*e.quantity).toFixed(2):"N/A"),1)])))),128))]),(0,s.Lk)("tfoot",null,[(0,s.Lk)("tr",null,[t[48]||(t[48]=(0,s.Lk)("td",{colspan:"3",class:"text-end"},[(0,s.Lk)("strong",null,"Total:")],-1)),(0,s.Lk)("td",Po,"â±"+(0,o.v_)(n.calculateOrderTotal(l.selectedOrder).toFixed(2)),1)])])])])])):(0,s.Q3)("",!0),(0,s.Lk)("div",Co,[(0,s.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[12]||(t[12]=(...e)=>n.closeOrderModal&&n.closeOrderModal(...e))},"Close"),(0,s.Lk)("button",{type:"button",class:"btn btn-primary btn-view",onClick:t[13]||(t[13]=(...e)=>n.printOrder&&n.printOrder(...e))},t[51]||(t[51]=[(0,s.Lk)("i",{class:"bi bi-printer me-2"},null,-1),(0,s.eW)("Print ")]))])])])],512)])}var So={data(){return{orders:[],products:[],selectedOrder:null,modalInstance:null,searchQuery:"",dateFrom:"",dateTo:"",sortBy:"date_desc",currentPage:1,perPage:10,isFiltering:!1,cachedOrderTotals:{}}},computed:{filteredOrders(){let e=[...this.orders];if(this.searchQuery){const t=this.searchQuery.toLowerCase();e=e.filter((e=>e.id.toString().includes(t)||e.customer.toString().toLowerCase().includes(t)))}if(this.dateFrom){const t=new Date(this.dateFrom);t.setHours(0,0,0,0),e=e.filter((e=>new Date(e.date_ordered)>=t))}if(this.dateTo){const t=new Date(this.dateTo);t.setHours(23,59,59,999),e=e.filter((e=>new Date(e.date_ordered)<=t))}return"date_desc"===this.sortBy?e.sort(((e,t)=>new Date(t.date_ordered)-new Date(e.date_ordered))):"date_asc"===this.sortBy?e.sort(((e,t)=>new Date(e.date_ordered)-new Date(t.date_ordered))):"amount_desc"===this.sortBy?e.sort(((e,t)=>this.getOrderTotal(t)-this.getOrderTotal(e))):"amount_asc"===this.sortBy&&e.sort(((e,t)=>this.getOrderTotal(e)-this.getOrderTotal(t))),e},paginatedOrders(){const e=(this.currentPage-1)*this.perPage,t=e+this.perPage;return this.filteredOrders.slice(e,t)},totalPages(){return Math.ceil(this.filteredOrders.length/this.perPage)},paginationInfo(){const e=0===this.filteredOrders.length?0:(this.currentPage-1)*this.perPage+1,t=Math.min(this.currentPage*this.perPage,this.filteredOrders.length);return{from:e,to:t}},uniqueCustomers(){const e=new Set;return this.orders.forEach((t=>e.add(t.customer))),Array.from(e)}},methods:{fullImageUrl(e){return e?e.startsWith("http")?e:`http://127.0.0.1:8000${e.startsWith("/")?e:"/media/"+e}`:""},formatDate(e){const t={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(e).toLocaleDateString(void 0,t)},getProductDetails(e){return this.products.find((t=>t.id===e))},calculateOrderTotal(e){let t=0;return e.items&&e.items.forEach((e=>{const a=this.getProductDetails(e.product);a&&(t+=a.price*e.quantity)})),t},getOrderTotal(e){if(void 0!==this.cachedOrderTotals[e.id])return this.cachedOrderTotals[e.id];const t=this.calculateOrderTotal(e);return this.cachedOrderTotals[e.id]=t,t},calculateTotalSales(){let e=0;return this.orders.forEach((t=>{e+=this.calculateOrderTotal(t)})),e.toFixed(2)},viewOrderDetails(e){this.selectedOrder=e,this.modalInstance=new Se.aF(this.$refs.orderModal),this.modalInstance.show()},closeOrderModal(){this.modalInstance&&this.modalInstance.hide()},changePage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e,this.$nextTick((()=>{const e=document.querySelector(".card");e&&e.scrollIntoView({behavior:"smooth",block:"start"})})))},getPageNumbers(){const e=[],t=5;if(this.totalPages<=t)for(let a=1;a<=this.totalPages;a++)e.push(a);else{e.push(1);let t=Math.max(2,this.currentPage-1),a=Math.min(this.totalPages-1,t+2);a===this.totalPages-1&&(t=Math.max(2,a-2)),t>2&&e.push("...");for(let r=t;r<=a;r++)e.push(r);a<this.totalPages-1&&e.push("..."),e.push(this.totalPages)}return e},resetFilters(){this.searchQuery="",this.dateFrom="",this.dateTo="",this.sortBy="date_desc",this.currentPage=1,this.showNotification("info","Filters have been reset")},applyFilters(){this.currentPage=1,this.isFiltering=!0,this.showNotification("success","Filters applied"),this.cachedOrderTotals={},this.$nextTick((()=>{this.isFiltering=!1}))},printOrder(){const e=window.open("","_blank","width=800,height=600");let t=`\n        <!DOCTYPE html>\n        <html>\n        <head>\n          <title>Order #${this.selectedOrder.id} - Invoice</title>\n          <meta charset="utf-8">\n          <meta name="viewport" content="width=device-width, initial-scale=1">\n          <style>\n            body {\n              font-family: Arial, sans-serif;\n              padding: 20px;\n              color: #333;\n              line-height: 1.4;\n            }\n            .print-container {\n              max-width: 800px;\n              margin: 0 auto;\n              padding: 20px;\n            }\n            .print-header {\n              text-align: center;\n              margin-bottom: 30px;\n              padding-bottom: 15px;\n              border-bottom: 2px solid #eee;\n            }\n            .print-header h2 {\n              margin-bottom: 5px;\n              font-size: 24px;\n            }\n            .print-header h3 {\n              margin-top: 0;\n              font-size: 18px;\n              color: #666;\n            }\n            .print-order-details {\n              margin-bottom: 30px;\n            }\n            .print-row {\n              display: flex;\n              margin: 0 -15px;\n            }\n            .print-col {\n              flex: 1;\n              padding: 0 15px;\n            }\n            .print-items h4 {\n              margin-bottom: 15px;\n              font-size: 18px;\n              border-bottom: 1px solid #eee;\n              padding-bottom: 8px;\n            }\n            .print-table {\n              width: 100%;\n              border-collapse: collapse;\n              margin-bottom: 30px;\n            }\n            .print-table th,\n            .print-table td {\n              border: 1px solid #ddd;\n              padding: 8px 12px;\n              text-align: left;\n            }\n            .print-table th {\n              background-color: #f5f5f5;\n            }\n            .print-table tfoot {\n              font-weight: bold;\n            }\n            .print-footer {\n              margin-top: 50px;\n              text-align: center;\n              font-style: italic;\n              color: #666;\n              padding-top: 15px;\n              border-top: 1px solid #eee;\n            }\n            @media print {\n              .no-print {\n                display: none;\n              }\n            }\n            .print-button {\n              background-color: #007bff;\n              color: white;\n              border: none;\n              padding: 10px 15px;\n              border-radius: 4px;\n              cursor: pointer;\n              margin: 20px 0;\n              font-size: 14px;\n            }\n            .print-button:hover {\n              background-color: #0069d9;\n            }\n          </style>\n        </head>\n        <body>\n          <div class="print-container">\n            <div class="print-header">\n              <h2>Order Invoice</h2>\n              <h3>Order #${this.selectedOrder.id}</h3>\n            </div>\n            \n            <div class="print-order-details">\n              <div class="print-row">\n                <div class="print-col">\n                  <p><strong>Customer:</strong> ${this.selectedOrder.customer}</p>\n                  <p><strong>Date:</strong> ${this.formatDate(this.selectedOrder.date_ordered)}</p>\n                </div>\n                <div class="print-col">\n                  <p><strong>Status:</strong> Completed</p>\n                  <p><strong>Total:</strong> â±${this.calculateOrderTotal(this.selectedOrder).toFixed(2)}</p>\n                </div>\n              </div>\n            </div>\n            \n            <div class="print-items">\n              <h4>Order Items</h4>\n              <table class="print-table">\n                <thead>\n                  <tr>\n                    <th>Product</th>\n                    <th style="text-align: center">Price</th>\n                    <th style="text-align: center">Quantity</th>\n                    <th style="text-align: center">Total</th>\n                  </tr>\n                </thead>\n                <tbody>`;this.selectedOrder.items.forEach((e=>{const a=this.getProductDetails(e.product),r=a?a.name:`Product #${e.product}`,s=a?a.price:"N/A",o=a?(a.price*e.quantity).toFixed(2):"N/A";t+=`\n                  <tr>\n                    <td>${r}</td>\n                    <td style="text-align: center">â±${s}</td>\n                    <td style="text-align: center">${e.quantity}</td>\n                    <td style="text-align: center">â±${o}</td>\n                  </tr>`})),t+=`\n                </tbody>\n                <tfoot>\n                  <tr>\n                    <td colspan="3" style="text-align: right"><strong>Total:</strong></td>\n                    <td style="text-align: center">â±${this.calculateOrderTotal(this.selectedOrder).toFixed(2)}</td>\n                  </tr>\n                </tfoot>\n              </table>\n            </div>\n            \n            <div class="print-footer">\n              <p>Thank you for your business!</p>\n            </div>\n            \n            <div class="no-print" style="text-align: center; margin-top: 30px;">\n              <button class="print-button" onclick="window.print(); window.close();">\n                Print Invoice\n              </button>\n              <button class="print-button" style="background-color: #6c757d;" onclick="window.close();">\n                Close\n              </button>\n            </div>\n          </div>\n          \n          <script>\n            // Auto-print on load (optional)\n            window.onload = function() {\n              // Uncomment the line below if you want auto-print\n              // window.print();\n            }\n          <\/script>\n        </body>\n        </html>`,e.document.open(),e.document.write(t),e.document.close(),e.focus()},async fetchOrders(){try{const e=await ne.get("orders/");this.orders=e.data}catch(e){this.showNotification("error","Failed to load orders.")}},async fetchProducts(){try{const e=await ne.get("products/");this.products=e.data}catch(e){this.showNotification("error","Failed to load products.")}},showNotification(e,t){const a=document.createElement("div");a.className=`notification notification-${e}`;let r="bi-info-circle";"success"===e&&(r="bi-check-circle"),"warning"===e&&(r="bi-exclamation-triangle"),"error"===e&&(r="bi-x-circle"),a.innerHTML=`<i class="bi ${r}"></i> ${t}`,document.body.appendChild(a),setTimeout((()=>{a.classList.add("show")}),10),setTimeout((()=>{a.classList.remove("show"),setTimeout((()=>{document.body.removeChild(a)}),300)}),3e3)}},watch:{searchQuery(){this.currentPage=1},sortBy(){this.currentPage=1,this.cachedOrderTotals={}},perPage(){this.currentPage=1},dateFrom(){this.currentPage=1},dateTo(){this.currentPage=1}},mounted(){this.fetchOrders(),this.fetchProducts()}};const Mo=(0,Pe.A)(So,[["render",xo],["__scopeId","data-v-3e2cca6a"]]);var Io=Mo;const _o={class:"container"},Eo={class:"admin-header mb-4"},Oo={class:"admin-actions"},Do={class:"row mb-4"},To={class:"col-md-4"},Ao={class:"stat-card card"},Fo={class:"card-body"},Wo={class:"stat-info"},Ro={class:"col-md-4"},Xo={class:"stat-card card"},qo={class:"card-body"},Ho={class:"stat-info"},No={class:"col-md-4"},Bo={class:"stat-card card"},Ko={class:"card-body"},Jo={class:"stat-info"},jo={class:"card mb-4"},Qo={class:"card-header d-flex justify-content-between align-items-center flex-wrap gap-2"},Uo={class:"search-container"},Zo={key:0,class:"loading-container py-5"},zo={key:1,class:"empty-products py-5"},$o={key:2,class:"table-responsive"},Vo={class:"table table-hover"},Yo={class:"product-image"},Go=["src","alt"],ei={key:1,class:"image-placeholder"},ti={class:"product-name"},ai={class:"product-description"},ri={class:"btn-group"},si=["onClick"],oi=["onClick"],ii={key:3,class:"card-footer"},li={"aria-label":"Product pagination"},ni={class:"pagination justify-content-center mb-0"},ci=["disabled"],di={key:0,class:"page-link",disabled:""},ui=["onClick"],mi=["disabled"],pi={class:"card"},gi={class:"table-responsive"},hi={class:"table"},ki={key:0},bi={class:"modal fade",ref:"editModal",id:"editModal",tabindex:"-1","aria-labelledby":"editModalLabel","aria-hidden":"true"},vi={class:"modal-dialog modal-dialog-centered modal-lg"},fi={class:"modal-content"},yi={class:"modal-header"},Li={class:"modal-body"},wi={class:"modal-body-scrollable"},Pi={key:0,class:"text-center mb-4"},Ci={class:"product-image-preview"},xi=["src","alt"],Si={class:"form-group mb-3"},Mi={key:0,class:"invalid-feedback"},Ii={class:"form-group mb-3"},_i={key:0,class:"invalid-feedback"},Ei={class:"row mb-3"},Oi={class:"col-12 col-sm-6 mb-3 mb-sm-0"},Di={class:"input-group"},Ti={key:0,class:"invalid-feedback"},Ai={class:"col-12 col-sm-6"},Fi={class:"input-group"},Wi={key:0,class:"invalid-feedback"},Ri={class:"form-group mb-3"},Xi={class:"custom-file-upload"},qi={class:"modal-footer"},Hi=["disabled"],Ni={key:0,class:"spinner-border spinner-border-sm me-1",role:"status"},Bi={key:1,class:"bi bi-check-circle me-1"},Ki={class:"modal fade confirm-modal",ref:"confirmModal",tabindex:"-1","aria-labelledby":"confirmModalLabel","aria-hidden":"true"},Ji={class:"modal-dialog modal-dialog-centered modal-sm"},ji={class:"modal-content"},Qi={class:"modal-header"},Ui={class:"modal-footer"},Zi=["disabled"],zi={key:0,class:"spinner-border spinner-border-sm me-1",role:"status"},$i={key:1,class:"bi bi-trash me-1"};function Vi(e,t,a,i,l,n){const c=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",_o,[(0,s.Lk)("div",Eo,[t[20]||(t[20]=(0,s.Lk)("h2",{class:"section-title"},[(0,s.Lk)("i",{class:"bi bi-box-seam me-2"}),(0,s.eW)("Product Inventory ")],-1)),(0,s.Lk)("div",Oo,[(0,s.bF)(c,{to:"/add-product",class:"btn btn-add"},{default:(0,s.k6)((()=>t[19]||(t[19]=[(0,s.Lk)("i",{class:"bi bi-plus-circle me-2"},null,-1),(0,s.eW)("Add New Product ")]))),_:1})])]),(0,s.Lk)("div",Do,[(0,s.Lk)("div",To,[(0,s.Lk)("div",Ao,[(0,s.Lk)("div",Fo,[t[22]||(t[22]=(0,s.Lk)("div",{class:"stat-icon"},[(0,s.Lk)("i",{class:"bi bi-box-seam"})],-1)),(0,s.Lk)("div",Wo,[(0,s.Lk)("h3",null,(0,o.v_)(i.products.length),1),t[21]||(t[21]=(0,s.Lk)("p",null,"Total Products",-1))])])])]),(0,s.Lk)("div",Ro,[(0,s.Lk)("div",Xo,[(0,s.Lk)("div",qo,[t[24]||(t[24]=(0,s.Lk)("div",{class:"stat-icon"},[(0,s.Lk)("i",{class:"bi bi-exclamation-triangle"})],-1)),(0,s.Lk)("div",Ho,[(0,s.Lk)("h3",null,(0,o.v_)(i.lowStockCount),1),t[23]||(t[23]=(0,s.Lk)("p",null,"Low Stock Items",-1))])])])]),(0,s.Lk)("div",No,[(0,s.Lk)("div",Bo,[(0,s.Lk)("div",Ko,[t[26]||(t[26]=(0,s.Lk)("div",{class:"stat-icon"},[(0,s.Lk)("i",{class:"bi bi-cart-check"})],-1)),(0,s.Lk)("div",Jo,[(0,s.Lk)("h3",null,(0,o.v_)(i.orders.length),1),t[25]||(t[25]=(0,s.Lk)("p",null,"Total Orders",-1))])])])])]),(0,s.Lk)("div",jo,[(0,s.Lk)("div",Qo,[t[28]||(t[28]=(0,s.Lk)("h5",{class:"mb-0"},"Product Inventory",-1)),(0,s.Lk)("div",Uo,[(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control search-input",placeholder:"Search products...","onUpdate:modelValue":t[0]||(t[0]=e=>i.searchQuery=e),"aria-label":"Search products"},null,512),[[r.Jo,i.searchQuery]]),t[27]||(t[27]=(0,s.Lk)("i",{class:"bi bi-search search-icon"},null,-1))])]),i.isLoading?((0,s.uX)(),(0,s.CE)("div",Zo,t[29]||(t[29]=[(0,s.Lk)("div",{class:"spinner"},[(0,s.Lk)("div",{class:"bounce1"}),(0,s.Lk)("div",{class:"bounce2"}),(0,s.Lk)("div",{class:"bounce3"})],-1),(0,s.Lk)("p",null,"Loading products...",-1)]))):0===i.filteredProducts.length?((0,s.uX)(),(0,s.CE)("div",zo,[t[31]||(t[31]=(0,s.Lk)("i",{class:"bi bi-search-heart"},null,-1)),t[32]||(t[32]=(0,s.Lk)("h3",null,"No products found",-1)),t[33]||(t[33]=(0,s.Lk)("p",null,"Try adjusting your search criteria.",-1)),(0,s.Lk)("button",{class:"btn btn-primary mt-3",onClick:t[1]||(t[1]=(...e)=>i.resetSearch&&i.resetSearch(...e))},t[30]||(t[30]=[(0,s.Lk)("i",{class:"bi bi-arrow-counterclockwise me-2"},null,-1),(0,s.eW)("Reset Search ")]))])):((0,s.uX)(),(0,s.CE)("div",$o,[(0,s.Lk)("table",Vo,[t[37]||(t[37]=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"Image"),(0,s.Lk)("th",null,"Name"),(0,s.Lk)("th",null,"Price"),(0,s.Lk)("th",null,"Stock"),(0,s.Lk)("th",null,"Actions")])],-1)),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.paginatedProducts,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id},[(0,s.Lk)("td",null,[(0,s.Lk)("div",Yo,[e.image?((0,s.uX)(),(0,s.CE)("img",{key:0,src:i.fullImageUrl(e.image),alt:e.name,loading:"lazy"},null,8,Go)):((0,s.uX)(),(0,s.CE)("div",ei,t[34]||(t[34]=[(0,s.Lk)("i",{class:"bi bi-image"},null,-1)])))])]),(0,s.Lk)("td",null,[(0,s.Lk)("div",ti,(0,o.v_)(e.name),1),(0,s.Lk)("div",ai,(0,o.v_)(i.truncate(e.description,50)),1)]),(0,s.Lk)("td",null,"â±"+(0,o.v_)(i.formatPrice(e.price)),1),(0,s.Lk)("td",null,[(0,s.Lk)("span",{class:(0,o.C4)(["stock-badge",{"bg-danger":0===e.stock,"bg-warning":e.stock>0&&e.stock<5,"bg-success":e.stock>=5}])},(0,o.v_)(e.stock),3)]),(0,s.Lk)("td",null,[(0,s.Lk)("div",ri,[(0,s.Lk)("button",{class:"btn btn-sm btn-primary",onClick:t=>i.openEditModal(e),"aria-label":"Edit product"},t[35]||(t[35]=[(0,s.Lk)("i",{class:"bi bi-pencil"},null,-1)]),8,si),(0,s.Lk)("button",{class:"btn btn-sm btn-danger",onClick:t=>i.confirmDeleteProduct(e.id),"aria-label":"Delete product"},t[36]||(t[36]=[(0,s.Lk)("i",{class:"bi bi-trash"},null,-1)]),8,oi)])])])))),128))])])])),i.totalPages>1?((0,s.uX)(),(0,s.CE)("div",ii,[(0,s.Lk)("nav",li,[(0,s.Lk)("ul",ni,[(0,s.Lk)("li",{class:(0,o.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,s.Lk)("button",{class:"page-link",onClick:t[2]||(t[2]=e=>i.changePage(i.currentPage-1)),disabled:1===i.currentPage,"aria-label":"Previous page"},t[38]||(t[38]=[(0,s.Lk)("i",{class:"bi bi-chevron-left"},null,-1)]),8,ci)],2),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.getPageNumbers(),(e=>((0,s.uX)(),(0,s.CE)("li",{key:e,class:(0,o.C4)(["page-item",{active:i.currentPage===e}])},["..."===e?((0,s.uX)(),(0,s.CE)("button",di,(0,o.v_)(e),1)):((0,s.uX)(),(0,s.CE)("button",{key:1,class:"page-link",onClick:t=>i.changePage(e)},(0,o.v_)(e),9,ui))],2)))),128)),(0,s.Lk)("li",{class:(0,o.C4)(["page-item",{disabled:i.currentPage===i.totalPages}])},[(0,s.Lk)("button",{class:"page-link",onClick:t[3]||(t[3]=e=>i.changePage(i.currentPage+1)),disabled:i.currentPage===i.totalPages,"aria-label":"Next page"},t[39]||(t[39]=[(0,s.Lk)("i",{class:"bi bi-chevron-right"},null,-1)]),8,mi)],2)])])])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",pi,[t[43]||(t[43]=(0,s.Lk)("div",{class:"card-header"},[(0,s.Lk)("h5",{class:"mb-0"},"Recent Orders")],-1)),(0,s.Lk)("div",gi,[(0,s.Lk)("table",hi,[t[42]||(t[42]=(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"Order ID"),(0,s.Lk)("th",null,"Date"),(0,s.Lk)("th",null,"Customer"),(0,s.Lk)("th",null,"Items"),(0,s.Lk)("th",null,"Status")])],-1)),(0,s.Lk)("tbody",null,[0===i.orders.length?((0,s.uX)(),(0,s.CE)("tr",ki,t[40]||(t[40]=[(0,s.Lk)("td",{colspan:"5",class:"text-center py-4"},"No orders found",-1)]))):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(i.recentOrders,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id},[(0,s.Lk)("td",null,"#"+(0,o.v_)(e.id),1),(0,s.Lk)("td",null,(0,o.v_)(i.formatDate(e.date_ordered)),1),(0,s.Lk)("td",null,(0,o.v_)(e.customer),1),(0,s.Lk)("td",null,(0,o.v_)(e.items?e.items.length:0)+" items",1),t[41]||(t[41]=(0,s.Lk)("td",null,[(0,s.Lk)("span",{class:"badge bg-success"},"Completed")],-1))])))),128))])])])]),(0,s.Lk)("div",bi,[(0,s.Lk)("div",vi,[(0,s.Lk)("div",fi,[(0,s.Lk)("form",{onSubmit:t[15]||(t[15]=(0,r.D$)(((...e)=>i.validateAndSubmitEdit&&i.validateAndSubmitEdit(...e)),["prevent"])),novalidate:""},[(0,s.Lk)("div",yi,[t[44]||(t[44]=(0,s.Lk)("h5",{class:"modal-title",id:"editModalLabel"},[(0,s.Lk)("i",{class:"bi bi-pencil-square me-2"}),(0,s.eW)("Edit Product ")],-1)),(0,s.Lk)("button",{type:"button",class:"btn-close",onClick:t[4]||(t[4]=(...e)=>i.closeEditModal&&i.closeEditModal(...e)),"aria-label":"Close"})]),(0,s.Lk)("div",Li,[(0,s.Lk)("div",wi,[i.editProduct.image?((0,s.uX)(),(0,s.CE)("div",Pi,[(0,s.Lk)("div",Ci,[(0,s.Lk)("img",{src:i.fullImageUrl(i.editProduct.image),alt:i.editProduct.name,class:"img-fluid rounded"},null,8,xi)]),t[45]||(t[45]=(0,s.Lk)("p",{class:"image-caption mt-2"},"Current image",-1))])):(0,s.Q3)("",!0),(0,s.Lk)("div",Si,[t[46]||(t[46]=(0,s.Lk)("label",{class:"form-label fw-medium"},"Product Name",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>i.editProduct.name=e),class:(0,o.C4)(["form-control",{"is-invalid":i.errors.name}]),required:"",onBlur:t[6]||(t[6]=(...e)=>i.validateName&&i.validateName(...e)),placeholder:"Enter product name"},null,34),[[r.Jo,i.editProduct.name]]),i.errors.name?((0,s.uX)(),(0,s.CE)("div",Mi,(0,o.v_)(i.errors.name),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",Ii,[t[47]||(t[47]=(0,s.Lk)("label",{class:"form-label fw-medium"},"Description",-1)),(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":t[7]||(t[7]=e=>i.editProduct.description=e),class:(0,o.C4)(["form-control",{"is-invalid":i.errors.description}]),rows:"3",required:"",onBlur:t[8]||(t[8]=(...e)=>i.validateDescription&&i.validateDescription(...e)),placeholder:"Enter product description"},null,34),[[r.Jo,i.editProduct.description]]),i.errors.description?((0,s.uX)(),(0,s.CE)("div",_i,(0,o.v_)(i.errors.description),1)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",Ei,[(0,s.Lk)("div",Oi,[t[49]||(t[49]=(0,s.Lk)("label",{class:"form-label fw-medium"},"Price (â±)",-1)),(0,s.Lk)("div",Di,[t[48]||(t[48]=(0,s.Lk)("span",{class:"input-group-text"},"â±",-1)),(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":t[9]||(t[9]=e=>i.editProduct.price=e),class:(0,o.C4)(["form-control",{"is-invalid":i.errors.price}]),min:"0",step:"0.01",required:"",onBlur:t[10]||(t[10]=(...e)=>i.validatePrice&&i.validatePrice(...e)),placeholder:"0.00"},null,34),[[r.Jo,i.editProduct.price,void 0,{number:!0}]]),i.errors.price?((0,s.uX)(),(0,s.CE)("div",Ti,(0,o.v_)(i.errors.price),1)):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",Ai,[t[51]||(t[51]=(0,s.Lk)("label",{class:"form-label fw-medium"},"Stock",-1)),(0,s.Lk)("div",Fi,[t[50]||(t[50]=(0,s.Lk)("span",{class:"input-group-text"},[(0,s.Lk)("i",{class:"bi bi-box-seam"})],-1)),(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":t[11]||(t[11]=e=>i.editProduct.stock=e),class:(0,o.C4)(["form-control",{"is-invalid":i.errors.stock}]),min:"0",required:"",onBlur:t[12]||(t[12]=(...e)=>i.validateStock&&i.validateStock(...e)),placeholder:"0"},null,34),[[r.Jo,i.editProduct.stock,void 0,{number:!0}]]),i.errors.stock?((0,s.uX)(),(0,s.CE)("div",Wi,(0,o.v_)(i.errors.stock),1)):(0,s.Q3)("",!0)])])]),(0,s.Lk)("div",Ri,[t[53]||(t[53]=(0,s.Lk)("label",{class:"form-label fw-medium"},"Product Image",-1)),(0,s.Lk)("div",Xi,[(0,s.Lk)("input",{type:"file",id:"productImage",onChange:t[13]||(t[13]=(...e)=>i.handleEditImage&&i.handleEditImage(...e)),class:"form-control",accept:"image/*"},null,32),t[52]||(t[52]=(0,s.Lk)("label",{for:"productImage",class:"file-upload-label"},[(0,s.Lk)("i",{class:"bi bi-cloud-arrow-up me-2"}),(0,s.eW)(" Choose a new image ")],-1))]),t[54]||(t[54]=(0,s.Lk)("small",{class:"text-muted d-block mt-1"}," Recommended size: 800x800px, max 2MB ",-1))])])]),(0,s.Lk)("div",qi,[(0,s.Lk)("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[14]||(t[14]=(...e)=>i.closeEditModal&&i.closeEditModal(...e))},t[55]||(t[55]=[(0,s.Lk)("i",{class:"bi bi-x-circle me-1"},null,-1),(0,s.eW)("Cancel ")])),(0,s.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:i.isSubmitting},[i.isSubmitting?((0,s.uX)(),(0,s.CE)("span",Ni)):((0,s.uX)(),(0,s.CE)("i",Bi)),(0,s.eW)(" "+(0,o.v_)(i.isSubmitting?"Saving...":"Save Changes"),1)],8,Hi)])],32)])])],512),(0,s.Lk)("div",Ki,[(0,s.Lk)("div",Ji,[(0,s.Lk)("div",ji,[(0,s.Lk)("div",Qi,[t[56]||(t[56]=(0,s.Lk)("h5",{class:"modal-title",id:"confirmModalLabel"},"Confirm Deletion",-1)),(0,s.Lk)("button",{type:"button",class:"btn-close",onClick:t[16]||(t[16]=(...e)=>i.hideConfirmModal&&i.hideConfirmModal(...e)),"aria-label":"Close"})]),t[57]||(t[57]=(0,s.Lk)("div",{class:"modal-body"},[(0,s.Lk)("i",{class:"bi bi-exclamation-triangle-fill text-danger mb-3",style:{"font-size":"2rem"}}),(0,s.Lk)("p",null,"Are you sure you want to delete this product? This action cannot be undone.")],-1)),(0,s.Lk)("div",Ui,[(0,s.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[17]||(t[17]=(...e)=>i.hideConfirmModal&&i.hideConfirmModal(...e))},"Cancel"),(0,s.Lk)("button",{type:"button",class:"btn btn-danger",onClick:t[18]||(t[18]=(...e)=>i.deleteProduct&&i.deleteProduct(...e)),disabled:i.isDeleting},[i.isDeleting?((0,s.uX)(),(0,s.CE)("span",zi)):((0,s.uX)(),(0,s.CE)("i",$i)),(0,s.eW)(" "+(0,o.v_)(i.isDeleting?"Deleting...":"Delete"),1)],8,Zi)])])])],512)])}var Yi={setup(){const e=(0,_.KR)([]),t=(0,_.KR)(1),a=(0,_.KR)(5),r=(0,_.Kh)({id:null,name:"",description:"",price:0,stock:0,image:null}),o=(0,_.KR)(null),i=(0,_.KR)(null),l=(0,_.KR)(null),n=(0,_.KR)([]),c=(0,_.KR)(""),d=(0,_.KR)(null),u=(0,_.KR)(null),m=(0,_.KR)(null),p=(0,_.KR)(!0),g=(0,_.KR)(!1),h=(0,_.KR)(!1),{success:k,error:b}=ye(),v=(0,_.Kh)({name:"",description:"",price:"",stock:""}),f=(0,s.EW)((()=>[...n.value].sort(((e,t)=>t.id-e.id)).slice(0,5))),y=()=>r.name.trim()?(v.name="",!0):(v.name="Product name is required",!1),L=()=>r.description.trim()?(v.description="",!0):(v.description="Product description is required",!1),w=()=>null===r.price||void 0===r.price?(v.price="Price is required",!1):r.price<0?(v.price="Price cannot be negative",!1):(v.price="",!0),P=()=>null===r.stock||void 0===r.stock?(v.stock="Stock quantity is required",!1):r.stock<0?(v.stock="Stock cannot be negative",!1):(v.stock="",!0),C=()=>{const e=y(),t=L(),a=w(),r=P();return e&&t&&a&&r},x=(0,s.EW)((()=>{let t=[...e.value];if(c.value){const e=c.value.toLowerCase();t=t.filter((t=>t.name.toLowerCase().includes(e)||t.description.toLowerCase().includes(e)))}return t})),S=(0,s.EW)((()=>Math.ceil(x.value.length/a.value))),M=(0,s.EW)((()=>{const e=(t.value-1)*a.value;return x.value.slice(e,e+a.value)})),I=(0,s.EW)((()=>e.value.filter((e=>e.stock<5)).length)),E=e=>e?e.startsWith("http")?e:`http://127.0.0.1:8000${e.startsWith("/")?e:"/media/"+e}`:"",O=e=>parseFloat(e).toFixed(2),D=(e,t)=>e?e.length>t?e.substring(0,t)+"...":e:"",T=e=>{const t={year:"numeric",month:"short",day:"numeric"};return new Date(e).toLocaleDateString(void 0,t)},A=e=>{e>=1&&e<=S.value&&(t.value=e)},F=()=>{const e=[],a=5;if(S.value<=a)for(let t=1;t<=S.value;t++)e.push(t);else{e.push(1);let a=Math.max(2,t.value-1),r=Math.min(S.value-1,a+2);r===S.value-1&&(a=Math.max(2,r-2)),a>2&&e.push("...");for(let t=a;t<=r;t++)e.push(t);r<S.value-1&&e.push("..."),e.push(S.value)}return e},W=()=>{c.value="",t.value=1},R=async()=>{p.value=!0;try{await de.waitForInitialization(),await new Promise((e=>setTimeout(e,100)));const t=await ne.get("products/");e.value=t.data}catch(t){b("Failed to load products."),console.error(t)}finally{p.value=!1}},X=async()=>{try{await de.waitForInitialization(),await new Promise((e=>setTimeout(e,100)));const e=await ne.get("orders/");n.value=e.data}catch(e){b("Failed to load orders."),console.error(e)}},q=e=>{Object.keys(v).forEach((e=>{v[e]=""})),r.id=e.id,r.name=e.name,r.description=e.description,r.price=e.price,r.stock=e.stock,r.image=e.image,o.value=null,i.value?i.value.show():d.value&&(i.value=new Se.aF(d.value),i.value.show())},H=()=>{i.value&&i.value.hide()},N=e=>{o.value=e.target.files[0]},B=()=>{C()?K():b("Please fix the errors in the form")},K=async()=>{g.value=!0;const e=new FormData;e.append("name",r.name),e.append("description",r.description),e.append("price",r.price),e.append("stock",r.stock),o.value&&e.append("image",o.value);try{await ne.patch(`products/${r.id}/`,e,{headers:{"Content-Type":"multipart/form-data"}}),k("Product updated successfully!"),R(),H()}catch(t){if(console.error("Error updating product:",t),b("Failed to update product."),t.response&&t.response.data){const e=t.response.data;Object.keys(e).forEach((t=>{t in v&&(v[t]=e[t][0])}))}}finally{g.value=!1}},J=e=>{m.value=e,l.value?l.value.show():u.value&&(l.value=new Se.aF(u.value),l.value.show())},j=()=>{l.value&&l.value.hide()},Q=async()=>{if(m.value){h.value=!0;try{await ne.delete(`products/${m.value}/`),k("Product deleted successfully."),R(),j()}catch(e){console.error("Error deleting product:",e),e.response&&e.response.data&&e.response.data.error?b(e.response.data.error):b("Cannot delete product. It may be in an order.")}finally{h.value=!1}}};return(0,s.sV)((async()=>{d.value&&(i.value=new Se.aF(d.value)),u.value&&(l.value=new Se.aF(u.value),l.value=new Se.aF(u.value));const e=localStorage.getItem("access"),t="true"===localStorage.getItem("is_staff");if(!e||!t)return b("Access denied. Staff only."),void(window.location.href="/login");await de.waitForInitialization(),await R(),await X()})),(0,s.wB)((()=>de.isLoggedIn),(async e=>{e&&de.isInitialized&&de.isStaff&&(await R(),await X())})),{products:e,filteredProducts:x,paginatedProducts:M,currentPage:t,totalPages:S,editProduct:r,editModal:d,confirmModal:u,orders:n,recentOrders:f,searchQuery:c,lowStockCount:I,isLoading:p,isSubmitting:g,isDeleting:h,errors:v,fullImageUrl:E,formatPrice:O,truncate:D,formatDate:T,changePage:A,getPageNumbers:F,resetSearch:W,openEditModal:q,closeEditModal:H,handleEditImage:N,validateAndSubmitEdit:B,confirmDeleteProduct:J,hideConfirmModal:j,deleteProduct:Q,validateName:y,validateDescription:L,validatePrice:w,validateStock:P}}};const Gi=(0,Pe.A)(Yi,[["render",Vi],["__scopeId","data-v-4eabad00"]]);var el=Gi;const tl={class:"container"},al={class:"admin-header mb-3 mb-md-4"},rl={class:"admin-actions ms-auto"},sl={class:"row"},ol={class:"col-12 col-lg-8 mx-auto"},il={class:"card"},ll={class:"card-body p-3 p-md-4"},nl={class:"mb-3"},cl={class:"mb-3"},dl={class:"row g-2 mb-3"},ul={class:"col-12 col-md-6"},ml={class:"input-group"},pl={class:"col-12 col-md-6"},gl={class:"mb-4"},hl={key:0,class:"image-preview mt-3"},kl=["src"],bl={class:"d-grid"},vl=["disabled"],fl={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},yl={key:1,class:"bi bi-plus-circle me-1 me-md-2"};function Ll(e,t,a,i,l,n){const c=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",tl,[(0,s.Lk)("div",al,[t[7]||(t[7]=(0,s.Lk)("h2",{class:"section-title"},[(0,s.Lk)("i",{class:"bi bi-plus-circle me-2"}),(0,s.eW)("Add New Product ")],-1)),(0,s.Lk)("div",rl,[(0,s.bF)(c,{to:"/monitor-products",class:"btn btn-outline-primary btn-back"},{default:(0,s.k6)((()=>t[6]||(t[6]=[(0,s.Lk)("i",{class:"bi bi-arrow-left me-1 me-md-2"},null,-1),(0,s.Lk)("span",{class:"btn-text"},"Back to Products",-1)]))),_:1})])]),(0,s.Lk)("div",sl,[(0,s.Lk)("div",ol,[(0,s.Lk)("div",il,[(0,s.Lk)("div",ll,[(0,s.Lk)("form",{onSubmit:t[5]||(t[5]=(0,r.D$)(((...e)=>n.submitProduct&&n.submitProduct(...e)),["prevent"])),enctype:"multipart/form-data"},[(0,s.Lk)("div",nl,[t[8]||(t[8]=(0,s.Lk)("label",{class:"form-label"},"Product Name",-1)),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.product.name=e),class:"form-control form-control-md",placeholder:"Enter product name",required:""},null,512),[[r.Jo,l.product.name]])]),(0,s.Lk)("div",cl,[t[9]||(t[9]=(0,s.Lk)("label",{class:"form-label"},"Description",-1)),(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.product.description=e),class:"form-control form-control-md",placeholder:"Enter product description",rows:"4",required:""},null,512),[[r.Jo,l.product.description]])]),(0,s.Lk)("div",dl,[(0,s.Lk)("div",ul,[t[11]||(t[11]=(0,s.Lk)("label",{class:"form-label"},"Price (â±)",-1)),(0,s.Lk)("div",ml,[t[10]||(t[10]=(0,s.Lk)("span",{class:"input-group-text"},"â±",-1)),(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=e=>l.product.price=e),class:"form-control form-control-md",placeholder:"0.00",min:"0",step:"0.01",required:""},null,512),[[r.Jo,l.product.price,void 0,{number:!0}]])])]),(0,s.Lk)("div",pl,[t[12]||(t[12]=(0,s.Lk)("label",{class:"form-label"},"Stock Quantity",-1)),(0,s.bo)((0,s.Lk)("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=e=>l.product.stock=e),class:"form-control form-control-md",placeholder:"0",min:"0",required:""},null,512),[[r.Jo,l.product.stock,void 0,{number:!0}]])])]),(0,s.Lk)("div",gl,[t[13]||(t[13]=(0,s.Lk)("label",{class:"form-label"},"Product Image",-1)),(0,s.Lk)("input",{type:"file",onChange:t[4]||(t[4]=(...e)=>n.handleImage&&n.handleImage(...e)),class:"form-control form-control-md",accept:"image/*"},null,32),l.imagePreview?((0,s.uX)(),(0,s.CE)("div",hl,[(0,s.Lk)("img",{src:l.imagePreview,alt:"Preview",class:"img-thumbnail"},null,8,kl)])):(0,s.Q3)("",!0)]),(0,s.Lk)("div",bl,[(0,s.Lk)("button",{type:"submit",class:"btn btn-primary btn-md btn-lg btn-add",disabled:l.isSubmitting},[l.isSubmitting?((0,s.uX)(),(0,s.CE)("span",fl)):((0,s.uX)(),(0,s.CE)("i",yl)),(0,s.eW)(" "+(0,o.v_)(l.isSubmitting?"Adding...":"Add Product"),1)],8,vl)])],32)])])])])])}var wl={data(){return{product:{name:"",description:"",price:0,stock:0},image:null,imagePreview:null,isSubmitting:!1}},methods:{handleImage(e){if(this.image=e.target.files[0],this.image){const e=new FileReader;e.onload=e=>{this.imagePreview=e.target.result},e.readAsDataURL(this.image)}else this.imagePreview=null},async submitProduct(){this.isSubmitting=!0;const e=new FormData;for(let a in this.product)e.append(a,this.product[a]);this.image&&e.append("image",this.image);try{await ne.post("products/",e,{headers:{"Content-Type":"multipart/form-data"}}),this.showNotification("success","Product added successfully!"),this.product={name:"",description:"",price:0,stock:0},this.image=null,this.imagePreview=null,setTimeout((()=>{this.$router.push("/monitor-products")}),1500)}catch(t){this.showNotification("error","Failed to add product."),console.error(t)}finally{this.isSubmitting=!1}},showNotification(e,t){const a=document.createElement("div");a.className=`notification notification-${e}`;let r="bi-info-circle";"success"===e&&(r="bi-check-circle"),"warning"===e&&(r="bi-exclamation-triangle"),"error"===e&&(r="bi-x-circle"),a.innerHTML=`<i class="bi ${r}"></i> ${t}`,document.body.appendChild(a),setTimeout((()=>{a.classList.add("show")}),10),setTimeout((()=>{a.classList.remove("show"),setTimeout((()=>{document.body.removeChild(a)}),300)}),3e3)}},mounted(){const e=localStorage.getItem("access"),t="true"===localStorage.getItem("is_staff");e&&t||(this.showNotification("error","Access denied. Staff only."),this.$router.push("/login"))}};const Pl=(0,Pe.A)(wl,[["render",Ll],["__scopeId","data-v-b33398bc"]]);var Cl=Pl;const xl=[{path:"/",redirect:"/login"},{path:"/login",component:Qe},{path:"/register",component:Lt},{path:"/products",component:Ct},{path:"/cart",component:Sa},{path:"/orders",component:Ur},{path:"/monitor",component:Io},{path:"/monitor-products",component:el},{path:"/add-product",component:Cl}],Sl=(0,ue.aE)({history:(0,ue.Bt)(),routes:xl});Sl.beforeEach(((e,t,a)=>{const r=!!localStorage.getItem("access"),s="true"===localStorage.getItem("is_staff"),o=["/login","/register"],i=["/monitor"],l=["/products","/cart","/orders"];return r||o.includes(e.path)?r&&o.includes(e.path)?a(s?"/monitor":"/products"):r&&s&&l.includes(e.path)?a("/monitor"):r&&!s&&i.includes(e.path)?a("/products"):void a():a("/login")}));var Ml=Sl;const Il=window.location.hostname.includes("github.io")||!0;Il&&(console.log("ð Running in demo mode with comprehensive mock data"),T(),z(),console.log("ð Mock data initialized:"),console.log("- Products:",JSON.parse(localStorage.getItem("adminMockProducts")).length),console.log("- Orders:",JSON.parse(localStorage.getItem("adminMockOrders")).length),console.log("- Demo Credentials:"),console.log('  Admin: username="admin", password="admin"'),console.log('  Customer: username="user", password="user"'));const _l=(0,r.Ef)(_e);_l.use(Ml),_l.provide("auth",de),_l.mount("#app")}},t={};function a(r){var s=t[r];if(void 0!==s)return s.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,a),o.exports}a.m=e,function(){var e=[];a.O=function(t,r,s,o){if(!r){var i=1/0;for(d=0;d<e.length;d++){r=e[d][0],s=e[d][1],o=e[d][2];for(var l=!0,n=0;n<r.length;n++)(!1&o||i>=o)&&Object.keys(a.O).every((function(e){return a.O[e](r[n])}))?r.splice(n--,1):(l=!1,o<i&&(i=o));if(l){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[r,s,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,r){var s,o,i=r[0],l=r[1],n=r[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(s in l)a.o(l,s)&&(a.m[s]=l[s]);if(n)var d=n(a)}for(t&&t(r);c<i.length;c++)o=i[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(d)},r=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[504],(function(){return a(8862)}));r=a.O(r)})();
//# sourceMappingURL=app.2cd802fc.js.map