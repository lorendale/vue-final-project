(function(){"use strict";var e={8193:function(e,t,a){var s=a(5130),r=a(6768),o=a(4232);const i={class:"app-container"},l={class:"navbar navbar-expand-lg navbar-dark"},n={class:"container"},c={class:"collapse navbar-collapse",id:"navbarContent",ref:"navbarCollapse"},d={class:"navbar-nav me-auto mb-2 mb-lg-0"},u={key:0,class:"nav-item"},m={key:1,class:"nav-item"},p={key:2,class:"nav-item"},k={key:3,class:"nav-item"},b={key:4,class:"nav-item"},v={key:0,class:"cart-badge"},g={key:5,class:"nav-item"},h={class:"navbar-nav ms-auto"},f={key:0,class:"nav-item"},L={key:1,class:"nav-item d-flex align-items-center user-nav-item"},y={class:"user-info d-flex align-items-center"},w={class:"main-content"},C={class:"footer mt-auto py-3"},P={class:"container"},x={class:"row"},E={class:"col-md-4 mb-3 mb-md-0"},S={class:"footer-links"};function _(e,t,a,_,M,I){const O=(0,r.g2)("router-link"),D=(0,r.g2)("router-view"),T=(0,r.g2)("ToastNotification");return(0,r.uX)(),(0,r.CE)("div",i,[(0,r.Lk)("nav",l,[(0,r.Lk)("div",n,[(0,r.bF)(O,{class:"navbar-brand",to:_.auth&&_.auth.isLoggedIn?_.auth.isStaff?"/monitor":"/products":"/login"},{default:(0,r.k6)((()=>t[2]||(t[2]=[(0,r.Lk)("i",{class:"bi bi-bag-heart-fill me-2"},null,-1),(0,r.eW)("Bluora ")]))),_:1},8,["to"]),(0,r.Lk)("button",{class:"navbar-toggler",type:"button",onClick:t[0]||(t[0]=(...e)=>_.toggleNavbar&&_.toggleNavbar(...e)),"aria-controls":"navbarContent","aria-expanded":"false","aria-label":"Toggle navigation"},t[3]||(t[3]=[(0,r.Lk)("span",{class:"navbar-toggler-icon"},null,-1)])),(0,r.Lk)("div",c,[(0,r.Lk)("ul",d,[_.auth.isLoggedIn&&_.auth.isStaff?((0,r.uX)(),(0,r.CE)("li",u,[(0,r.bF)(O,{class:"nav-link",to:"/monitor-products",onClick:_.closeNavbar},{default:(0,r.k6)((()=>t[4]||(t[4]=[(0,r.Lk)("i",{class:"bi bi-box-seam me-1"},null,-1),(0,r.eW)(" Products ")]))),_:1},8,["onClick"])])):(0,r.Q3)("",!0),_.auth.isLoggedIn&&_.auth.isStaff?((0,r.uX)(),(0,r.CE)("li",m,[(0,r.bF)(O,{class:"nav-link",to:"/add-product",onClick:_.closeNavbar},{default:(0,r.k6)((()=>t[5]||(t[5]=[(0,r.Lk)("i",{class:"bi bi-plus-circle me-1"},null,-1),(0,r.eW)(" Add Product ")]))),_:1},8,["onClick"])])):(0,r.Q3)("",!0),_.auth.isLoggedIn&&_.auth.isStaff?((0,r.uX)(),(0,r.CE)("li",p,[(0,r.bF)(O,{class:"nav-link",to:"/monitor",onClick:_.closeNavbar},{default:(0,r.k6)((()=>t[6]||(t[6]=[(0,r.Lk)("i",{class:"bi bi-clipboard-check me-1"},null,-1),(0,r.eW)(" Orders ")]))),_:1},8,["onClick"])])):(0,r.Q3)("",!0),_.auth.isLoggedIn&&!_.auth.isStaff?((0,r.uX)(),(0,r.CE)("li",k,[(0,r.bF)(O,{class:"nav-link",to:"/products",onClick:_.closeNavbar},{default:(0,r.k6)((()=>t[7]||(t[7]=[(0,r.Lk)("i",{class:"bi bi-shop me-1"},null,-1),(0,r.eW)(" Shop ")]))),_:1},8,["onClick"])])):(0,r.Q3)("",!0),_.auth.isLoggedIn&&!_.auth.isStaff?((0,r.uX)(),(0,r.CE)("li",b,[(0,r.bF)(O,{class:"nav-link position-relative",to:"/cart",onClick:_.closeNavbar},{default:(0,r.k6)((()=>[t[8]||(t[8]=(0,r.Lk)("i",{class:"bi bi-cart me-1"},null,-1)),t[9]||(t[9]=(0,r.eW)(" Cart ")),_.cartCount>0?((0,r.uX)(),(0,r.CE)("span",v,(0,o.v_)(_.cartCount),1)):(0,r.Q3)("",!0)])),_:1},8,["onClick"])])):(0,r.Q3)("",!0),_.auth.isLoggedIn&&!_.auth.isStaff?((0,r.uX)(),(0,r.CE)("li",g,[(0,r.bF)(O,{class:"nav-link",to:"/orders",onClick:_.closeNavbar},{default:(0,r.k6)((()=>t[10]||(t[10]=[(0,r.Lk)("i",{class:"bi bi-clock-history me-1"},null,-1),(0,r.eW)(" Orders ")]))),_:1},8,["onClick"])])):(0,r.Q3)("",!0)]),(0,r.Lk)("ul",h,[_.auth.isLoggedIn?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("li",f,["register"===e.$route.name?((0,r.uX)(),(0,r.Wv)(O,{key:0,class:"nav-link",to:"/login",onClick:_.closeNavbar},{default:(0,r.k6)((()=>t[11]||(t[11]=[(0,r.Lk)("i",{class:"bi bi-box-arrow-in-right me-1"},null,-1),(0,r.eW)(" Login ")]))),_:1},8,["onClick"])):((0,r.uX)(),(0,r.Wv)(O,{key:1,class:"nav-link",to:"/register",onClick:_.closeNavbar},{default:(0,r.k6)((()=>t[12]||(t[12]=[(0,r.Lk)("i",{class:"bi bi-person-plus me-1"},null,-1),(0,r.eW)(" Register ")]))),_:1},8,["onClick"]))])),_.auth.isLoggedIn?((0,r.uX)(),(0,r.CE)("li",L,[(0,r.Lk)("div",y,[t[13]||(t[13]=(0,r.Lk)("i",{class:"bi bi-person-circle me-1"},null,-1)),(0,r.Lk)("span",null,(0,o.v_)(_.username),1)]),(0,r.Lk)("button",{class:"btn btn-outline-light btn-sm ms-2",onClick:t[1]||(t[1]=(...e)=>_.logout&&_.logout(...e))},t[14]||(t[14]=[(0,r.Lk)("i",{class:"bi bi-box-arrow-right me-1"},null,-1),(0,r.eW)(" Logout ")]))])):(0,r.Q3)("",!0)])],512)])]),(0,r.Lk)("main",w,[(0,r.bF)(D,null,{default:(0,r.k6)((({Component:e})=>[(0,r.bF)(s.eB,{name:"fade",mode:"out-in"},{default:(0,r.k6)((()=>[((0,r.uX)(),(0,r.Wv)((0,r.$y)(e)))])),_:2},1024)])),_:1})]),(0,r.Lk)("footer",C,[(0,r.Lk)("div",P,[(0,r.Lk)("div",x,[t[19]||(t[19]=(0,r.Lk)("div",{class:"col-md-4 mb-3 mb-md-0"},[(0,r.Lk)("h5",{class:"footer-heading"},"Bluora"),(0,r.Lk)("p",{class:"footer-text"},"Your one-stop shop for all your needs. Quality products at affordable prices.")],-1)),(0,r.Lk)("div",E,[t[18]||(t[18]=(0,r.Lk)("h5",{class:"footer-heading"},"Quick Links",-1)),(0,r.Lk)("ul",S,[(0,r.Lk)("li",null,[(0,r.bF)(O,{to:"/products"},{default:(0,r.k6)((()=>t[15]||(t[15]=[(0,r.eW)("Products")]))),_:1})]),(0,r.Lk)("li",null,[(0,r.bF)(O,{to:"/cart"},{default:(0,r.k6)((()=>t[16]||(t[16]=[(0,r.eW)("Cart")]))),_:1})]),(0,r.Lk)("li",null,[(0,r.bF)(O,{to:"/orders"},{default:(0,r.k6)((()=>t[17]||(t[17]=[(0,r.eW)("Orders")]))),_:1})])])]),t[20]||(t[20]=(0,r.Fv)('<div class="col-md-4"><h5 class="footer-heading">Contact Us</h5><p class="footer-text"><i class="bi bi-envelope me-2"></i> support@bluora.com<br><i class="bi bi-telephone me-2"></i> +1 (123) 456-7890<br><i class="bi bi-geo-alt me-2"></i> 123 E-Commerce St, Digital City </p></div>',1))]),t[21]||(t[21]=(0,r.Fv)('<div class="footer-bottom"><p class="mb-0">Â© 2025 Bluora. All rights reserved.</p><div class="social-icons"><a href="#" class="social-icon"><i class="bi bi-facebook"></i></a><a href="#" class="social-icon"><i class="bi bi-twitter"></i></a><a href="#" class="social-icon"><i class="bi bi-instagram"></i></a></div></div>',1))])]),(0,r.bF)(T)])}a(4114);var M=a(144),I=a(4373);a(8111),a(2489),a(116),a(7588),a(1701);const O=()=>[{id:1,name:"Premium Wireless Headphones",description:"Experience crystal-clear sound with our premium wireless headphones. Features noise cancellation and 20-hour battery life.",price:1299.99,stock:15,image:"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8cHJvZHVjdHxlbnwwfHwwfHx8MA%3D%3D"},{id:2,name:"Smart Fitness Watch",description:"Track your fitness goals with this advanced smartwatch. Monitors heart rate, steps, sleep quality and more.",price:899.5,stock:8,image:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTB8fHByb2R1Y3R8ZW58MHx8MHx8fDA%3D"},{id:3,name:"Ultra HD Smart TV",description:"Transform your living room with this 55-inch Ultra HD Smart TV. Features AI-powered picture quality and immersive sound.",price:3499.99,stock:5,image:"https://images.unsplash.com/photo-1567690187548-f07b1d7bf5a9?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8OHx8dHZ8ZW58MHx8MHx8fDA%3D"},{id:4,name:"Professional Camera Kit",description:"Capture stunning photos and videos with this professional-grade camera kit. Includes multiple lenses and accessories.",price:4999,stock:3,image:"https://images.unsplash.com/photo-1526170375885-4d8ecf77b99f?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8cHJvZHVjdHxlbnwwfHwwfHx8MA%3D%3D"},{id:5,name:"Ergonomic Office Chair",description:"Work in comfort with this ergonomic office chair. Features adjustable height, lumbar support, and breathable mesh back.",price:1299,stock:12,image:"https://images.unsplash.com/photo-1596162954151-cdcb4c0f70a8?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTJ8fGNoYWlyfGVufDB8fDB8fHww"},{id:6,name:"Portable Bluetooth Speaker",description:"Take your music anywhere with this waterproof portable Bluetooth speaker. Features 12-hour battery life and deep bass.",price:599.99,stock:20,image:"https://images.unsplash.com/photo-1608043152269-423dbba4e7e1?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8Ymx1ZXRvb3RoJTIwc3BlYWtlcnxlbnwwfHwwfHx8MA%3D%3D"},{id:7,name:"Gaming Laptop",description:"Experience lag-free gaming with this high-performance gaming laptop. Features dedicated graphics card and RGB keyboard.",price:5999,stock:7,image:"https://images.unsplash.com/photo-1603302576837-37561b2e2302?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTh8fGxhcHRvcHxlbnwwfHwwfHx8MA%3D%3D"},{id:8,name:"Coffee Maker Deluxe",description:"Brew perfect coffee every time with this programmable coffee maker. Features multiple brewing options and built-in grinder.",price:799.5,stock:9,image:"https://images.unsplash.com/photo-1570286424717-86d8a0082d0b?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTB8fGNvZmZlZSUyMG1ha2VyfGVufDB8fDB8fHww"},{id:9,name:"Smartphone Pro Max",description:"Stay connected with our latest smartphone. Features high-resolution camera, all-day battery life, and fast processor.",price:4299,stock:0,image:"https://images.unsplash.com/photo-1598327105666-5b89351aff97?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTZ8fHNtYXJ0cGhvbmV8ZW58MHx8MHx8fDA%3D"},{id:10,name:"Wireless Charging Pad",description:"Charge your devices without the hassle of cables. Compatible with all Qi-enabled smartphones and accessories.",price:299.99,stock:25,image:"https://images.unsplash.com/photo-1622445275463-afa2ab738c34?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8Y2hhcmdlcnxlbnwwfHwwfHx8MA%3D%3D"},{id:11,name:"Smart Home Hub",description:"Control all your smart home devices from one central hub. Compatible with most popular smart home brands.",price:899,stock:4,image:"https://images.unsplash.com/photo-1558002038-1055907df827?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8c21hcnQlMjBob21lfGVufDB8fDB8fHww"},{id:12,name:"Mechanical Keyboard",description:"Enhance your typing experience with this mechanical keyboard. Features customizable RGB lighting and tactile feedback.",price:499.5,stock:15,image:"https://images.unsplash.com/photo-1618384887929-16ec33fab9ef?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8a2V5Ym9hcmR8ZW58MHx8MHx8fDA%3D"}],D=e=>{const t=[{id:1,name:"John Doe"},{id:2,name:"Jane Smith"},{id:3,name:"Robert Johnson"}],a=()=>{const e=new Date,t=Math.floor(30*Math.random());return e.setDate(e.getDate()-t),e.toISOString()},s=t=>{const a=Math.floor(4*Math.random())+1,s=[];for(let r=0;r<a;r++){const a=e[Math.floor(Math.random()*e.length)],o=s.find((e=>e.product===a.id));o?o.quantity+=Math.floor(2*Math.random())+1:s.push({id:100*t+r,order:t,product:a.id,quantity:Math.floor(3*Math.random())+1})}return s},r=[];for(let o=1;o<=10;o++){const e=t[Math.floor(Math.random()*t.length)];r.push({id:o,customer:e.name,date_ordered:a(),complete:!0,items:s(o)})}return r},T=()=>{if(!localStorage.getItem("mockProducts")){const e=O();localStorage.setItem("mockProducts",JSON.stringify(e))}if(!localStorage.getItem("mockOrders")){const e=JSON.parse(localStorage.getItem("mockProducts")),t=D(e);localStorage.setItem("mockOrders",JSON.stringify(t))}return{products:JSON.parse(localStorage.getItem("mockProducts")),orders:JSON.parse(localStorage.getItem("mockOrders"))}},X=()=>JSON.parse(localStorage.getItem("mockProducts"))||[],F=()=>JSON.parse(localStorage.getItem("mockOrders"))||[],W=e=>{const t=X(),a={...e,id:t.length>0?Math.max(...t.map((e=>e.id)))+1:1};return t.push(a),localStorage.setItem("mockProducts",JSON.stringify(t)),a},A=(e,t)=>{const a=X(),s=a.findIndex((t=>t.id===e));return-1!==s?(a[s]={...a[s],...t},localStorage.setItem("mockProducts",JSON.stringify(a)),a[s]):null},R=e=>{const t=X(),a=t.filter((t=>t.id!==e));return a.length<t.length&&(localStorage.setItem("mockProducts",JSON.stringify(a)),!0)},q=e=>{const t=F(),a={...e,id:t.length>0?Math.max(...t.map((e=>e.id)))+1:1,date_ordered:(new Date).toISOString(),complete:!0};if(t.push(a),localStorage.setItem("mockOrders",JSON.stringify(t)),a.items&&a.items.length>0){const e=X();a.items.forEach((t=>{const a=e.findIndex((e=>e.id===t.product));-1!==a&&(e[a].stock=Math.max(0,e[a].stock-t.quantity))})),localStorage.setItem("mockProducts",JSON.stringify(e))}return a};var Q={initializeMockData:T,getMockProducts:X,getMockOrders:F,addMockProduct:W,updateMockProduct:A,deleteMockProduct:R,addMockOrder:q};Q.initializeMockData();const K=(e=300)=>new Promise((t=>setTimeout(t,e))),N={getProducts:async()=>(await K(),{data:Q.getMockProducts()}),getProduct:async e=>{await K();const t=Q.getMockProducts(),a=t.find((t=>t.id===e));return a?{data:a}:Promise.reject({response:{status:404,data:{error:"Product not found"}}})},createProduct:async e=>{await K(500);const t=Q.addMockProduct(e);return{data:t}},updateProduct:async(e,t)=>{await K(500);const a=Q.updateMockProduct(e,t);return a?{data:a}:Promise.reject({response:{status:404,data:{error:"Product not found"}}})},deleteProduct:async e=>{await K(500);const t=Q.deleteMockProduct(e);return t?{data:{success:!0}}:Promise.reject({response:{status:404,data:{error:"Product not found"}}})},getOrders:async()=>(await K(),{data:Q.getMockOrders()}),createOrder:async e=>{await K(800);const t=Q.addMockOrder(e);return{data:t}},login:async e=>(await K(1e3),"admin"===e.username&&"admin"===e.password?{data:{access:"mock-token-admin",refresh:"mock-refresh-token",user:{id:1,username:"admin",is_staff:!0}}}:"user"===e.username&&"user"===e.password?{data:{access:"mock-token-user",refresh:"mock-refresh-token",user:{id:2,username:"user",is_staff:!1}}}:Promise.reject({response:{status:401,data:{detail:"Invalid username or password"}}})),register:async e=>(await K(1e3),"admin"===e.username||"user"===e.username?Promise.reject({response:{status:400,data:{username:["This username is already taken."]}}}):{data:{id:3,username:e.username,is_staff:!1}}),getUser:async()=>{await K();const e="true"===localStorage.getItem("is_staff"),t=localStorage.getItem("user_id")||(e?"1":"2"),a=localStorage.getItem("username")||(e?"admin":"user");return{data:{id:parseInt(t),username:a,is_staff:e}}},request:async e=>{const{method:t="get",url:a,data:s}=e,r=a.split("/").filter(Boolean),o=r[0],i=r[1]?parseInt(r[1]):null;switch(o){case"products":if("get"===t)return i?N.getProduct(i):N.getProducts();if("post"===t)return N.createProduct(s);if("put"===t||"patch"===t)return N.updateProduct(i,s);if("delete"===t)return N.deleteProduct(i);break;case"orders":if("get"===t)return N.getOrders();if("post"===t)return N.createOrder(s);break;case"token":if("post"===t)return N.login(s);break;case"register":if("post"===t)return N.register(s);break;case"user":if("get"===t)return N.getUser();break;case"order-items":if("post"===t)return await K(300),{data:{...s,id:Math.floor(1e3*Math.random())}};break}return Promise.reject({response:{status:404,data:{error:"Endpoint not found"}}})}},U=new Proxy(N,{get:(e,t)=>["get","post","put","patch","delete"].includes(t)?(a,s,r={})=>e.request({method:t,url:a,data:s,...r}):e[t]});var B=U;const H=window.location.hostname.includes("github.io")||!0,$=H?B:I.A.create({baseURL:"http://127.0.0.1:8000/api/"});!H&&$.interceptors&&$.interceptors.request.use((e=>{const t=localStorage.getItem("access");return t&&(e.headers.Authorization=`Bearer ${t}`),e}));var V=$;const j=(0,M.Kh)({isLoggedIn:!1,isStaff:!1,init(){this.isLoggedIn=!!localStorage.getItem("access"),this.isStaff="true"===localStorage.getItem("is_staff")},async checkTokenValidity(){return!0},logout(e=!1){const t=localStorage.getItem("cart");localStorage.clear(),t&&localStorage.setItem("cart",t),this.isLoggedIn=!1,this.isStaff=!1}});j.init();var J=a(1387);a(323);const z={class:"toast-container"},Z={class:"toast-icon"},Y={class:"toast-content"},G={class:"toast-message"},ee=["onClick"];function te(e,t,a,i,l,n){return(0,r.uX)(),(0,r.CE)("div",z,[(0,r.bF)(s.F,{name:"toast"},{default:(0,r.k6)((()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.toasts,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:(0,o.C4)(["toast-notification",[`toast-${e.type}`,{"toast-visible":e.visible}]]),role:"alert","aria-live":"assertive"},[(0,r.Lk)("div",Z,[(0,r.Lk)("i",{class:(0,o.C4)(["bi",{"bi-check-circle-fill":"success"===e.type,"bi-exclamation-triangle-fill":"warning"===e.type,"bi-x-circle-fill":"error"===e.type,"bi-info-circle-fill":"info"===e.type}])},null,2)]),(0,r.Lk)("div",Y,[(0,r.Lk)("p",G,(0,o.v_)(e.message),1)]),(0,r.Lk)("button",{class:"toast-close",onClick:t=>i.removeToast(e.id),"aria-label":"Close notification"},t[0]||(t[0]=[(0,r.Lk)("i",{class:"bi bi-x"},null,-1)]),8,ee),(0,r.Lk)("div",{class:"toast-progress",style:(0,o.Tr)({animationDuration:`${e.duration}ms`})},null,4)],2)))),128))])),_:1})])}const ae=(0,M.KR)([]);let se=1;const re=()=>{const e=(e,a="info",s=5e3)=>{const r=window.innerWidth<768,o=r?3:5;if(ae.value.length>=o){const e=[...ae.value].sort(((e,t)=>e.id-t.id)).slice(0,ae.value.length-o+1);e.forEach((e=>{t(e.id)}))}const i=se++,l=(0,M.Kh)({id:i,message:e,type:a,visible:!1,duration:r?Math.min(s,4e3):s});return ae.value.push(l),setTimeout((()=>{l.visible=!0}),10),setTimeout((()=>{t(i)}),l.duration),i},t=e=>{const t=ae.value.findIndex((t=>t.id===e));-1!==t&&(ae.value[t].visible=!1,setTimeout((()=>{ae.value=ae.value.filter((t=>t.id!==e))}),300))},a=(t,a)=>e(t,"success",a),s=(t,a)=>e(t,"error",a),r=(t,a)=>e(t,"warning",a),o=(t,a)=>e(t,"info",a);return{toasts:ae,addToast:e,removeToast:t,success:a,error:s,warning:r,info:o}},oe=re;var ie={setup(){const{toasts:e,removeToast:t}=re();return{toasts:e,removeToast:t}}},le=a(1241);const ne=(0,le.A)(ie,[["render",te],["__scopeId","data-v-83af5984"]]);var ce=ne,de=a(8077),ue={components:{ToastNotification:ce},setup(){const e=(0,J.rd)(),t=(0,M.KR)(0),a=(0,M.KR)(""),s=(0,M.KR)(null);let o=null;const i=(0,M.KR)(!1),l=()=>{const e=JSON.parse(localStorage.getItem("cart"))||[];t.value=e.length},n=()=>{j.logout(),window.location.hostname.includes("github.io")?window.location.href="https://lorendale.github.io/vue-final-project/#/login":e.push("/login")},c=()=>{o&&(i.value?o.hide():o.show(),i.value=!i.value)},d=()=>{o&&i.value&&(o.hide(),i.value=!1)},u=e=>{"cart"===e.key&&l()},m=()=>{l()},p=async()=>{if(j.isLoggedIn)try{const e=await V.get("user/");a.value=e.data.username}catch(e){console.error("Failed to fetch username:",e)}};return(0,r.sV)((()=>{j.isLoggedIn&&(j.checkTokenValidity(),p()),l(),window.addEventListener("storage",u),window.addEventListener("cart-updated",m);const e=document.getElementById("navbarContent");e&&(o=new de.SD(e,{toggle:!1}),e.addEventListener("shown.bs.collapse",(()=>{i.value=!0})),e.addEventListener("hidden.bs.collapse",(()=>{i.value=!1})),document.addEventListener("click",(e=>{if(!i.value)return;const t=e.target.closest(".navbar-toggler"),a=e.target.closest(".navbar-collapse");t||a||d()}))),window.history&&window.addEventListener("popstate",d),window.addEventListener("resize",(()=>{window.innerWidth>=992&&i.value&&d()}))})),(0,r.hi)((()=>{window.removeEventListener("storage",u),window.removeEventListener("cart-updated",m),window.removeEventListener("popstate",d),window.removeEventListener("resize",(()=>{}));const e=document.getElementById("navbarContent");e&&(e.removeEventListener("shown.bs.collapse",(()=>{})),e.removeEventListener("hidden.bs.collapse",(()=>{}))),document.removeEventListener("click",(()=>{}))})),(0,r.wB)((()=>localStorage.getItem("cart")),(()=>{l()})),{auth:j,cartCount:t,username:a,logout:n,updateCartCount:l,closeNavbar:d,toggleNavbar:c,navbarCollapse:s}}};const me=(0,le.A)(ue,[["render",_]]);var pe=me;const ke={class:"auth-container"},be={class:"auth-card"},ve={class:"form-group"},ge={key:0,class:"invalid-feedback"},he={class:"form-group"},fe=["type"],Le={key:0,class:"invalid-feedback"},ye={class:"form-check mb-3"},we=["disabled"],Ce={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},Pe={key:1,class:"bi bi-box-arrow-in-right me-2"},xe={key:0,class:"auth-error mt-3"},Ee={class:"auth-footer"};function Se(e,t,a,i,l,n){const c=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",ke,[(0,r.Lk)("div",be,[t[15]||(t[15]=(0,r.Lk)("div",{class:"auth-header"},[(0,r.Lk)("i",{class:"bi bi-bag-heart-fill me-2 bag-icon"}),(0,r.Lk)("h2",null,"Welcome Back"),(0,r.Lk)("p",null,"Sign in to your account to continue")],-1)),(0,r.Lk)("form",{onSubmit:t[6]||(t[6]=(0,s.D$)(((...e)=>i.validateAndLogin&&i.validateAndLogin(...e)),["prevent"])),class:"auth-form",novalidate:""},[(0,r.Lk)("div",ve,[t[8]||(t[8]=(0,r.Lk)("label",{for:"username"},"Username",-1)),(0,r.Lk)("div",{class:(0,o.C4)(["input-group",{"is-invalid":i.errors.username}])},[t[7]||(t[7]=(0,r.Lk)("span",{class:"input-group-text"},[(0,r.Lk)("i",{class:"bi bi-person"})],-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.username=e),id:"username",type:"text",class:(0,o.C4)(["form-control",{"is-invalid":i.errors.username}]),placeholder:"Enter your username",onBlur:t[1]||(t[1]=(...e)=>i.validateUsername&&i.validateUsername(...e))},null,34),[[s.Jo,i.username]])],2),i.errors.username?((0,r.uX)(),(0,r.CE)("div",ge,(0,o.v_)(i.errors.username),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",he,[t[10]||(t[10]=(0,r.Lk)("label",{for:"password"},"Password",-1)),(0,r.Lk)("div",{class:(0,o.C4)(["input-group",{"is-invalid":i.errors.password}])},[t[9]||(t[9]=(0,r.Lk)("span",{class:"input-group-text"},[(0,r.Lk)("i",{class:"bi bi-key"})],-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>i.password=e),id:"password",type:i.showPassword?"text":"password",class:(0,o.C4)(["form-control",{"is-invalid":i.errors.password}]),placeholder:"Enter your password",onBlur:t[3]||(t[3]=(...e)=>i.validatePassword&&i.validatePassword(...e))},null,42,fe),[[s.hp,i.password]]),(0,r.Lk)("button",{type:"button",class:"input-group-text password-toggle",onClick:t[4]||(t[4]=e=>i.showPassword=!i.showPassword)},[(0,r.Lk)("i",{class:(0,o.C4)(i.showPassword?"bi bi-eye-slash":"bi bi-eye")},null,2)])],2),i.errors.password?((0,r.uX)(),(0,r.CE)("div",Le,(0,o.v_)(i.errors.password),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",ye,[(0,r.bo)((0,r.Lk)("input",{class:"form-check-input",type:"checkbox",id:"rememberMe","onUpdate:modelValue":t[5]||(t[5]=e=>i.rememberMe=e)},null,512),[[s.lH,i.rememberMe]]),t[11]||(t[11]=(0,r.Lk)("label",{class:"form-check-label",for:"rememberMe"},"Remember me",-1))]),(0,r.Lk)("button",{type:"submit",class:"btn btn-primary w-100",disabled:i.isLoading},[i.isLoading?((0,r.uX)(),(0,r.CE)("span",Ce)):((0,r.uX)(),(0,r.CE)("i",Pe)),(0,r.eW)(" "+(0,o.v_)(i.isLoading?"Signing in...":"Sign In"),1)],8,we),i.error?((0,r.uX)(),(0,r.CE)("div",xe,[t[12]||(t[12]=(0,r.Lk)("i",{class:"bi bi-exclamation-triangle-fill me-2"},null,-1)),(0,r.eW)(" "+(0,o.v_)(i.error),1)])):(0,r.Q3)("",!0)],32),(0,r.Lk)("div",Ee,[(0,r.Lk)("p",null,[t[14]||(t[14]=(0,r.eW)("Don't have an account? ")),(0,r.bF)(c,{to:"/register",class:"auth-link"},{default:(0,r.k6)((()=>t[13]||(t[13]=[(0,r.eW)("Create Account")]))),_:1})])])])])}var _e={name:"UserLogin",setup(){const e=(0,J.rd)(),t=(0,M.KR)(""),a=(0,M.KR)(""),s=(0,M.KR)(!1),r=(0,M.KR)(!1),o=(0,M.KR)(!1),i=(0,M.KR)(null),l=(0,M.Kh)({username:"",password:""}),{error:n}=oe(),c=()=>t.value.trim()?(l.username="",!0):(l.username="Username is required",!1),d=()=>a.value?(l.password="",!0):(l.password="Password is required",!1),u=()=>{const e=c(),t=d();return e&&t},m=()=>{u()?p():n("Please fix the errors in the form")},p=async()=>{o.value=!0,i.value=null;try{{const a="admin"===t.value.trim().toLowerCase();return localStorage.setItem("access","demo-token"),localStorage.setItem("refresh","demo-refresh"),localStorage.setItem("is_staff",a?"true":"false"),localStorage.setItem("user_id",a?"1":"2"),localStorage.setItem("username",t.value||"demo_user"),j.isLoggedIn=!0,j.isStaff=a,void e.push(a?"/monitor":"/products")}}catch(a){console.error("Login error:",a),i.value="Invalid username or password. Please try again.",n("Login failed: Check your username or password.")}finally{o.value=!1}};return{username:t,password:a,rememberMe:s,showPassword:r,isLoading:o,error:i,errors:l,validateUsername:c,validatePassword:d,validateAndLogin:m}}};const Me=(0,le.A)(_e,[["render",Se],["__scopeId","data-v-9c7476f6"]]);var Ie=Me;const Oe={class:"auth-container"},De={class:"auth-card"},Te={class:"form-group"},Xe={key:0,class:"invalid-feedback"},Fe={class:"form-group"},We=["type"],Ae={key:0,class:"invalid-feedback"},Re={key:1,class:"password-strength mt-2"},qe={class:"strength-meter"},Qe={class:"form-group"},Ke=["type"],Ne={key:0,class:"invalid-feedback"},Ue={class:"form-check mb-3"},Be={class:"form-check-label",for:"termsAgreed"},He={key:0,class:"invalid-feedback"},$e=["disabled"],Ve={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},je={key:1,class:"bi bi-person-plus me-2"},Je={key:0,class:"auth-error mt-3"},ze={class:"auth-footer"},Ze={class:"modal fade",ref:"termsModal",tabindex:"-1"},Ye={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable"},Ge={class:"modal-content"},et={class:"modal-header"},tt={class:"modal-footer"};function at(e,t,a,i,l,n){const c=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",Oe,[(0,r.Lk)("div",De,[t[25]||(t[25]=(0,r.Lk)("div",{class:"auth-header"},[(0,r.Lk)("i",{class:"bi bi-person-plus auth-icon"}),(0,r.Lk)("h2",null,"Create Account"),(0,r.Lk)("p",null,"Join our community and start shopping")],-1)),(0,r.Lk)("form",{onSubmit:t[11]||(t[11]=(0,s.D$)(((...e)=>i.validateAndRegister&&i.validateAndRegister(...e)),["prevent"])),class:"auth-form",novalidate:""},[(0,r.Lk)("div",Te,[t[16]||(t[16]=(0,r.Lk)("label",{for:"username"},"Username",-1)),(0,r.Lk)("div",{class:(0,o.C4)(["input-group",{"is-invalid":i.errors.username}])},[t[15]||(t[15]=(0,r.Lk)("span",{class:"input-group-text"},[(0,r.Lk)("i",{class:"bi bi-person"})],-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.username=e),id:"username",type:"text",class:(0,o.C4)(["form-control",{"is-invalid":i.errors.username}]),placeholder:"Choose a username",onBlur:t[1]||(t[1]=(...e)=>i.validateUsername&&i.validateUsername(...e))},null,34),[[s.Jo,i.username]])],2),i.errors.username?((0,r.uX)(),(0,r.CE)("div",Xe,(0,o.v_)(i.errors.username),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",Fe,[t[18]||(t[18]=(0,r.Lk)("label",{for:"password"},"Password",-1)),(0,r.Lk)("div",{class:(0,o.C4)(["input-group",{"is-invalid":i.errors.password}])},[t[17]||(t[17]=(0,r.Lk)("span",{class:"input-group-text"},[(0,r.Lk)("i",{class:"bi bi-key"})],-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>i.password=e),id:"password",type:i.showPassword?"text":"password",class:(0,o.C4)(["form-control",{"is-invalid":i.errors.password}]),placeholder:"Create a password",onBlur:t[3]||(t[3]=(...e)=>i.validatePassword&&i.validatePassword(...e)),onInput:t[4]||(t[4]=(...e)=>i.validatePasswordStrength&&i.validatePasswordStrength(...e))},null,42,We),[[s.hp,i.password]]),(0,r.Lk)("button",{type:"button",class:"input-group-text password-toggle",onClick:t[5]||(t[5]=e=>i.showPassword=!i.showPassword)},[(0,r.Lk)("i",{class:(0,o.C4)(i.showPassword?"bi bi-eye-slash":"bi bi-eye")},null,2)])],2),i.errors.password?((0,r.uX)(),(0,r.CE)("div",Ae,(0,o.v_)(i.errors.password),1)):(0,r.Q3)("",!0),i.password?((0,r.uX)(),(0,r.CE)("div",Re,[(0,r.Lk)("div",qe,[(0,r.Lk)("div",{class:(0,o.C4)(["strength-meter-fill",i.passwordStrength.class]),style:(0,o.Tr)({width:i.passwordStrength.score+"%"})},null,6)]),(0,r.Lk)("div",{class:(0,o.C4)(["strength-text",i.passwordStrength.class])},(0,o.v_)(i.passwordStrength.text),3)])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",Qe,[t[20]||(t[20]=(0,r.Lk)("label",{for:"confirmPassword"},"Confirm Password",-1)),(0,r.Lk)("div",{class:(0,o.C4)(["input-group",{"is-invalid":i.errors.confirmPassword}])},[t[19]||(t[19]=(0,r.Lk)("span",{class:"input-group-text"},[(0,r.Lk)("i",{class:"bi bi-key-fill"})],-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>i.confirmPassword=e),id:"confirmPassword",type:i.showConfirmPassword?"text":"password",class:(0,o.C4)(["form-control",{"is-invalid":i.errors.confirmPassword}]),placeholder:"Confirm your password",onBlur:t[7]||(t[7]=(...e)=>i.validateConfirmPassword&&i.validateConfirmPassword(...e))},null,42,Ke),[[s.hp,i.confirmPassword]]),(0,r.Lk)("button",{type:"button",class:"input-group-text password-toggle",onClick:t[8]||(t[8]=e=>i.showConfirmPassword=!i.showConfirmPassword)},[(0,r.Lk)("i",{class:(0,o.C4)(i.showConfirmPassword?"bi bi-eye-slash":"bi bi-eye")},null,2)])],2),i.errors.confirmPassword?((0,r.uX)(),(0,r.CE)("div",Ne,(0,o.v_)(i.errors.confirmPassword),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",Ue,[(0,r.bo)((0,r.Lk)("input",{class:(0,o.C4)(["form-check-input",{"is-invalid":i.errors.termsAgreed}]),type:"checkbox",id:"termsAgreed","onUpdate:modelValue":t[9]||(t[9]=e=>i.termsAgreed=e)},null,2),[[s.lH,i.termsAgreed]]),(0,r.Lk)("label",Be,[t[21]||(t[21]=(0,r.eW)(" I agree to the ")),(0,r.Lk)("a",{href:"#",onClick:t[10]||(t[10]=(0,s.D$)(((...e)=>i.showTerms&&i.showTerms(...e)),["prevent"]))},"Terms and Conditions")]),i.errors.termsAgreed?((0,r.uX)(),(0,r.CE)("div",He,(0,o.v_)(i.errors.termsAgreed),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("button",{type:"submit",class:"btn btn-primary w-100",disabled:i.isLoading},[i.isLoading?((0,r.uX)(),(0,r.CE)("span",Ve)):((0,r.uX)(),(0,r.CE)("i",je)),(0,r.eW)(" "+(0,o.v_)(i.isLoading?"Creating account...":"Create Account"),1)],8,$e),i.error?((0,r.uX)(),(0,r.CE)("div",Je,[t[22]||(t[22]=(0,r.Lk)("i",{class:"bi bi-exclamation-triangle-fill me-2"},null,-1)),(0,r.eW)(" "+(0,o.v_)(i.error),1)])):(0,r.Q3)("",!0)],32),(0,r.Lk)("div",ze,[(0,r.Lk)("p",null,[t[24]||(t[24]=(0,r.eW)("Already have an account? ")),(0,r.bF)(c,{to:"/login",class:"auth-link"},{default:(0,r.k6)((()=>t[23]||(t[23]=[(0,r.eW)("Sign In")]))),_:1})])])]),(0,r.Lk)("div",Ze,[(0,r.Lk)("div",Ye,[(0,r.Lk)("div",Ge,[(0,r.Lk)("div",et,[t[26]||(t[26]=(0,r.Lk)("h5",{class:"modal-title"},"Terms and Conditions",-1)),(0,r.Lk)("button",{type:"button",class:"btn-close",onClick:t[12]||(t[12]=(...e)=>i.hideTerms&&i.hideTerms(...e))})]),t[27]||(t[27]=(0,r.Fv)('<div class="modal-body" data-v-410489ce><h6 data-v-410489ce>1. Acceptance of Terms</h6><p data-v-410489ce>By accessing and using this e-commerce platform, you agree to be bound by these Terms and Conditions.</p><h6 data-v-410489ce>2. User Accounts</h6><p data-v-410489ce>You are responsible for maintaining the confidentiality of your account information and password.</p><h6 data-v-410489ce>3. Privacy Policy</h6><p data-v-410489ce>Your use of our service is also governed by our Privacy Policy.</p><h6 data-v-410489ce>4. Product Information</h6><p data-v-410489ce>We strive to provide accurate product information, but we do not warrant that product descriptions or other content is accurate, complete, or error-free.</p><h6 data-v-410489ce>5. Pricing and Payment</h6><p data-v-410489ce>All prices are subject to change without notice. We reserve the right to refuse or cancel orders in cases of pricing errors.</p></div>',1)),(0,r.Lk)("div",tt,[(0,r.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[13]||(t[13]=(...e)=>i.hideTerms&&i.hideTerms(...e))},"Close"),(0,r.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[14]||(t[14]=(...e)=>i.acceptTerms&&i.acceptTerms(...e))},"Accept")])])])],512)])}var st={name:"UserRegister",setup(){const e=(0,M.KR)(""),t=(0,M.KR)(""),a=(0,M.KR)(""),s=(0,M.KR)(!1),o=(0,M.KR)(!1),i=(0,M.KR)(!1),l=(0,M.KR)(!1),n=(0,M.KR)(null),c=(0,M.KR)(null),d=(0,M.KR)(null),u=(0,J.rd)(),{success:m,error:p}=oe(),k=(0,M.Kh)({username:"",password:"",confirmPassword:"",termsAgreed:""}),b=(0,r.EW)((()=>{if(!t.value)return{score:0,text:"",class:""};let e=0,a="Very Weak",s="very-weak";return t.value.length>=8&&(e+=20),/[A-Z]/.test(t.value)&&(e+=20),/[a-z]/.test(t.value)&&(e+=20),/[0-9]/.test(t.value)&&(e+=20),/[^A-Za-z0-9]/.test(t.value)&&(e+=20),e>=80?(a="Very Strong",s="very-strong"):e>=60?(a="Strong",s="strong"):e>=40?(a="Medium",s="medium"):e>=20&&(a="Weak",s="weak"),{score:e,text:a,class:s}})),v=()=>e.value.trim()?e.value.length<3?(k.username="Username must be at least 3 characters",!1):/^[a-zA-Z0-9_]+$/.test(e.value)?(k.username="",!0):(k.username="Username can only contain letters, numbers, and underscores",!1):(k.username="Username is required",!1),g=()=>t.value?t.value.length<8?(k.password="Password must be at least 8 characters",!1):(k.password="",!0):(k.password="Password is required",!1),h=()=>b.value.score>0,f=()=>a.value?a.value!==t.value?(k.confirmPassword="Passwords do not match",!1):(k.confirmPassword="",!0):(k.confirmPassword="Please confirm your password",!1),L=()=>s.value?(k.termsAgreed="",!0):(k.termsAgreed="You must agree to the Terms and Conditions",!1),y=()=>{const e=v(),t=g(),a=f(),s=L();return e&&t&&a&&s},w=()=>{y()?C():p("Please fix the errors in the form")},C=async()=>{l.value=!0,n.value=null;try{await V.post("register/",{username:e.value,password:t.value}),m("Registration successful! Please log in."),setTimeout((()=>{u.push("/login")}),1500)}catch(a){console.error("Registration error:",a),a.response&&a.response.data?(a.response.data.username&&(k.username=a.response.data.username[0]),n.value="Registration failed. Please check the form for errors."):n.value="Registration failed. Please try again later.",p("Registration failed. Please try again.")}finally{l.value=!1}},P=()=>{d.value&&d.value.show()},x=()=>{d.value&&d.value.hide()},E=()=>{s.value=!0,k.termsAgreed="",x()};return(0,r.sV)((()=>{c.value&&(d.value=new de.aF(c.value))})),{username:e,password:t,confirmPassword:a,termsAgreed:s,showPassword:o,showConfirmPassword:i,isLoading:l,error:n,errors:k,passwordStrength:b,termsModal:c,validateUsername:v,validatePassword:g,validatePasswordStrength:h,validateConfirmPassword:f,validateAndRegister:w,showTerms:P,hideTerms:x,acceptTerms:E}}};const rt=(0,le.A)(st,[["render",at],["__scopeId","data-v-410489ce"]]);var ot=rt;const it={class:"product-catalog container"},lt={class:"catalog-header"},nt={class:"search-container"},ct={key:0,class:"loading-container"},dt={key:1,class:"empty-products"},ut={key:2},mt={class:"product-count"},pt={class:"product-grid"},kt={class:"product-image"},bt=["src","alt"],vt={key:1,class:"image-placeholder"},gt={class:"product-badges"},ht={key:0,class:"stock-badge out-of-stock-badge"},ft={key:1,class:"stock-badge low-stock-badge"},Lt={key:2,class:"stock-badge new-badge"},yt={class:"product-details"},wt={class:"product-rating"},Ct={class:"stars"},Pt={class:"rating-count"},xt={class:"product-name"},Et={class:"product-description"},St={class:"product-price"},_t={key:0,class:"product-actions"},Mt={class:"quantity-selector"},It=["onClick","disabled"],Ot={class:"quantity"},Dt=["onClick","disabled"],Tt=["onClick"],Xt={key:1,class:"out-of-stock-btn",disabled:"","aria-label":"Out of stock"};function Ft(e,t,a,i,l,n){return(0,r.uX)(),(0,r.CE)("div",it,[(0,r.Lk)("div",lt,[t[3]||(t[3]=(0,r.Lk)("h2",{class:"section-title"},[(0,r.Lk)("i",{class:"bi bi-shop me-2"}),(0,r.eW)("Discover Our Collection ")],-1)),(0,r.Lk)("div",nt,[(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>i.searchQuery=e),placeholder:"Search products...",class:"search-input","aria-label":"Search products"},null,512),[[s.Jo,i.searchQuery]]),t[2]||(t[2]=(0,r.Lk)("i",{class:"bi bi-search search-icon"},null,-1))])]),i.isLoading?((0,r.uX)(),(0,r.CE)("div",ct,t[4]||(t[4]=[(0,r.Lk)("div",{class:"spinner"},[(0,r.Lk)("div",{class:"bounce1"}),(0,r.Lk)("div",{class:"bounce2"}),(0,r.Lk)("div",{class:"bounce3"})],-1),(0,r.Lk)("p",null,"Loading products...",-1)]))):0===i.filteredProducts.length?((0,r.uX)(),(0,r.CE)("div",dt,[t[6]||(t[6]=(0,r.Lk)("i",{class:"bi bi-search-heart"},null,-1)),t[7]||(t[7]=(0,r.Lk)("h3",null,"No products found",-1)),t[8]||(t[8]=(0,r.Lk)("p",null,"We couldn't find any products matching your search.",-1)),(0,r.Lk)("button",{class:"btn btn-primary mt-3",onClick:t[1]||(t[1]=(...e)=>i.resetSearch&&i.resetSearch(...e))},t[5]||(t[5]=[(0,r.Lk)("i",{class:"bi bi-arrow-counterclockwise me-2"},null,-1),(0,r.eW)("View All Products ")]))])):((0,r.uX)(),(0,r.CE)("div",ut,[(0,r.Lk)("div",mt,[(0,r.Lk)("span",null,(0,o.v_)(i.filteredProducts.length)+" products",1)]),(0,r.Lk)("div",pt,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.filteredProducts,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:(0,o.C4)(["product-card",{"out-of-stock":0===e.stock}])},[(0,r.Lk)("div",kt,[e.image?((0,r.uX)(),(0,r.CE)("img",{key:0,src:i.fullImageUrl(e.image),alt:e.name,loading:"lazy"},null,8,bt)):((0,r.uX)(),(0,r.CE)("div",vt,t[9]||(t[9]=[(0,r.Lk)("i",{class:"bi bi-image"},null,-1)]))),(0,r.Lk)("div",gt,[0===e.stock?((0,r.uX)(),(0,r.CE)("div",ht," Out of Stock ")):e.stock<5?((0,r.uX)(),(0,r.CE)("div",ft," Only "+(0,o.v_)(e.stock)+" left! ",1)):(0,r.Q3)("",!0),i.isNewProduct(e)?((0,r.uX)(),(0,r.CE)("div",Lt," New ")):(0,r.Q3)("",!0)])]),(0,r.Lk)("div",yt,[(0,r.Lk)("div",wt,[(0,r.Lk)("div",Ct,[((0,r.uX)(),(0,r.CE)(r.FK,null,(0,r.pI)(5,(t=>(0,r.Lk)("i",{key:t,class:(0,o.C4)(["bi",t<=i.getProductRating(e)?"bi-star-fill":"bi-star"])},null,2))),64))]),(0,r.Lk)("span",Pt,"("+(0,o.v_)(i.getReviewCount(e))+")",1)]),(0,r.Lk)("h3",xt,(0,o.v_)(e.name),1),(0,r.Lk)("p",Et,(0,o.v_)(i.truncate(e.description,80)),1),(0,r.Lk)("div",St,"â±"+(0,o.v_)(i.formatPrice(e.price)),1),e.stock>0?((0,r.uX)(),(0,r.CE)("div",_t,[(0,r.Lk)("div",Mt,[(0,r.Lk)("button",{class:"quantity-btn",onClick:t=>i.decrementQuantity(e),disabled:i.quantities[e.id]<=1,"aria-label":"Decrease quantity"},t[10]||(t[10]=[(0,r.Lk)("i",{class:"bi bi-dash"},null,-1)]),8,It),(0,r.Lk)("span",Ot,(0,o.v_)(i.quantities[e.id]||1),1),(0,r.Lk)("button",{class:"quantity-btn",onClick:t=>i.incrementQuantity(e),disabled:i.quantities[e.id]>=e.stock,"aria-label":"Increase quantity"},t[11]||(t[11]=[(0,r.Lk)("i",{class:"bi bi-plus"},null,-1)]),8,Dt)]),(0,r.Lk)("button",{class:"add-to-cart-btn",onClick:t=>i.addToCart(e),"aria-label":"Add to cart"},t[12]||(t[12]=[(0,r.Lk)("i",{class:"bi bi-cart-plus me-2"},null,-1),(0,r.eW)("Add to Cart ")]),8,Tt)])):((0,r.uX)(),(0,r.CE)("button",Xt," Out of Stock "))])],2)))),128))])]))])}var Wt={setup(){const e=(0,M.KR)([]),t=(0,M.KR)(!0),a=(0,M.KR)(""),s=re(),o=(0,M.Kh)({}),i=()=>{window.dispatchEvent(new CustomEvent("cart-updated"))},l=(0,r.EW)((()=>{if(!a.value)return e.value;const t=a.value.toLowerCase();return e.value.filter((e=>e.name.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)))})),n=e=>e?e.startsWith("http")?e:`http://127.0.0.1:8000${e.startsWith("/")?e:"/media/"+e}`:"",c=e=>parseFloat(e).toFixed(2),d=(e,t)=>e?e.length>t?e.substring(0,t)+"...":e:"",u=()=>{a.value=""},m=e=>7*e.id%3+3,p=e=>7*e.id%115+5,k=e=>e.id%4===0,b=e=>{o[e.id]||(o[e.id]=1),o[e.id]<e.stock&&o[e.id]++},v=e=>{o[e.id]||(o[e.id]=1),o[e.id]>1&&o[e.id]--},g=async()=>{t.value=!0;try{const t=await V.get("products/");e.value=t.data,e.value.forEach((e=>{o[e.id]=1}))}catch(a){console.error("Error fetching products:",a),s.error("Failed to load products. Please try again.")}finally{t.value=!1}},h=e=>{if(0!==e.stock)try{let t=[];const a=localStorage.getItem("cart");a&&(t=JSON.parse(a));const r=t.find((t=>t.product&&t.product.id===e.id)),l=o[e.id]||1;if(r){if(!(r.quantity+l<=e.stock))return void s.warning(`Cannot add ${l} more ${e.name}. Maximum stock reached.`);r.quantity+=l,s.success(`Added ${l} ${e.name} to your cart.`)}else t.push({product:{id:e.id,name:e.name,price:e.price,description:e.description,image:e.image,stock:e.stock},quantity:l}),s.success(`Added ${l} ${e.name} to your cart!`);localStorage.setItem("cart",JSON.stringify(t)),o[e.id]=1,window.dispatchEvent(new Event("storage")),i()}catch(t){console.error("Error adding to cart:",t),s.error("Failed to add product to cart.")}else s.error("Sorry, this product is out of stock.")};return(0,r.sV)((()=>{g()})),{products:e,filteredProducts:l,isLoading:t,searchQuery:a,quantities:o,fullImageUrl:n,formatPrice:c,truncate:d,resetSearch:u,addToCart:h,incrementQuantity:b,decrementQuantity:v,getProductRating:m,getReviewCount:p,isNewProduct:k}}};const At=(0,le.A)(Wt,[["render",Ft],["__scopeId","data-v-0c8d36b3"]]);var Rt=At;const qt={class:"container"},Qt={key:0,class:"empty-cart"},Kt={class:"empty-cart-content"},Nt={key:1,class:"row"},Ut={class:"col-lg-8"},Bt={class:"cart-items card mb-4"},Ht={class:"card-header"},$t={class:"mb-0"},Vt={class:"card-body p-0"},jt={class:"cart-item-image"},Jt=["src","alt"],zt={key:1,class:"image-placeholder"},Zt={class:"cart-item-details"},Yt={class:"cart-item-name"},Gt={class:"cart-item-description"},ea={class:"cart-item-price"},ta={key:0,class:"stock-warning"},aa={class:"cart-item-quantity"},sa={class:"quantity-selector"},ra=["onClick","disabled"],oa=["onUpdate:modelValue","max","disabled","onChange"],ia=["onClick","disabled"],la={class:"cart-item-total"},na={class:"cart-item-actions"},ca=["onClick"],da={class:"card-footer"},ua={class:"d-flex justify-content-between flex-wrap gap-2"},ma={class:"col-lg-4"},pa={class:"cart-summary card"},ka={class:"card-body"},ba={class:"summary-item"},va={class:"summary-item"},ga={class:"summary-item"},ha={class:"summary-total"},fa={class:"promo-section mt-3"},La=["disabled"],ya={key:0,class:"spinner-border spinner-border-sm",role:"status"},wa={key:1},Ca={key:0,class:"invalid-feedback"},Pa={key:1,class:"promo-success"},xa={class:"card-footer"},Ea=["disabled"],Sa={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},_a={key:1,class:"bi bi-credit-card me-2"},Ma={key:0,class:"checkout-warning mt-2"},Ia={class:"modal fade confirm-modal",ref:"confirmModal",tabindex:"-1","aria-labelledby":"confirmModalLabel","aria-hidden":"true"},Oa={class:"modal-dialog modal-dialog-centered modal-sm"},Da={class:"modal-content"},Ta={class:"modal-header"},Xa={class:"modal-body"},Fa={class:"mb-0"},Wa={class:"modal-footer"};function Aa(e,t,a,i,l,n){const c=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",qt,[t[28]||(t[28]=(0,r.Lk)("div",{class:"cart-header mb-4"},[(0,r.Lk)("h2",{class:"section-title"},[(0,r.Lk)("i",{class:"bi bi-cart me-2"}),(0,r.eW)("Shopping Cart ")])],-1)),i.cart&&0!==i.cart.length?((0,r.uX)(),(0,r.CE)("div",Nt,[(0,r.Lk)("div",Ut,[(0,r.Lk)("div",Bt,[(0,r.Lk)("div",Ht,[(0,r.Lk)("h5",$t,"Cart Items ("+(0,o.v_)(i.cart.length)+")",1)]),(0,r.Lk)("div",Vt,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.cart,((e,a)=>((0,r.uX)(),(0,r.CE)("div",{class:"cart-item",key:a},[(0,r.Lk)("div",jt,[e&&e.product&&e.product.image?((0,r.uX)(),(0,r.CE)("img",{key:0,src:i.fullImageUrl(e.product.image),alt:e.product?e.product.name:"Product",loading:"lazy"},null,8,Jt)):((0,r.uX)(),(0,r.CE)("div",zt,t[11]||(t[11]=[(0,r.Lk)("i",{class:"bi bi-image"},null,-1)])))]),(0,r.Lk)("div",Zt,[(0,r.Lk)("h5",Yt,(0,o.v_)(e&&e.product?e.product.name:"Unknown Product"),1),(0,r.Lk)("p",Gt,(0,o.v_)(e&&e.product?i.truncate(e.product.description,100):"No description available"),1),(0,r.Lk)("div",ea,"â±"+(0,o.v_)(i.formatPrice(e&&e.product?e.product.price:0)),1),e&&e.product&&0===e.product.stock?((0,r.uX)(),(0,r.CE)("div",ta,t[12]||(t[12]=[(0,r.Lk)("i",{class:"bi bi-exclamation-triangle-fill me-1"},null,-1),(0,r.eW)(" Out of stock ")]))):(0,r.Q3)("",!0)]),(0,r.Lk)("div",aa,[(0,r.Lk)("div",sa,[(0,r.Lk)("button",{class:"btn btn-sm btn-outline-secondary",onClick:e=>i.decrementQuantity(a),disabled:!e||e.quantity<=1||e.product&&0===e.product.stock,"aria-label":"Decrease quantity"},t[13]||(t[13]=[(0,r.Lk)("i",{class:"bi bi-dash"},null,-1)]),8,ra),(0,r.bo)((0,r.Lk)("input",{type:"number",class:"form-control form-control-sm","onUpdate:modelValue":t=>e.quantity=t,min:"1",max:e&&e.product?e.product.stock:1,disabled:e&&e.product&&0===e.product.stock,onChange:t=>i.validateQuantity(a,e&&e.product?e.product.stock:1),"aria-label":"Quantity"},null,40,oa),[[s.Jo,e.quantity,void 0,{number:!0}]]),(0,r.Lk)("button",{class:"btn btn-sm btn-outline-secondary",onClick:t=>i.incrementQuantity(a,e&&e.product?e.product.stock:1),disabled:!e||!e.product||e.quantity>=e.product.stock||0===e.product.stock,"aria-label":"Increase quantity"},t[14]||(t[14]=[(0,r.Lk)("i",{class:"bi bi-plus"},null,-1)]),8,ia)])]),(0,r.Lk)("div",la," â±"+(0,o.v_)(i.formatPrice(e&&e.product?e.product.price*e.quantity:0)),1),(0,r.Lk)("div",na,[(0,r.Lk)("button",{class:"btn btn-sm btn-danger",onClick:e=>i.removeItem(a),"aria-label":"Remove item"},t[15]||(t[15]=[(0,r.Lk)("i",{class:"bi bi-trash"},null,-1)]),8,ca)])])))),128))]),(0,r.Lk)("div",da,[(0,r.Lk)("div",ua,[(0,r.Lk)("button",{class:"btn btn-outline-danger",onClick:t[0]||(t[0]=(...e)=>i.confirmClearCart&&i.confirmClearCart(...e))},t[16]||(t[16]=[(0,r.Lk)("i",{class:"bi bi-trash me-2"},null,-1),(0,r.eW)("Clear Cart ")])),(0,r.bF)(c,{to:"/products",class:"btn btn-outline-primary"},{default:(0,r.k6)((()=>t[17]||(t[17]=[(0,r.Lk)("i",{class:"bi bi-shop me-2"},null,-1),(0,r.eW)("Continue Shopping ")]))),_:1})])])])]),(0,r.Lk)("div",ma,[(0,r.Lk)("div",pa,[t[25]||(t[25]=(0,r.Lk)("div",{class:"card-header"},[(0,r.Lk)("h5",{class:"mb-0"},"Order Summary")],-1)),(0,r.Lk)("div",ka,[(0,r.Lk)("div",ba,[t[18]||(t[18]=(0,r.Lk)("span",null,"Subtotal",-1)),(0,r.Lk)("span",null,"â±"+(0,o.v_)(i.formatPrice(i.calculateSubtotal())),1)]),(0,r.Lk)("div",va,[t[19]||(t[19]=(0,r.Lk)("span",null,"Shipping",-1)),(0,r.Lk)("span",null,"â±"+(0,o.v_)(i.formatPrice(i.shippingCost)),1)]),(0,r.Lk)("div",ga,[t[20]||(t[20]=(0,r.Lk)("span",null,"Tax (12%)",-1)),(0,r.Lk)("span",null,"â±"+(0,o.v_)(i.formatPrice(i.calculateTax())),1)]),t[23]||(t[23]=(0,r.Lk)("div",{class:"summary-divider"},null,-1)),(0,r.Lk)("div",ha,[t[21]||(t[21]=(0,r.Lk)("span",null,"Total",-1)),(0,r.Lk)("span",null,"â±"+(0,o.v_)(i.formatPrice(i.calculateTotal())),1)]),(0,r.Lk)("div",fa,[(0,r.Lk)("div",{class:(0,o.C4)(["input-group",{"is-invalid":i.promoError}])},[(0,r.bo)((0,r.Lk)("input",{type:"text",class:(0,o.C4)(["form-control",{"is-invalid":i.promoError}]),placeholder:"Promo code","onUpdate:modelValue":t[1]||(t[1]=e=>i.promoCode=e),"aria-label":"Promo code"},null,2),[[s.Jo,i.promoCode]]),(0,r.Lk)("button",{class:"btn btn-outline-primary",type:"button",onClick:t[2]||(t[2]=(...e)=>i.applyPromoCode&&i.applyPromoCode(...e)),disabled:i.isApplyingPromo||!i.promoCode},[i.isApplyingPromo?((0,r.uX)(),(0,r.CE)("span",ya)):((0,r.uX)(),(0,r.CE)("span",wa,"Apply"))],8,La)],2),i.promoError?((0,r.uX)(),(0,r.CE)("div",Ca,(0,o.v_)(i.promoError),1)):(0,r.Q3)("",!0),i.activePromo?((0,r.uX)(),(0,r.CE)("div",Pa,[t[22]||(t[22]=(0,r.Lk)("i",{class:"bi bi-check-circle-fill me-1"},null,-1)),(0,r.eW)(" "+(0,o.v_)(i.activePromo.code)+" applied: "+(0,o.v_)(i.activePromo.discount)+"% off ",1)])):(0,r.Q3)("",!0)])]),(0,r.Lk)("div",xa,[(0,r.Lk)("button",{class:"btn btn-primary w-100",onClick:t[3]||(t[3]=(...e)=>i.proceedToCheckout&&i.proceedToCheckout(...e)),disabled:i.isCheckingOut||i.hasOutOfStockItems||0===i.cart.length},[i.isCheckingOut?((0,r.uX)(),(0,r.CE)("span",Sa)):((0,r.uX)(),(0,r.CE)("i",_a)),(0,r.eW)(" "+(0,o.v_)(i.isCheckingOut?"Processing...":"Proceed to Checkout"),1)],8,Ea),i.hasOutOfStockItems?((0,r.uX)(),(0,r.CE)("div",Ma,t[24]||(t[24]=[(0,r.Lk)("i",{class:"bi bi-exclamation-triangle-fill me-1"},null,-1),(0,r.eW)(" Please remove out of stock items before checkout ")]))):(0,r.Q3)("",!0)])])])])):((0,r.uX)(),(0,r.CE)("div",Qt,[(0,r.Lk)("div",Kt,[t[8]||(t[8]=(0,r.Lk)("i",{class:"bi bi-cart-x cart-icon"},null,-1)),t[9]||(t[9]=(0,r.Lk)("h3",null,"Your cart is empty",-1)),t[10]||(t[10]=(0,r.Lk)("p",null,"Add some products to your cart to continue shopping.",-1)),(0,r.bF)(c,{to:"/products",class:"btn btn-primary mt-3"},{default:(0,r.k6)((()=>t[7]||(t[7]=[(0,r.Lk)("i",{class:"bi bi-shop me-2"},null,-1),(0,r.eW)("Continue Shopping ")]))),_:1})])])),(0,r.Lk)("div",Ia,[(0,r.Lk)("div",Oa,[(0,r.Lk)("div",Da,[(0,r.Lk)("div",Ta,[t[26]||(t[26]=(0,r.Lk)("h5",{class:"modal-title",id:"confirmModalLabel"},"Confirm Action",-1)),(0,r.Lk)("button",{type:"button",class:"btn-close",onClick:t[4]||(t[4]=(...e)=>i.hideConfirmModal&&i.hideConfirmModal(...e)),"aria-label":"Close"})]),(0,r.Lk)("div",Xa,[t[27]||(t[27]=(0,r.Lk)("i",{class:"bi bi-question-circle-fill text-warning mb-3",style:{"font-size":"2rem"}},null,-1)),(0,r.Lk)("p",Fa,(0,o.v_)(i.confirmMessage),1)]),(0,r.Lk)("div",Wa,[(0,r.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[5]||(t[5]=(...e)=>i.hideConfirmModal&&i.hideConfirmModal(...e))},"Cancel"),(0,r.Lk)("button",{type:"button",class:"btn btn-danger",onClick:t[6]||(t[6]=(...e)=>i.confirmAction&&i.confirmAction(...e))},"Confirm")])])])],512)])}a(8237),a(3579);var Ra={setup(){const e=(0,M.KR)([]),t=(0,M.KR)(50),a=(0,J.rd)(),{success:s,warning:o,error:i,info:l}=oe(),n=(0,M.KR)([]),c=(0,M.KR)(!1),d=(0,M.KR)(""),u=(0,M.KR)(""),m=(0,M.KR)(!1),p=(0,M.KR)(null),k=(0,M.KR)(null),b=(0,M.KR)(null),v=(0,M.KR)(""),g=(0,M.KR)(null),h=(0,r.EW)((()=>e.value.some((e=>e&&e.product&&0===e.product.stock)))),f=()=>{window.dispatchEvent(new CustomEvent("cart-updated"))},L=e=>e?e.startsWith("http")?e:`http://127.0.0.1:8000${e.startsWith("/")?e:"/media/"+e}`:"",y=e=>parseFloat(e).toFixed(2),w=(e,t)=>e?e.length>t?e.substring(0,t)+"...":e:"",C=()=>{let t=e.value.reduce(((e,t)=>t&&t.product&&0!==t.product.stock?e+t.product.price*t.quantity:e),0);return p.value&&(t*=1-p.value.discount/100),t},P=()=>.12*C(),x=()=>C()+P()+t.value,E=(t,a)=>{try{if(t<0||t>=e.value.length)return;const s=e.value[t];if(!s||!s.product||0===s.product.stock)return;s.quantity<a&&(s.quantity++,T(),l("Quantity updated"))}catch(s){console.error("Error incrementing quantity:",s),i("Failed to update quantity")}},S=t=>{try{if(t<0||t>=e.value.length)return;const a=e.value[t];if(!a||0===a.product.stock)return;a.quantity>1&&(a.quantity--,T(),l("Quantity updated"))}catch(a){console.error("Error decrementing quantity:",a),i("Failed to update quantity")}},_=(t,a)=>{try{if(t<0||t>=e.value.length)return;const s=e.value[t];if(!s)return;if(s.product&&0===s.product.stock)return s.quantity=0,o(`${s.product.name} is out of stock`),void T();s.quantity<1?(s.quantity=1,T()):s.quantity>a&&(s.quantity=a,o(`Maximum stock available: ${a}`),T())}catch(s){console.error("Error validating quantity:",s),i("Failed to update quantity")}},I=t=>{v.value="Are you sure you want to remove this item from your cart?",g.value=()=>{try{if(t<0||t>=e.value.length)return;const a=e.value[t]?.product?.name||"Item";e.value.splice(t,1),T(),s(`Removed ${a} from cart`),N()}catch(a){console.error("Error removing item:",a),i("Failed to remove item")}},K()},O=()=>{try{e.value=[],T(),p.value=null,d.value="",u.value="",l("Cart cleared"),N()}catch(t){console.error("Error clearing cart:",t),i("Failed to clear cart")}},D=()=>{v.value="Are you sure you want to clear your cart? This will remove all items.",g.value=O,K()},T=()=>{try{localStorage.setItem("cart",JSON.stringify(e.value)),window.dispatchEvent(new Event("storage")),f()}catch(t){console.error("Error updating cart:",t),i("Failed to update cart")}},X=[{code:"WELCOME10",discount:10},{code:"SAVE20",discount:20},{code:"SPECIAL30",discount:30}],F=()=>{d.value?(m.value=!0,u.value="",setTimeout((()=>{const e=X.find((e=>e.code===d.value.toUpperCase()));e?(p.value=e,s(`Promo code ${e.code} applied successfully!`)):(u.value="Invalid promo code",i("Invalid promo code. Please try again.")),m.value=!1}),800)):u.value="Please enter a promo code"},W=async()=>{if(h.value)i("Please remove out of stock items before checkout");else if(A()){c.value=!0;try{for(const a of e.value){if(!a||!a.product||!a.product.id)return void i("Invalid item in cart. Please remove it and try again.");if(0===a.product.stock)return void i(`${a.product.name} is out of stock. Please remove it from your cart.`)}const t=await V.get("user/"),r=await V.post("orders/",{customer:t.data.id,complete:!0}),o=r.data.id;for(const a of e.value)0!==a.product.stock&&await V.post("order-items/",{order:o,product:a.product.id,quantity:a.quantity});e.value=[],T(),p.value=null,d.value="",s("Order placed successfully!"),setTimeout((()=>{a.push("/orders")}),1500)}catch(t){console.error("Error during checkout:",t),i("Failed to place order. Please try again.")}finally{c.value=!1}}},A=()=>{let t=!0;return e.value.forEach((e=>e&&e.product&&e.product.id?0===e.product.stock?(o(`${e.product.name} is out of stock. Please remove it from your cart.`),void(t=!1)):void(e.quantity>e.product.stock&&(o(`Quantity for ${e.product.name} exceeds available stock. Adjusting to maximum.`),e.quantity=e.product.stock,T())):(i("Invalid item in cart. Please remove it and try again."),void(t=!1)))),t},R=async()=>{try{const e=await V.get("products/");n.value=e.data,q()}catch(e){console.error("Error fetching products:",e)}},q=()=>{if(!e.value.length||!n.value.length)return;let t=!1;e.value.forEach((e=>{if(!e||!e.product||!e.product.id)return;const a=n.value.find((t=>t.id===e.product.id));if(a&&(e.product.name!==a.name||e.product.price!==a.price||e.product.image!==a.image||e.product.description!==a.description||e.product.stock!==a.stock)){const s=e.quantity;e.product={id:a.id,name:a.name,price:a.price,description:a.description,image:a.image,stock:a.stock},e.quantity=s,e.quantity>a.stock&&(e.quantity=a.stock>0?a.stock:0,o(`Quantity for ${a.name} adjusted to match available stock`)),t=!0}})),t&&(T(),l("Cart updated with latest product information"))},Q=()=>{try{const t=localStorage.getItem("cart");if(t){const a=JSON.parse(t);e.value=a.filter((e=>e&&e.product&&e.product.id)),e.value.length!==a.length&&(T(),o("Some invalid items were removed from your cart"))}}catch(t){console.error("Error loading cart:",t),i("Failed to load cart"),e.value=[]}},K=()=>{b.value&&b.value.show()},N=()=>{b.value&&b.value.hide()},U=()=>{"function"===typeof g.value&&g.value()};let B;return(0,r.sV)((()=>{Q(),R(),k.value&&(b.value=new de.aF(k.value)),B=setInterval((()=>{R()}),6e4),f()})),(0,r.hi)((()=>{B&&clearInterval(B)})),(0,r.wB)(e,(()=>{A()}),{deep:!0}),{cart:e,shippingCost:t,fullImageUrl:L,formatPrice:y,truncate:w,calculateSubtotal:C,calculateTax:P,calculateTotal:x,incrementQuantity:E,decrementQuantity:S,validateQuantity:_,removeItem:I,clearCart:O,confirmClearCart:D,updateCart:T,proceedToCheckout:W,isCheckingOut:c,promoCode:d,promoError:u,isApplyingPromo:m,activePromo:p,applyPromoCode:F,confirmModal:k,confirmMessage:v,hideConfirmModal:N,confirmAction:U,hasOutOfStockItems:h}}};const qa=(0,le.A)(Ra,[["render",Aa],["__scopeId","data-v-6d85753c"]]);var Qa=qa;const Ka={class:"container"},Na={class:"order-header mb-4"},Ua={class:"controls-wrapper mt-3"},Ba={class:"search-wrapper"},Ha={class:"input-group"},$a={class:"sort-wrapper"},Va={class:"input-group"},ja={key:0,class:"text-center py-5"},Ja={key:1,class:"empty-orders"},za={key:2,class:"empty-orders"},Za={key:3},Ya={key:0,class:"results-summary mb-3"},Ga={class:"card-header"},es={class:"d-flex justify-content-between align-items-center"},ts={class:"mb-0"},as={class:"order-date"},ss={class:"card-body"},rs={class:"order-items"},os={key:0,class:"order-item-image"},is=["src"],ls={key:1,class:"image-placeholder"},ns={class:"order-item-details"},cs={class:"order-item-name"},ds={key:0,class:"order-item-price"},us={class:"order-item-quantity"},ms={key:1,class:"stock-warning"},ps={key:1,class:"order-item-total"},ks={class:"order-summary mt-3"},bs={class:"order-total"},vs={class:"card-footer"},gs={class:"d-flex flex-wrap justify-content-between align-items-center gap-2"},hs=["onClick","disabled"],fs={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},Ls={key:1,class:"bi bi-arrow-repeat me-2"},ys={key:0,class:"reorder-warning mt-2"},ws={key:1,class:"pagination-wrapper"},Cs={"aria-label":"Order history pagination"},Ps={class:"pagination justify-content-center"},xs=["disabled"],Es=["disabled"],Ss=["onClick"],_s=["disabled"],Ms=["disabled"],Is={class:"items-per-page"},Os={class:"modal fade",ref:"confirmModal",tabindex:"-1","aria-labelledby":"confirmModalLabel","aria-hidden":"true"},Ds={class:"modal-dialog modal-dialog-centered"},Ts={class:"modal-content"},Xs={class:"modal-header"},Fs={class:"modal-body"},Ws={class:"confirmation-content"},As={class:"confirmation-message"},Rs={key:0,class:"order-preview mt-4"},qs={class:"preview-items"},Qs={class:"preview-item-details"},Ks={class:"preview-item-name"},Ns={class:"preview-item-qty"},Us={key:0,class:"unavailable-badge"},Bs={key:1,class:"partial-badge"},Hs={key:0,class:"preview-item-price"},$s={class:"preview-total"},Vs={class:"preview-total-row"},js={class:"preview-total-row grand-total"},Js={class:"validation-section mt-3"},zs={key:0,class:"validation-message warning"},Zs={class:"validation-desc"},Ys={key:1,class:"validation-message info"},Gs={key:2,class:"validation-message error"},er={class:"modal-footer"},tr=["disabled"],ar={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},sr={key:1,class:"bi bi-check-circle me-2"};function rr(e,t,a,i,l,n){const c=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",Ka,[(0,r.Lk)("div",Na,[t[17]||(t[17]=(0,r.Lk)("h2",{class:"section-title"},[(0,r.Lk)("i",{class:"bi bi-clock-history me-2"}),(0,r.eW)("My Orders ")],-1)),(0,r.Lk)("div",Ua,[(0,r.Lk)("div",Ba,[(0,r.Lk)("div",Ha,[t[14]||(t[14]=(0,r.Lk)("span",{class:"input-group-text"},[(0,r.Lk)("i",{class:"bi bi-search"})],-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>i.searchTerm=e),placeholder:"Search orders or products..."},null,512),[[s.Jo,i.searchTerm]]),i.searchTerm?((0,r.uX)(),(0,r.CE)("button",{key:0,class:"btn btn-outline-secondary",type:"button",onClick:t[1]||(t[1]=e=>i.searchTerm="")},t[13]||(t[13]=[(0,r.Lk)("i",{class:"bi bi-x"},null,-1)]))):(0,r.Q3)("",!0)])]),(0,r.Lk)("div",$a,[(0,r.Lk)("div",Va,[t[16]||(t[16]=(0,r.Lk)("label",{class:"input-group-text",for:"sortSelect"},[(0,r.Lk)("i",{class:"bi bi-sort-down"})],-1)),(0,r.bo)((0,r.Lk)("select",{class:"form-select",id:"sortSelect","onUpdate:modelValue":t[2]||(t[2]=e=>i.sortOption=e)},t[15]||(t[15]=[(0,r.Lk)("option",{value:"newest"},"Newest First",-1),(0,r.Lk)("option",{value:"oldest"},"Oldest First",-1),(0,r.Lk)("option",{value:"highest"},"Highest Amount",-1),(0,r.Lk)("option",{value:"lowest"},"Lowest Amount",-1)]),512),[[s.u1,i.sortOption]])])])])]),i.isLoading?((0,r.uX)(),(0,r.CE)("div",ja,t[18]||(t[18]=[(0,r.Fv)('<div class="spinner" data-v-34957621><div class="bounce1" data-v-34957621></div><div class="bounce2" data-v-34957621></div><div class="bounce3" data-v-34957621></div></div><p class="mt-3" data-v-34957621>Loading your orders...</p>',2)]))):0===i.orders.length?((0,r.uX)(),(0,r.CE)("div",Ja,[t[20]||(t[20]=(0,r.Lk)("i",{class:"bi bi-bag-x"},null,-1)),t[21]||(t[21]=(0,r.Lk)("h3",null,"No orders found",-1)),t[22]||(t[22]=(0,r.Lk)("p",null,"You haven't placed any orders yet.",-1)),(0,r.bF)(c,{to:"/products",class:"btn btn-primary mt-3"},{default:(0,r.k6)((()=>t[19]||(t[19]=[(0,r.Lk)("i",{class:"bi bi-shop me-2"},null,-1),(0,r.eW)("Start Shopping ")]))),_:1})])):0===i.paginatedOrders.length?((0,r.uX)(),(0,r.CE)("div",za,[t[24]||(t[24]=(0,r.Lk)("i",{class:"bi bi-search"},null,-1)),t[25]||(t[25]=(0,r.Lk)("h3",null,"No matching orders",-1)),t[26]||(t[26]=(0,r.Lk)("p",null,"No orders match your search criteria.",-1)),(0,r.Lk)("button",{class:"btn btn-primary mt-3",onClick:t[3]||(t[3]=e=>i.searchTerm="")},t[23]||(t[23]=[(0,r.Lk)("i",{class:"bi bi-arrow-counterclockwise me-2"},null,-1),(0,r.eW)("Clear Search ")]))])):((0,r.uX)(),(0,r.CE)("div",Za,[i.searchTerm?((0,r.uX)(),(0,r.CE)("div",Ya,[(0,r.Lk)("span",null,[(0,r.Lk)("strong",null,(0,o.v_)(i.filteredOrders.length),1),(0,r.eW)(" "+(0,o.v_)(1===i.filteredOrders.length?"result":"results")+" found ",1),(0,r.Lk)("button",{class:"btn btn-sm btn-link p-0 ms-2",onClick:t[4]||(t[4]=e=>i.searchTerm="")},t[27]||(t[27]=[(0,r.Lk)("i",{class:"bi bi-x-circle"},null,-1),(0,r.eW)(" Clear ")]))])])):(0,r.Q3)("",!0),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.paginatedOrders,(e=>((0,r.uX)(),(0,r.CE)("div",{class:"order-card card mb-4",key:e.id},[(0,r.Lk)("div",Ga,[(0,r.Lk)("div",es,[(0,r.Lk)("h5",ts,[t[28]||(t[28]=(0,r.Lk)("i",{class:"bi bi-bag-check me-2"},null,-1)),(0,r.eW)("Order #"+(0,o.v_)(e.id),1)]),(0,r.Lk)("span",as,(0,o.v_)(i.formatDate(e.date_ordered)),1)])]),(0,r.Lk)("div",ss,[(0,r.Lk)("div",rs,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.items,(e=>((0,r.uX)(),(0,r.CE)("div",{class:"order-item",key:e.id},[i.getProductDetails(e.product)?((0,r.uX)(),(0,r.CE)("div",os,[i.getProductDetails(e.product).image?((0,r.uX)(),(0,r.CE)("img",{key:0,src:i.fullImageUrl(i.getProductDetails(e.product).image),alt:"Product"},null,8,is)):((0,r.uX)(),(0,r.CE)("div",ls,t[29]||(t[29]=[(0,r.Lk)("i",{class:"bi bi-image"},null,-1)])))])):(0,r.Q3)("",!0),(0,r.Lk)("div",ns,[(0,r.Lk)("h6",cs,(0,o.v_)(i.getProductDetails(e.product)?i.getProductDetails(e.product).name:`Product #${e.product}`),1),i.getProductDetails(e.product)?((0,r.uX)(),(0,r.CE)("p",ds," â±"+(0,o.v_)(i.getProductDetails(e.product).price)+" Ã "+(0,o.v_)(e.quantity),1)):(0,r.Q3)("",!0),(0,r.Lk)("p",us," Quantity: "+(0,o.v_)(e.quantity),1),i.getProductDetails(e.product)&&0===i.getProductDetails(e.product).stock?((0,r.uX)(),(0,r.CE)("div",ms,t[30]||(t[30]=[(0,r.Lk)("i",{class:"bi bi-exclamation-triangle-fill me-1"},null,-1),(0,r.eW)(" Currently out of stock ")]))):(0,r.Q3)("",!0)]),i.getProductDetails(e.product)?((0,r.uX)(),(0,r.CE)("div",ps," â±"+(0,o.v_)((i.getProductDetails(e.product).price*e.quantity).toFixed(2)),1)):(0,r.Q3)("",!0)])))),128))]),(0,r.Lk)("div",ks,[(0,r.Lk)("div",bs,[t[31]||(t[31]=(0,r.Lk)("span",null,"Total:",-1)),(0,r.Lk)("span",null,"â±"+(0,o.v_)(i.calculateOrderTotal(e).toFixed(2)),1)])])]),(0,r.Lk)("div",vs,[(0,r.Lk)("div",gs,[t[32]||(t[32]=(0,r.Lk)("span",{class:"order-status d-flex align-items-center"},[(0,r.Lk)("i",{class:"bi bi-check-circle-fill text-success me-1"}),(0,r.eW)(" Completed ")],-1)),(0,r.Lk)("button",{class:"btn btn-primary btn-sm",onClick:t=>i.reorderItems(e),disabled:i.isReordering||!i.hasAvailableItems(e)},[i.isReordering?((0,r.uX)(),(0,r.CE)("span",fs)):((0,r.uX)(),(0,r.CE)("i",Ls)),(0,r.eW)(" "+(0,o.v_)(i.isReordering?"Processing...":"Reorder"),1)],8,hs)]),i.hasAvailableItems(e)?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",ys,t[33]||(t[33]=[(0,r.Lk)("i",{class:"bi bi-exclamation-triangle-fill me-1"},null,-1),(0,r.eW)(" Cannot reorder - all items are out of stock ")])))])])))),128)),i.totalPages>1?((0,r.uX)(),(0,r.CE)("div",ws,[(0,r.Lk)("nav",Cs,[(0,r.Lk)("ul",Ps,[(0,r.Lk)("li",{class:(0,o.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,r.Lk)("button",{class:"page-link",onClick:t[5]||(t[5]=e=>i.currentPage=1),disabled:1===i.currentPage},t[34]||(t[34]=[(0,r.Lk)("i",{class:"bi bi-chevron-double-left"},null,-1)]),8,xs)],2),(0,r.Lk)("li",{class:(0,o.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,r.Lk)("button",{class:"page-link",onClick:t[6]||(t[6]=e=>i.currentPage--),disabled:1===i.currentPage},t[35]||(t[35]=[(0,r.Lk)("i",{class:"bi bi-chevron-left"},null,-1)]),8,Es)],2),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.displayedPages,(e=>((0,r.uX)(),(0,r.CE)("li",{key:e,class:(0,o.C4)(["page-item",{active:i.currentPage===e}])},[(0,r.Lk)("button",{class:"page-link",onClick:t=>i.currentPage=e},(0,o.v_)(e),9,Ss)],2)))),128)),(0,r.Lk)("li",{class:(0,o.C4)(["page-item",{disabled:i.currentPage===i.totalPages}])},[(0,r.Lk)("button",{class:"page-link",onClick:t[7]||(t[7]=e=>i.currentPage++),disabled:i.currentPage===i.totalPages},t[36]||(t[36]=[(0,r.Lk)("i",{class:"bi bi-chevron-right"},null,-1)]),8,_s)],2),(0,r.Lk)("li",{class:(0,o.C4)(["page-item",{disabled:i.currentPage===i.totalPages}])},[(0,r.Lk)("button",{class:"page-link",onClick:t[8]||(t[8]=e=>i.currentPage=i.totalPages),disabled:i.currentPage===i.totalPages},t[37]||(t[37]=[(0,r.Lk)("i",{class:"bi bi-chevron-double-right"},null,-1)]),8,Ms)],2)])]),(0,r.Lk)("div",Is,[t[39]||(t[39]=(0,r.Lk)("span",null,"Items per page:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>i.itemsPerPage=e),class:"form-select form-select-sm"},t[38]||(t[38]=[(0,r.Lk)("option",{value:5},"5",-1),(0,r.Lk)("option",{value:10},"10",-1),(0,r.Lk)("option",{value:20},"20",-1)]),512),[[s.u1,i.itemsPerPage]])])])):(0,r.Q3)("",!0)])),(0,r.Lk)("div",Os,[(0,r.Lk)("div",Ds,[(0,r.Lk)("div",Ts,[(0,r.Lk)("div",Xs,[t[40]||(t[40]=(0,r.Lk)("h5",{class:"modal-title",id:"confirmModalLabel"},[(0,r.Lk)("i",{class:"bi bi-cart-check me-2"}),(0,r.eW)("Confirm ")],-1)),(0,r.Lk)("button",{type:"button",class:"btn-close",onClick:t[10]||(t[10]=(...e)=>i.hideConfirmModal&&i.hideConfirmModal(...e)),"aria-label":"Close"})]),(0,r.Lk)("div",Fs,[(0,r.Lk)("div",Ws,[(0,r.Lk)("p",As,(0,o.v_)(i.confirmMessage),1),i.orderToReorder?((0,r.uX)(),(0,r.CE)("div",Rs,[t[49]||(t[49]=(0,r.Lk)("h6",{class:"preview-heading"},[(0,r.Lk)("i",{class:"bi bi-receipt me-2"}),(0,r.eW)("Order Summary ")],-1)),(0,r.Lk)("div",qs,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.orderToReorder.items,(e=>((0,r.uX)(),(0,r.CE)("div",{class:(0,o.C4)(["preview-item",{unavailable:i.isItemUnavailable(e)}]),key:e.id},[(0,r.Lk)("div",Qs,[(0,r.Lk)("span",Ks,(0,o.v_)(i.getProductDetails(e.product)?i.getProductDetails(e.product).name:`Product #${e.product}`),1),(0,r.Lk)("span",Ns,[(0,r.eW)(" Ã "+(0,o.v_)(e.quantity)+" ",1),i.isItemUnavailable(e)?((0,r.uX)(),(0,r.CE)("span",Us,t[41]||(t[41]=[(0,r.Lk)("i",{class:"bi bi-x-circle-fill"},null,-1),(0,r.eW)(" Out of stock ")]))):i.isItemPartiallyAvailable(e)?((0,r.uX)(),(0,r.CE)("span",Bs,[t[42]||(t[42]=(0,r.Lk)("i",{class:"bi bi-exclamation-circle-fill"},null,-1)),(0,r.eW)(" Limited stock ("+(0,o.v_)(i.getProductDetails(e.product).stock)+") ",1)])):(0,r.Q3)("",!0)])]),i.getProductDetails(e.product)?((0,r.uX)(),(0,r.CE)("span",Hs," â±"+(0,o.v_)((i.getProductDetails(e.product).price*(i.isItemUnavailable(e)?0:Math.min(e.quantity,i.getProductDetails(e.product).stock))).toFixed(2)),1)):(0,r.Q3)("",!0)],2)))),128))]),(0,r.Lk)("div",$s,[(0,r.Lk)("div",Vs,[t[43]||(t[43]=(0,r.Lk)("span",null,"Subtotal:",-1)),(0,r.Lk)("span",null,"â±"+(0,o.v_)(i.calculateAvailableTotal(i.orderToReorder).subtotal.toFixed(2)),1)]),(0,r.Lk)("div",js,[t[44]||(t[44]=(0,r.Lk)("span",null,"Total:",-1)),(0,r.Lk)("span",null,"â±"+(0,o.v_)(i.calculateAvailableTotal(i.orderToReorder).total.toFixed(2)),1)])]),(0,r.Lk)("div",Js,[i.unavailableItems.length>0?((0,r.uX)(),(0,r.CE)("div",zs,[t[46]||(t[46]=(0,r.Lk)("i",{class:"bi bi-exclamation-triangle-fill me-2"},null,-1)),(0,r.Lk)("div",null,[t[45]||(t[45]=(0,r.Lk)("p",{class:"validation-title"},"Some items are unavailable",-1)),(0,r.Lk)("p",Zs,(0,o.v_)(i.unavailableItems.length)+" item(s) will be skipped due to stock issues.",1)])])):(0,r.Q3)("",!0),i.partiallyAvailableItems.length>0?((0,r.uX)(),(0,r.CE)("div",Ys,t[47]||(t[47]=[(0,r.Lk)("i",{class:"bi bi-info-circle-fill me-2"},null,-1),(0,r.Lk)("div",null,[(0,r.Lk)("p",{class:"validation-title"},"Limited stock available"),(0,r.Lk)("p",{class:"validation-desc"},"Some items have limited stock and quantities will be adjusted.")],-1)]))):(0,r.Q3)("",!0),0===i.calculateAvailableTotal(i.orderToReorder).total?((0,r.uX)(),(0,r.CE)("div",Gs,t[48]||(t[48]=[(0,r.Lk)("i",{class:"bi bi-x-octagon-fill me-2"},null,-1),(0,r.Lk)("div",null,[(0,r.Lk)("p",{class:"validation-title"},"Cannot proceed"),(0,r.Lk)("p",{class:"validation-desc"},"All items in this order are out of stock.")],-1)]))):(0,r.Q3)("",!0)])])):(0,r.Q3)("",!0)])]),(0,r.Lk)("div",er,[(0,r.Lk)("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[11]||(t[11]=(...e)=>i.hideConfirmModal&&i.hideConfirmModal(...e))},t[50]||(t[50]=[(0,r.Lk)("i",{class:"bi bi-x me-1"},null,-1),(0,r.eW)("Cancel ")])),(0,r.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[12]||(t[12]=(...e)=>i.confirmReorder&&i.confirmReorder(...e)),disabled:i.isReordering||i.orderToReorder&&0===i.calculateAvailableTotal(i.orderToReorder).total},[i.isReordering?((0,r.uX)(),(0,r.CE)("span",ar)):((0,r.uX)(),(0,r.CE)("i",sr)),(0,r.eW)(" "+(0,o.v_)(i.isReordering?"Processing...":"Confirm"),1)],8,tr)])])])],512)])}var or={setup(){const e=(0,M.KR)([]),t=(0,M.KR)([]),a=(0,M.KR)(!0),s=(0,M.KR)(!1),o=(0,M.KR)(null),i=(0,M.KR)(null),l=(0,M.KR)(""),n=(0,M.KR)(null),c=(0,M.KR)([]),d=(0,M.KR)([]),u=re(),m=(0,M.KR)(""),p=(0,M.KR)("newest"),k=(0,M.KR)(1),b=(0,M.KR)(5);(0,r.wB)([m,p,b],(()=>{k.value=1}));const v=(0,r.EW)((()=>{if(!m.value.trim())return e.value;const t=m.value.toLowerCase().trim();return e.value.filter((e=>!!e.id.toString().includes(t)||!!(e.items&&e.items.length>0)&&e.items.some((e=>{const a=C(e.product);return!(!a||!a.name)&&a.name.toLowerCase().includes(t)}))))})),g=(0,r.EW)((()=>{const e=[...v.value];switch(p.value){case"newest":return e.sort(((e,t)=>new Date(t.date_ordered)-new Date(e.date_ordered)));case"oldest":return e.sort(((e,t)=>new Date(e.date_ordered)-new Date(t.date_ordered)));case"highest":return e.sort(((e,t)=>P(t)-P(e)));case"lowest":return e.sort(((e,t)=>P(e)-P(t)));default:return e}})),h=(0,r.EW)((()=>Math.ceil(g.value.length/b.value))),f=(0,r.EW)((()=>{const e=[],t=5;if(h.value<=t)for(let a=1;a<=h.value;a++)e.push(a);else{e.push(1);let t=Math.max(2,k.value-1),a=Math.min(h.value-1,k.value+1);k.value<=3&&(a=4),k.value>=h.value-2&&(t=h.value-3),t>2&&e.push("...");for(let s=t;s<=a;s++)e.push(s);a<h.value-1&&e.push("..."),e.push(h.value)}return e})),L=(0,r.EW)((()=>{const e=(k.value-1)*b.value,t=e+b.value;return g.value.slice(e,t)})),y=e=>{const t={year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(e).toLocaleDateString(void 0,t)},w=e=>e?e.startsWith("http")?e:`http://127.0.0.1:8000${e.startsWith("/")?e:"/media/"+e}`:"",C=e=>t.value.find((t=>t.id===e)),P=e=>{let t=0;return e.items&&e.items.forEach((e=>{const a=C(e.product);a&&(t+=a.price*e.quantity)})),t},x=e=>!(!e.items||0===e.items.length)&&e.items.some((e=>{const t=C(e.product);return t&&t.stock>0})),E=e=>{if(!e.items)return[];const t=[];return e.items.forEach((e=>{const a=C(e.product);a&&0===a.stock&&t.push({id:a.id,name:a.name})})),t},S=e=>{if(!e.items)return[];const t=[];return e.items.forEach((e=>{const a=C(e.product);a&&a.stock>0&&a.stock<e.quantity&&t.push({id:a.id,name:a.name,requestedQty:e.quantity,availableQty:a.stock})})),t},_=e=>{const t=C(e.product);return!t||0===t.stock},I=e=>{const t=C(e.product);return t&&t.stock>0&&t.stock<e.quantity},O=e=>{let t=0;return e&&e.items&&e.items.forEach((e=>{const a=C(e.product);if(a&&a.stock>0){const s=Math.min(e.quantity,a.stock);t+=a.price*s}})),{subtotal:t,total:t}},D=e=>{x(e)?(n.value=e,c.value=E(e),d.value=S(e),c.value.length>0?l.value="Some items in this order are out of stock and will be skipped. Do you want to continue with the reorder?":l.value="Are you sure you want to reorder these items?",W()):u.error("Cannot reorder - all items are out of stock")},T=async()=>{if(n.value){s.value=!0;try{const e=await V.get("user/"),t=await V.post("orders/",{customer:e.data.id,complete:!0}),a=t.data.id;let s=0;for(const r of n.value.items){const e=C(r.product);if(!e||e.stock<1)continue;const t=Math.min(r.quantity,e.stock);await V.post("order-items/",{order:a,product:r.product,quantity:t}),s++}s>0?(u.success("Order placed successfully!"),setTimeout((()=>{X()}),1e3)):u.error("No items could be added to your order."),A()}catch(e){console.error(e),u.error("Failed to reorder. Please try again.")}finally{s.value=!1}}},X=async()=>{try{const t=await V.get("orders/");e.value=t.data}catch(t){u.error("Failed to load orders."),console.error(t)}},F=async()=>{try{const e=await V.get("products/");t.value=e.data}catch(e){console.error("Failed to load products:",e)}finally{a.value=!1}},W=()=>{i.value?i.value.show():o.value&&(i.value=new de.aF(o.value),i.value.show())},A=()=>{i.value&&i.value.hide()},R=async()=>{try{await X(),await F()}catch(e){console.error(e),a.value=!1}};return R(),{orders:e,isLoading:a,isReordering:s,confirmModal:o,confirmMessage:l,orderToReorder:n,unavailableItems:c,partiallyAvailableItems:d,searchTerm:m,sortOption:p,currentPage:k,itemsPerPage:b,filteredOrders:v,sortedOrders:g,paginatedOrders:L,totalPages:h,displayedPages:f,formatDate:y,fullImageUrl:w,getProductDetails:C,calculateOrderTotal:P,hasAvailableItems:x,isItemUnavailable:_,isItemPartiallyAvailable:I,calculateAvailableTotal:O,reorderItems:D,confirmReorder:T,hideConfirmModal:A}}};const ir=(0,le.A)(or,[["render",rr],["__scopeId","data-v-34957621"]]);var lr=ir;const nr={class:"container"},cr={class:"row g-3 mb-3 mb-md-4"},dr={class:"col-12 col-md-4"},ur={class:"stat-card card h-100"},mr={class:"card-body"},pr={class:"stat-info"},kr={class:"col-12 col-md-4"},br={class:"stat-card card h-100"},vr={class:"card-body"},gr={class:"stat-info"},hr={class:"col-12 col-md-4"},fr={class:"stat-card card h-100"},Lr={class:"card-body"},yr={class:"stat-info"},wr={class:"card mb-3"},Cr={class:"card-body"},Pr={class:"row g-2"},xr={class:"col-12 col-md-4"},Er={class:"form-group"},Sr={class:"input-group"},_r={class:"col-12 col-md-4"},Mr={class:"form-group"},Ir={class:"d-flex gap-2"},Or={class:"input-group"},Dr={class:"input-group"},Tr={class:"col-12 col-md-4"},Xr={class:"form-group"},Fr={class:"d-flex justify-content-end mt-3"},Wr={class:"card mb-3 mb-md-4"},Ar={class:"card-header d-flex flex-column flex-md-row justify-content-between align-items-md-center"},Rr={class:"mb-2 mb-md-0"},qr={class:"mobile-pagination-select d-md-none"},Qr={class:"per-page-selector"},Kr={class:"d-none d-md-flex align-items-center"},Nr={class:"me-2 text-muted"},Ur={class:"per-page-selector ms-2"},Br={class:"d-md-none"},Hr={key:0,class:"text-center py-4"},$r={key:1,class:"mobile-orders-list"},Vr=["onClick"],jr={class:"d-flex justify-content-between align-items-center mb-2"},Jr={class:"order-id"},zr={class:"text-muted small mb-2"},Zr={class:"mb-2"},Yr={class:"d-flex justify-content-between"},Gr={key:0,class:"mobile-pagination"},eo={class:"pagination-info"},to={class:"pagination-controls"},ao=["disabled"],so=["disabled"],ro={class:"table-responsive d-none d-md-block"},oo={class:"table table-hover mb-0"},io={key:0},lo={class:"order-id"},no=["onClick"],co={key:0,class:"card-footer d-none d-md-flex justify-content-between align-items-center"},uo={class:"pagination-info"},mo={"aria-label":"Orders pagination"},po={class:"pagination pagination-sm mb-0"},ko=["disabled"],bo={key:0,class:"page-link",disabled:""},vo=["onClick"],go=["disabled"],ho={class:"modal fade",ref:"orderModal",id:"orderModal",tabindex:"-1"},fo={class:"modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable"},Lo={class:"modal-content"},yo={class:"modal-header"},wo={class:"modal-title"},Co={key:0,class:"modal-body"},Po={class:"order-info mb-4"},xo={class:"row"},Eo={class:"col-md-6 mb-3 mb-md-0"},So={class:"col-md-6"},_o={class:"table-responsive"},Mo={class:"table table-bordered mb-0"},Io={class:"d-flex align-items-center"},Oo={key:0,class:"order-item-image me-2"},Do=["src"],To={key:1,class:"image-placeholder"},Xo={class:"text-center"},Fo={class:"text-center"},Wo={class:"text-center"},Ao={class:"text-center"},Ro={class:"modal-footer"};function qo(e,t,a,i,l,n){return(0,r.uX)(),(0,r.CE)("div",nr,[t[52]||(t[52]=(0,r.Lk)("div",{class:"admin-header mb-3 mb-md-4"},[(0,r.Lk)("h2",{class:"section-title"},[(0,r.Lk)("i",{class:"bi bi-clipboard-check me-2"}),(0,r.eW)("Checkout Monitor ")])],-1)),(0,r.Lk)("div",cr,[(0,r.Lk)("div",dr,[(0,r.Lk)("div",ur,[(0,r.Lk)("div",mr,[t[15]||(t[15]=(0,r.Lk)("div",{class:"stat-icon"},[(0,r.Lk)("i",{class:"bi bi-cart-check"})],-1)),(0,r.Lk)("div",pr,[(0,r.Lk)("h3",null,(0,o.v_)(l.orders.length),1),t[14]||(t[14]=(0,r.Lk)("p",null,"Total Orders",-1))])])])]),(0,r.Lk)("div",kr,[(0,r.Lk)("div",br,[(0,r.Lk)("div",vr,[t[17]||(t[17]=(0,r.Lk)("div",{class:"stat-icon"},[(0,r.Lk)("span",null,"â±")],-1)),(0,r.Lk)("div",gr,[(0,r.Lk)("h3",null,"â±"+(0,o.v_)(n.calculateTotalSales()),1),t[16]||(t[16]=(0,r.Lk)("p",null,"Total Sales",-1))])])])]),(0,r.Lk)("div",hr,[(0,r.Lk)("div",fr,[(0,r.Lk)("div",Lr,[t[19]||(t[19]=(0,r.Lk)("div",{class:"stat-icon"},[(0,r.Lk)("i",{class:"bi bi-people"})],-1)),(0,r.Lk)("div",yr,[(0,r.Lk)("h3",null,(0,o.v_)(n.uniqueCustomers.length),1),t[18]||(t[18]=(0,r.Lk)("p",null,"Unique Customers",-1))])])])])]),(0,r.Lk)("div",wr,[(0,r.Lk)("div",Cr,[t[28]||(t[28]=(0,r.Lk)("h5",{class:"filter-title mb-3"},[(0,r.Lk)("i",{class:"bi bi-funnel me-2"}),(0,r.eW)("Search & Filter")],-1)),(0,r.Lk)("div",Pr,[(0,r.Lk)("div",xr,[(0,r.Lk)("div",Er,[t[21]||(t[21]=(0,r.Lk)("label",{class:"form-label"},"Search",-1)),(0,r.Lk)("div",Sr,[t[20]||(t[20]=(0,r.Lk)("span",{class:"input-group-text"},[(0,r.Lk)("i",{class:"bi bi-search"})],-1)),(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchQuery=e),class:"form-control",placeholder:"Order ID..."},null,512),[[s.Jo,l.searchQuery]])])])]),(0,r.Lk)("div",_r,[(0,r.Lk)("div",Mr,[t[24]||(t[24]=(0,r.Lk)("label",{class:"form-label"},"Date Range",-1)),(0,r.Lk)("div",Ir,[(0,r.Lk)("div",Or,[t[22]||(t[22]=(0,r.Lk)("span",{class:"input-group-text"},[(0,r.Lk)("i",{class:"bi bi-calendar3"})],-1)),(0,r.bo)((0,r.Lk)("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=e=>l.dateFrom=e),class:"form-control",placeholder:"From"},null,512),[[s.Jo,l.dateFrom]])]),(0,r.Lk)("div",Dr,[t[23]||(t[23]=(0,r.Lk)("span",{class:"input-group-text"},[(0,r.Lk)("i",{class:"bi bi-calendar3"})],-1)),(0,r.bo)((0,r.Lk)("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=e=>l.dateTo=e),class:"form-control",placeholder:"To"},null,512),[[s.Jo,l.dateTo]])])])])]),(0,r.Lk)("div",Tr,[(0,r.Lk)("div",Xr,[t[26]||(t[26]=(0,r.Lk)("label",{class:"form-label"},"Sort By",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.sortBy=e),class:"form-select"},t[25]||(t[25]=[(0,r.Lk)("option",{value:"date_desc"},"Newest First",-1),(0,r.Lk)("option",{value:"date_asc"},"Oldest First",-1),(0,r.Lk)("option",{value:"amount_desc"},"Highest Amount",-1),(0,r.Lk)("option",{value:"amount_asc"},"Lowest Amount",-1)]),512),[[s.u1,l.sortBy]])])])]),(0,r.Lk)("div",Fr,[(0,r.Lk)("button",{class:"btn btn-outline-secondary me-2",onClick:t[4]||(t[4]=(...e)=>n.resetFilters&&n.resetFilters(...e))},t[27]||(t[27]=[(0,r.Lk)("i",{class:"bi bi-x-circle me-1"},null,-1),(0,r.eW)("Reset ")]))])])]),(0,r.Lk)("div",Wr,[(0,r.Lk)("div",Ar,[(0,r.Lk)("h5",Rr,[t[30]||(t[30]=(0,r.Lk)("i",{class:"bi bi-list-check me-2"},null,-1)),t[31]||(t[31]=(0,r.eW)("Recent Orders ")),(0,r.Lk)("div",qr,[(0,r.Lk)("div",Qr,[(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.perPage=e),class:"form-select form-select-sm","aria-label":"Items per page"},t[29]||(t[29]=[(0,r.Lk)("option",{value:5},"5",-1),(0,r.Lk)("option",{value:10},"10",-1),(0,r.Lk)("option",{value:25},"25",-1),(0,r.Lk)("option",{value:50},"50",-1)]),512),[[s.u1,l.perPage]])])])]),(0,r.Lk)("div",Kr,[(0,r.Lk)("span",Nr,(0,o.v_)(n.filteredOrders.length)+" orders found",1),(0,r.Lk)("div",Ur,[(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.perPage=e),class:"form-select form-select-sm","aria-label":"Items per page"},t[32]||(t[32]=[(0,r.Lk)("option",{value:5},"5",-1),(0,r.Lk)("option",{value:10},"10",-1),(0,r.Lk)("option",{value:25},"25",-1),(0,r.Lk)("option",{value:50},"50",-1)]),512),[[s.u1,l.perPage]])])])]),(0,r.Lk)("div",Br,[0===n.filteredOrders.length?((0,r.uX)(),(0,r.CE)("div",Hr,t[33]||(t[33]=[(0,r.Lk)("i",{class:"bi bi-search text-muted",style:{"font-size":"2rem"}},null,-1),(0,r.Lk)("p",{class:"mt-2 text-muted"},"No orders found",-1)]))):((0,r.uX)(),(0,r.CE)("div",$r,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.paginatedOrders,(e=>((0,r.uX)(),(0,r.CE)("div",{key:`mobile-${e.id}`,class:"mobile-order-item",onClick:t=>n.viewOrderDetails(e)},[(0,r.Lk)("div",jr,[(0,r.Lk)("strong",Jr,"#"+(0,o.v_)(e.id),1),t[34]||(t[34]=(0,r.Lk)("span",{class:"badge bg-success"},"Completed",-1))]),(0,r.Lk)("div",zr,(0,o.v_)(n.formatDate(e.date_ordered)),1),(0,r.Lk)("div",Zr,(0,o.v_)(e.customer),1),(0,r.Lk)("div",Yr,[(0,r.Lk)("span",null,(0,o.v_)(e.items?e.items.length:0)+" items",1),(0,r.Lk)("strong",null,"â±"+(0,o.v_)(n.calculateOrderTotal(e).toFixed(2)),1)])],8,Vr)))),128)),n.totalPages>1?((0,r.uX)(),(0,r.CE)("div",Gr,[(0,r.Lk)("div",eo," Page "+(0,o.v_)(l.currentPage)+" of "+(0,o.v_)(n.totalPages),1),(0,r.Lk)("div",to,[(0,r.Lk)("button",{class:"btn btn-sm btn-outline-primary",disabled:1===l.currentPage,onClick:t[7]||(t[7]=e=>n.changePage(l.currentPage-1))},t[35]||(t[35]=[(0,r.Lk)("i",{class:"bi bi-chevron-left"},null,-1)]),8,ao),(0,r.Lk)("button",{class:"btn btn-sm btn-outline-primary",disabled:l.currentPage===n.totalPages,onClick:t[8]||(t[8]=e=>n.changePage(l.currentPage+1))},t[36]||(t[36]=[(0,r.Lk)("i",{class:"bi bi-chevron-right"},null,-1)]),8,so)])])):(0,r.Q3)("",!0)]))]),(0,r.Lk)("div",ro,[(0,r.Lk)("table",oo,[t[40]||(t[40]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",{scope:"col"},"Order ID"),(0,r.Lk)("th",{scope:"col"},"Date"),(0,r.Lk)("th",{scope:"col"},"Customer"),(0,r.Lk)("th",{scope:"col"},"Items"),(0,r.Lk)("th",{scope:"col"},"Total"),(0,r.Lk)("th",{scope:"col"},"Status"),(0,r.Lk)("th",{scope:"col"},"Actions")])],-1)),(0,r.Lk)("tbody",null,[0===n.filteredOrders.length?((0,r.uX)(),(0,r.CE)("tr",io,t[37]||(t[37]=[(0,r.Lk)("td",{colspan:"7",class:"text-center py-4"},[(0,r.Lk)("i",{class:"bi bi-search text-muted",style:{"font-size":"2rem"}}),(0,r.Lk)("p",{class:"mt-2 text-muted"},"No orders found")],-1)]))):(0,r.Q3)("",!0),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.paginatedOrders,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:`desktop-${e.id}`},[(0,r.Lk)("td",null,[(0,r.Lk)("span",lo,"#"+(0,o.v_)(e.id),1)]),(0,r.Lk)("td",null,(0,o.v_)(n.formatDate(e.date_ordered)),1),(0,r.Lk)("td",null,(0,o.v_)(e.customer),1),(0,r.Lk)("td",null,(0,o.v_)(e.items?e.items.length:0)+" items",1),(0,r.Lk)("td",null,"â±"+(0,o.v_)(n.calculateOrderTotal(e).toFixed(2)),1),t[39]||(t[39]=(0,r.Lk)("td",null,[(0,r.Lk)("span",{class:"badge bg-success"},"Completed")],-1)),(0,r.Lk)("td",null,[(0,r.Lk)("button",{class:"btn btn-sm btn-primary btn-view",onClick:t=>n.viewOrderDetails(e)},t[38]||(t[38]=[(0,r.Lk)("i",{class:"bi bi-eye"},null,-1)]),8,no)])])))),128))])])]),n.filteredOrders.length>0?((0,r.uX)(),(0,r.CE)("div",co,[(0,r.Lk)("div",uo," Showing "+(0,o.v_)(n.paginationInfo.from)+" to "+(0,o.v_)(n.paginationInfo.to)+" of "+(0,o.v_)(n.filteredOrders.length)+" orders ",1),(0,r.Lk)("nav",mo,[(0,r.Lk)("ul",po,[(0,r.Lk)("li",{class:(0,o.C4)(["page-item",{disabled:1===l.currentPage}])},[(0,r.Lk)("button",{class:"page-link",onClick:t[9]||(t[9]=e=>n.changePage(l.currentPage-1)),disabled:1===l.currentPage,"aria-label":"Previous page"},t[41]||(t[41]=[(0,r.Lk)("i",{class:"bi bi-chevron-left"},null,-1)]),8,ko)],2),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.getPageNumbers(),(e=>((0,r.uX)(),(0,r.CE)("li",{key:e,class:(0,o.C4)(["page-item",{active:l.currentPage===e}])},["..."===e?((0,r.uX)(),(0,r.CE)("button",bo,(0,o.v_)(e),1)):((0,r.uX)(),(0,r.CE)("button",{key:1,class:"page-link",onClick:t=>n.changePage(e)},(0,o.v_)(e),9,vo))],2)))),128)),(0,r.Lk)("li",{class:(0,o.C4)(["page-item",{disabled:l.currentPage===n.totalPages}])},[(0,r.Lk)("button",{class:"page-link",onClick:t[10]||(t[10]=e=>n.changePage(l.currentPage+1)),disabled:l.currentPage===n.totalPages,"aria-label":"Next page"},t[42]||(t[42]=[(0,r.Lk)("i",{class:"bi bi-chevron-right"},null,-1)]),8,go)],2)])])])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",ho,[(0,r.Lk)("div",fo,[(0,r.Lk)("div",Lo,[(0,r.Lk)("div",yo,[(0,r.Lk)("h5",wo,"Order Details #"+(0,o.v_)(l.selectedOrder?.id),1),(0,r.Lk)("button",{type:"button",class:"btn-close",onClick:t[11]||(t[11]=(...e)=>n.closeOrderModal&&n.closeOrderModal(...e)),"aria-label":"Close"})]),l.selectedOrder?((0,r.uX)(),(0,r.CE)("div",Co,[(0,r.Lk)("div",Po,[(0,r.Lk)("div",xo,[(0,r.Lk)("div",Eo,[(0,r.Lk)("p",null,[t[43]||(t[43]=(0,r.Lk)("strong",null,"Customer:",-1)),(0,r.eW)(" "+(0,o.v_)(l.selectedOrder.customer),1)]),(0,r.Lk)("p",null,[t[44]||(t[44]=(0,r.Lk)("strong",null,"Date:",-1)),(0,r.eW)(" "+(0,o.v_)(n.formatDate(l.selectedOrder.date_ordered)),1)])]),(0,r.Lk)("div",So,[t[46]||(t[46]=(0,r.Lk)("p",null,[(0,r.Lk)("strong",null,"Status:"),(0,r.eW)(),(0,r.Lk)("span",{class:"badge bg-success"},"Completed")],-1)),(0,r.Lk)("p",null,[t[45]||(t[45]=(0,r.Lk)("strong",null,"Total:",-1)),(0,r.eW)(" â±"+(0,o.v_)(n.calculateOrderTotal(l.selectedOrder).toFixed(2)),1)])])])]),t[50]||(t[50]=(0,r.Lk)("h6",{class:"mb-3"},"Order Items",-1)),(0,r.Lk)("div",_o,[(0,r.Lk)("table",Mo,[t[49]||(t[49]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",{scope:"col"},"Product"),(0,r.Lk)("th",{scope:"col",class:"text-center"},"Price"),(0,r.Lk)("th",{scope:"col",class:"text-center"},"Quantity"),(0,r.Lk)("th",{scope:"col",class:"text-center"},"Total")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.selectedOrder.items,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.id},[(0,r.Lk)("td",null,[(0,r.Lk)("div",Io,[n.getProductDetails(e.product)?((0,r.uX)(),(0,r.CE)("div",Oo,[n.getProductDetails(e.product).image?((0,r.uX)(),(0,r.CE)("img",{key:0,src:n.fullImageUrl(n.getProductDetails(e.product).image),alt:"Product"},null,8,Do)):((0,r.uX)(),(0,r.CE)("div",To,t[47]||(t[47]=[(0,r.Lk)("i",{class:"bi bi-image"},null,-1)])))])):(0,r.Q3)("",!0),(0,r.Lk)("span",null,(0,o.v_)(n.getProductDetails(e.product)?n.getProductDetails(e.product).name:`Product #${e.product}`),1)])]),(0,r.Lk)("td",Xo,"â±"+(0,o.v_)(n.getProductDetails(e.product)?n.getProductDetails(e.product).price:"N/A"),1),(0,r.Lk)("td",Fo,(0,o.v_)(e.quantity),1),(0,r.Lk)("td",Wo,"â±"+(0,o.v_)(n.getProductDetails(e.product)?(n.getProductDetails(e.product).price*e.quantity).toFixed(2):"N/A"),1)])))),128))]),(0,r.Lk)("tfoot",null,[(0,r.Lk)("tr",null,[t[48]||(t[48]=(0,r.Lk)("td",{colspan:"3",class:"text-end"},[(0,r.Lk)("strong",null,"Total:")],-1)),(0,r.Lk)("td",Ao,"â±"+(0,o.v_)(n.calculateOrderTotal(l.selectedOrder).toFixed(2)),1)])])])])])):(0,r.Q3)("",!0),(0,r.Lk)("div",Ro,[(0,r.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[12]||(t[12]=(...e)=>n.closeOrderModal&&n.closeOrderModal(...e))},"Close"),(0,r.Lk)("button",{type:"button",class:"btn btn-primary btn-view",onClick:t[13]||(t[13]=(...e)=>n.printOrder&&n.printOrder(...e))},t[51]||(t[51]=[(0,r.Lk)("i",{class:"bi bi-printer me-2"},null,-1),(0,r.eW)("Print ")]))])])])],512)])}a(7642),a(8004),a(3853),a(5876),a(2475),a(5024),a(1698);var Qo={data(){return{orders:[],products:[],selectedOrder:null,modalInstance:null,searchQuery:"",dateFrom:"",dateTo:"",sortBy:"date_desc",currentPage:1,perPage:10,isFiltering:!1,cachedOrderTotals:{}}},computed:{filteredOrders(){let e=[...this.orders];if(this.searchQuery){const t=this.searchQuery.toLowerCase();e=e.filter((e=>e.id.toString().includes(t)||e.customer.toString().toLowerCase().includes(t)))}if(this.dateFrom){const t=new Date(this.dateFrom);t.setHours(0,0,0,0),e=e.filter((e=>new Date(e.date_ordered)>=t))}if(this.dateTo){const t=new Date(this.dateTo);t.setHours(23,59,59,999),e=e.filter((e=>new Date(e.date_ordered)<=t))}return"date_desc"===this.sortBy?e.sort(((e,t)=>new Date(t.date_ordered)-new Date(e.date_ordered))):"date_asc"===this.sortBy?e.sort(((e,t)=>new Date(e.date_ordered)-new Date(t.date_ordered))):"amount_desc"===this.sortBy?e.sort(((e,t)=>this.getOrderTotal(t)-this.getOrderTotal(e))):"amount_asc"===this.sortBy&&e.sort(((e,t)=>this.getOrderTotal(e)-this.getOrderTotal(t))),e},paginatedOrders(){const e=(this.currentPage-1)*this.perPage,t=e+this.perPage;return this.filteredOrders.slice(e,t)},totalPages(){return Math.ceil(this.filteredOrders.length/this.perPage)},paginationInfo(){const e=0===this.filteredOrders.length?0:(this.currentPage-1)*this.perPage+1,t=Math.min(this.currentPage*this.perPage,this.filteredOrders.length);return{from:e,to:t}},uniqueCustomers(){const e=new Set;return this.orders.forEach((t=>e.add(t.customer))),Array.from(e)}},methods:{fullImageUrl(e){return e?e.startsWith("http")?e:`http://127.0.0.1:8000${e.startsWith("/")?e:"/media/"+e}`:""},formatDate(e){const t={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(e).toLocaleDateString(void 0,t)},getProductDetails(e){return this.products.find((t=>t.id===e))},calculateOrderTotal(e){let t=0;return e.items&&e.items.forEach((e=>{const a=this.getProductDetails(e.product);a&&(t+=a.price*e.quantity)})),t},getOrderTotal(e){if(void 0!==this.cachedOrderTotals[e.id])return this.cachedOrderTotals[e.id];const t=this.calculateOrderTotal(e);return this.cachedOrderTotals[e.id]=t,t},calculateTotalSales(){let e=0;return this.orders.forEach((t=>{e+=this.calculateOrderTotal(t)})),e.toFixed(2)},viewOrderDetails(e){this.selectedOrder=e,this.modalInstance=new de.aF(this.$refs.orderModal),this.modalInstance.show()},closeOrderModal(){this.modalInstance&&this.modalInstance.hide()},changePage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e,this.$nextTick((()=>{const e=document.querySelector(".card");e&&e.scrollIntoView({behavior:"smooth",block:"start"})})))},getPageNumbers(){const e=[],t=5;if(this.totalPages<=t)for(let a=1;a<=this.totalPages;a++)e.push(a);else{e.push(1);let t=Math.max(2,this.currentPage-1),a=Math.min(this.totalPages-1,t+2);a===this.totalPages-1&&(t=Math.max(2,a-2)),t>2&&e.push("...");for(let s=t;s<=a;s++)e.push(s);a<this.totalPages-1&&e.push("..."),e.push(this.totalPages)}return e},resetFilters(){this.searchQuery="",this.dateFrom="",this.dateTo="",this.sortBy="date_desc",this.currentPage=1,this.showNotification("info","Filters have been reset")},applyFilters(){this.currentPage=1,this.isFiltering=!0,this.showNotification("success","Filters applied"),this.cachedOrderTotals={},this.$nextTick((()=>{this.isFiltering=!1}))},printOrder(){const e=window.open("","_blank","width=800,height=600");let t=`\n        <!DOCTYPE html>\n        <html>\n        <head>\n          <title>Order #${this.selectedOrder.id} - Invoice</title>\n          <meta charset="utf-8">\n          <meta name="viewport" content="width=device-width, initial-scale=1">\n          <style>\n            body {\n              font-family: Arial, sans-serif;\n              padding: 20px;\n              color: #333;\n              line-height: 1.4;\n            }\n            .print-container {\n              max-width: 800px;\n              margin: 0 auto;\n              padding: 20px;\n            }\n            .print-header {\n              text-align: center;\n              margin-bottom: 30px;\n              padding-bottom: 15px;\n              border-bottom: 2px solid #eee;\n            }\n            .print-header h2 {\n              margin-bottom: 5px;\n              font-size: 24px;\n            }\n            .print-header h3 {\n              margin-top: 0;\n              font-size: 18px;\n              color: #666;\n            }\n            .print-order-details {\n              margin-bottom: 30px;\n            }\n            .print-row {\n              display: flex;\n              margin: 0 -15px;\n            }\n            .print-col {\n              flex: 1;\n              padding: 0 15px;\n            }\n            .print-items h4 {\n              margin-bottom: 15px;\n              font-size: 18px;\n              border-bottom: 1px solid #eee;\n              padding-bottom: 8px;\n            }\n            .print-table {\n              width: 100%;\n              border-collapse: collapse;\n              margin-bottom: 30px;\n            }\n            .print-table th,\n            .print-table td {\n              border: 1px solid #ddd;\n              padding: 8px 12px;\n              text-align: left;\n            }\n            .print-table th {\n              background-color: #f5f5f5;\n            }\n            .print-table tfoot {\n              font-weight: bold;\n            }\n            .print-footer {\n              margin-top: 50px;\n              text-align: center;\n              font-style: italic;\n              color: #666;\n              padding-top: 15px;\n              border-top: 1px solid #eee;\n            }\n            @media print {\n              .no-print {\n                display: none;\n              }\n            }\n            .print-button {\n              background-color: #007bff;\n              color: white;\n              border: none;\n              padding: 10px 15px;\n              border-radius: 4px;\n              cursor: pointer;\n              margin: 20px 0;\n              font-size: 14px;\n            }\n            .print-button:hover {\n              background-color: #0069d9;\n            }\n          </style>\n        </head>\n        <body>\n          <div class="print-container">\n            <div class="print-header">\n              <h2>Order Invoice</h2>\n              <h3>Order #${this.selectedOrder.id}</h3>\n            </div>\n            \n            <div class="print-order-details">\n              <div class="print-row">\n                <div class="print-col">\n                  <p><strong>Customer:</strong> ${this.selectedOrder.customer}</p>\n                  <p><strong>Date:</strong> ${this.formatDate(this.selectedOrder.date_ordered)}</p>\n                </div>\n                <div class="print-col">\n                  <p><strong>Status:</strong> Completed</p>\n                  <p><strong>Total:</strong> â±${this.calculateOrderTotal(this.selectedOrder).toFixed(2)}</p>\n                </div>\n              </div>\n            </div>\n            \n            <div class="print-items">\n              <h4>Order Items</h4>\n              <table class="print-table">\n                <thead>\n                  <tr>\n                    <th>Product</th>\n                    <th style="text-align: center">Price</th>\n                    <th style="text-align: center">Quantity</th>\n                    <th style="text-align: center">Total</th>\n                  </tr>\n                </thead>\n                <tbody>`;this.selectedOrder.items.forEach((e=>{const a=this.getProductDetails(e.product),s=a?a.name:`Product #${e.product}`,r=a?a.price:"N/A",o=a?(a.price*e.quantity).toFixed(2):"N/A";t+=`\n                  <tr>\n                    <td>${s}</td>\n                    <td style="text-align: center">â±${r}</td>\n                    <td style="text-align: center">${e.quantity}</td>\n                    <td style="text-align: center">â±${o}</td>\n                  </tr>`})),t+=`\n                </tbody>\n                <tfoot>\n                  <tr>\n                    <td colspan="3" style="text-align: right"><strong>Total:</strong></td>\n                    <td style="text-align: center">â±${this.calculateOrderTotal(this.selectedOrder).toFixed(2)}</td>\n                  </tr>\n                </tfoot>\n              </table>\n            </div>\n            \n            <div class="print-footer">\n              <p>Thank you for your business!</p>\n            </div>\n            \n            <div class="no-print" style="text-align: center; margin-top: 30px;">\n              <button class="print-button" onclick="window.print(); window.close();">\n                Print Invoice\n              </button>\n              <button class="print-button" style="background-color: #6c757d;" onclick="window.close();">\n                Close\n              </button>\n            </div>\n          </div>\n          \n          <script>\n            // Auto-print on load (optional)\n            window.onload = function() {\n              // Uncomment the line below if you want auto-print\n              // window.print();\n            }\n          <\/script>\n        </body>\n        </html>`,e.document.open(),e.document.write(t),e.document.close(),e.focus()},async fetchOrders(){try{const e=await V.get("orders/");this.orders=e.data}catch(e){this.showNotification("error","Failed to load orders.")}},async fetchProducts(){try{const e=await V.get("products/");this.products=e.data}catch(e){this.showNotification("error","Failed to load products.")}},showNotification(e,t){const a=document.createElement("div");a.className=`notification notification-${e}`;let s="bi-info-circle";"success"===e&&(s="bi-check-circle"),"warning"===e&&(s="bi-exclamation-triangle"),"error"===e&&(s="bi-x-circle"),a.innerHTML=`<i class="bi ${s}"></i> ${t}`,document.body.appendChild(a),setTimeout((()=>{a.classList.add("show")}),10),setTimeout((()=>{a.classList.remove("show"),setTimeout((()=>{document.body.removeChild(a)}),300)}),3e3)}},watch:{searchQuery(){this.currentPage=1},sortBy(){this.currentPage=1,this.cachedOrderTotals={}},perPage(){this.currentPage=1},dateFrom(){this.currentPage=1},dateTo(){this.currentPage=1}},mounted(){this.fetchOrders(),this.fetchProducts()}};const Ko=(0,le.A)(Qo,[["render",qo],["__scopeId","data-v-3e2cca6a"]]);var No=Ko;const Uo={class:"container"},Bo={class:"admin-header mb-4"},Ho={class:"admin-actions"},$o={class:"row mb-4"},Vo={class:"col-md-4"},jo={class:"stat-card card"},Jo={class:"card-body"},zo={class:"stat-info"},Zo={class:"col-md-4"},Yo={class:"stat-card card"},Go={class:"card-body"},ei={class:"stat-info"},ti={class:"col-md-4"},ai={class:"stat-card card"},si={class:"card-body"},ri={class:"stat-info"},oi={class:"card mb-4"},ii={class:"card-header d-flex justify-content-between align-items-center flex-wrap gap-2"},li={class:"search-container"},ni={key:0,class:"loading-container py-5"},ci={key:1,class:"empty-products py-5"},di={key:2,class:"table-responsive"},ui={class:"table table-hover"},mi={class:"product-image"},pi=["src","alt"],ki={key:1,class:"image-placeholder"},bi={class:"product-name"},vi={class:"product-description"},gi={class:"btn-group"},hi=["onClick"],fi=["onClick"],Li={key:3,class:"card-footer"},yi={"aria-label":"Product pagination"},wi={class:"pagination justify-content-center mb-0"},Ci=["disabled"],Pi={key:0,class:"page-link",disabled:""},xi=["onClick"],Ei=["disabled"],Si={class:"card"},_i={class:"table-responsive"},Mi={class:"table"},Ii={key:0},Oi={class:"modal fade",ref:"editModal",id:"editModal",tabindex:"-1","aria-labelledby":"editModalLabel","aria-hidden":"true"},Di={class:"modal-dialog modal-dialog-centered modal-lg"},Ti={class:"modal-content"},Xi={class:"modal-header"},Fi={class:"modal-body"},Wi={class:"modal-body-scrollable"},Ai={key:0,class:"text-center mb-4"},Ri={class:"product-image-preview"},qi=["src","alt"],Qi={class:"form-group mb-3"},Ki={key:0,class:"invalid-feedback"},Ni={class:"form-group mb-3"},Ui={key:0,class:"invalid-feedback"},Bi={class:"row mb-3"},Hi={class:"col-12 col-sm-6 mb-3 mb-sm-0"},$i={class:"input-group"},Vi={key:0,class:"invalid-feedback"},ji={class:"col-12 col-sm-6"},Ji={class:"input-group"},zi={key:0,class:"invalid-feedback"},Zi={class:"form-group mb-3"},Yi={class:"custom-file-upload"},Gi={class:"modal-footer"},el=["disabled"],tl={key:0,class:"spinner-border spinner-border-sm me-1",role:"status"},al={key:1,class:"bi bi-check-circle me-1"},sl={class:"modal fade confirm-modal",ref:"confirmModal",tabindex:"-1","aria-labelledby":"confirmModalLabel","aria-hidden":"true"},rl={class:"modal-dialog modal-dialog-centered modal-sm"},ol={class:"modal-content"},il={class:"modal-header"},ll={class:"modal-footer"},nl=["disabled"],cl={key:0,class:"spinner-border spinner-border-sm me-1",role:"status"},dl={key:1,class:"bi bi-trash me-1"};function ul(e,t,a,i,l,n){const c=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",Uo,[(0,r.Lk)("div",Bo,[t[20]||(t[20]=(0,r.Lk)("h2",{class:"section-title"},[(0,r.Lk)("i",{class:"bi bi-box-seam me-2"}),(0,r.eW)("Product Inventory ")],-1)),(0,r.Lk)("div",Ho,[(0,r.bF)(c,{to:"/add-product",class:"btn btn-add"},{default:(0,r.k6)((()=>t[19]||(t[19]=[(0,r.Lk)("i",{class:"bi bi-plus-circle me-2"},null,-1),(0,r.eW)("Add New Product ")]))),_:1})])]),(0,r.Lk)("div",$o,[(0,r.Lk)("div",Vo,[(0,r.Lk)("div",jo,[(0,r.Lk)("div",Jo,[t[22]||(t[22]=(0,r.Lk)("div",{class:"stat-icon"},[(0,r.Lk)("i",{class:"bi bi-box-seam"})],-1)),(0,r.Lk)("div",zo,[(0,r.Lk)("h3",null,(0,o.v_)(i.products.length),1),t[21]||(t[21]=(0,r.Lk)("p",null,"Total Products",-1))])])])]),(0,r.Lk)("div",Zo,[(0,r.Lk)("div",Yo,[(0,r.Lk)("div",Go,[t[24]||(t[24]=(0,r.Lk)("div",{class:"stat-icon"},[(0,r.Lk)("i",{class:"bi bi-exclamation-triangle"})],-1)),(0,r.Lk)("div",ei,[(0,r.Lk)("h3",null,(0,o.v_)(i.lowStockCount),1),t[23]||(t[23]=(0,r.Lk)("p",null,"Low Stock Items",-1))])])])]),(0,r.Lk)("div",ti,[(0,r.Lk)("div",ai,[(0,r.Lk)("div",si,[t[26]||(t[26]=(0,r.Lk)("div",{class:"stat-icon"},[(0,r.Lk)("i",{class:"bi bi-cart-check"})],-1)),(0,r.Lk)("div",ri,[(0,r.Lk)("h3",null,(0,o.v_)(i.orders.length),1),t[25]||(t[25]=(0,r.Lk)("p",null,"Total Orders",-1))])])])])]),(0,r.Lk)("div",oi,[(0,r.Lk)("div",ii,[t[28]||(t[28]=(0,r.Lk)("h5",{class:"mb-0"},"Product Inventory",-1)),(0,r.Lk)("div",li,[(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control search-input",placeholder:"Search products...","onUpdate:modelValue":t[0]||(t[0]=e=>i.searchQuery=e),"aria-label":"Search products"},null,512),[[s.Jo,i.searchQuery]]),t[27]||(t[27]=(0,r.Lk)("i",{class:"bi bi-search search-icon"},null,-1))])]),i.isLoading?((0,r.uX)(),(0,r.CE)("div",ni,t[29]||(t[29]=[(0,r.Lk)("div",{class:"spinner"},[(0,r.Lk)("div",{class:"bounce1"}),(0,r.Lk)("div",{class:"bounce2"}),(0,r.Lk)("div",{class:"bounce3"})],-1),(0,r.Lk)("p",null,"Loading products...",-1)]))):0===i.filteredProducts.length?((0,r.uX)(),(0,r.CE)("div",ci,[t[31]||(t[31]=(0,r.Lk)("i",{class:"bi bi-search-heart"},null,-1)),t[32]||(t[32]=(0,r.Lk)("h3",null,"No products found",-1)),t[33]||(t[33]=(0,r.Lk)("p",null,"Try adjusting your search criteria.",-1)),(0,r.Lk)("button",{class:"btn btn-primary mt-3",onClick:t[1]||(t[1]=(...e)=>i.resetSearch&&i.resetSearch(...e))},t[30]||(t[30]=[(0,r.Lk)("i",{class:"bi bi-arrow-counterclockwise me-2"},null,-1),(0,r.eW)("Reset Search ")]))])):((0,r.uX)(),(0,r.CE)("div",di,[(0,r.Lk)("table",ui,[t[37]||(t[37]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"Image"),(0,r.Lk)("th",null,"Name"),(0,r.Lk)("th",null,"Price"),(0,r.Lk)("th",null,"Stock"),(0,r.Lk)("th",null,"Actions")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.paginatedProducts,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.id},[(0,r.Lk)("td",null,[(0,r.Lk)("div",mi,[e.image?((0,r.uX)(),(0,r.CE)("img",{key:0,src:i.fullImageUrl(e.image),alt:e.name,loading:"lazy"},null,8,pi)):((0,r.uX)(),(0,r.CE)("div",ki,t[34]||(t[34]=[(0,r.Lk)("i",{class:"bi bi-image"},null,-1)])))])]),(0,r.Lk)("td",null,[(0,r.Lk)("div",bi,(0,o.v_)(e.name),1),(0,r.Lk)("div",vi,(0,o.v_)(i.truncate(e.description,50)),1)]),(0,r.Lk)("td",null,"â±"+(0,o.v_)(i.formatPrice(e.price)),1),(0,r.Lk)("td",null,[(0,r.Lk)("span",{class:(0,o.C4)(["stock-badge",{"bg-danger":0===e.stock,"bg-warning":e.stock>0&&e.stock<5,"bg-success":e.stock>=5}])},(0,o.v_)(e.stock),3)]),(0,r.Lk)("td",null,[(0,r.Lk)("div",gi,[(0,r.Lk)("button",{class:"btn btn-sm btn-primary",onClick:t=>i.openEditModal(e),"aria-label":"Edit product"},t[35]||(t[35]=[(0,r.Lk)("i",{class:"bi bi-pencil"},null,-1)]),8,hi),(0,r.Lk)("button",{class:"btn btn-sm btn-danger",onClick:t=>i.confirmDeleteProduct(e.id),"aria-label":"Delete product"},t[36]||(t[36]=[(0,r.Lk)("i",{class:"bi bi-trash"},null,-1)]),8,fi)])])])))),128))])])])),i.totalPages>1?((0,r.uX)(),(0,r.CE)("div",Li,[(0,r.Lk)("nav",yi,[(0,r.Lk)("ul",wi,[(0,r.Lk)("li",{class:(0,o.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,r.Lk)("button",{class:"page-link",onClick:t[2]||(t[2]=e=>i.changePage(i.currentPage-1)),disabled:1===i.currentPage,"aria-label":"Previous page"},t[38]||(t[38]=[(0,r.Lk)("i",{class:"bi bi-chevron-left"},null,-1)]),8,Ci)],2),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.getPageNumbers(),(e=>((0,r.uX)(),(0,r.CE)("li",{key:e,class:(0,o.C4)(["page-item",{active:i.currentPage===e}])},["..."===e?((0,r.uX)(),(0,r.CE)("button",Pi,(0,o.v_)(e),1)):((0,r.uX)(),(0,r.CE)("button",{key:1,class:"page-link",onClick:t=>i.changePage(e)},(0,o.v_)(e),9,xi))],2)))),128)),(0,r.Lk)("li",{class:(0,o.C4)(["page-item",{disabled:i.currentPage===i.totalPages}])},[(0,r.Lk)("button",{class:"page-link",onClick:t[3]||(t[3]=e=>i.changePage(i.currentPage+1)),disabled:i.currentPage===i.totalPages,"aria-label":"Next page"},t[39]||(t[39]=[(0,r.Lk)("i",{class:"bi bi-chevron-right"},null,-1)]),8,Ei)],2)])])])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",Si,[t[43]||(t[43]=(0,r.Lk)("div",{class:"card-header"},[(0,r.Lk)("h5",{class:"mb-0"},"Recent Orders")],-1)),(0,r.Lk)("div",_i,[(0,r.Lk)("table",Mi,[t[42]||(t[42]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"Order ID"),(0,r.Lk)("th",null,"Date"),(0,r.Lk)("th",null,"Customer"),(0,r.Lk)("th",null,"Items"),(0,r.Lk)("th",null,"Status")])],-1)),(0,r.Lk)("tbody",null,[0===i.orders.length?((0,r.uX)(),(0,r.CE)("tr",Ii,t[40]||(t[40]=[(0,r.Lk)("td",{colspan:"5",class:"text-center py-4"},"No orders found",-1)]))):(0,r.Q3)("",!0),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.recentOrders,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.id},[(0,r.Lk)("td",null,"#"+(0,o.v_)(e.id),1),(0,r.Lk)("td",null,(0,o.v_)(i.formatDate(e.date_ordered)),1),(0,r.Lk)("td",null,(0,o.v_)(e.customer),1),(0,r.Lk)("td",null,(0,o.v_)(e.items?e.items.length:0)+" items",1),t[41]||(t[41]=(0,r.Lk)("td",null,[(0,r.Lk)("span",{class:"badge bg-success"},"Completed")],-1))])))),128))])])])]),(0,r.Lk)("div",Oi,[(0,r.Lk)("div",Di,[(0,r.Lk)("div",Ti,[(0,r.Lk)("form",{onSubmit:t[15]||(t[15]=(0,s.D$)(((...e)=>i.validateAndSubmitEdit&&i.validateAndSubmitEdit(...e)),["prevent"])),novalidate:""},[(0,r.Lk)("div",Xi,[t[44]||(t[44]=(0,r.Lk)("h5",{class:"modal-title",id:"editModalLabel"},[(0,r.Lk)("i",{class:"bi bi-pencil-square me-2"}),(0,r.eW)("Edit Product ")],-1)),(0,r.Lk)("button",{type:"button",class:"btn-close",onClick:t[4]||(t[4]=(...e)=>i.closeEditModal&&i.closeEditModal(...e)),"aria-label":"Close"})]),(0,r.Lk)("div",Fi,[(0,r.Lk)("div",Wi,[i.editProduct.image?((0,r.uX)(),(0,r.CE)("div",Ai,[(0,r.Lk)("div",Ri,[(0,r.Lk)("img",{src:i.fullImageUrl(i.editProduct.image),alt:i.editProduct.name,class:"img-fluid rounded"},null,8,qi)]),t[45]||(t[45]=(0,r.Lk)("p",{class:"image-caption mt-2"},"Current image",-1))])):(0,r.Q3)("",!0),(0,r.Lk)("div",Qi,[t[46]||(t[46]=(0,r.Lk)("label",{class:"form-label fw-medium"},"Product Name",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>i.editProduct.name=e),class:(0,o.C4)(["form-control",{"is-invalid":i.errors.name}]),required:"",onBlur:t[6]||(t[6]=(...e)=>i.validateName&&i.validateName(...e)),placeholder:"Enter product name"},null,34),[[s.Jo,i.editProduct.name]]),i.errors.name?((0,r.uX)(),(0,r.CE)("div",Ki,(0,o.v_)(i.errors.name),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",Ni,[t[47]||(t[47]=(0,r.Lk)("label",{class:"form-label fw-medium"},"Description",-1)),(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":t[7]||(t[7]=e=>i.editProduct.description=e),class:(0,o.C4)(["form-control",{"is-invalid":i.errors.description}]),rows:"3",required:"",onBlur:t[8]||(t[8]=(...e)=>i.validateDescription&&i.validateDescription(...e)),placeholder:"Enter product description"},null,34),[[s.Jo,i.editProduct.description]]),i.errors.description?((0,r.uX)(),(0,r.CE)("div",Ui,(0,o.v_)(i.errors.description),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",Bi,[(0,r.Lk)("div",Hi,[t[49]||(t[49]=(0,r.Lk)("label",{class:"form-label fw-medium"},"Price (â±)",-1)),(0,r.Lk)("div",$i,[t[48]||(t[48]=(0,r.Lk)("span",{class:"input-group-text"},"â±",-1)),(0,r.bo)((0,r.Lk)("input",{type:"number","onUpdate:modelValue":t[9]||(t[9]=e=>i.editProduct.price=e),class:(0,o.C4)(["form-control",{"is-invalid":i.errors.price}]),min:"0",step:"0.01",required:"",onBlur:t[10]||(t[10]=(...e)=>i.validatePrice&&i.validatePrice(...e)),placeholder:"0.00"},null,34),[[s.Jo,i.editProduct.price,void 0,{number:!0}]]),i.errors.price?((0,r.uX)(),(0,r.CE)("div",Vi,(0,o.v_)(i.errors.price),1)):(0,r.Q3)("",!0)])]),(0,r.Lk)("div",ji,[t[51]||(t[51]=(0,r.Lk)("label",{class:"form-label fw-medium"},"Stock",-1)),(0,r.Lk)("div",Ji,[t[50]||(t[50]=(0,r.Lk)("span",{class:"input-group-text"},[(0,r.Lk)("i",{class:"bi bi-box-seam"})],-1)),(0,r.bo)((0,r.Lk)("input",{type:"number","onUpdate:modelValue":t[11]||(t[11]=e=>i.editProduct.stock=e),class:(0,o.C4)(["form-control",{"is-invalid":i.errors.stock}]),min:"0",required:"",onBlur:t[12]||(t[12]=(...e)=>i.validateStock&&i.validateStock(...e)),placeholder:"0"},null,34),[[s.Jo,i.editProduct.stock,void 0,{number:!0}]]),i.errors.stock?((0,r.uX)(),(0,r.CE)("div",zi,(0,o.v_)(i.errors.stock),1)):(0,r.Q3)("",!0)])])]),(0,r.Lk)("div",Zi,[t[53]||(t[53]=(0,r.Lk)("label",{class:"form-label fw-medium"},"Product Image",-1)),(0,r.Lk)("div",Yi,[(0,r.Lk)("input",{type:"file",id:"productImage",onChange:t[13]||(t[13]=(...e)=>i.handleEditImage&&i.handleEditImage(...e)),class:"form-control",accept:"image/*"},null,32),t[52]||(t[52]=(0,r.Lk)("label",{for:"productImage",class:"file-upload-label"},[(0,r.Lk)("i",{class:"bi bi-cloud-arrow-up me-2"}),(0,r.eW)(" Choose a new image ")],-1))]),t[54]||(t[54]=(0,r.Lk)("small",{class:"text-muted d-block mt-1"}," Recommended size: 800x800px, max 2MB ",-1))])])]),(0,r.Lk)("div",Gi,[(0,r.Lk)("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[14]||(t[14]=(...e)=>i.closeEditModal&&i.closeEditModal(...e))},t[55]||(t[55]=[(0,r.Lk)("i",{class:"bi bi-x-circle me-1"},null,-1),(0,r.eW)("Cancel ")])),(0,r.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:i.isSubmitting},[i.isSubmitting?((0,r.uX)(),(0,r.CE)("span",tl)):((0,r.uX)(),(0,r.CE)("i",al)),(0,r.eW)(" "+(0,o.v_)(i.isSubmitting?"Saving...":"Save Changes"),1)],8,el)])],32)])])],512),(0,r.Lk)("div",sl,[(0,r.Lk)("div",rl,[(0,r.Lk)("div",ol,[(0,r.Lk)("div",il,[t[56]||(t[56]=(0,r.Lk)("h5",{class:"modal-title",id:"confirmModalLabel"},"Confirm Deletion",-1)),(0,r.Lk)("button",{type:"button",class:"btn-close",onClick:t[16]||(t[16]=(...e)=>i.hideConfirmModal&&i.hideConfirmModal(...e)),"aria-label":"Close"})]),t[57]||(t[57]=(0,r.Lk)("div",{class:"modal-body"},[(0,r.Lk)("i",{class:"bi bi-exclamation-triangle-fill text-danger mb-3",style:{"font-size":"2rem"}}),(0,r.Lk)("p",null,"Are you sure you want to delete this product? This action cannot be undone.")],-1)),(0,r.Lk)("div",ll,[(0,r.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[17]||(t[17]=(...e)=>i.hideConfirmModal&&i.hideConfirmModal(...e))},"Cancel"),(0,r.Lk)("button",{type:"button",class:"btn btn-danger",onClick:t[18]||(t[18]=(...e)=>i.deleteProduct&&i.deleteProduct(...e)),disabled:i.isDeleting},[i.isDeleting?((0,r.uX)(),(0,r.CE)("span",cl)):((0,r.uX)(),(0,r.CE)("i",dl)),(0,r.eW)(" "+(0,o.v_)(i.isDeleting?"Deleting...":"Delete"),1)],8,nl)])])])],512)])}var ml={setup(){const e=(0,M.KR)([]),t=(0,M.KR)(1),a=(0,M.KR)(5),s=(0,M.Kh)({id:null,name:"",description:"",price:0,stock:0,image:null}),o=(0,M.KR)(null),i=(0,M.KR)(null),l=(0,M.KR)(null),n=(0,M.KR)([]),c=(0,M.KR)(""),d=(0,M.KR)(null),u=(0,M.KR)(null),m=(0,M.KR)(null),p=(0,M.KR)(!0),k=(0,M.KR)(!1),b=(0,M.KR)(!1),{success:v,error:g}=re(),h=(0,M.Kh)({name:"",description:"",price:"",stock:""}),f=(0,r.EW)((()=>[...n.value].sort(((e,t)=>t.id-e.id)).slice(0,5))),L=()=>s.name.trim()?(h.name="",!0):(h.name="Product name is required",!1),y=()=>s.description.trim()?(h.description="",!0):(h.description="Product description is required",!1),w=()=>null===s.price||void 0===s.price?(h.price="Price is required",!1):s.price<0?(h.price="Price cannot be negative",!1):(h.price="",!0),C=()=>null===s.stock||void 0===s.stock?(h.stock="Stock quantity is required",!1):s.stock<0?(h.stock="Stock cannot be negative",!1):(h.stock="",!0),P=()=>{const e=L(),t=y(),a=w(),s=C();return e&&t&&a&&s},x=(0,r.EW)((()=>{let t=[...e.value];if(c.value){const e=c.value.toLowerCase();t=t.filter((t=>t.name.toLowerCase().includes(e)||t.description.toLowerCase().includes(e)))}return t})),E=(0,r.EW)((()=>Math.ceil(x.value.length/a.value))),S=(0,r.EW)((()=>{const e=(t.value-1)*a.value;return x.value.slice(e,e+a.value)})),_=(0,r.EW)((()=>e.value.filter((e=>e.stock<5)).length)),I=e=>e?e.startsWith("http")?e:`http://127.0.0.1:8000${e.startsWith("/")?e:"/media/"+e}`:"",O=e=>parseFloat(e).toFixed(2),D=(e,t)=>e?e.length>t?e.substring(0,t)+"...":e:"",T=e=>{const t={year:"numeric",month:"short",day:"numeric"};return new Date(e).toLocaleDateString(void 0,t)},X=e=>{e>=1&&e<=E.value&&(t.value=e)},F=()=>{const e=[],a=5;if(E.value<=a)for(let t=1;t<=E.value;t++)e.push(t);else{e.push(1);let a=Math.max(2,t.value-1),s=Math.min(E.value-1,a+2);s===E.value-1&&(a=Math.max(2,s-2)),a>2&&e.push("...");for(let t=a;t<=s;t++)e.push(t);s<E.value-1&&e.push("..."),e.push(E.value)}return e},W=()=>{c.value="",t.value=1},A=async()=>{p.value=!0;try{const t=await V.get("products/");e.value=t.data}catch(t){g("Failed to load products."),console.error(t)}finally{p.value=!1}},R=async()=>{try{const e=await V.get("orders/");n.value=e.data}catch(e){g("Failed to load orders."),console.error(e)}},q=e=>{Object.keys(h).forEach((e=>{h[e]=""})),s.id=e.id,s.name=e.name,s.description=e.description,s.price=e.price,s.stock=e.stock,s.image=e.image,o.value=null,i.value?i.value.show():d.value&&(i.value=new de.aF(d.value),i.value.show())},Q=()=>{i.value&&i.value.hide()},K=e=>{o.value=e.target.files[0]},N=()=>{P()?U():g("Please fix the errors in the form")},U=async()=>{k.value=!0;const e=new FormData;e.append("name",s.name),e.append("description",s.description),e.append("price",s.price),e.append("stock",s.stock),o.value&&e.append("image",o.value);try{await V.patch(`products/${s.id}/`,e,{headers:{"Content-Type":"multipart/form-data"}}),v("Product updated successfully!"),A(),Q()}catch(t){if(console.error("Error updating product:",t),g("Failed to update product."),t.response&&t.response.data){const e=t.response.data;Object.keys(e).forEach((t=>{t in h&&(h[t]=e[t][0])}))}}finally{k.value=!1}},B=e=>{m.value=e,l.value?l.value.show():u.value&&(l.value=new de.aF(u.value),l.value.show())},H=()=>{l.value&&l.value.hide()},$=async()=>{if(m.value){b.value=!0;try{await V.delete(`products/${m.value}/`),v("Product deleted successfully."),A(),H()}catch(e){console.error("Error deleting product:",e),e.response&&e.response.data&&e.response.data.error?g(e.response.data.error):g("Cannot delete product. It may be in an order.")}finally{b.value=!1}}};return(0,r.sV)((()=>{d.value&&(i.value=new de.aF(d.value)),u.value&&(l.value=new de.aF(u.value));const e=localStorage.getItem("access"),t="true"===localStorage.getItem("is_staff");if(!e||!t)return g("Access denied. Staff only."),void(window.location.href="/login");A(),R()})),{products:e,filteredProducts:x,paginatedProducts:S,currentPage:t,totalPages:E,editProduct:s,editModal:d,confirmModal:u,orders:n,recentOrders:f,searchQuery:c,lowStockCount:_,isLoading:p,isSubmitting:k,isDeleting:b,errors:h,fullImageUrl:I,formatPrice:O,truncate:D,formatDate:T,changePage:X,getPageNumbers:F,resetSearch:W,openEditModal:q,closeEditModal:Q,handleEditImage:K,validateAndSubmitEdit:N,confirmDeleteProduct:B,hideConfirmModal:H,deleteProduct:$,validateName:L,validateDescription:y,validatePrice:w,validateStock:C}}};const pl=(0,le.A)(ml,[["render",ul],["__scopeId","data-v-01730bdf"]]);var kl=pl;const bl={class:"container"},vl={class:"admin-header mb-3 mb-md-4"},gl={class:"admin-actions ms-auto"},hl={class:"row"},fl={class:"col-12 col-lg-8 mx-auto"},Ll={class:"card"},yl={class:"card-body p-3 p-md-4"},wl={class:"mb-3"},Cl={class:"mb-3"},Pl={class:"row g-2 mb-3"},xl={class:"col-12 col-md-6"},El={class:"input-group"},Sl={class:"col-12 col-md-6"},_l={class:"mb-4"},Ml={key:0,class:"image-preview mt-3"},Il=["src"],Ol={class:"d-grid"},Dl=["disabled"],Tl={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},Xl={key:1,class:"bi bi-plus-circle me-1 me-md-2"};function Fl(e,t,a,i,l,n){const c=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",bl,[(0,r.Lk)("div",vl,[t[7]||(t[7]=(0,r.Lk)("h2",{class:"section-title"},[(0,r.Lk)("i",{class:"bi bi-plus-circle me-2"}),(0,r.eW)("Add New Product ")],-1)),(0,r.Lk)("div",gl,[(0,r.bF)(c,{to:"/monitor-products",class:"btn btn-outline-primary btn-back"},{default:(0,r.k6)((()=>t[6]||(t[6]=[(0,r.Lk)("i",{class:"bi bi-arrow-left me-1 me-md-2"},null,-1),(0,r.Lk)("span",{class:"btn-text"},"Back to Products",-1)]))),_:1})])]),(0,r.Lk)("div",hl,[(0,r.Lk)("div",fl,[(0,r.Lk)("div",Ll,[(0,r.Lk)("div",yl,[(0,r.Lk)("form",{onSubmit:t[5]||(t[5]=(0,s.D$)(((...e)=>n.submitProduct&&n.submitProduct(...e)),["prevent"])),enctype:"multipart/form-data"},[(0,r.Lk)("div",wl,[t[8]||(t[8]=(0,r.Lk)("label",{class:"form-label"},"Product Name",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.product.name=e),class:"form-control form-control-md",placeholder:"Enter product name",required:""},null,512),[[s.Jo,l.product.name]])]),(0,r.Lk)("div",Cl,[t[9]||(t[9]=(0,r.Lk)("label",{class:"form-label"},"Description",-1)),(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.product.description=e),class:"form-control form-control-md",placeholder:"Enter product description",rows:"4",required:""},null,512),[[s.Jo,l.product.description]])]),(0,r.Lk)("div",Pl,[(0,r.Lk)("div",xl,[t[11]||(t[11]=(0,r.Lk)("label",{class:"form-label"},"Price (â±)",-1)),(0,r.Lk)("div",El,[t[10]||(t[10]=(0,r.Lk)("span",{class:"input-group-text"},"â±",-1)),(0,r.bo)((0,r.Lk)("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=e=>l.product.price=e),class:"form-control form-control-md",placeholder:"0.00",min:"0",step:"0.01",required:""},null,512),[[s.Jo,l.product.price,void 0,{number:!0}]])])]),(0,r.Lk)("div",Sl,[t[12]||(t[12]=(0,r.Lk)("label",{class:"form-label"},"Stock Quantity",-1)),(0,r.bo)((0,r.Lk)("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=e=>l.product.stock=e),class:"form-control form-control-md",placeholder:"0",min:"0",required:""},null,512),[[s.Jo,l.product.stock,void 0,{number:!0}]])])]),(0,r.Lk)("div",_l,[t[13]||(t[13]=(0,r.Lk)("label",{class:"form-label"},"Product Image",-1)),(0,r.Lk)("input",{type:"file",onChange:t[4]||(t[4]=(...e)=>n.handleImage&&n.handleImage(...e)),class:"form-control form-control-md",accept:"image/*"},null,32),l.imagePreview?((0,r.uX)(),(0,r.CE)("div",Ml,[(0,r.Lk)("img",{src:l.imagePreview,alt:"Preview",class:"img-thumbnail"},null,8,Il)])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",Ol,[(0,r.Lk)("button",{type:"submit",class:"btn btn-primary btn-md btn-lg btn-add",disabled:l.isSubmitting},[l.isSubmitting?((0,r.uX)(),(0,r.CE)("span",Tl)):((0,r.uX)(),(0,r.CE)("i",Xl)),(0,r.eW)(" "+(0,o.v_)(l.isSubmitting?"Adding...":"Add Product"),1)],8,Dl)])],32)])])])])])}var Wl={data(){return{product:{name:"",description:"",price:0,stock:0},image:null,imagePreview:null,isSubmitting:!1}},methods:{handleImage(e){if(this.image=e.target.files[0],this.image){const e=new FileReader;e.onload=e=>{this.imagePreview=e.target.result},e.readAsDataURL(this.image)}else this.imagePreview=null},async submitProduct(){this.isSubmitting=!0;const e=new FormData;for(let a in this.product)e.append(a,this.product[a]);this.image&&e.append("image",this.image);try{await V.post("products/",e,{headers:{"Content-Type":"multipart/form-data"}}),this.showNotification("success","Product added successfully!"),this.product={name:"",description:"",price:0,stock:0},this.image=null,this.imagePreview=null,setTimeout((()=>{this.$router.push("/monitor-products")}),1500)}catch(t){this.showNotification("error","Failed to add product."),console.error(t)}finally{this.isSubmitting=!1}},showNotification(e,t){const a=document.createElement("div");a.className=`notification notification-${e}`;let s="bi-info-circle";"success"===e&&(s="bi-check-circle"),"warning"===e&&(s="bi-exclamation-triangle"),"error"===e&&(s="bi-x-circle"),a.innerHTML=`<i class="bi ${s}"></i> ${t}`,document.body.appendChild(a),setTimeout((()=>{a.classList.add("show")}),10),setTimeout((()=>{a.classList.remove("show"),setTimeout((()=>{document.body.removeChild(a)}),300)}),3e3)}},mounted(){const e=localStorage.getItem("access"),t="true"===localStorage.getItem("is_staff");e&&t||(this.showNotification("error","Access denied. Staff only."),this.$router.push("/login"))}};const Al=(0,le.A)(Wl,[["render",Fl],["__scopeId","data-v-b33398bc"]]);var Rl=Al;const ql=[{path:"/",redirect:"/login"},{path:"/login",component:Ie},{path:"/register",component:ot},{path:"/products",component:Rt},{path:"/cart",component:Qa},{path:"/orders",component:lr},{path:"/monitor",component:No},{path:"/monitor-products",component:kl},{path:"/add-product",component:Rl}],Ql=(0,J.aE)({history:(0,J.Bt)(),routes:ql});Ql.beforeEach(((e,t,a)=>{const s=!!localStorage.getItem("access"),r="true"===localStorage.getItem("is_staff"),o=["/login","/register"],i=["/monitor"],l=["/products","/cart","/orders"];return s||o.includes(e.path)?s&&o.includes(e.path)?a(r?"/monitor":"/products"):s&&r&&l.includes(e.path)?a("/monitor"):s&&!r&&i.includes(e.path)?a("/products"):void a():a("/login")}));var Kl=Ql;const Nl=window.location.hostname.includes("github.io")||!0;Nl&&(console.log("Running in demo mode with mock data"),T());const Ul=(0,s.Ef)(pe);Ul.use(Kl),Ul.provide("auth",j),Ul.mount("#app")}},t={};function a(s){var r=t[s];if(void 0!==r)return r.exports;var o=t[s]={exports:{}};return e[s].call(o.exports,o,o.exports,a),o.exports}a.m=e,function(){var e=[];a.O=function(t,s,r,o){if(!s){var i=1/0;for(d=0;d<e.length;d++){s=e[d][0],r=e[d][1],o=e[d][2];for(var l=!0,n=0;n<s.length;n++)(!1&o||i>=o)&&Object.keys(a.O).every((function(e){return a.O[e](s[n])}))?s.splice(n--,1):(l=!1,o<i&&(i=o));if(l){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[s,r,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var r,o,i=s[0],l=s[1],n=s[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(r in l)a.o(l,r)&&(a.m[r]=l[r]);if(n)var d=n(a)}for(t&&t(s);c<i.length;c++)o=i[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(d)},s=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[504],(function(){return a(8193)}));s=a.O(s)})();
//# sourceMappingURL=app.c3f0ff9f.js.map