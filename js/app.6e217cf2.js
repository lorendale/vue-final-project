(function(){"use strict";var e={568:function(e,t,a){a.d(t,{Lz:function(){return r},initializeMockData:function(){return i}});a(4114),a(8111),a(2489),a(7588),a(1701);const s=()=>[{id:1,name:"Premium Wireless Headphones",description:"Experience crystal-clear sound with our premium wireless headphones. Features noise cancellation and 20-hour battery life.",price:1299.99,stock:15,image:"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8cHJvZHVjdHxlbnwwfHwwfHx8MA%3D%3D"},{id:2,name:"Smart Fitness Watch",description:"Track your fitness goals with this advanced smartwatch. Monitors heart rate, steps, sleep quality and more.",price:899.5,stock:8,image:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTB8fHByb2R1Y3R8ZW58MHx8MHx8fDA%3D"},{id:3,name:"Ultra HD Smart TV",description:"Transform your living room with this 55-inch Ultra HD Smart TV. Features AI-powered picture quality and immersive sound.",price:3499.99,stock:5,image:"https://images.unsplash.com/photo-1567690187548-f07b1d7bf5a9?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8OHx8dHZ8ZW58MHx8MHx8fDA%3D"},{id:4,name:"Professional Camera Kit",description:"Capture stunning photos and videos with this professional-grade camera kit. Includes multiple lenses and accessories.",price:4999,stock:3,image:"https://images.unsplash.com/photo-1526170375885-4d8ecf77b99f?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8cHJvZHVjdHxlbnwwfHwwfHx8MA%3D%3D"},{id:5,name:"Ergonomic Office Chair",description:"Work in comfort with this ergonomic office chair. Features adjustable height, lumbar support, and breathable mesh back.",price:1299,stock:12,image:"https://images.unsplash.com/photo-1596162954151-cdcb4c0f70a8?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTJ8fGNoYWlyfGVufDB8fDB8fHww"},{id:6,name:"Portable Bluetooth Speaker",description:"Take your music anywhere with this waterproof portable Bluetooth speaker. Features 12-hour battery life and deep bass.",price:599.99,stock:20,image:"https://images.unsplash.com/photo-1608043152269-423dbba4e7e1?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8Ymx1ZXRvb3RoJTIwc3BlYWtlcnxlbnwwfHwwfHx8MA%3D%3D"},{id:7,name:"Gaming Laptop",description:"Experience lag-free gaming with this high-performance gaming laptop. Features dedicated graphics card and RGB keyboard.",price:5999,stock:7,image:"https://images.unsplash.com/photo-1603302576837-37561b2e2302?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTh8fGxhcHRvcHxlbnwwfHwwfHx8MA%3D%3D"},{id:8,name:"Coffee Maker Deluxe",description:"Brew perfect coffee every time with this programmable coffee maker. Features multiple brewing options and built-in grinder.",price:799.5,stock:9,image:"https://images.unsplash.com/photo-1565452344518-47faca79dc69?q=80&w=1935&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{id:9,name:"Smartphone Pro Max",description:"Stay connected with our latest smartphone. Features high-resolution camera, all-day battery life, and fast processor.",price:4299,stock:0,image:"https://images.unsplash.com/photo-1598327105666-5b89351aff97?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTZ8fHNtYXJ0cGhvbmV8ZW58MHx8MHx8fDA%3D"},{id:10,name:"Wireless Charging Pad",description:"Charge your devices without the hassle of cables. Compatible with all Qi-enabled smartphones and accessories.",price:299.99,stock:25,image:"https://images.unsplash.com/photo-1622445275463-afa2ab738c34?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8Y2hhcmdlcnxlbnwwfHwwfHx8MA%3D%3D"},{id:11,name:"Smart Home Hub",description:"Control all your smart home devices from one central hub. Compatible with most popular smart home brands.",price:899,stock:4,image:"https://images.unsplash.com/photo-1558002038-1055907df827?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8c21hcnQlMjBob21lfGVufDB8fDB8fHww"},{id:12,name:"Mechanical Keyboard",description:"Enhance your typing experience with this mechanical keyboard. Features customizable RGB lighting and tactile feedback.",price:499.5,stock:15,image:"https://images.unsplash.com/photo-1618384887929-16ec33fab9ef?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8a2V5Ym9hcmR8ZW58MHx8MHx8fDA%3D"}],o=e=>{const t=[{id:1,name:"John Doe"},{id:2,name:"Jane Smith"},{id:3,name:"Robert Johnson"}],a=()=>{const e=new Date,t=Math.floor(30*Math.random());return e.setDate(e.getDate()-t),e.toISOString()},s=t=>{const a=Math.floor(4*Math.random())+1,s=[];for(let o=0;o<a;o++){const a=e[Math.floor(Math.random()*e.length)],i=s.find((e=>e.product===a.id));i?i.quantity+=Math.floor(2*Math.random())+1:s.push({id:100*t+o,order:t,product:a.id,quantity:Math.floor(3*Math.random())+1})}return s},o=[];for(let i=1;i<=10;i++){const e=t[Math.floor(Math.random()*t.length)];o.push({id:i,customer:e.name,date_ordered:a(),complete:!0,items:s(i)})}return o},i=(e=!1)=>{if(!localStorage.getItem("mockProducts")||e){const e=s();localStorage.setItem("mockProducts",JSON.stringify(e))}if(!localStorage.getItem("mockOrders")||e){const e=JSON.parse(localStorage.getItem("mockProducts")),t=o(e);localStorage.setItem("mockOrders",JSON.stringify(t))}return{products:JSON.parse(localStorage.getItem("mockProducts")),orders:JSON.parse(localStorage.getItem("mockOrders"))}},r=()=>{const e=localStorage.getItem("mockProducts"),t=localStorage.getItem("mockOrders");return e&&t?{products:JSON.parse(e),orders:JSON.parse(t)}:(console.log("ðŸ”„ Reinitializing missing mock data..."),i(!0))},l=()=>JSON.parse(localStorage.getItem("mockProducts"))||[],n=()=>JSON.parse(localStorage.getItem("mockOrders"))||[],c=e=>{const t=l(),a={...e,id:t.length>0?Math.max(...t.map((e=>e.id)))+1:1};return t.push(a),localStorage.setItem("mockProducts",JSON.stringify(t)),a},d=(e,t)=>{const a=l(),s=a.findIndex((t=>t.id===e));return-1!==s?(a[s]={...a[s],...t},localStorage.setItem("mockProducts",JSON.stringify(a)),a[s]):null},u=e=>{const t=l(),a=t.filter((t=>t.id!==e));return a.length<t.length&&(localStorage.setItem("mockProducts",JSON.stringify(a)),!0)},m=e=>{const t=n(),a={...e,id:t.length>0?Math.max(...t.map((e=>e.id)))+1:1,date_ordered:(new Date).toISOString(),complete:!0};if(t.push(a),localStorage.setItem("mockOrders",JSON.stringify(t)),a.items&&a.items.length>0){const e=l();a.items.forEach((t=>{const a=e.findIndex((e=>e.id===t.product));-1!==a&&(e[a].stock=Math.max(0,e[a].stock-t.quantity))})),localStorage.setItem("mockProducts",JSON.stringify(e))}return a};t.Ay={initializeMockData:i,ensureMockDataExists:r,getMockProducts:l,getMockOrders:n,addMockProduct:c,updateMockProduct:d,deleteMockProduct:u,addMockOrder:m}},4038:function(e,t,a){var s=a(5130),o=a(6768),i=a(4232);const r={class:"app-container"},l={class:"navbar navbar-expand-lg navbar-dark"},n={class:"container"},c={class:"collapse navbar-collapse",id:"navbarContent",ref:"navbarCollapse"},d={class:"navbar-nav me-auto mb-2 mb-lg-0"},u={key:0,class:"nav-item"},m={key:1,class:"nav-item"},p={key:2,class:"nav-item"},g={key:3,class:"nav-item"},b={key:4,class:"nav-item"},h={key:0,class:"cart-badge"},v={key:5,class:"nav-item"},k={class:"navbar-nav ms-auto"},f={key:0,class:"nav-item"},L={key:1,class:"nav-item user-nav-item"},y={class:"user-nav-container d-flex align-items-center"},w={class:"user-info d-flex align-items-center me-2"},C={class:"user-details"},P={class:"username"},x={class:"user-role d-block"},S={class:"main-content"},E={class:"footer mt-auto py-3"},M={class:"container"},I={class:"row"},_={class:"col-md-4 mb-3 mb-md-0"},A={class:"footer-links"};function D(e,t,a,D,O,T){const F=(0,o.g2)("router-link"),W=(0,o.g2)("router-view"),N=(0,o.g2)("ToastNotification");return(0,o.uX)(),(0,o.CE)("div",r,[(0,o.Lk)("nav",l,[(0,o.Lk)("div",n,[(0,o.bF)(F,{class:"navbar-brand",to:D.auth&&D.auth.isLoggedIn?D.auth.isStaff?"/monitor":"/products":"/"},{default:(0,o.k6)((()=>t[6]||(t[6]=[(0,o.Lk)("i",{class:"bi bi-bag-heart-fill me-2"},null,-1),(0,o.eW)("Bluora ")]))),_:1},8,["to"]),(0,o.Lk)("button",{class:"navbar-toggler",type:"button",onClick:t[0]||(t[0]=(...e)=>D.toggleNavbar&&D.toggleNavbar(...e)),"aria-controls":"navbarContent","aria-expanded":"false","aria-label":"Toggle navigation"},t[7]||(t[7]=[(0,o.Lk)("span",{class:"navbar-toggler-icon"},null,-1)])),(0,o.Lk)("div",c,[(0,o.Lk)("ul",d,[D.auth.isLoggedIn&&D.auth.isStaff?((0,o.uX)(),(0,o.CE)("li",u,[(0,o.bF)(F,{class:"nav-link",to:"/monitor-products",onClick:D.closeNavbar},{default:(0,o.k6)((()=>t[8]||(t[8]=[(0,o.Lk)("i",{class:"bi bi-box-seam me-1"},null,-1),(0,o.eW)(" Products ")]))),_:1},8,["onClick"])])):(0,o.Q3)("",!0),D.auth.isLoggedIn&&D.auth.isStaff?((0,o.uX)(),(0,o.CE)("li",m,[(0,o.bF)(F,{class:"nav-link",to:"/add-product",onClick:D.closeNavbar},{default:(0,o.k6)((()=>t[9]||(t[9]=[(0,o.Lk)("i",{class:"bi bi-plus-circle me-1"},null,-1),(0,o.eW)(" Add Product ")]))),_:1},8,["onClick"])])):(0,o.Q3)("",!0),D.auth.isLoggedIn&&D.auth.isStaff?((0,o.uX)(),(0,o.CE)("li",p,[(0,o.bF)(F,{class:"nav-link",to:"/monitor",onClick:D.closeNavbar},{default:(0,o.k6)((()=>t[10]||(t[10]=[(0,o.Lk)("i",{class:"bi bi-clipboard-check me-1"},null,-1),(0,o.eW)(" Orders ")]))),_:1},8,["onClick"])])):(0,o.Q3)("",!0),D.auth.isLoggedIn&&!D.auth.isStaff?((0,o.uX)(),(0,o.CE)("li",g,[(0,o.bF)(F,{class:"nav-link",to:"/products",onClick:D.closeNavbar},{default:(0,o.k6)((()=>t[11]||(t[11]=[(0,o.Lk)("i",{class:"bi bi-shop me-1"},null,-1),(0,o.eW)(" Shop ")]))),_:1},8,["onClick"])])):(0,o.Q3)("",!0),D.auth.isLoggedIn&&!D.auth.isStaff?((0,o.uX)(),(0,o.CE)("li",b,[(0,o.bF)(F,{class:"nav-link position-relative",to:"/cart",onClick:D.closeNavbar},{default:(0,o.k6)((()=>[t[12]||(t[12]=(0,o.Lk)("i",{class:"bi bi-cart me-1"},null,-1)),t[13]||(t[13]=(0,o.eW)(" Cart ")),D.cartCount>0?((0,o.uX)(),(0,o.CE)("span",h,(0,i.v_)(D.cartCount),1)):(0,o.Q3)("",!0)])),_:1},8,["onClick"])])):(0,o.Q3)("",!0),D.auth.isLoggedIn&&!D.auth.isStaff?((0,o.uX)(),(0,o.CE)("li",v,[(0,o.bF)(F,{class:"nav-link",to:"/orders",onClick:D.closeNavbar},{default:(0,o.k6)((()=>t[14]||(t[14]=[(0,o.Lk)("i",{class:"bi bi-clock-history me-1"},null,-1),(0,o.eW)(" Orders ")]))),_:1},8,["onClick"])])):(0,o.Q3)("",!0)]),(0,o.Lk)("ul",k,[D.auth.isLoggedIn?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("li",f,[(0,o.Lk)("button",{class:"nav-link btn btn-link",onClick:t[1]||(t[1]=(...e)=>D.handleLoginClick&&D.handleLoginClick(...e))},t[15]||(t[15]=[(0,o.Lk)("i",{class:"bi bi-box-arrow-in-right me-1"},null,-1),(0,o.eW)(" Login ")]))])),D.auth.isLoggedIn?((0,o.uX)(),(0,o.CE)("li",L,[(0,o.Lk)("div",y,[(0,o.Lk)("div",w,[t[16]||(t[16]=(0,o.Lk)("i",{class:"bi bi-person-circle me-1 user-icon"},null,-1)),(0,o.Lk)("div",C,[(0,o.Lk)("span",P,(0,i.v_)(D.username||"User"),1),(0,o.Lk)("small",x,(0,i.v_)(D.auth.isStaff?"Admin":"Customer"),1)])]),(0,o.Lk)("button",{class:"btn btn-logout d-flex align-items-center",onClick:t[2]||(t[2]=(...e)=>D.logout&&D.logout(...e)),title:"Logout"},t[17]||(t[17]=[(0,o.Lk)("i",{class:"bi bi-box-arrow-right me-1"},null,-1),(0,o.Lk)("span",{class:"logout-text"},"Logout",-1)]))])])):(0,o.Q3)("",!0)])],512)])]),(0,o.Lk)("main",S,[(0,o.bF)(W,null,{default:(0,o.k6)((({Component:t})=>[(0,o.bF)(s.eB,{name:"fade",mode:"out-in"},{default:(0,o.k6)((()=>[((0,o.uX)(),(0,o.Wv)((0,o.$y)(t),{key:e.$route.fullPath}))])),_:2},1024)])),_:1})]),(0,o.Lk)("footer",E,[(0,o.Lk)("div",M,[(0,o.Lk)("div",I,[t[19]||(t[19]=(0,o.Lk)("div",{class:"col-md-4 mb-3 mb-md-0"},[(0,o.Lk)("h5",{class:"footer-heading"},"Bluora"),(0,o.Lk)("p",{class:"footer-text"},"Your one-stop shop for all your needs. Quality products at affordable prices.")],-1)),(0,o.Lk)("div",_,[t[18]||(t[18]=(0,o.Lk)("h5",{class:"footer-heading"},"Quick Links",-1)),(0,o.Lk)("ul",A,[(0,o.Lk)("li",null,[(0,o.Lk)("a",{href:"#",onClick:t[3]||(t[3]=(0,s.D$)(((...e)=>D.handleShopClick&&D.handleShopClick(...e)),["prevent"]))},"Products")]),(0,o.Lk)("li",null,[(0,o.Lk)("a",{href:"#",onClick:t[4]||(t[4]=(0,s.D$)(((...e)=>D.handleCartClick&&D.handleCartClick(...e)),["prevent"]))},"Cart")]),(0,o.Lk)("li",null,[(0,o.Lk)("a",{href:"#",onClick:t[5]||(t[5]=(0,s.D$)(((...e)=>D.handleOrdersClick&&D.handleOrdersClick(...e)),["prevent"]))},"Orders")])])]),t[20]||(t[20]=(0,o.Fv)('<div class="col-md-4"><h5 class="footer-heading">Contact Us</h5><p class="footer-text"><i class="bi bi-envelope me-2"></i> support@bluora.com<br><i class="bi bi-telephone me-2"></i> +1 (123) 456-7890<br><i class="bi bi-geo-alt me-2"></i> 123 E-Commerce St, Digital City </p></div>',1))]),t[21]||(t[21]=(0,o.Fv)('<div class="footer-bottom"><p class="mb-0">Â© 2025 Bluora. All rights reserved.</p><div class="social-icons"><a href="#" class="social-icon"><i class="bi bi-facebook"></i></a><a href="#" class="social-icon"><i class="bi bi-twitter"></i></a><a href="#" class="social-icon"><i class="bi bi-instagram"></i></a></div></div>',1))])]),(0,o.bF)(N)])}a(4114);var O=a(144),T=a(4373),F=(a(8111),a(2489),a(116),a(568));F.Ay.ensureMockDataExists();const W=(e=300)=>new Promise((t=>setTimeout(t,e))),N={getProducts:async()=>{await W();try{const e=F.Ay.getMockProducts();return console.log("ðŸ“¦ Fetched",e.length,"products from mock API"),{data:e}}catch(e){return console.error("Error fetching products:",e),F.Ay.ensureMockDataExists(),{data:F.Ay.getMockProducts()}}},getProduct:async e=>{await W();const t=F.Ay.getMockProducts(),a=t.find((t=>t.id===Number.parseInt(e)));return a?{data:a}:Promise.reject({response:{status:404,data:{error:"Product not found"}}})},createProduct:async e=>{await W(500);const t=F.Ay.addMockProduct(e);return{data:t}},updateProduct:async(e,t)=>{await W(500);const a=F.Ay.updateMockProduct(Number.parseInt(e),t);return a?{data:a}:Promise.reject({response:{status:404,data:{error:"Product not found"}}})},deleteProduct:async e=>{await W(500);const t=F.Ay.deleteMockProduct(Number.parseInt(e));return t?{data:{success:!0}}:Promise.reject({response:{status:404,data:{error:"Product not found"}}})},getOrders:async()=>{await W();try{const e=F.Ay.getMockOrders();return console.log("ðŸ“‹ Fetched",e.length,"orders from mock API"),{data:e}}catch(e){return console.error("Error fetching orders:",e),F.Ay.ensureMockDataExists(),{data:F.Ay.getMockOrders()}}},createOrder:async e=>{await W(800);const t=F.Ay.addMockOrder(e);return{data:t}},login:async e=>(await W(1e3),"admin"===e.username&&"admin"===e.password?{data:{access:"mock-token-admin",refresh:"mock-refresh-token",user:{id:1,username:"admin",is_staff:!0}}}:"user"===e.username&&"user"===e.password?{data:{access:"mock-token-user",refresh:"mock-refresh-token",user:{id:2,username:"user",is_staff:!1}}}:Promise.reject({response:{status:401,data:{detail:"Invalid username or password"}}})),register:async e=>(await W(1e3),"admin"===e.username||"user"===e.username?Promise.reject({response:{status:400,data:{username:["This username is already taken."]}}}):{data:{id:3,username:e.username,is_staff:!1}}),getUser:async()=>{await W();const e="true"===localStorage.getItem("is_staff"),t=localStorage.getItem("user_id")||(e?"1":"2"),a=localStorage.getItem("username")||(e?"admin":"user");return{data:{id:Number.parseInt(t),username:a,is_staff:e}}},request:async e=>{const{method:t="get",url:a,data:s}=e,o=a.split("/").filter(Boolean),i=o[0],r=o[1]?Number.parseInt(o[1]):null;switch(i){case"products":if("get"===t)return r?N.getProduct(r):N.getProducts();if("post"===t)return N.createProduct(s);if("put"===t||"patch"===t)return N.updateProduct(r,s);if("delete"===t)return N.deleteProduct(r);break;case"orders":if("get"===t)return N.getOrders();if("post"===t)return N.createOrder(s);break;case"token":if("post"===t)return N.login(s);break;case"register":if("post"===t)return N.register(s);break;case"user":if("get"===t)return N.getUser();break;case"order-items":if("post"===t)return await W(300),{data:{...s,id:Math.floor(1e3*Math.random())}};break}return Promise.reject({response:{status:404,data:{error:"Endpoint not found"}}})}},R=new Proxy(N,{get:(e,t)=>["get","post","put","patch","delete"].includes(t)?(a,s,o={})=>e.request({method:t,url:a,data:s,...o}):e[t]});var q=R,X=(a(7588),a(1701),a(8237),a(3579),a(4821));const H=()=>{console.log("ðŸš€ Initializing admin mock API service...");const e=window.location.hostname.includes("github.io")||!0;e?(console.log("ðŸŽ­ Demo mode detected, forcing admin data initialization..."),X.Ay.initializeAdminMockData(!0)):X.Ay.ensureAdminMockDataExists()};H();const B=(e=200)=>new Promise((t=>setTimeout(t,e))),z={getProducts:async()=>{console.log("ðŸ“¦ Admin API: Fetching products..."),await B();try{const e=X.Ay.ensureAdminMockDataExists(),t=e.products||[];if(0===t.length){console.log("âš ï¸ No admin products found, forcing reinitialize...");const e=X.Ay.initializeAdminMockData(!0);return console.log("âœ… Fresh admin products generated:",e.products.length),{data:e.products}}return console.log("âœ… Admin products loaded successfully:",t.length),{data:t}}catch(e){console.error("âŒ Error loading admin products:",e);const t=X.Ay.initializeAdminMockData(!0);return{data:t.products}}},getProduct:async e=>{await B();const t=X.Ay.ensureAdminMockDataExists(),a=t.products||[],s=a.find((t=>t.id===Number.parseInt(e)));return s?{data:s}:Promise.reject({response:{status:404,data:{error:"Product not found"}}})},createProduct:async e=>{await B(800);const t=X.Ay.ensureAdminMockDataExists(),a=t.products||[],s={...e,id:a.length>0?Math.max(...a.map((e=>e.id)))+1:1,sku:`PRD-${String(a.length+1).padStart(3,"0")}`,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),category:e.category||"General"};a.push(s),localStorage.setItem("adminMockProducts",JSON.stringify(a));const o=JSON.parse(localStorage.getItem("mockProducts")||"[]");return o.push(s),localStorage.setItem("mockProducts",JSON.stringify(o)),{data:s}},updateProduct:async(e,t)=>{await B(600);const a=X.Ay.ensureAdminMockDataExists(),s=a.products||[],o=s.findIndex((t=>t.id===Number.parseInt(e)));if(-1===o)return Promise.reject({response:{status:404,data:{error:"Product not found"}}});s[o]={...s[o],...t,updated_at:(new Date).toISOString()},localStorage.setItem("adminMockProducts",JSON.stringify(s));const i=JSON.parse(localStorage.getItem("mockProducts")||"[]"),r=i.findIndex((t=>t.id===Number.parseInt(e)));return-1!==r&&(i[r]=s[o],localStorage.setItem("mockProducts",JSON.stringify(i))),{data:s[o]}},deleteProduct:async e=>{await B(500);const t=X.Ay.ensureAdminMockDataExists(),a=t.products||[],s=t.orders||[],o=s.some((t=>t.items.some((t=>t.product===Number.parseInt(e)))));if(o)return Promise.reject({response:{status:400,data:{error:"Cannot delete product. It exists in one or more orders."}}});const i=a.filter((t=>t.id!==Number.parseInt(e)));if(i.length===a.length)return Promise.reject({response:{status:404,data:{error:"Product not found"}}});localStorage.setItem("adminMockProducts",JSON.stringify(i));const r=JSON.parse(localStorage.getItem("mockProducts")||"[]"),l=r.filter((t=>t.id!==Number.parseInt(e)));return localStorage.setItem("mockProducts",JSON.stringify(l)),{data:{success:!0}}},getOrders:async()=>{console.log("ðŸ“‹ Admin API: Fetching orders..."),await B();try{const e=X.Ay.ensureAdminMockDataExists(),t=e.orders||[];if(0===t.length){console.log("âš ï¸ No admin orders found, forcing reinitialize...");const e=X.Ay.initializeAdminMockData(!0);return console.log("âœ… Fresh admin orders generated:",e.orders.length),{data:e.orders}}return console.log("âœ… Admin orders loaded successfully:",t.length),{data:t}}catch(e){console.error("âŒ Error loading admin orders:",e);const t=X.Ay.initializeAdminMockData(!0);return{data:t.orders}}},getOrder:async e=>{await B();const t=X.Ay.ensureAdminMockDataExists(),a=t.orders||[],s=a.find((t=>t.id===Number.parseInt(e)));return s?{data:s}:Promise.reject({response:{status:404,data:{error:"Order not found"}}})},updateOrderStatus:async(e,t)=>{await B(400);const a=X.Ay.updateOrderStatus(Number.parseInt(e),t.status);return a?{data:a}:Promise.reject({response:{status:404,data:{error:"Order not found"}}})},createOrder:async e=>{await B(800);const t=X.Ay.ensureAdminMockDataExists(),a=t.orders||[],s=t.products||[],o={...e,id:a.length>0?Math.max(...a.map((e=>e.id)))+1:1,date_ordered:(new Date).toISOString(),status:"pending",complete:!1};a.push(o),localStorage.setItem("adminMockOrders",JSON.stringify(a));const i=JSON.parse(localStorage.getItem("mockOrders")||"[]");if(i.push(o),localStorage.setItem("mockOrders",JSON.stringify(i)),o.items&&o.items.length>0){o.items.forEach((e=>{const t=s.findIndex((t=>t.id===e.product));-1!==t&&(s[t].stock=Math.max(0,s[t].stock-e.quantity))})),localStorage.setItem("adminMockProducts",JSON.stringify(s));const e=JSON.parse(localStorage.getItem("mockProducts")||"[]");o.items.forEach((t=>{const a=e.findIndex((e=>e.id===t.product));-1!==a&&(e[a].stock=Math.max(0,e[a].stock-t.quantity))})),localStorage.setItem("mockProducts",JSON.stringify(e))}return{data:o}},getAnalytics:async()=>(await B(),{data:X.Ay.getAdminAnalytics()}),getAlerts:async()=>(await B(),{data:X.Ay.getAdminAlerts()}),getDashboardStats:async()=>{await B();const e=X.Ay.ensureAdminMockDataExists(),t=e.products||[],a=e.orders||[],s=X.Ay.getAdminAnalytics(),o=t.filter((e=>e.stock<5)).length,i=t.filter((e=>0===e.stock)).length,r=a.filter((e=>"pending"===e.status)).length,l=a.reduce(((e,t)=>e+t.total),0);return{data:{totalProducts:t.length,totalOrders:a.length,totalRevenue:l,lowStockCount:o,outOfStockCount:i,pendingOrders:r,analytics:s}}},getUser:async()=>{await B();const e="true"===localStorage.getItem("is_staff"),t=localStorage.getItem("user_id")||(e?"1":"2"),a=localStorage.getItem("username")||(e?"admin":"user");return{data:{id:Number.parseInt(t),username:a,is_staff:e,email:e?"admin@bluora.com":"user@bluora.com",first_name:e?"Admin":"User",last_name:e?"User":"Customer",date_joined:"2024-01-01T00:00:00Z"}}},login:async e=>(await B(1e3),"admin"===e.username&&"admin"===e.password?{data:{access:"mock-token-admin",refresh:"mock-refresh-token"}}:"user"===e.username&&"user"===e.password?{data:{access:"mock-token-user",refresh:"mock-refresh-token"}}:Promise.reject({response:{status:401,data:{detail:"Invalid username or password"}}})),request:async e=>{const{method:t="get",url:a,data:s}=e,o=a.split("/").filter(Boolean),i=o[0],r=o[1]?Number.parseInt(o[1]):null;switch(i){case"products":if("get"===t)return r?z.getProduct(r):z.getProducts();if("post"===t)return z.createProduct(s);if("put"===t||"patch"===t)return z.updateProduct(r,s);if("delete"===t)return z.deleteProduct(r);break;case"orders":if("get"===t)return r?z.getOrder(r):z.getOrders();if("post"===t)return z.createOrder(s);if("patch"===t)return z.updateOrderStatus(r,s);break;case"analytics":if("get"===t)return z.getAnalytics();break;case"alerts":if("get"===t)return z.getAlerts();break;case"dashboard":if("get"===t)return z.getDashboardStats();break;case"token":if("post"===t)return z.login(s);break;case"user":if("get"===t)return z.getUser();break;case"order-items":if("post"===t)return await B(300),{data:{...s,id:Math.floor(1e3*Math.random())}};break}return Promise.reject({response:{status:404,data:{error:"Endpoint not found"}}})}},J=new Proxy(z,{get:(e,t)=>["get","post","put","patch","delete"].includes(t)?(a,s,o={})=>e.request({method:t,url:a,data:s,...o}):e[t]});var U=J;const Q=window.location.hostname.includes("github.io")||!0;console.log("ðŸ” Auth setup - Demo mode:",Q);class j{constructor(){this.isLoggedIn=!1,this.isStaff=!1,this.isInitialized=!1,this.initializationPromise=null,this.initialize()}async initialize(){return this.initializationPromise||(this.initializationPromise=this._performInitialization()),this.initializationPromise}async _performInitialization(){console.log("ðŸ”„ Initializing auth...");const e=localStorage.getItem("access"),t="true"===localStorage.getItem("is_staff"),s=localStorage.getItem("username");if(e){if(console.log("ðŸ”‘ Found existing token, staff:",t,"username:",s),Q){if(this.isLoggedIn=!0,this.isStaff=t,this.isInitialized=!0,console.log("âœ… Auth initialized (demo mode) - Staff:",this.isStaff),this.isStaff){console.log("ðŸ”§ Initializing admin mock data...");const{ensureAdminMockDataExists:e}=await Promise.resolve().then(a.bind(a,4821));e()}else{console.log("ðŸ”§ Initializing customer mock data...");const{initializeMockData:e}=await Promise.resolve().then(a.bind(a,568));e()}return void this._dispatchAuthChange()}try{const t=await T.A.get(`${{NODE_ENV:"production",VUE_APP_DEMO_MODE:"true",BASE_URL:"/vue-final-project/"}.VUE_APP_API_URL}user/`,{headers:{Authorization:`Bearer ${e}`}});this.isLoggedIn=!0,this.isStaff=t.data.is_staff||!1,localStorage.setItem("is_staff",this.isStaff.toString()),localStorage.setItem("username",t.data.username),console.log("âœ… Auth initialized (real API) - Staff:",this.isStaff)}catch(o){console.error("âŒ Token validation failed:",o),this.logout()}}else console.log("â„¹ï¸ No token found"),this.isLoggedIn=!1,this.isStaff=!1;this.isInitialized=!0,this._dispatchAuthChange()}async login(e,t){console.log("ðŸ” Attempting login for:",e);try{let s;if(Q){const o="admin"===e,i=o?U:q;if(console.log("ðŸŽ­ Using",o?"admin":"customer","mock service for login"),s=await i.post("token/",{username:e,password:t}),this.isStaff=o,localStorage.setItem("is_staff",this.isStaff.toString()),localStorage.setItem("username",e),localStorage.setItem("user_id",o?"1":"2"),console.log("âœ… Mock login successful - Staff:",this.isStaff),this.isStaff){console.log("ðŸ”§ Initializing admin mock data after login...");const{ensureAdminMockDataExists:e}=await Promise.resolve().then(a.bind(a,4821));e()}else{console.log("ðŸ”§ Initializing customer mock data after login...");const{initializeMockData:e}=await Promise.resolve().then(a.bind(a,568));e()}}else{s=await T.A.post(`${{NODE_ENV:"production",VUE_APP_DEMO_MODE:"true",BASE_URL:"/vue-final-project/"}.VUE_APP_API_URL}token/`,{username:e,password:t});const a=await T.A.get(`${{NODE_ENV:"production",VUE_APP_DEMO_MODE:"true",BASE_URL:"/vue-final-project/"}.VUE_APP_API_URL}user/`,{headers:{Authorization:`Bearer ${s.data.access}`}});this.isStaff=a.data.is_staff||!1,localStorage.setItem("is_staff",this.isStaff.toString()),localStorage.setItem("username",e),localStorage.setItem("user_id",a.data.id.toString()),console.log("âœ… Real API login successful - Staff:",this.isStaff)}return localStorage.setItem("access",s.data.access),localStorage.setItem("refresh",s.data.refresh),this.isLoggedIn=!0,this.isInitialized=!0,this._dispatchAuthChange(),s.data}catch(s){throw console.error("âŒ Login failed:",s),s}}logout(){console.log("ðŸšª Logging out..."),localStorage.removeItem("access"),localStorage.removeItem("refresh"),localStorage.removeItem("is_staff"),localStorage.removeItem("username"),localStorage.removeItem("user_id"),this.isLoggedIn=!1,this.isStaff=!1,this.isInitialized=!0,this._dispatchAuthChange()}async checkTokenValidity(){const e=localStorage.getItem("access");if(!e)return this.logout(),!1;if(Q)return!0;try{return await T.A.get(`${{NODE_ENV:"production",VUE_APP_DEMO_MODE:"true",BASE_URL:"/vue-final-project/"}.VUE_APP_API_URL}user/`,{headers:{Authorization:`Bearer ${e}`}}),!0}catch(t){return console.error("Token validation failed:",t),this.logout(),!1}}_dispatchAuthChange(){console.log("ðŸ“¢ Dispatching auth change events - Logged in:",this.isLoggedIn,"Staff:",this.isStaff);const e={isLoggedIn:this.isLoggedIn,isStaff:this.isStaff,isInitialized:this.isInitialized,timestamp:Date.now()};window.dispatchEvent(new CustomEvent("auth-changed",{detail:e})),window.dispatchEvent(new CustomEvent("auth-state-changed",{detail:e})),this.isLoggedIn?window.dispatchEvent(new CustomEvent("login-success",{detail:e})):window.dispatchEvent(new CustomEvent("logout-success",{detail:e})),console.log("âœ… Auth events dispatched successfully")}async waitForInitialization(){return this.isInitialized?Promise.resolve():this.initializationPromise?this.initializationPromise:this.initialize()}}const K=new j;const V=window.location.hostname.includes("github.io")||!0;let Z;console.log("ðŸ”§ Axios setup - Demo mode:",V),V?(console.log("ðŸŽ­ Using mock API services for demo mode"),Z={get:async(e,t={})=>{console.log("ðŸ“¡ Mock GET request:",e);const a="true"===localStorage.getItem("is_staff"),s=a?U:q;console.log("ðŸ‘¤ Using",a?"admin":"customer","mock service for:",e);try{const a=await s.get(e,t.data,t);return console.log("âœ… Mock response received:",a.data?.length||"data"),a}catch(o){throw console.error("âŒ Mock API error:",o),o}},post:async(e,t,a={})=>{console.log("ðŸ“¡ Mock POST request:",e);const s="true"===localStorage.getItem("is_staff"),o=s?U:q;console.log("ðŸ‘¤ Using",s?"admin":"customer","mock service for:",e);try{const s=await o.post(e,t,a);return console.log("âœ… Mock POST response received"),s}catch(i){throw console.error("âŒ Mock API POST error:",i),i}},put:async(e,t,a={})=>{console.log("ðŸ“¡ Mock PUT request:",e);const s="true"===localStorage.getItem("is_staff"),o=s?U:q;return await o.put(e,t,a)},patch:async(e,t,a={})=>{console.log("ðŸ“¡ Mock PATCH request:",e);const s="true"===localStorage.getItem("is_staff"),o=s?U:q;return await o.patch(e,t,a)},delete:async(e,t={})=>{console.log("ðŸ“¡ Mock DELETE request:",e);const a="true"===localStorage.getItem("is_staff"),s=a?U:q;return await s.delete(e,t)},interceptors:{request:{use:()=>{}},response:{use:()=>{}}}}):(console.log("ðŸŒ Using real API service"),Z=T.A.create({baseURL:{NODE_ENV:"production",VUE_APP_DEMO_MODE:"true",BASE_URL:"/vue-final-project/"}.VUE_APP_API_URL||"http://127.0.0.1:8000/api/",timeout:1e4,headers:{"Content-Type":"application/json"}}),Z.interceptors.request.use((e=>{const t=localStorage.getItem("access");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),(e=>Promise.reject(e))),Z.interceptors.response.use((e=>e),(async e=>{const t=e.config;if(401===e.response?.status&&!t._retry){t._retry=!0;try{const e=localStorage.getItem("refresh");if(e){const a=await T.A.post(`${{NODE_ENV:"production",VUE_APP_DEMO_MODE:"true",BASE_URL:"/vue-final-project/"}.VUE_APP_API_URL}token/refresh/`,{refresh:e}),s=a.data.access;return localStorage.setItem("access",s),t.headers.Authorization=`Bearer ${s}`,Z(t)}}catch(a){console.error("Token refresh failed:",a),K.logout(),window.location.href="/login"}}return Promise.reject(e)})));var $=Z,Y=a(1387);a(323);const G={class:"toast-container"},ee={class:"toast-icon"},te={class:"toast-content"},ae={class:"toast-message"},se=["onClick"];function oe(e,t,a,r,l,n){return(0,o.uX)(),(0,o.CE)("div",G,[(0,o.bF)(s.F,{name:"toast"},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.toasts,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,class:(0,i.C4)(["toast-notification",[`toast-${e.type}`,{"toast-visible":e.visible}]]),role:"alert","aria-live":"assertive"},[(0,o.Lk)("div",ee,[(0,o.Lk)("i",{class:(0,i.C4)(["bi",{"bi-check-circle-fill":"success"===e.type,"bi-exclamation-triangle-fill":"warning"===e.type,"bi-x-circle-fill":"error"===e.type,"bi-info-circle-fill":"info"===e.type}])},null,2)]),(0,o.Lk)("div",te,[(0,o.Lk)("p",ae,(0,i.v_)(e.message),1)]),(0,o.Lk)("button",{class:"toast-close",onClick:t=>r.removeToast(e.id),"aria-label":"Close notification"},t[0]||(t[0]=[(0,o.Lk)("i",{class:"bi bi-x"},null,-1)]),8,se),(0,o.Lk)("div",{class:"toast-progress",style:(0,i.Tr)({animationDuration:`${e.duration}ms`})},null,4)],2)))),128))])),_:1})])}const ie=(0,O.KR)([]);let re=1;const le=()=>{const e=(e,a="info",s=2e3)=>{const o=window.innerWidth<768,i=o?3:5;if(ie.value.length>=i){const e=[...ie.value].sort(((e,t)=>e.id-t.id)).slice(0,ie.value.length-i+1);e.forEach((e=>{t(e.id)}))}const r=re++,l=(0,O.Kh)({id:r,message:e,type:a,visible:!1,duration:o?Math.min(s,2e3):s});return ie.value.push(l),setTimeout((()=>{l.visible=!0}),10),setTimeout((()=>{t(r)}),l.duration),r},t=e=>{const t=ie.value.findIndex((t=>t.id===e));-1!==t&&(ie.value[t].visible=!1,setTimeout((()=>{ie.value=ie.value.filter((t=>t.id!==e))}),300))},a=(t,a)=>e(t,"success",a),s=(t,a)=>e(t,"error",a),o=(t,a)=>e(t,"warning",a),i=(t,a)=>e(t,"info",a);return{toasts:ie,addToast:e,removeToast:t,success:a,error:s,warning:o,info:i}},ne=le;var ce={setup(){const{toasts:e,removeToast:t}=le();return{toasts:e,removeToast:t}}},de=a(1241);const ue=(0,de.A)(ce,[["render",oe],["__scopeId","data-v-494e3f04"]]);var me=ue,pe=a(8077),ge={components:{ToastNotification:me},setup(){const e=(0,Y.rd)(),t=(0,O.KR)(0),a=(0,O.KR)(""),s=(0,O.KR)(null);let i=null;const r=(0,O.KR)(!1),l=(0,O.KR)({isLoggedIn:!1,isStaff:!1,isInitialized:!1}),n=()=>{const e=JSON.parse(localStorage.getItem("cart"))||[];t.value=e.length},c=()=>{console.log("ðŸ”„ Force updating auth state:",{isLoggedIn:K.isLoggedIn,isStaff:K.isStaff,isInitialized:K.isInitialized}),l.value={isLoggedIn:K.isLoggedIn,isStaff:K.isStaff,isInitialized:K.isInitialized},w()},d=t=>K.isLoggedIn?(e.push(t),!0):(e.push("/login"),!1),u=()=>{k(),e.push("/login")},m=()=>{k(),e.push("/login")},p=()=>{d("/products")},g=()=>{d("/cart")},b=()=>{d("/orders")},h=()=>{K.logout(),c(),k(),window.location.hostname.includes("github.io")?window.location.href="https://lorendale.github.io/vue-final-project/#/":e.push("/")},v=()=>{i&&(r.value?i.hide():i.show(),r.value=!r.value)},k=()=>{i&&r.value&&(i.hide(),r.value=!1)},f=e=>{"cart"===e.key&&n()},L=()=>{n()},y=async e=>{console.log("ðŸ“¢ Auth change event received:",e.type,e.detail),await(0,o.dY)(),c()},w=async()=>{if(K.isLoggedIn)try{const e=localStorage.getItem("username");if(e)return void(a.value=e);const t=await $.get("user/");a.value=t.data.username,localStorage.setItem("username",t.data.username)}catch(e){console.error("Failed to fetch username:",e),a.value=K.isStaff?"admin":"user"}else a.value=""},C=()=>{setInterval((()=>{const e={isLoggedIn:K.isLoggedIn,isStaff:K.isStaff,isInitialized:K.isInitialized};JSON.stringify(e)!==JSON.stringify(l.value)&&(console.log("ðŸ”„ Auth state drift detected, updating..."),c())}),1e3)};return(0,o.sV)((async()=>{console.log("ðŸš€ App.vue mounted, initializing..."),await K.waitForInitialization(),c(),K.isLoggedIn&&(await K.checkTokenValidity(),c()),n(),window.addEventListener("storage",f),window.addEventListener("cart-updated",L),window.addEventListener("auth-changed",y),window.addEventListener("auth-state-changed",y),window.addEventListener("login-success",y),window.addEventListener("logout-success",y),C();const e=document.getElementById("navbarContent");e&&(i=new pe.SD(e,{toggle:!1}),e.addEventListener("shown.bs.collapse",(()=>{r.value=!0})),e.addEventListener("hidden.bs.collapse",(()=>{r.value=!1})),document.addEventListener("click",(e=>{if(!r.value)return;const t=e.target.closest(".navbar-toggler"),a=e.target.closest(".navbar-collapse");t||a||k()}))),window.history&&window.addEventListener("popstate",k),window.addEventListener("resize",(()=>{window.innerWidth>=992&&r.value&&k()})),console.log("âœ… App.vue initialization complete")})),(0,o.hi)((()=>{window.removeEventListener("storage",f),window.removeEventListener("cart-updated",L),window.removeEventListener("auth-changed",y),window.removeEventListener("auth-state-changed",y),window.removeEventListener("login-success",y),window.removeEventListener("logout-success",y),window.removeEventListener("popstate",k),window.removeEventListener("resize",(()=>{}));const e=document.getElementById("navbarContent");e&&(e.removeEventListener("shown.bs.collapse",(()=>{})),e.removeEventListener("hidden.bs.collapse",(()=>{}))),document.removeEventListener("click",(()=>{}))})),(0,o.wB)((()=>localStorage.getItem("cart")),(()=>{n()})),(0,o.wB)((()=>e.currentRoute.value.path),(()=>{c()})),{auth:l,cartCount:t,username:a,logout:h,updateCartCount:n,closeNavbar:k,toggleNavbar:v,navbarCollapse:s,handleLoginClick:u,handleRegisterClick:m,handleShopClick:p,handleCartClick:g,handleOrdersClick:b}}};const be=(0,de.A)(ge,[["render",D]]);var he=be;const ve={class:"landing-page"},ke={class:"hero-section"},fe={class:"container"},Le={class:"row align-items-center min-vh-100"},ye={class:"col-lg-6 hero-content"},we={class:"hero-actions"},Ce={class:"categories-section"},Pe={class:"container"},xe={class:"row g-4"},Se={class:"col-md-6 col-lg-4"},Ee={class:"col-md-6 col-lg-4"},Me={class:"col-md-6 col-lg-4"},Ie={class:"cta-section"},_e={class:"container"},Ae={class:"cta-content"},De={class:"cta-actions"};function Oe(e,t,a,s,i,r){return(0,o.uX)(),(0,o.CE)("div",ve,[(0,o.Lk)("section",ke,[t[13]||(t[13]=(0,o.Lk)("div",{class:"hero-background"},[(0,o.Lk)("div",{class:"hero-pattern"}),(0,o.Lk)("div",{class:"hero-gradient"})],-1)),(0,o.Lk)("div",fe,[(0,o.Lk)("div",Le,[(0,o.Lk)("div",ye,[t[10]||(t[10]=(0,o.Fv)('<div class="hero-badge" data-v-b216b304><i class="bi bi-star-fill me-2" data-v-b216b304></i> Trusted by 10,000+ customers </div><h1 class="hero-title" data-v-b216b304> Welcome to <span class="brand-highlight" data-v-b216b304>Bluora</span></h1><p class="hero-subtitle" data-v-b216b304> Discover premium products at unbeatable prices. Your one-stop destination for quality, convenience, and exceptional shopping experiences. </p><div class="hero-features" data-v-b216b304><div class="feature-item" data-v-b216b304><i class="bi bi-shield-check" data-v-b216b304></i><span data-v-b216b304>Secure Shopping</span></div><div class="feature-item" data-v-b216b304><i class="bi bi-truck" data-v-b216b304></i><span data-v-b216b304>Fast Delivery</span></div><div class="feature-item" data-v-b216b304><i class="bi bi-arrow-counterclockwise" data-v-b216b304></i><span data-v-b216b304>Easy Returns</span></div></div>',4)),(0,o.Lk)("div",we,[(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>s.handleStartShopping&&s.handleStartShopping(...e)),class:"btn btn-primary btn-hero"},t[8]||(t[8]=[(0,o.Lk)("i",{class:"bi bi-shop me-2"},null,-1),(0,o.eW)(" Start Shopping ")])),(0,o.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>s.handleCreateAccount&&s.handleCreateAccount(...e)),class:"btn btn-outline-light btn-hero"},t[9]||(t[9]=[(0,o.Lk)("i",{class:"bi bi-person-plus me-2"},null,-1),(0,o.eW)(" Create Account ")]))])]),t[11]||(t[11]=(0,o.Fv)('<div class="col-lg-6 hero-visual" data-v-b216b304><div class="hero-image-container" data-v-b216b304><div class="floating-card card-1" data-v-b216b304><div class="product-preview" data-v-b216b304><div class="product-image" data-v-b216b304><img src="https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=80&amp;h=80&amp;fit=crop&amp;crop=center" alt="Premium Headphones" data-v-b216b304></div><div class="product-info" data-v-b216b304><h6 data-v-b216b304>Premium Headphones</h6><span class="price" data-v-b216b304>â‚±1,299.99</span></div></div></div><div class="floating-card card-2" data-v-b216b304><div class="product-preview" data-v-b216b304><div class="product-image" data-v-b216b304><img src="https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=80&amp;h=80&amp;fit=crop&amp;crop=center" alt="Smart Watch" data-v-b216b304></div><div class="product-info" data-v-b216b304><h6 data-v-b216b304>Smart Watch</h6><span class="price" data-v-b216b304>â‚±899.50</span></div></div></div><div class="floating-card card-3" data-v-b216b304><div class="product-preview" data-v-b216b304><div class="product-image" data-v-b216b304><img src="https://images.unsplash.com/photo-1496181133206-80ce9b88a853?w=80&amp;h=80&amp;fit=crop&amp;crop=center" alt="Gaming Laptop" data-v-b216b304></div><div class="product-info" data-v-b216b304><h6 data-v-b216b304>Gaming Laptop</h6><span class="price" data-v-b216b304>â‚±5,999.00</span></div></div></div><div class="hero-main-visual" data-v-b216b304><div class="shopping-illustration" data-v-b216b304><i class="bi bi-bag-heart-fill" data-v-b216b304></i></div></div></div></div>',1))])]),(0,o.Lk)("div",{class:"scroll-indicator",onClick:t[2]||(t[2]=(...e)=>s.scrollToFeatures&&s.scrollToFeatures(...e))},t[12]||(t[12]=[(0,o.Lk)("div",{class:"scroll-arrow"},[(0,o.Lk)("i",{class:"bi bi-chevron-down"})],-1)]))]),t[23]||(t[23]=(0,o.Fv)('<section class="features-section" id="features" data-v-b216b304><div class="container" data-v-b216b304><div class="section-header" data-v-b216b304><h2 class="section-title" data-v-b216b304>Why Choose Bluora?</h2><p class="section-subtitle" data-v-b216b304> Experience the difference with our premium shopping platform </p></div><div class="row g-4" data-v-b216b304><div class="col-lg-4 col-md-6" data-v-b216b304><div class="feature-card" data-v-b216b304><div class="feature-icon" data-v-b216b304><i class="bi bi-shield-check-fill" data-v-b216b304></i></div><h3 data-v-b216b304>Secure &amp; Safe</h3><p data-v-b216b304> Your data and payments are protected with bank-level security. Shop with confidence knowing your information is safe. </p><div class="feature-highlight" data-v-b216b304><i class="bi bi-check-circle me-2" data-v-b216b304></i> SSL Encrypted </div></div></div><div class="col-lg-4 col-md-6" data-v-b216b304><div class="feature-card" data-v-b216b304><div class="feature-icon" data-v-b216b304><i class="bi bi-lightning-charge-fill" data-v-b216b304></i></div><h3 data-v-b216b304>Lightning Fast</h3><p data-v-b216b304> Experience blazing-fast loading times and seamless navigation. Find what you need quickly and efficiently. </p><div class="feature-highlight" data-v-b216b304><i class="bi bi-check-circle me-2" data-v-b216b304></i> Optimized Performance </div></div></div><div class="col-lg-4 col-md-6" data-v-b216b304><div class="feature-card" data-v-b216b304><div class="feature-icon" data-v-b216b304><i class="bi bi-heart-fill" data-v-b216b304></i></div><h3 data-v-b216b304>Customer First</h3><p data-v-b216b304> Our dedicated support team is here to help you 24/7. Your satisfaction is our top priority. </p><div class="feature-highlight" data-v-b216b304><i class="bi bi-check-circle me-2" data-v-b216b304></i> 24/7 Support </div></div></div></div></div></section><section class="stats-section" data-v-b216b304><div class="container" data-v-b216b304><div class="row" data-v-b216b304><div class="col-6 col-md-3 mb-4" data-v-b216b304><div class="stat-item" data-v-b216b304><div class="stat-number" data-target="10000" data-v-b216b304>0</div><div class="stat-label" data-v-b216b304>Happy Customers</div></div></div><div class="col-6 col-md-3 mb-4" data-v-b216b304><div class="stat-item" data-v-b216b304><div class="stat-number" data-target="500" data-v-b216b304>0</div><div class="stat-label" data-v-b216b304>Premium Products</div></div></div><div class="col-6 col-md-3 mb-4" data-v-b216b304><div class="stat-item" data-v-b216b304><div class="stat-number" data-target="99" data-v-b216b304>0</div><div class="stat-label" data-v-b216b304>Satisfaction Rate</div></div></div><div class="col-6 col-md-3 mb-4" data-v-b216b304><div class="stat-item" data-v-b216b304><div class="stat-number" data-target="24" data-v-b216b304>0</div><div class="stat-label" data-v-b216b304>Hour Support</div></div></div></div></div></section>',2)),(0,o.Lk)("section",Ce,[(0,o.Lk)("div",Pe,[t[17]||(t[17]=(0,o.Lk)("div",{class:"section-header"},[(0,o.Lk)("h2",{class:"section-title"},"Shop by Category"),(0,o.Lk)("p",{class:"section-subtitle"}," Explore our carefully curated collection of premium products ")],-1)),(0,o.Lk)("div",xe,[(0,o.Lk)("div",Se,[(0,o.Lk)("div",{class:"category-card",onClick:t[3]||(t[3]=(...e)=>s.handleCategoryClick&&s.handleCategoryClick(...e))},t[14]||(t[14]=[(0,o.Lk)("div",{class:"category-image"},[(0,o.Lk)("img",{src:"https://images.unsplash.com/photo-1496181133206-80ce9b88a853?w=300&h=200&fit=crop&crop=center",alt:"Electronics"})],-1),(0,o.Lk)("div",{class:"category-content"},[(0,o.Lk)("h4",null,"Electronics"),(0,o.Lk)("p",null,"Latest gadgets and tech essentials"),(0,o.Lk)("div",{class:"category-stats"},[(0,o.Lk)("span",null,"50+ Products")])],-1)]))]),(0,o.Lk)("div",Ee,[(0,o.Lk)("div",{class:"category-card",onClick:t[4]||(t[4]=(...e)=>s.handleCategoryClick&&s.handleCategoryClick(...e))},t[15]||(t[15]=[(0,o.Lk)("div",{class:"category-image"},[(0,o.Lk)("img",{src:"https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=300&h=200&fit=crop&crop=center",alt:"Home & Living"})],-1),(0,o.Lk)("div",{class:"category-content"},[(0,o.Lk)("h4",null,"Home & Living"),(0,o.Lk)("p",null,"Comfort and style for your space"),(0,o.Lk)("div",{class:"category-stats"},[(0,o.Lk)("span",null,"30+ Products")])],-1)]))]),(0,o.Lk)("div",Me,[(0,o.Lk)("div",{class:"category-card",onClick:t[5]||(t[5]=(...e)=>s.handleCategoryClick&&s.handleCategoryClick(...e))},t[16]||(t[16]=[(0,o.Lk)("div",{class:"category-image"},[(0,o.Lk)("img",{src:"https://images.unsplash.com/photo-1493711662062-fa541adb3fc8?w=300&h=200&fit=crop&crop=center",alt:"Gaming"})],-1),(0,o.Lk)("div",{class:"category-content"},[(0,o.Lk)("h4",null,"Gaming"),(0,o.Lk)("p",null,"Level up your gaming experience"),(0,o.Lk)("div",{class:"category-stats"},[(0,o.Lk)("span",null,"25+ Products")])],-1)]))])])])]),t[24]||(t[24]=(0,o.Fv)('<section class="testimonials-section" data-v-b216b304><div class="container" data-v-b216b304><div class="section-header" data-v-b216b304><h2 class="section-title" data-v-b216b304>What Our Customers Say</h2><p class="section-subtitle" data-v-b216b304> Real experiences from real customers </p></div><div class="row g-4" data-v-b216b304><div class="col-md-6 col-lg-4" data-v-b216b304><div class="testimonial-card" data-v-b216b304><div class="testimonial-rating" data-v-b216b304><i class="bi bi-star-fill" data-v-b216b304></i><i class="bi bi-star-fill" data-v-b216b304></i><i class="bi bi-star-fill" data-v-b216b304></i><i class="bi bi-star-fill" data-v-b216b304></i><i class="bi bi-star-fill" data-v-b216b304></i></div><p class="testimonial-text" data-v-b216b304> &quot;Amazing shopping experience! Fast delivery and excellent customer service. Highly recommend Bluora for all your shopping needs.&quot; </p><div class="testimonial-author" data-v-b216b304><div class="author-avatar" data-v-b216b304><img src="https://images.unsplash.com/photo-1494790108755-2616b612b786?w=50&amp;h=50&amp;fit=crop&amp;crop=face" alt="Sarah Johnson" data-v-b216b304></div><div class="author-info" data-v-b216b304><h6 data-v-b216b304>Sarah Johnson</h6><span data-v-b216b304>Verified Customer</span></div></div></div></div><div class="col-md-6 col-lg-4" data-v-b216b304><div class="testimonial-card" data-v-b216b304><div class="testimonial-rating" data-v-b216b304><i class="bi bi-star-fill" data-v-b216b304></i><i class="bi bi-star-fill" data-v-b216b304></i><i class="bi bi-star-fill" data-v-b216b304></i><i class="bi bi-star-fill" data-v-b216b304></i><i class="bi bi-star-fill" data-v-b216b304></i></div><p class="testimonial-text" data-v-b216b304> &quot;The quality of products is outstanding and the prices are very competitive. I&#39;ve been shopping here for months and never disappointed.&quot; </p><div class="testimonial-author" data-v-b216b304><div class="author-avatar" data-v-b216b304><img src="https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=50&amp;h=50&amp;fit=crop&amp;crop=face" alt="Michael Chen" data-v-b216b304></div><div class="author-info" data-v-b216b304><h6 data-v-b216b304>Michael Chen</h6><span data-v-b216b304>Verified Customer</span></div></div></div></div><div class="col-md-6 col-lg-4" data-v-b216b304><div class="testimonial-card" data-v-b216b304><div class="testimonial-rating" data-v-b216b304><i class="bi bi-star-fill" data-v-b216b304></i><i class="bi bi-star-fill" data-v-b216b304></i><i class="bi bi-star-fill" data-v-b216b304></i><i class="bi bi-star-fill" data-v-b216b304></i><i class="bi bi-star-fill" data-v-b216b304></i></div><p class="testimonial-text" data-v-b216b304> &quot;User-friendly interface and secure payment options. Shopping has never been this easy and enjoyable!&quot; </p><div class="testimonial-author" data-v-b216b304><div class="author-avatar" data-v-b216b304><img src="https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=50&amp;h=50&amp;fit=crop&amp;crop=face" alt="Emily Rodriguez" data-v-b216b304></div><div class="author-info" data-v-b216b304><h6 data-v-b216b304>Emily Rodriguez</h6><span data-v-b216b304>Verified Customer</span></div></div></div></div></div></div></section>',1)),(0,o.Lk)("section",Ie,[(0,o.Lk)("div",_e,[(0,o.Lk)("div",Ae,[t[20]||(t[20]=(0,o.Lk)("div",{class:"cta-icon"},[(0,o.Lk)("i",{class:"bi bi-rocket-takeoff"})],-1)),t[21]||(t[21]=(0,o.Lk)("h2",null,"Ready to Start Your Shopping Journey?",-1)),t[22]||(t[22]=(0,o.Lk)("p",null," Join thousands of satisfied customers and discover amazing products at unbeatable prices. Create your account today! ",-1)),(0,o.Lk)("div",De,[(0,o.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>s.handleCreateAccount&&s.handleCreateAccount(...e)),class:"btn btn-light btn-cta"},t[18]||(t[18]=[(0,o.Lk)("i",{class:"bi bi-person-plus me-2"},null,-1),(0,o.eW)(" Get Started Free ")])),(0,o.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>s.handleBrowseProducts&&s.handleBrowseProducts(...e)),class:"btn btn-outline-light btn-cta"},t[19]||(t[19]=[(0,o.Lk)("i",{class:"bi bi-eye me-2"},null,-1),(0,o.eW)(" Browse Products ")]))])])])])])}var Te={name:"LandingPage",setup(){const e=(0,Y.rd)();let t=null;(0,o.sV)((async()=>{const t=!!localStorage.getItem("access"),a="true"===localStorage.getItem("is_staff");t?a?e.push("/monitor"):e.push("/products"):c()}));const a=()=>{const t=!!localStorage.getItem("access");t?e.push("/products"):e.push("/login")},s=()=>{e.push("/login")},i=()=>{const t=!!localStorage.getItem("access");t?e.push("/products"):e.push("/login")},r=()=>{const t=!!localStorage.getItem("access");t?e.push("/products"):e.push("/login")},l=()=>{const e=document.getElementById("features");e&&e.scrollIntoView({behavior:"smooth",block:"start"})},n=()=>{const e=document.querySelectorAll(".stat-number");e.forEach((e=>{const t=parseInt(e.getAttribute("data-target")),a=t/100;let s=0;const o=()=>{s<t?(s+=a,e.textContent=Math.ceil(s),requestAnimationFrame(o)):e.textContent=t};o()}))},c=()=>{t=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(e.target.classList.add("animate-in"),e.target.classList.contains("stats-section")&&n())}))}),{threshold:.1,rootMargin:"0px 0px -50px 0px"});const e=document.querySelectorAll("section");e.forEach((e=>{t.observe(e)}))};return(0,o.hi)((()=>{t&&t.disconnect()})),{handleStartShopping:a,handleCreateAccount:s,handleBrowseProducts:i,handleCategoryClick:r,scrollToFeatures:l}}};const Fe=(0,de.A)(Te,[["render",Oe],["__scopeId","data-v-b216b304"]]);var We=Fe;const Ne={class:"login-container"},Re={class:"login-card"},qe={key:0,class:"demo-credentials"},Xe={class:"form-group"},He={class:"form-group"},Be=["type"],ze={key:0,class:"error-message"},Je={class:"form-check mb-3"},Ue=["disabled"],Qe={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},je={class:"login-footer"};function Ke(e,t,a,r,l,n){const c=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",Ne,[(0,o.Lk)("div",Re,[t[14]||(t[14]=(0,o.Lk)("div",{class:"login-header"},[(0,o.Lk)("div",{class:"login-icon"},[(0,o.Lk)("i",{class:"bi bi-bag-heart-fill"})]),(0,o.Lk)("h2",null,"Welcome Back"),(0,o.Lk)("p",null,"Sign in to your account to continue")],-1)),r.isDemoMode?((0,o.uX)(),(0,o.CE)("div",qe,t[5]||(t[5]=[(0,o.Fv)('<div class="demo-credentials-header" data-v-79fa4fba><i class="bi bi-info-circle me-2" data-v-79fa4fba></i> Demo Credentials </div><div class="demo-credentials-body" data-v-79fa4fba><div class="demo-credential-item" data-v-79fa4fba><span class="demo-credential-label" data-v-79fa4fba>Admin:</span><span class="demo-credential-value" data-v-79fa4fba>username: <strong data-v-79fa4fba>admin</strong>, password: <strong data-v-79fa4fba>admin</strong></span></div><div class="demo-credential-item" data-v-79fa4fba><span class="demo-credential-label" data-v-79fa4fba>Customer:</span><span class="demo-credential-value" data-v-79fa4fba>username: <strong data-v-79fa4fba>user</strong>, password: <strong data-v-79fa4fba>user</strong></span></div></div>',2)]))):(0,o.Q3)("",!0),(0,o.Lk)("form",{onSubmit:t[4]||(t[4]=(0,s.D$)(((...e)=>r.handleLogin&&r.handleLogin(...e)),["prevent"])),class:"login-form",novalidate:""},[(0,o.Lk)("div",Xe,[t[7]||(t[7]=(0,o.Lk)("label",{for:"username"},"Username",-1)),(0,o.Lk)("div",{class:(0,i.C4)(["input-group",{"has-error":r.hasLoginError}])},[(0,o.Lk)("span",{class:(0,i.C4)(["input-group-text",{error:r.hasLoginError}])},t[6]||(t[6]=[(0,o.Lk)("i",{class:"bi bi-person"},null,-1)]),2),(0,o.bo)((0,o.Lk)("input",{type:"text",id:"username","onUpdate:modelValue":t[0]||(t[0]=e=>r.username=e),class:(0,i.C4)(["form-control",{"is-invalid":r.hasLoginError}]),placeholder:"Enter your username",required:""},null,2),[[s.Jo,r.username]])],2)]),(0,o.Lk)("div",He,[t[10]||(t[10]=(0,o.Lk)("label",{for:"password"},"Password",-1)),(0,o.Lk)("div",{class:(0,i.C4)(["input-group",{"has-error":r.hasLoginError}])},[(0,o.Lk)("span",{class:(0,i.C4)(["input-group-text",{error:r.hasLoginError}])},t[8]||(t[8]=[(0,o.Lk)("i",{class:"bi bi-lock"},null,-1)]),2),(0,o.bo)((0,o.Lk)("input",{type:r.showPassword?"text":"password",id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>r.password=e),class:(0,i.C4)(["form-control",{"is-invalid":r.hasLoginError}]),placeholder:"Enter your password",required:""},null,10,Be),[[s.hp,r.password]]),(0,o.Lk)("button",{type:"button",class:(0,i.C4)(["btn btn-outline-secondary toggle-password",{error:r.hasLoginError}]),onClick:t[2]||(t[2]=(...e)=>r.togglePasswordVisibility&&r.togglePasswordVisibility(...e))},[(0,o.Lk)("i",{class:(0,i.C4)(r.showPassword?"bi bi-eye-slash":"bi bi-eye")},null,2)],2)],2),r.errorMessage?((0,o.uX)(),(0,o.CE)("div",ze,[t[9]||(t[9]=(0,o.Lk)("i",{class:"bi bi-exclamation-circle me-1"},null,-1)),(0,o.eW)(" "+(0,i.v_)(r.errorMessage),1)])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Je,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox",class:"form-check-input",id:"rememberMe","onUpdate:modelValue":t[3]||(t[3]=e=>r.rememberMe=e)},null,512),[[s.lH,r.rememberMe]]),t[11]||(t[11]=(0,o.Lk)("label",{class:"form-check-label",for:"rememberMe"},"Remember me",-1))]),(0,o.Lk)("button",{type:"submit",class:"btn btn-primary login-btn",disabled:r.isLoading},[r.isLoading?((0,o.uX)(),(0,o.CE)("span",Qe)):(0,o.Q3)("",!0),(0,o.eW)(" "+(0,i.v_)(r.isLoading?"Signing In...":"Sign In"),1)],8,Ue)],32),(0,o.Lk)("div",je,[(0,o.Lk)("p",null,[t[13]||(t[13]=(0,o.eW)("Don't have an account? ")),(0,o.bF)(c,{to:"/register",class:"auth-link"},{default:(0,o.k6)((()=>t[12]||(t[12]=[(0,o.eW)("Create Account")]))),_:1})])])])])}function Ve(){const e=(e,t,a=2e3)=>{window.$root?window.$root.$emit("show-toast",e,t,a):console.warn("Toast system not available: $root not found")};return{showToast:e}}var Ze={setup(){const e=(0,Y.rd)(),{showToast:t}=Ve(),a=(0,O.KR)(""),s=(0,O.KR)(""),i=(0,O.KR)(!1),r=(0,O.KR)(!1),l=(0,O.KR)(!1),n=(0,O.KR)(""),c=(0,o.EW)((()=>!!n.value)),d=(0,o.EW)((()=>window.location.hostname.includes("github.io")||!0));(0,o.wB)([a,s],(()=>{n.value&&(n.value="")}));const u=()=>{r.value=!r.value},m=async()=>{try{l.value=!0,n.value="",console.log("ðŸ” Starting login process..."),await K.login(a.value,s.value),console.log("âœ… Login successful, updating state...");const i={isLoggedIn:!0,username:a.value,isStaff:K.isStaff,timestamp:Date.now()};window.dispatchEvent(new CustomEvent("auth-changed",{detail:i})),window.dispatchEvent(new CustomEvent("auth-state-changed",{detail:i})),window.dispatchEvent(new CustomEvent("login-success",{detail:i})),await(0,o.dY)(),await new Promise((e=>setTimeout(e,200))),console.log("ðŸ“¢ Auth events dispatched, redirecting..."),t({title:"Login Successful",message:`Welcome back, ${a.value}!`,type:"success"}),K.isStaff?e.push("/monitor"):e.push("/products")}catch(i){console.error("âŒ Login error:",i),n.value="Invalid username or password",t({title:"Login Failed",message:"Invalid username or password",type:"error"})}finally{l.value=!1}};return{username:a,password:s,rememberMe:i,showPassword:r,isLoading:l,errorMessage:n,hasLoginError:c,isDemoMode:d,togglePasswordVisibility:u,handleLogin:m}}};const $e=(0,de.A)(Ze,[["render",Ke],["__scopeId","data-v-79fa4fba"]]);var Ye=$e;const Ge={class:"product-catalog container"},et={class:"catalog-header"},tt={class:"search-container"},at={key:0,class:"loading-container"},st={key:1,class:"empty-products"},ot={class:"empty-actions"},it={key:2},rt={class:"product-count"},lt={key:0,class:"search-info"},nt=["disabled"],ct={key:0,class:"spinner-border spinner-border-sm me-1",role:"status"},dt={key:1,class:"bi bi-arrow-clockwise me-1"},ut={class:"product-grid"},mt={class:"product-image"},pt=["src","alt"],gt={key:1,class:"image-placeholder"},bt={class:"product-badges"},ht={key:0,class:"stock-badge new-badge"},vt={class:"product-details"},kt={class:"product-rating"},ft={class:"stars"},Lt={class:"rating-count"},yt={class:"product-name"},wt={class:"product-description"},Ct={class:"product-price"},Pt={key:0,class:"product-actions"},xt={class:"quantity-selector"},St=["onClick","disabled"],Et={class:"quantity"},Mt=["onClick","disabled"],It=["onClick"],_t={key:1,class:"out-of-stock-btn",disabled:"","aria-label":"Out of stock"},At={key:0,class:"pagination-container"},Dt={class:"pagination-info"},Ot={class:"pagination-controls"},Tt=["disabled"],Ft={class:"pagination-numbers"},Wt={key:1,class:"pagination-ellipsis"},Nt=["onClick"],Rt={key:2,class:"pagination-ellipsis"},qt=["disabled"];function Xt(e,t,a,r,l,n){return(0,o.uX)(),(0,o.CE)("div",Ge,[(0,o.Lk)("div",et,[t[9]||(t[9]=(0,o.Lk)("h2",{class:"section-title"},[(0,o.Lk)("i",{class:"bi bi-shop me-2"}),(0,o.eW)("Discover Our Collection ")],-1)),(0,o.Lk)("div",tt,[(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>r.searchQuery=e),placeholder:"Search products...",class:"search-input","aria-label":"Search products"},null,512),[[s.Jo,r.searchQuery]]),t[8]||(t[8]=(0,o.Lk)("i",{class:"bi bi-search search-icon"},null,-1))])]),r.isLoading?((0,o.uX)(),(0,o.CE)("div",at,t[10]||(t[10]=[(0,o.Lk)("div",{class:"spinner"},[(0,o.Lk)("div",{class:"bounce1"}),(0,o.Lk)("div",{class:"bounce2"}),(0,o.Lk)("div",{class:"bounce3"})],-1),(0,o.Lk)("p",null,"Loading products...",-1)]))):0===r.filteredProducts.length?((0,o.uX)(),(0,o.CE)("div",st,[t[13]||(t[13]=(0,o.Lk)("i",{class:"bi bi-search-heart"},null,-1)),t[14]||(t[14]=(0,o.Lk)("h3",null,"No products found",-1)),t[15]||(t[15]=(0,o.Lk)("p",null,"We couldn't find any products matching your search.",-1)),(0,o.Lk)("div",ot,[(0,o.Lk)("button",{class:"btn btn-primary mt-3",onClick:t[1]||(t[1]=(...e)=>r.resetSearch&&r.resetSearch(...e))},t[11]||(t[11]=[(0,o.Lk)("i",{class:"bi bi-arrow-counterclockwise me-2"},null,-1),(0,o.eW)("View All Products ")])),(0,o.Lk)("button",{class:"btn btn-outline-primary mt-3 ms-2",onClick:t[2]||(t[2]=(...e)=>r.refreshProducts&&r.refreshProducts(...e))},t[12]||(t[12]=[(0,o.Lk)("i",{class:"bi bi-arrow-clockwise me-2"},null,-1),(0,o.eW)("Refresh Products ")]))])])):((0,o.uX)(),(0,o.CE)("div",it,[(0,o.Lk)("div",rt,[(0,o.Lk)("span",null,(0,i.v_)(r.filteredProducts.length)+" products found",1),r.searchQuery?((0,o.uX)(),(0,o.CE)("span",lt,'for "'+(0,i.v_)(r.searchQuery)+'"',1)):(0,o.Q3)("",!0),(0,o.Lk)("button",{class:"btn btn-sm btn-outline-secondary ms-3",onClick:t[3]||(t[3]=(...e)=>r.refreshProducts&&r.refreshProducts(...e)),disabled:r.isRefreshing},[r.isRefreshing?((0,o.uX)(),(0,o.CE)("span",ct)):((0,o.uX)(),(0,o.CE)("i",dt)),(0,o.eW)(" "+(0,i.v_)(r.isRefreshing?"Refreshing...":"Refresh"),1)],8,nt)]),(0,o.Lk)("div",ut,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.paginatedProducts,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.id,class:(0,i.C4)(["product-card",{"out-of-stock":0===e.stock}])},[(0,o.Lk)("div",mt,[e.image?((0,o.uX)(),(0,o.CE)("img",{key:0,src:r.fullImageUrl(e.image),alt:e.name,loading:"lazy"},null,8,pt)):((0,o.uX)(),(0,o.CE)("div",gt,t[16]||(t[16]=[(0,o.Lk)("i",{class:"bi bi-image"},null,-1)]))),(0,o.Lk)("div",bt,[(0,o.Lk)("div",{class:(0,i.C4)(["stock-count-badge",r.getStockCountBadgeClass(e)])},(0,i.v_)(e.stock>0?`${e.stock} in stock`:"Out of stock"),3),r.isNewProduct(e)?((0,o.uX)(),(0,o.CE)("div",ht,t[17]||(t[17]=[(0,o.Lk)("i",{class:"bi bi-star-fill"},null,-1),(0,o.eW)(" New ")]))):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",vt,[(0,o.Lk)("div",kt,[(0,o.Lk)("div",ft,[((0,o.uX)(),(0,o.CE)(o.FK,null,(0,o.pI)(5,(t=>(0,o.Lk)("i",{key:t,class:(0,i.C4)(["bi",t<=r.getProductRating(e)?"bi-star-fill":"bi-star"])},null,2))),64))]),(0,o.Lk)("span",Lt,"("+(0,i.v_)(r.getReviewCount(e))+")",1)]),(0,o.Lk)("h3",yt,(0,i.v_)(e.name),1),(0,o.Lk)("p",wt,(0,i.v_)(r.truncate(e.description,80)),1),(0,o.Lk)("div",Ct,"â‚±"+(0,i.v_)(r.formatPrice(e.price)),1),e.stock>0?((0,o.uX)(),(0,o.CE)("div",Pt,[(0,o.Lk)("div",xt,[(0,o.Lk)("button",{class:"quantity-btn",onClick:t=>r.decrementQuantity(e),disabled:r.quantities[e.id]<=1,"aria-label":"Decrease quantity"},t[18]||(t[18]=[(0,o.Lk)("i",{class:"bi bi-dash"},null,-1)]),8,St),(0,o.Lk)("span",Et,(0,i.v_)(r.quantities[e.id]||1),1),(0,o.Lk)("button",{class:"quantity-btn",onClick:t=>r.incrementQuantity(e),disabled:r.quantities[e.id]>=e.stock,"aria-label":"Increase quantity"},t[19]||(t[19]=[(0,o.Lk)("i",{class:"bi bi-plus"},null,-1)]),8,Mt)]),(0,o.Lk)("button",{class:"add-to-cart-btn",onClick:t=>r.addToCart(e),"aria-label":"Add to cart"},t[20]||(t[20]=[(0,o.Lk)("i",{class:"bi bi-cart-plus me-2"},null,-1),(0,o.eW)("Add to Cart ")]),8,It)])):((0,o.uX)(),(0,o.CE)("button",_t,t[21]||(t[21]=[(0,o.Lk)("i",{class:"bi bi-x-circle me-2"},null,-1),(0,o.eW)("Out of Stock ")])))])],2)))),128))]),r.totalPages>1?((0,o.uX)(),(0,o.CE)("div",At,[(0,o.Lk)("div",Dt,[(0,o.Lk)("span",null," Showing "+(0,i.v_)(r.startIndex+1)+" to "+(0,i.v_)(Math.min(r.startIndex+r.productsPerPage,r.filteredProducts.length))+" of "+(0,i.v_)(r.filteredProducts.length)+" products ",1)]),(0,o.Lk)("div",Ot,[(0,o.Lk)("button",{class:"pagination-btn",onClick:t[4]||(t[4]=e=>r.goToPage(r.currentPage-1)),disabled:1===r.currentPage,"aria-label":"Previous page"},t[22]||(t[22]=[(0,o.Lk)("i",{class:"bi bi-chevron-left"},null,-1),(0,o.eW)(" Previous ")]),8,Tt),(0,o.Lk)("div",Ft,[r.currentPage>3?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"pagination-number",onClick:t[5]||(t[5]=e=>r.goToPage(1))}," 1 ")):(0,o.Q3)("",!0),r.currentPage>4?((0,o.uX)(),(0,o.CE)("span",Wt,"...")):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.visiblePages,(e=>((0,o.uX)(),(0,o.CE)("button",{key:e,class:(0,i.C4)(["pagination-number",{active:e===r.currentPage}]),onClick:t=>r.goToPage(e)},(0,i.v_)(e),11,Nt)))),128)),r.currentPage<r.totalPages-3?((0,o.uX)(),(0,o.CE)("span",Rt,"...")):(0,o.Q3)("",!0),r.currentPage<r.totalPages-2?((0,o.uX)(),(0,o.CE)("button",{key:3,class:"pagination-number",onClick:t[6]||(t[6]=e=>r.goToPage(r.totalPages))},(0,i.v_)(r.totalPages),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("button",{class:"pagination-btn",onClick:t[7]||(t[7]=e=>r.goToPage(r.currentPage+1)),disabled:r.currentPage===r.totalPages,"aria-label":"Next page"},t[23]||(t[23]=[(0,o.eW)(" Next "),(0,o.Lk)("i",{class:"bi bi-chevron-right"},null,-1)]),8,qt)])])):(0,o.Q3)("",!0)]))])}var Ht={setup(){const e=(0,O.KR)([]),t=(0,O.KR)(!0),a=(0,O.KR)(!1),s=(0,O.KR)(""),i=le(),r=(0,O.Kh)({}),l=(0,O.KR)(1),n=(0,O.KR)(12),c=()=>{window.dispatchEvent(new CustomEvent("cart-updated"))},d=(0,o.EW)((()=>{if(!s.value)return e.value;const t=s.value.toLowerCase();return e.value.filter((e=>e.name.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)))})),u=(0,o.EW)((()=>Math.ceil(d.value.length/n.value))),m=(0,o.EW)((()=>(l.value-1)*n.value)),p=(0,o.EW)((()=>{const e=m.value,t=e+n.value;return d.value.slice(e,t)})),g=(0,o.EW)((()=>{const e=[],t=Math.max(1,l.value-2),a=Math.min(u.value,l.value+2);for(let s=t;s<=a;s++)e.push(s);return e}));(0,o.wB)(s,(()=>{l.value=1}));const b=e=>{e>=1&&e<=u.value&&(l.value=e,document.querySelector(".product-grid")?.scrollIntoView({behavior:"smooth",block:"start"}))},h=e=>e?e.startsWith("http")?e:`http://127.0.0.1:8000${e.startsWith("/")?e:"/media/"+e}`:"",v=e=>parseFloat(e).toFixed(2),k=(e,t)=>e?e.length>t?e.substring(0,t)+"...":e:"",f=()=>{s.value=""},L=e=>7*e.id%3+3,y=e=>7*e.id%115+5,w=e=>e.id%4===0,C=e=>0===e.stock?"stock-count-out":e.stock<5?"stock-count-low":e.stock<20?"stock-count-medium":"stock-count-high",P=e=>{r[e.id]||(r[e.id]=1),r[e.id]<e.stock&&r[e.id]++},x=e=>{r[e.id]||(r[e.id]=1),r[e.id]>1&&r[e.id]--},S=async(s=!0)=>{s?t.value=!0:a.value=!0;try{(0,F.Lz)();const t=await $.get("products/");e.value=t.data||[],e.value.forEach((e=>{r[e.id]||(r[e.id]=1)})),0===e.value.length&&(console.warn("No products received from API"),i.warning("No products available at the moment."))}catch(o){console.error("Error fetching products:",o),i.error("Failed to load products. Please try refreshing the page.");try{const t=JSON.parse(localStorage.getItem("mockProducts")||"[]");t.length>0&&(e.value=t,i.info("Loaded products from cache."))}catch(l){console.error("Fallback loading failed:",l)}}finally{t.value=!1,a.value=!1}},E=async()=>{await S(!1),i.success("Products refreshed successfully!")},M=e=>{if(0!==e.stock)try{let t=[];const a=localStorage.getItem("cart");a&&(t=JSON.parse(a));const s=t.find((t=>t.product&&t.product.id===e.id)),o=r[e.id]||1;if(s){if(!(s.quantity+o<=e.stock))return void i.warning(`Cannot add ${o} more ${e.name}. Maximum stock reached.`);s.quantity+=o,i.success(`Added ${o} ${e.name} to your cart.`)}else t.push({product:{id:e.id,name:e.name,price:e.price,description:e.description,image:e.image,stock:e.stock},quantity:o}),i.success(`Added ${o} ${e.name} to your cart!`);localStorage.setItem("cart",JSON.stringify(t)),r[e.id]=1,window.dispatchEvent(new Event("storage")),c()}catch(t){console.error("Error adding to cart:",t),i.error("Failed to add product to cart.")}else i.error("Sorry, this product is out of stock.")};return(0,o.sV)((()=>{S()})),{products:e,filteredProducts:d,paginatedProducts:p,isLoading:t,isRefreshing:a,searchQuery:s,quantities:r,currentPage:l,productsPerPage:n,totalPages:u,startIndex:m,visiblePages:g,fullImageUrl:h,formatPrice:v,truncate:k,resetSearch:f,refreshProducts:E,addToCart:M,incrementQuantity:P,decrementQuantity:x,getProductRating:L,getReviewCount:y,isNewProduct:w,getStockCountBadgeClass:C,goToPage:b}}};const Bt=(0,de.A)(Ht,[["render",Xt],["__scopeId","data-v-8221468e"]]);var zt=Bt;const Jt={class:"container"},Ut={key:0,class:"empty-cart"},Qt={class:"empty-cart-content"},jt={key:1,class:"row"},Kt={class:"col-lg-8"},Vt={class:"cart-items card mb-4"},Zt={class:"card-header"},$t={class:"mb-0"},Yt={class:"card-body p-0"},Gt={class:"cart-item-image"},ea=["src","alt"],ta={key:1,class:"image-placeholder"},aa={class:"cart-item-details"},sa={class:"cart-item-name"},oa={class:"cart-item-description"},ia={class:"cart-item-price"},ra={key:0,class:"stock-warning"},la={class:"cart-item-quantity"},na={class:"quantity-selector"},ca=["onClick","disabled"],da=["onUpdate:modelValue","max","disabled","onChange"],ua=["onClick","disabled"],ma={class:"cart-item-total"},pa={class:"cart-item-actions"},ga=["onClick"],ba={class:"card-footer"},ha={class:"d-flex justify-content-between flex-wrap gap-2"},va={class:"col-lg-4"},ka={class:"cart-summary card"},fa={class:"card-body"},La={class:"summary-item"},ya={class:"summary-item"},wa={class:"summary-item"},Ca={class:"summary-total"},Pa={class:"promo-section mt-3"},xa=["disabled"],Sa={key:0,class:"spinner-border spinner-border-sm",role:"status"},Ea={key:1},Ma={key:0,class:"invalid-feedback"},Ia={key:1,class:"promo-success"},_a={class:"card-footer"},Aa=["disabled"],Da={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},Oa={key:1,class:"bi bi-credit-card me-2"},Ta={key:0,class:"checkout-warning mt-2"},Fa={class:"modal fade confirm-modal",ref:"confirmModal",tabindex:"-1","aria-labelledby":"confirmModalLabel","aria-hidden":"true"},Wa={class:"modal-dialog modal-dialog-centered modal-sm"},Na={class:"modal-content"},Ra={class:"modal-header"},qa={class:"modal-body"},Xa={class:"mb-0"},Ha={class:"modal-footer"};function Ba(e,t,a,r,l,n){const c=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",Jt,[t[28]||(t[28]=(0,o.Lk)("div",{class:"cart-header mb-4"},[(0,o.Lk)("h2",{class:"section-title"},[(0,o.Lk)("i",{class:"bi bi-cart me-2"}),(0,o.eW)("Shopping Cart ")])],-1)),r.cart&&0!==r.cart.length?((0,o.uX)(),(0,o.CE)("div",jt,[(0,o.Lk)("div",Kt,[(0,o.Lk)("div",Vt,[(0,o.Lk)("div",Zt,[(0,o.Lk)("h5",$t,"Cart Items ("+(0,i.v_)(r.cart.length)+")",1)]),(0,o.Lk)("div",Yt,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.cart,((e,a)=>((0,o.uX)(),(0,o.CE)("div",{class:"cart-item",key:a},[(0,o.Lk)("div",Gt,[e&&e.product&&e.product.image?((0,o.uX)(),(0,o.CE)("img",{key:0,src:r.fullImageUrl(e.product.image),alt:e.product?e.product.name:"Product",loading:"lazy"},null,8,ea)):((0,o.uX)(),(0,o.CE)("div",ta,t[11]||(t[11]=[(0,o.Lk)("i",{class:"bi bi-image"},null,-1)])))]),(0,o.Lk)("div",aa,[(0,o.Lk)("h5",sa,(0,i.v_)(e&&e.product?e.product.name:"Unknown Product"),1),(0,o.Lk)("p",oa,(0,i.v_)(e&&e.product?r.truncate(e.product.description,100):"No description available"),1),(0,o.Lk)("div",ia,"â‚±"+(0,i.v_)(r.formatPrice(e&&e.product?e.product.price:0)),1),e&&e.product&&0===e.product.stock?((0,o.uX)(),(0,o.CE)("div",ra,t[12]||(t[12]=[(0,o.Lk)("i",{class:"bi bi-exclamation-triangle-fill me-1"},null,-1),(0,o.eW)(" Out of stock ")]))):(0,o.Q3)("",!0)]),(0,o.Lk)("div",la,[(0,o.Lk)("div",na,[(0,o.Lk)("button",{class:"btn btn-sm btn-outline-secondary",onClick:e=>r.decrementQuantity(a),disabled:!e||e.quantity<=1||e.product&&0===e.product.stock,"aria-label":"Decrease quantity"},t[13]||(t[13]=[(0,o.Lk)("i",{class:"bi bi-dash"},null,-1)]),8,ca),(0,o.bo)((0,o.Lk)("input",{type:"number",class:"form-control form-control-sm","onUpdate:modelValue":t=>e.quantity=t,min:"1",max:e&&e.product?e.product.stock:1,disabled:e&&e.product&&0===e.product.stock,onChange:t=>r.validateQuantity(a,e&&e.product?e.product.stock:1),"aria-label":"Quantity"},null,40,da),[[s.Jo,e.quantity,void 0,{number:!0}]]),(0,o.Lk)("button",{class:"btn btn-sm btn-outline-secondary",onClick:t=>r.incrementQuantity(a,e&&e.product?e.product.stock:1),disabled:!e||!e.product||e.quantity>=e.product.stock||0===e.product.stock,"aria-label":"Increase quantity"},t[14]||(t[14]=[(0,o.Lk)("i",{class:"bi bi-plus"},null,-1)]),8,ua)])]),(0,o.Lk)("div",ma," â‚±"+(0,i.v_)(r.formatPrice(e&&e.product?e.product.price*e.quantity:0)),1),(0,o.Lk)("div",pa,[(0,o.Lk)("button",{class:"btn btn-sm btn-danger",onClick:e=>r.removeItem(a),"aria-label":"Remove item"},t[15]||(t[15]=[(0,o.Lk)("i",{class:"bi bi-trash"},null,-1)]),8,ga)])])))),128))]),(0,o.Lk)("div",ba,[(0,o.Lk)("div",ha,[(0,o.Lk)("button",{class:"btn btn-outline-danger",onClick:t[0]||(t[0]=(...e)=>r.confirmClearCart&&r.confirmClearCart(...e))},t[16]||(t[16]=[(0,o.Lk)("i",{class:"bi bi-trash me-2"},null,-1),(0,o.eW)("Clear Cart ")])),(0,o.bF)(c,{to:"/products",class:"btn btn-outline-primary"},{default:(0,o.k6)((()=>t[17]||(t[17]=[(0,o.Lk)("i",{class:"bi bi-shop me-2"},null,-1),(0,o.eW)("Continue Shopping ")]))),_:1})])])])]),(0,o.Lk)("div",va,[(0,o.Lk)("div",ka,[t[25]||(t[25]=(0,o.Lk)("div",{class:"card-header"},[(0,o.Lk)("h5",{class:"mb-0"},"Order Summary")],-1)),(0,o.Lk)("div",fa,[(0,o.Lk)("div",La,[t[18]||(t[18]=(0,o.Lk)("span",null,"Subtotal",-1)),(0,o.Lk)("span",null,"â‚±"+(0,i.v_)(r.formatPrice(r.calculateSubtotal())),1)]),(0,o.Lk)("div",ya,[t[19]||(t[19]=(0,o.Lk)("span",null,"Shipping",-1)),(0,o.Lk)("span",null,"â‚±"+(0,i.v_)(r.formatPrice(r.shippingCost)),1)]),(0,o.Lk)("div",wa,[t[20]||(t[20]=(0,o.Lk)("span",null,"Tax (12%)",-1)),(0,o.Lk)("span",null,"â‚±"+(0,i.v_)(r.formatPrice(r.calculateTax())),1)]),t[23]||(t[23]=(0,o.Lk)("div",{class:"summary-divider"},null,-1)),(0,o.Lk)("div",Ca,[t[21]||(t[21]=(0,o.Lk)("span",null,"Total",-1)),(0,o.Lk)("span",null,"â‚±"+(0,i.v_)(r.formatPrice(r.calculateTotal())),1)]),(0,o.Lk)("div",Pa,[(0,o.Lk)("div",{class:(0,i.C4)(["input-group",{"is-invalid":r.promoError}])},[(0,o.bo)((0,o.Lk)("input",{type:"text",class:(0,i.C4)(["form-control",{"is-invalid":r.promoError}]),placeholder:"Promo code","onUpdate:modelValue":t[1]||(t[1]=e=>r.promoCode=e),"aria-label":"Promo code"},null,2),[[s.Jo,r.promoCode]]),(0,o.Lk)("button",{class:"btn btn-outline-primary",type:"button",onClick:t[2]||(t[2]=(...e)=>r.applyPromoCode&&r.applyPromoCode(...e)),disabled:r.isApplyingPromo||!r.promoCode},[r.isApplyingPromo?((0,o.uX)(),(0,o.CE)("span",Sa)):((0,o.uX)(),(0,o.CE)("span",Ea,"Apply"))],8,xa)],2),r.promoError?((0,o.uX)(),(0,o.CE)("div",Ma,(0,i.v_)(r.promoError),1)):(0,o.Q3)("",!0),r.activePromo?((0,o.uX)(),(0,o.CE)("div",Ia,[t[22]||(t[22]=(0,o.Lk)("i",{class:"bi bi-check-circle-fill me-1"},null,-1)),(0,o.eW)(" "+(0,i.v_)(r.activePromo.code)+" applied: "+(0,i.v_)(r.activePromo.discount)+"% off ",1)])):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",_a,[(0,o.Lk)("button",{class:"btn btn-primary w-100",onClick:t[3]||(t[3]=(...e)=>r.proceedToCheckout&&r.proceedToCheckout(...e)),disabled:r.isCheckingOut||r.hasOutOfStockItems||0===r.cart.length},[r.isCheckingOut?((0,o.uX)(),(0,o.CE)("span",Da)):((0,o.uX)(),(0,o.CE)("i",Oa)),(0,o.eW)(" "+(0,i.v_)(r.isCheckingOut?"Processing...":"Proceed to Checkout"),1)],8,Aa),r.hasOutOfStockItems?((0,o.uX)(),(0,o.CE)("div",Ta,t[24]||(t[24]=[(0,o.Lk)("i",{class:"bi bi-exclamation-triangle-fill me-1"},null,-1),(0,o.eW)(" Please remove out of stock items before checkout ")]))):(0,o.Q3)("",!0)])])])])):((0,o.uX)(),(0,o.CE)("div",Ut,[(0,o.Lk)("div",Qt,[t[8]||(t[8]=(0,o.Lk)("i",{class:"bi bi-cart-x cart-icon"},null,-1)),t[9]||(t[9]=(0,o.Lk)("h3",null,"Your cart is empty",-1)),t[10]||(t[10]=(0,o.Lk)("p",null,"Add some products to your cart to continue shopping.",-1)),(0,o.bF)(c,{to:"/products",class:"btn btn-primary mt-3"},{default:(0,o.k6)((()=>t[7]||(t[7]=[(0,o.Lk)("i",{class:"bi bi-shop me-2"},null,-1),(0,o.eW)("Continue Shopping ")]))),_:1})])])),(0,o.Lk)("div",Fa,[(0,o.Lk)("div",Wa,[(0,o.Lk)("div",Na,[(0,o.Lk)("div",Ra,[t[26]||(t[26]=(0,o.Lk)("h5",{class:"modal-title",id:"confirmModalLabel"},"Confirm Action",-1)),(0,o.Lk)("button",{type:"button",class:"btn-close",onClick:t[4]||(t[4]=(...e)=>r.hideConfirmModal&&r.hideConfirmModal(...e)),"aria-label":"Close"})]),(0,o.Lk)("div",qa,[t[27]||(t[27]=(0,o.Lk)("i",{class:"bi bi-question-circle-fill text-warning mb-3",style:{"font-size":"2rem"}},null,-1)),(0,o.Lk)("p",Xa,(0,i.v_)(r.confirmMessage),1)]),(0,o.Lk)("div",Ha,[(0,o.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[5]||(t[5]=(...e)=>r.hideConfirmModal&&r.hideConfirmModal(...e))},"Cancel"),(0,o.Lk)("button",{type:"button",class:"btn btn-danger",onClick:t[6]||(t[6]=(...e)=>r.confirmAction&&r.confirmAction(...e))},"Confirm")])])])],512)])}var za={setup(){const e=(0,O.KR)([]),t=(0,O.KR)(50),a=(0,Y.rd)(),{success:s,warning:i,error:r,info:l}=ne(),n=(0,O.KR)([]),c=(0,O.KR)(!1),d=(0,O.KR)(""),u=(0,O.KR)(""),m=(0,O.KR)(!1),p=(0,O.KR)(null),g=(0,O.KR)(null),b=(0,O.KR)(null),h=(0,O.KR)(""),v=(0,O.KR)(null),k=(0,o.EW)((()=>e.value.some((e=>e&&e.product&&0===e.product.stock)))),f=()=>{window.dispatchEvent(new CustomEvent("cart-updated"))},L=e=>e?e.startsWith("http")?e:`http://127.0.0.1:8000${e.startsWith("/")?e:"/media/"+e}`:"",y=e=>parseFloat(e).toFixed(2),w=(e,t)=>e?e.length>t?e.substring(0,t)+"...":e:"",C=()=>{let t=e.value.reduce(((e,t)=>t&&t.product&&0!==t.product.stock?e+t.product.price*t.quantity:e),0);return p.value&&(t*=1-p.value.discount/100),t},P=()=>.12*C(),x=()=>C()+P()+t.value,S=(t,a)=>{try{if(t<0||t>=e.value.length)return;const s=e.value[t];if(!s||!s.product||0===s.product.stock)return;s.quantity<a&&(s.quantity++,D(),l("Quantity updated"))}catch(s){console.error("Error incrementing quantity:",s),r("Failed to update quantity")}},E=t=>{try{if(t<0||t>=e.value.length)return;const a=e.value[t];if(!a||0===a.product.stock)return;a.quantity>1&&(a.quantity--,D(),l("Quantity updated"))}catch(a){console.error("Error decrementing quantity:",a),r("Failed to update quantity")}},M=(t,a)=>{try{if(t<0||t>=e.value.length)return;const s=e.value[t];if(!s)return;if(s.product&&0===s.product.stock)return s.quantity=0,i(`${s.product.name} is out of stock`),void D();s.quantity<1?(s.quantity=1,D()):s.quantity>a&&(s.quantity=a,i(`Maximum stock available: ${a}`),D())}catch(s){console.error("Error validating quantity:",s),r("Failed to update quantity")}},I=t=>{h.value="Are you sure you want to remove this item from your cart?",v.value=()=>{try{if(t<0||t>=e.value.length)return;const a=e.value[t]?.product?.name||"Item";e.value.splice(t,1),D(),s(`Removed ${a} from cart`),B()}catch(a){console.error("Error removing item:",a),r("Failed to remove item")}},H()},_=()=>{try{e.value=[],D(),p.value=null,d.value="",u.value="",l("Cart cleared"),B()}catch(t){console.error("Error clearing cart:",t),r("Failed to clear cart")}},A=()=>{h.value="Are you sure you want to clear your cart? This will remove all items.",v.value=_,H()},D=()=>{try{localStorage.setItem("cart",JSON.stringify(e.value)),window.dispatchEvent(new Event("storage")),f()}catch(t){console.error("Error updating cart:",t),r("Failed to update cart")}},T=[{code:"WELCOME10",discount:10},{code:"SAVE20",discount:20},{code:"SPECIAL30",discount:30}],F=()=>{d.value?(m.value=!0,u.value="",setTimeout((()=>{const e=T.find((e=>e.code===d.value.toUpperCase()));e?(p.value=e,s(`Promo code ${e.code} applied successfully!`)):(u.value="Invalid promo code",r("Invalid promo code. Please try again.")),m.value=!1}),800)):u.value="Please enter a promo code"},W=async()=>{if(k.value)r("Please remove out of stock items before checkout");else if(N()){c.value=!0;try{for(const a of e.value){if(!a||!a.product||!a.product.id)return void r("Invalid item in cart. Please remove it and try again.");if(0===a.product.stock)return void r(`${a.product.name} is out of stock. Please remove it from your cart.`)}const t=await $.get("user/"),o=await $.post("orders/",{customer:t.data.id,complete:!0}),i=o.data.id;for(const a of e.value)0!==a.product.stock&&await $.post("order-items/",{order:i,product:a.product.id,quantity:a.quantity});e.value=[],D(),p.value=null,d.value="",s("Order placed successfully!"),setTimeout((()=>{a.push("/orders")}),1500)}catch(t){console.error("Error during checkout:",t),r("Failed to place order. Please try again.")}finally{c.value=!1}}},N=()=>{let t=!0;return e.value.forEach((e=>e&&e.product&&e.product.id?0===e.product.stock?(i(`${e.product.name} is out of stock. Please remove it from your cart.`),void(t=!1)):void(e.quantity>e.product.stock&&(i(`Quantity for ${e.product.name} exceeds available stock. Adjusting to maximum.`),e.quantity=e.product.stock,D())):(r("Invalid item in cart. Please remove it and try again."),void(t=!1)))),t},R=async()=>{try{const e=await $.get("products/");n.value=e.data,q()}catch(e){console.error("Error fetching products:",e)}},q=()=>{if(!e.value.length||!n.value.length)return;let t=!1;e.value.forEach((e=>{if(!e||!e.product||!e.product.id)return;const a=n.value.find((t=>t.id===e.product.id));if(a&&(e.product.name!==a.name||e.product.price!==a.price||e.product.image!==a.image||e.product.description!==a.description||e.product.stock!==a.stock)){const s=e.quantity;e.product={id:a.id,name:a.name,price:a.price,description:a.description,image:a.image,stock:a.stock},e.quantity=s,e.quantity>a.stock&&(e.quantity=a.stock>0?a.stock:0,i(`Quantity for ${a.name} adjusted to match available stock`)),t=!0}})),t&&(D(),l("Cart updated with latest product information"))},X=()=>{try{const t=localStorage.getItem("cart");if(t){const a=JSON.parse(t);e.value=a.filter((e=>e&&e.product&&e.product.id)),e.value.length!==a.length&&(D(),i("Some invalid items were removed from your cart"))}}catch(t){console.error("Error loading cart:",t),r("Failed to load cart"),e.value=[]}},H=()=>{b.value&&b.value.show()},B=()=>{b.value&&b.value.hide()},z=()=>{"function"===typeof v.value&&v.value()};let J;return(0,o.sV)((()=>{X(),R(),g.value&&(b.value=new pe.aF(g.value)),J=setInterval((()=>{R()}),6e4),f()})),(0,o.hi)((()=>{J&&clearInterval(J)})),(0,o.wB)(e,(()=>{N()}),{deep:!0}),{cart:e,shippingCost:t,fullImageUrl:L,formatPrice:y,truncate:w,calculateSubtotal:C,calculateTax:P,calculateTotal:x,incrementQuantity:S,decrementQuantity:E,validateQuantity:M,removeItem:I,clearCart:_,confirmClearCart:A,updateCart:D,proceedToCheckout:W,isCheckingOut:c,promoCode:d,promoError:u,isApplyingPromo:m,activePromo:p,applyPromoCode:F,confirmModal:g,confirmMessage:h,hideConfirmModal:B,confirmAction:z,hasOutOfStockItems:k}}};const Ja=(0,de.A)(za,[["render",Ba],["__scopeId","data-v-2026dce0"]]);var Ua=Ja;const Qa={class:"container"},ja={class:"order-header mb-4"},Ka={class:"controls-wrapper mt-3"},Va={class:"search-wrapper"},Za={class:"input-group"},$a={class:"sort-wrapper"},Ya={class:"input-group"},Ga={key:0,class:"text-center py-5"},es={key:1,class:"empty-orders"},ts={key:2,class:"empty-orders"},as={key:3},ss={key:0,class:"results-summary mb-3"},os={class:"card-header"},is={class:"d-flex justify-content-between align-items-center"},rs={class:"mb-0"},ls={class:"order-date"},ns={class:"card-body"},cs={class:"order-items"},ds={key:0,class:"order-item-image"},us=["src"],ms={key:1,class:"image-placeholder"},ps={class:"order-item-details"},gs={class:"order-item-name"},bs={key:0,class:"order-item-price"},hs={class:"order-item-quantity"},vs={key:1,class:"stock-warning"},ks={key:1,class:"order-item-total"},fs={class:"order-summary mt-3"},Ls={class:"order-total"},ys={class:"card-footer"},ws={class:"d-flex flex-wrap justify-content-between align-items-center gap-2"},Cs=["onClick","disabled"],Ps={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},xs={key:1,class:"bi bi-arrow-repeat me-2"},Ss={key:0,class:"reorder-warning mt-2"},Es={key:1,class:"pagination-wrapper"},Ms={"aria-label":"Order history pagination"},Is={class:"pagination justify-content-center"},_s=["disabled"],As=["disabled"],Ds=["onClick"],Os=["disabled"],Ts=["disabled"],Fs={class:"items-per-page"},Ws={class:"modal fade",ref:"confirmModal",tabindex:"-1","aria-labelledby":"confirmModalLabel","aria-hidden":"true"},Ns={class:"modal-dialog modal-dialog-centered"},Rs={class:"modal-content"},qs={class:"modal-header"},Xs={class:"modal-body"},Hs={class:"confirmation-content"},Bs={class:"confirmation-message"},zs={key:0,class:"order-preview mt-4"},Js={class:"preview-items"},Us={class:"preview-item-details"},Qs={class:"preview-item-name"},js={class:"preview-item-qty"},Ks={key:0,class:"unavailable-badge"},Vs={key:1,class:"partial-badge"},Zs={key:0,class:"preview-item-price"},$s={class:"preview-total"},Ys={class:"preview-total-row"},Gs={class:"preview-total-row grand-total"},eo={class:"validation-section mt-3"},to={key:0,class:"validation-message warning"},ao={class:"validation-desc"},so={key:1,class:"validation-message info"},oo={key:2,class:"validation-message error"},io={class:"modal-footer"},ro=["disabled"],lo={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},no={key:1,class:"bi bi-check-circle me-2"};function co(e,t,a,r,l,n){const c=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",Qa,[(0,o.Lk)("div",ja,[t[17]||(t[17]=(0,o.Lk)("h2",{class:"section-title"},[(0,o.Lk)("i",{class:"bi bi-clock-history me-2"}),(0,o.eW)("My Orders ")],-1)),(0,o.Lk)("div",Ka,[(0,o.Lk)("div",Va,[(0,o.Lk)("div",Za,[t[14]||(t[14]=(0,o.Lk)("span",{class:"input-group-text"},[(0,o.Lk)("i",{class:"bi bi-search"})],-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>r.searchTerm=e),placeholder:"Search orders or products..."},null,512),[[s.Jo,r.searchTerm]]),r.searchTerm?((0,o.uX)(),(0,o.CE)("button",{key:0,class:"btn btn-outline-secondary",type:"button",onClick:t[1]||(t[1]=e=>r.searchTerm="")},t[13]||(t[13]=[(0,o.Lk)("i",{class:"bi bi-x"},null,-1)]))):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",$a,[(0,o.Lk)("div",Ya,[t[16]||(t[16]=(0,o.Lk)("label",{class:"input-group-text",for:"sortSelect"},[(0,o.Lk)("i",{class:"bi bi-sort-down"})],-1)),(0,o.bo)((0,o.Lk)("select",{class:"form-select",id:"sortSelect","onUpdate:modelValue":t[2]||(t[2]=e=>r.sortOption=e)},t[15]||(t[15]=[(0,o.Lk)("option",{value:"newest"},"Newest First",-1),(0,o.Lk)("option",{value:"oldest"},"Oldest First",-1),(0,o.Lk)("option",{value:"highest"},"Highest Amount",-1),(0,o.Lk)("option",{value:"lowest"},"Lowest Amount",-1)]),512),[[s.u1,r.sortOption]])])])])]),r.isLoading?((0,o.uX)(),(0,o.CE)("div",Ga,t[18]||(t[18]=[(0,o.Fv)('<div class="spinner" data-v-12a93334><div class="bounce1" data-v-12a93334></div><div class="bounce2" data-v-12a93334></div><div class="bounce3" data-v-12a93334></div></div><p class="mt-3" data-v-12a93334>Loading your orders...</p>',2)]))):0===r.orders.length?((0,o.uX)(),(0,o.CE)("div",es,[t[20]||(t[20]=(0,o.Lk)("i",{class:"bi bi-bag-x"},null,-1)),t[21]||(t[21]=(0,o.Lk)("h3",null,"No orders found",-1)),t[22]||(t[22]=(0,o.Lk)("p",null,"You haven't placed any orders yet.",-1)),(0,o.bF)(c,{to:"/products",class:"btn btn-primary mt-3"},{default:(0,o.k6)((()=>t[19]||(t[19]=[(0,o.Lk)("i",{class:"bi bi-shop me-2"},null,-1),(0,o.eW)("Start Shopping ")]))),_:1})])):0===r.paginatedOrders.length?((0,o.uX)(),(0,o.CE)("div",ts,[t[24]||(t[24]=(0,o.Lk)("i",{class:"bi bi-search"},null,-1)),t[25]||(t[25]=(0,o.Lk)("h3",null,"No matching orders",-1)),t[26]||(t[26]=(0,o.Lk)("p",null,"No orders match your search criteria.",-1)),(0,o.Lk)("button",{class:"btn btn-primary mt-3",onClick:t[3]||(t[3]=e=>r.searchTerm="")},t[23]||(t[23]=[(0,o.Lk)("i",{class:"bi bi-arrow-counterclockwise me-2"},null,-1),(0,o.eW)("Clear Search ")]))])):((0,o.uX)(),(0,o.CE)("div",as,[r.searchTerm?((0,o.uX)(),(0,o.CE)("div",ss,[(0,o.Lk)("span",null,[(0,o.Lk)("strong",null,(0,i.v_)(r.filteredOrders.length),1),(0,o.eW)(" "+(0,i.v_)(1===r.filteredOrders.length?"result":"results")+" found ",1),(0,o.Lk)("button",{class:"btn btn-sm btn-link p-0 ms-2",onClick:t[4]||(t[4]=e=>r.searchTerm="")},t[27]||(t[27]=[(0,o.Lk)("i",{class:"bi bi-x-circle"},null,-1),(0,o.eW)(" Clear ")]))])])):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.paginatedOrders,(e=>((0,o.uX)(),(0,o.CE)("div",{class:"order-card card mb-4",key:e.id},[(0,o.Lk)("div",os,[(0,o.Lk)("div",is,[(0,o.Lk)("h5",rs,[t[28]||(t[28]=(0,o.Lk)("i",{class:"bi bi-bag-check me-2"},null,-1)),(0,o.eW)("Order #"+(0,i.v_)(e.id),1)]),(0,o.Lk)("span",ls,(0,i.v_)(r.formatDate(e.date_ordered)),1)])]),(0,o.Lk)("div",ns,[(0,o.Lk)("div",cs,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.items,(e=>((0,o.uX)(),(0,o.CE)("div",{class:"order-item",key:e.id},[r.getProductDetails(e.product)?((0,o.uX)(),(0,o.CE)("div",ds,[r.getProductDetails(e.product).image?((0,o.uX)(),(0,o.CE)("img",{key:0,src:r.fullImageUrl(r.getProductDetails(e.product).image),alt:"Product"},null,8,us)):((0,o.uX)(),(0,o.CE)("div",ms,t[29]||(t[29]=[(0,o.Lk)("i",{class:"bi bi-image"},null,-1)])))])):(0,o.Q3)("",!0),(0,o.Lk)("div",ps,[(0,o.Lk)("h6",gs,(0,i.v_)(r.getProductDetails(e.product)?r.getProductDetails(e.product).name:`Product #${e.product}`),1),r.getProductDetails(e.product)?((0,o.uX)(),(0,o.CE)("p",bs," â‚±"+(0,i.v_)(r.getProductDetails(e.product).price)+" Ã— "+(0,i.v_)(e.quantity),1)):(0,o.Q3)("",!0),(0,o.Lk)("p",hs," Quantity: "+(0,i.v_)(e.quantity),1),r.getProductDetails(e.product)&&0===r.getProductDetails(e.product).stock?((0,o.uX)(),(0,o.CE)("div",vs,t[30]||(t[30]=[(0,o.Lk)("i",{class:"bi bi-exclamation-triangle-fill me-1"},null,-1),(0,o.eW)(" Currently out of stock ")]))):(0,o.Q3)("",!0)]),r.getProductDetails(e.product)?((0,o.uX)(),(0,o.CE)("div",ks," â‚±"+(0,i.v_)((r.getProductDetails(e.product).price*e.quantity).toFixed(2)),1)):(0,o.Q3)("",!0)])))),128))]),(0,o.Lk)("div",fs,[(0,o.Lk)("div",Ls,[t[31]||(t[31]=(0,o.Lk)("span",null,"Total:",-1)),(0,o.Lk)("span",null,"â‚±"+(0,i.v_)(r.calculateOrderTotal(e).toFixed(2)),1)])])]),(0,o.Lk)("div",ys,[(0,o.Lk)("div",ws,[t[32]||(t[32]=(0,o.Lk)("span",{class:"order-status d-flex align-items-center"},[(0,o.Lk)("i",{class:"bi bi-check-circle-fill text-success me-1"}),(0,o.eW)(" Completed ")],-1)),(0,o.Lk)("button",{class:"btn btn-primary btn-sm",onClick:t=>r.reorderItems(e),disabled:r.isReordering||!r.hasAvailableItems(e)},[r.isReordering?((0,o.uX)(),(0,o.CE)("span",Ps)):((0,o.uX)(),(0,o.CE)("i",xs)),(0,o.eW)(" "+(0,i.v_)(r.isReordering?"Processing...":"Reorder"),1)],8,Cs)]),r.hasAvailableItems(e)?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.CE)("div",Ss,t[33]||(t[33]=[(0,o.Lk)("i",{class:"bi bi-exclamation-triangle-fill me-1"},null,-1),(0,o.eW)(" Cannot reorder - all items are out of stock ")])))])])))),128)),r.totalPages>1?((0,o.uX)(),(0,o.CE)("div",Es,[(0,o.Lk)("nav",Ms,[(0,o.Lk)("ul",Is,[(0,o.Lk)("li",{class:(0,i.C4)(["page-item",{disabled:1===r.currentPage}])},[(0,o.Lk)("button",{class:"page-link",onClick:t[5]||(t[5]=e=>r.currentPage=1),disabled:1===r.currentPage},t[34]||(t[34]=[(0,o.Lk)("i",{class:"bi bi-chevron-double-left"},null,-1)]),8,_s)],2),(0,o.Lk)("li",{class:(0,i.C4)(["page-item",{disabled:1===r.currentPage}])},[(0,o.Lk)("button",{class:"page-link",onClick:t[6]||(t[6]=e=>r.currentPage--),disabled:1===r.currentPage},t[35]||(t[35]=[(0,o.Lk)("i",{class:"bi bi-chevron-left"},null,-1)]),8,As)],2),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.displayedPages,(e=>((0,o.uX)(),(0,o.CE)("li",{key:e,class:(0,i.C4)(["page-item",{active:r.currentPage===e}])},[(0,o.Lk)("button",{class:"page-link",onClick:t=>r.currentPage=e},(0,i.v_)(e),9,Ds)],2)))),128)),(0,o.Lk)("li",{class:(0,i.C4)(["page-item",{disabled:r.currentPage===r.totalPages}])},[(0,o.Lk)("button",{class:"page-link",onClick:t[7]||(t[7]=e=>r.currentPage++),disabled:r.currentPage===r.totalPages},t[36]||(t[36]=[(0,o.Lk)("i",{class:"bi bi-chevron-right"},null,-1)]),8,Os)],2),(0,o.Lk)("li",{class:(0,i.C4)(["page-item",{disabled:r.currentPage===r.totalPages}])},[(0,o.Lk)("button",{class:"page-link",onClick:t[8]||(t[8]=e=>r.currentPage=r.totalPages),disabled:r.currentPage===r.totalPages},t[37]||(t[37]=[(0,o.Lk)("i",{class:"bi bi-chevron-double-right"},null,-1)]),8,Ts)],2)])]),(0,o.Lk)("div",Fs,[t[39]||(t[39]=(0,o.Lk)("span",null,"Items per page:",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>r.itemsPerPage=e),class:"form-select form-select-sm"},t[38]||(t[38]=[(0,o.Lk)("option",{value:5},"5",-1),(0,o.Lk)("option",{value:10},"10",-1),(0,o.Lk)("option",{value:20},"20",-1)]),512),[[s.u1,r.itemsPerPage]])])])):(0,o.Q3)("",!0)])),(0,o.Lk)("div",Ws,[(0,o.Lk)("div",Ns,[(0,o.Lk)("div",Rs,[(0,o.Lk)("div",qs,[t[40]||(t[40]=(0,o.Lk)("h5",{class:"modal-title",id:"confirmModalLabel"},[(0,o.Lk)("i",{class:"bi bi-cart-check me-2"}),(0,o.eW)("Confirm ")],-1)),(0,o.Lk)("button",{type:"button",class:"btn-close",onClick:t[10]||(t[10]=(...e)=>r.hideConfirmModal&&r.hideConfirmModal(...e)),"aria-label":"Close"})]),(0,o.Lk)("div",Xs,[(0,o.Lk)("div",Hs,[(0,o.Lk)("p",Bs,(0,i.v_)(r.confirmMessage),1),r.orderToReorder?((0,o.uX)(),(0,o.CE)("div",zs,[t[49]||(t[49]=(0,o.Lk)("h6",{class:"preview-heading"},[(0,o.Lk)("i",{class:"bi bi-receipt me-2"}),(0,o.eW)("Order Summary ")],-1)),(0,o.Lk)("div",Js,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.orderToReorder.items,(e=>((0,o.uX)(),(0,o.CE)("div",{class:(0,i.C4)(["preview-item",{unavailable:r.isItemUnavailable(e)}]),key:e.id},[(0,o.Lk)("div",Us,[(0,o.Lk)("span",Qs,(0,i.v_)(r.getProductDetails(e.product)?r.getProductDetails(e.product).name:`Product #${e.product}`),1),(0,o.Lk)("span",js,[(0,o.eW)(" Ã— "+(0,i.v_)(e.quantity)+" ",1),r.isItemUnavailable(e)?((0,o.uX)(),(0,o.CE)("span",Ks,t[41]||(t[41]=[(0,o.Lk)("i",{class:"bi bi-x-circle-fill"},null,-1),(0,o.eW)(" Out of stock ")]))):r.isItemPartiallyAvailable(e)?((0,o.uX)(),(0,o.CE)("span",Vs,[t[42]||(t[42]=(0,o.Lk)("i",{class:"bi bi-exclamation-circle-fill"},null,-1)),(0,o.eW)(" Limited stock ("+(0,i.v_)(r.getProductDetails(e.product).stock)+") ",1)])):(0,o.Q3)("",!0)])]),r.getProductDetails(e.product)?((0,o.uX)(),(0,o.CE)("span",Zs," â‚±"+(0,i.v_)((r.getProductDetails(e.product).price*(r.isItemUnavailable(e)?0:Math.min(e.quantity,r.getProductDetails(e.product).stock))).toFixed(2)),1)):(0,o.Q3)("",!0)],2)))),128))]),(0,o.Lk)("div",$s,[(0,o.Lk)("div",Ys,[t[43]||(t[43]=(0,o.Lk)("span",null,"Subtotal:",-1)),(0,o.Lk)("span",null,"â‚±"+(0,i.v_)(r.calculateAvailableTotal(r.orderToReorder).subtotal.toFixed(2)),1)]),(0,o.Lk)("div",Gs,[t[44]||(t[44]=(0,o.Lk)("span",null,"Total:",-1)),(0,o.Lk)("span",null,"â‚±"+(0,i.v_)(r.calculateAvailableTotal(r.orderToReorder).total.toFixed(2)),1)])]),(0,o.Lk)("div",eo,[r.unavailableItems.length>0?((0,o.uX)(),(0,o.CE)("div",to,[t[46]||(t[46]=(0,o.Lk)("i",{class:"bi bi-exclamation-triangle-fill me-2"},null,-1)),(0,o.Lk)("div",null,[t[45]||(t[45]=(0,o.Lk)("p",{class:"validation-title"},"Some items are unavailable",-1)),(0,o.Lk)("p",ao,(0,i.v_)(r.unavailableItems.length)+" item(s) will be skipped due to stock issues.",1)])])):(0,o.Q3)("",!0),r.partiallyAvailableItems.length>0?((0,o.uX)(),(0,o.CE)("div",so,t[47]||(t[47]=[(0,o.Lk)("i",{class:"bi bi-info-circle-fill me-2"},null,-1),(0,o.Lk)("div",null,[(0,o.Lk)("p",{class:"validation-title"},"Limited stock available"),(0,o.Lk)("p",{class:"validation-desc"},"Some items have limited stock and quantities will be adjusted.")],-1)]))):(0,o.Q3)("",!0),0===r.calculateAvailableTotal(r.orderToReorder).total?((0,o.uX)(),(0,o.CE)("div",oo,t[48]||(t[48]=[(0,o.Lk)("i",{class:"bi bi-x-octagon-fill me-2"},null,-1),(0,o.Lk)("div",null,[(0,o.Lk)("p",{class:"validation-title"},"Cannot proceed"),(0,o.Lk)("p",{class:"validation-desc"},"All items in this order are out of stock.")],-1)]))):(0,o.Q3)("",!0)])])):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",io,[(0,o.Lk)("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[11]||(t[11]=(...e)=>r.hideConfirmModal&&r.hideConfirmModal(...e))},t[50]||(t[50]=[(0,o.Lk)("i",{class:"bi bi-x me-1"},null,-1),(0,o.eW)("Cancel ")])),(0,o.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[12]||(t[12]=(...e)=>r.confirmReorder&&r.confirmReorder(...e)),disabled:r.isReordering||r.orderToReorder&&0===r.calculateAvailableTotal(r.orderToReorder).total},[r.isReordering?((0,o.uX)(),(0,o.CE)("span",lo)):((0,o.uX)(),(0,o.CE)("i",no)),(0,o.eW)(" "+(0,i.v_)(r.isReordering?"Processing...":"Confirm"),1)],8,ro)])])])],512)])}var uo={setup(){const e=(0,O.KR)([]),t=(0,O.KR)([]),a=(0,O.KR)(!0),s=(0,O.KR)(!1),i=(0,O.KR)(null),r=(0,O.KR)(null),l=(0,O.KR)(""),n=(0,O.KR)(null),c=(0,O.KR)([]),d=(0,O.KR)([]),u=le(),m=(0,O.KR)(""),p=(0,O.KR)("newest"),g=(0,O.KR)(1),b=(0,O.KR)(5);(0,o.wB)([m,p,b],(()=>{g.value=1}));const h=(0,o.EW)((()=>{if(!m.value.trim())return e.value;const t=m.value.toLowerCase().trim();return e.value.filter((e=>!!e.id.toString().includes(t)||!!(e.items&&e.items.length>0)&&e.items.some((e=>{const a=C(e.product);return!(!a||!a.name)&&a.name.toLowerCase().includes(t)}))))})),v=(0,o.EW)((()=>{const e=[...h.value];switch(p.value){case"newest":return e.sort(((e,t)=>new Date(t.date_ordered)-new Date(e.date_ordered)));case"oldest":return e.sort(((e,t)=>new Date(e.date_ordered)-new Date(t.date_ordered)));case"highest":return e.sort(((e,t)=>P(t)-P(e)));case"lowest":return e.sort(((e,t)=>P(e)-P(t)));default:return e}})),k=(0,o.EW)((()=>Math.ceil(v.value.length/b.value))),f=(0,o.EW)((()=>{const e=[],t=5;if(k.value<=t)for(let a=1;a<=k.value;a++)e.push(a);else{e.push(1);let t=Math.max(2,g.value-1),a=Math.min(k.value-1,g.value+1);g.value<=3&&(a=4),g.value>=k.value-2&&(t=k.value-3),t>2&&e.push("...");for(let s=t;s<=a;s++)e.push(s);a<k.value-1&&e.push("..."),e.push(k.value)}return e})),L=(0,o.EW)((()=>{const e=(g.value-1)*b.value,t=e+b.value;return v.value.slice(e,t)})),y=e=>{const t={year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(e).toLocaleDateString(void 0,t)},w=e=>e?e.startsWith("http")?e:`http://127.0.0.1:8000${e.startsWith("/")?e:"/media/"+e}`:"",C=e=>t.value.find((t=>t.id===e)),P=e=>{let t=0;return e.items&&e.items.forEach((e=>{const a=C(e.product);a&&(t+=a.price*e.quantity)})),t},x=e=>!(!e.items||0===e.items.length)&&e.items.some((e=>{const t=C(e.product);return t&&t.stock>0})),S=e=>{if(!e.items)return[];const t=[];return e.items.forEach((e=>{const a=C(e.product);a&&0===a.stock&&t.push({id:a.id,name:a.name})})),t},E=e=>{if(!e.items)return[];const t=[];return e.items.forEach((e=>{const a=C(e.product);a&&a.stock>0&&a.stock<e.quantity&&t.push({id:a.id,name:a.name,requestedQty:e.quantity,availableQty:a.stock})})),t},M=e=>{const t=C(e.product);return!t||0===t.stock},I=e=>{const t=C(e.product);return t&&t.stock>0&&t.stock<e.quantity},_=e=>{let t=0;return e&&e.items&&e.items.forEach((e=>{const a=C(e.product);if(a&&a.stock>0){const s=Math.min(e.quantity,a.stock);t+=a.price*s}})),{subtotal:t,total:t}},A=e=>{x(e)?(n.value=e,c.value=S(e),d.value=E(e),c.value.length>0?l.value="Some items in this order are out of stock and will be skipped. Do you want to continue with the reorder?":l.value="Are you sure you want to reorder these items?",W()):u.error("Cannot reorder - all items are out of stock")},D=async()=>{if(n.value){s.value=!0;try{const e=await $.get("user/"),t=await $.post("orders/",{customer:e.data.id,complete:!0}),a=t.data.id;let s=0;for(const o of n.value.items){const e=C(o.product);if(!e||e.stock<1)continue;const t=Math.min(o.quantity,e.stock);await $.post("order-items/",{order:a,product:o.product,quantity:t}),s++}s>0?(u.success("Order placed successfully!"),setTimeout((()=>{T()}),1e3)):u.error("No items could be added to your order."),N()}catch(e){console.error(e),u.error("Failed to reorder. Please try again.")}finally{s.value=!1}}},T=async()=>{try{const t=await $.get("orders/");e.value=t.data}catch(t){u.error("Failed to load orders."),console.error(t)}},F=async()=>{try{const e=await $.get("products/");t.value=e.data}catch(e){console.error("Failed to load products:",e)}finally{a.value=!1}},W=()=>{r.value?r.value.show():i.value&&(r.value=new pe.aF(i.value),r.value.show())},N=()=>{r.value&&r.value.hide()},R=async()=>{try{await T(),await F()}catch(e){console.error(e),a.value=!1}};return R(),{orders:e,isLoading:a,isReordering:s,confirmModal:i,confirmMessage:l,orderToReorder:n,unavailableItems:c,partiallyAvailableItems:d,searchTerm:m,sortOption:p,currentPage:g,itemsPerPage:b,filteredOrders:h,sortedOrders:v,paginatedOrders:L,totalPages:k,displayedPages:f,formatDate:y,fullImageUrl:w,getProductDetails:C,calculateOrderTotal:P,hasAvailableItems:x,isItemUnavailable:M,isItemPartiallyAvailable:I,calculateAvailableTotal:_,reorderItems:A,confirmReorder:D,hideConfirmModal:N}}};const mo=(0,de.A)(uo,[["render",co],["__scopeId","data-v-12a93334"]]);var po=mo;const go={class:"container"},bo={class:"row g-3 mb-3 mb-md-4"},ho={class:"col-12 col-md-4"},vo={class:"stat-card card h-100"},ko={class:"card-body"},fo={class:"stat-info"},Lo={class:"col-12 col-md-4"},yo={class:"stat-card card h-100"},wo={class:"card-body"},Co={class:"stat-info"},Po={class:"col-12 col-md-4"},xo={class:"stat-card card h-100"},So={class:"card-body"},Eo={class:"stat-info"},Mo={class:"card mb-3"},Io={class:"card-body"},_o={class:"row g-2"},Ao={class:"col-12 col-md-4"},Do={class:"form-group"},Oo={class:"input-group"},To={class:"col-12 col-md-4"},Fo={class:"form-group"},Wo={class:"d-flex gap-2"},No={class:"input-group"},Ro={class:"input-group"},qo={class:"col-12 col-md-4"},Xo={class:"form-group"},Ho={class:"d-flex justify-content-end mt-3"},Bo={class:"card mb-3 mb-md-4"},zo={class:"card-header d-flex flex-column flex-md-row justify-content-between align-items-md-center"},Jo={class:"mb-2 mb-md-0"},Uo={class:"mobile-pagination-select d-md-none"},Qo={class:"per-page-selector"},jo={class:"d-none d-md-flex align-items-center"},Ko={class:"me-2 text-muted"},Vo={class:"per-page-selector ms-2"},Zo={key:0,class:"loading-container py-5"},$o={key:1,class:"d-md-none"},Yo={key:0,class:"text-center py-4"},Go={key:1,class:"mobile-orders-list"},ei=["onClick"],ti={class:"d-flex justify-content-between align-items-center mb-2"},ai={class:"order-id"},si={class:"text-muted small mb-2"},oi={class:"mb-2"},ii={class:"d-flex justify-content-between"},ri={key:0,class:"mobile-pagination"},li={class:"pagination-info"},ni={class:"pagination-controls"},ci=["disabled"],di=["disabled"],ui={key:2,class:"table-responsive d-none d-md-block"},mi={class:"table table-hover mb-0"},pi={key:0},gi={class:"order-id"},bi=["onClick"],hi={key:3,class:"card-footer d-none d-md-flex justify-content-between align-items-center"},vi={class:"pagination-info"},ki={"aria-label":"Orders pagination"},fi={class:"pagination pagination-sm mb-0"},Li=["disabled"],yi={key:0,class:"page-link",disabled:""},wi=["onClick"],Ci=["disabled"],Pi={class:"modal fade",ref:"orderModal",id:"orderModal",tabindex:"-1"},xi={class:"modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable"},Si={class:"modal-content"},Ei={class:"modal-header"},Mi={class:"modal-title"},Ii={key:0,class:"modal-body"},_i={class:"order-info mb-4"},Ai={class:"row"},Di={class:"col-md-6 mb-3 mb-md-0"},Oi={class:"col-md-6"},Ti={class:"table-responsive"},Fi={class:"table table-bordered mb-0"},Wi={class:"d-flex align-items-center"},Ni={key:0,class:"order-item-image me-2"},Ri=["src"],qi={key:1,class:"image-placeholder"},Xi={class:"text-center"},Hi={class:"text-center"},Bi={class:"text-center"},zi={class:"text-center"},Ji={class:"modal-footer"};function Ui(e,t,a,r,l,n){return(0,o.uX)(),(0,o.CE)("div",go,[t[53]||(t[53]=(0,o.Lk)("div",{class:"admin-header mb-3 mb-md-4"},[(0,o.Lk)("h2",{class:"section-title"},[(0,o.Lk)("i",{class:"bi bi-clipboard-check me-2"}),(0,o.eW)("Checkout Monitor ")])],-1)),(0,o.Lk)("div",bo,[(0,o.Lk)("div",ho,[(0,o.Lk)("div",vo,[(0,o.Lk)("div",ko,[t[15]||(t[15]=(0,o.Lk)("div",{class:"stat-icon"},[(0,o.Lk)("i",{class:"bi bi-cart-check"})],-1)),(0,o.Lk)("div",fo,[(0,o.Lk)("h3",null,(0,i.v_)(l.orders.length),1),t[14]||(t[14]=(0,o.Lk)("p",null,"Total Orders",-1))])])])]),(0,o.Lk)("div",Lo,[(0,o.Lk)("div",yo,[(0,o.Lk)("div",wo,[t[17]||(t[17]=(0,o.Lk)("div",{class:"stat-icon"},[(0,o.Lk)("span",null,"â‚±")],-1)),(0,o.Lk)("div",Co,[(0,o.Lk)("h3",null,"â‚±"+(0,i.v_)(n.calculateTotalSales()),1),t[16]||(t[16]=(0,o.Lk)("p",null,"Total Sales",-1))])])])]),(0,o.Lk)("div",Po,[(0,o.Lk)("div",xo,[(0,o.Lk)("div",So,[t[19]||(t[19]=(0,o.Lk)("div",{class:"stat-icon"},[(0,o.Lk)("i",{class:"bi bi-people"})],-1)),(0,o.Lk)("div",Eo,[(0,o.Lk)("h3",null,(0,i.v_)(n.uniqueCustomers.length),1),t[18]||(t[18]=(0,o.Lk)("p",null,"Unique Customers",-1))])])])])]),(0,o.Lk)("div",Mo,[(0,o.Lk)("div",Io,[t[28]||(t[28]=(0,o.Lk)("h5",{class:"filter-title mb-3"},[(0,o.Lk)("i",{class:"bi bi-funnel me-2"}),(0,o.eW)("Search & Filter")],-1)),(0,o.Lk)("div",_o,[(0,o.Lk)("div",Ao,[(0,o.Lk)("div",Do,[t[21]||(t[21]=(0,o.Lk)("label",{class:"form-label"},"Search",-1)),(0,o.Lk)("div",Oo,[t[20]||(t[20]=(0,o.Lk)("span",{class:"input-group-text"},[(0,o.Lk)("i",{class:"bi bi-search"})],-1)),(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.searchQuery=e),class:"form-control",placeholder:"Order ID..."},null,512),[[s.Jo,l.searchQuery]])])])]),(0,o.Lk)("div",To,[(0,o.Lk)("div",Fo,[t[24]||(t[24]=(0,o.Lk)("label",{class:"form-label"},"Date Range",-1)),(0,o.Lk)("div",Wo,[(0,o.Lk)("div",No,[t[22]||(t[22]=(0,o.Lk)("span",{class:"input-group-text"},[(0,o.Lk)("i",{class:"bi bi-calendar3"})],-1)),(0,o.bo)((0,o.Lk)("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=e=>l.dateFrom=e),class:"form-control",placeholder:"From"},null,512),[[s.Jo,l.dateFrom]])]),(0,o.Lk)("div",Ro,[t[23]||(t[23]=(0,o.Lk)("span",{class:"input-group-text"},[(0,o.Lk)("i",{class:"bi bi-calendar3"})],-1)),(0,o.bo)((0,o.Lk)("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=e=>l.dateTo=e),class:"form-control",placeholder:"To"},null,512),[[s.Jo,l.dateTo]])])])])]),(0,o.Lk)("div",qo,[(0,o.Lk)("div",Xo,[t[26]||(t[26]=(0,o.Lk)("label",{class:"form-label"},"Sort By",-1)),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.sortBy=e),class:"form-select"},t[25]||(t[25]=[(0,o.Lk)("option",{value:"date_desc"},"Newest First",-1),(0,o.Lk)("option",{value:"date_asc"},"Oldest First",-1),(0,o.Lk)("option",{value:"amount_desc"},"Highest Amount",-1),(0,o.Lk)("option",{value:"amount_asc"},"Lowest Amount",-1)]),512),[[s.u1,l.sortBy]])])])]),(0,o.Lk)("div",Ho,[(0,o.Lk)("button",{class:"btn btn-outline-secondary me-2",onClick:t[4]||(t[4]=(...e)=>n.resetFilters&&n.resetFilters(...e))},t[27]||(t[27]=[(0,o.Lk)("i",{class:"bi bi-x-circle me-1"},null,-1),(0,o.eW)("Reset ")]))])])]),(0,o.Lk)("div",Bo,[(0,o.Lk)("div",zo,[(0,o.Lk)("h5",Jo,[t[30]||(t[30]=(0,o.Lk)("i",{class:"bi bi-list-check me-2"},null,-1)),t[31]||(t[31]=(0,o.eW)("Recent Orders ")),(0,o.Lk)("div",Uo,[(0,o.Lk)("div",Qo,[(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.perPage=e),class:"form-select form-select-sm","aria-label":"Items per page"},t[29]||(t[29]=[(0,o.Lk)("option",{value:5},"5",-1),(0,o.Lk)("option",{value:10},"10",-1),(0,o.Lk)("option",{value:25},"25",-1),(0,o.Lk)("option",{value:50},"50",-1)]),512),[[s.u1,l.perPage]])])])]),(0,o.Lk)("div",jo,[(0,o.Lk)("span",Ko,(0,i.v_)(n.filteredOrders.length)+" orders found",1),(0,o.Lk)("div",Vo,[(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.perPage=e),class:"form-select form-select-sm","aria-label":"Items per page"},t[32]||(t[32]=[(0,o.Lk)("option",{value:5},"5",-1),(0,o.Lk)("option",{value:10},"10",-1),(0,o.Lk)("option",{value:25},"25",-1),(0,o.Lk)("option",{value:50},"50",-1)]),512),[[s.u1,l.perPage]])])])]),l.isLoading?((0,o.uX)(),(0,o.CE)("div",Zo,t[33]||(t[33]=[(0,o.Lk)("div",{class:"spinner"},[(0,o.Lk)("div",{class:"bounce1"}),(0,o.Lk)("div",{class:"bounce2"}),(0,o.Lk)("div",{class:"bounce3"})],-1),(0,o.Lk)("p",null,"Loading orders...",-1)]))):n.isMobile?((0,o.uX)(),(0,o.CE)("div",$o,[0===n.paginatedOrders.length?((0,o.uX)(),(0,o.CE)("div",Yo,t[34]||(t[34]=[(0,o.Lk)("i",{class:"bi bi-search text-muted",style:{"font-size":"2rem"}},null,-1),(0,o.Lk)("p",{class:"mt-2 text-muted"},"No orders found",-1)]))):((0,o.uX)(),(0,o.CE)("div",Go,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.paginatedOrders,(e=>((0,o.uX)(),(0,o.CE)("div",{key:`mobile-${e.id}`,class:"mobile-order-item",onClick:t=>n.viewOrderDetails(e)},[(0,o.Lk)("div",ti,[(0,o.Lk)("strong",ai,"#"+(0,i.v_)(e.id),1),t[35]||(t[35]=(0,o.Lk)("span",{class:"badge bg-success"},"Completed",-1))]),(0,o.Lk)("div",si,(0,i.v_)(n.formatDate(e.date_ordered)),1),(0,o.Lk)("div",oi,(0,i.v_)(e.customer),1),(0,o.Lk)("div",ii,[(0,o.Lk)("span",null,(0,i.v_)(e.items?e.items.length:0)+" items",1),(0,o.Lk)("strong",null,"â‚±"+(0,i.v_)(n.calculateOrderTotal(e).toFixed(2)),1)])],8,ei)))),128)),n.totalPages>1?((0,o.uX)(),(0,o.CE)("div",ri,[(0,o.Lk)("div",li," Page "+(0,i.v_)(l.currentPage)+" of "+(0,i.v_)(n.totalPages),1),(0,o.Lk)("div",ni,[(0,o.Lk)("button",{class:"btn btn-sm btn-outline-primary",disabled:1===l.currentPage,onClick:t[7]||(t[7]=e=>n.changePage(l.currentPage-1))},t[36]||(t[36]=[(0,o.Lk)("i",{class:"bi bi-chevron-left"},null,-1)]),8,ci),(0,o.Lk)("button",{class:"btn btn-sm btn-outline-primary",disabled:l.currentPage===n.totalPages,onClick:t[8]||(t[8]=e=>n.changePage(l.currentPage+1))},t[37]||(t[37]=[(0,o.Lk)("i",{class:"bi bi-chevron-right"},null,-1)]),8,di)])])):(0,o.Q3)("",!0)]))])):((0,o.uX)(),(0,o.CE)("div",ui,[(0,o.Lk)("table",mi,[t[41]||(t[41]=(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",{scope:"col"},"Order ID"),(0,o.Lk)("th",{scope:"col"},"Date"),(0,o.Lk)("th",{scope:"col"},"Customer"),(0,o.Lk)("th",{scope:"col"},"Items"),(0,o.Lk)("th",{scope:"col"},"Total"),(0,o.Lk)("th",{scope:"col"},"Status"),(0,o.Lk)("th",{scope:"col"},"Actions")])],-1)),(0,o.Lk)("tbody",null,[0===n.paginatedOrders.length?((0,o.uX)(),(0,o.CE)("tr",pi,t[38]||(t[38]=[(0,o.Lk)("td",{colspan:"7",class:"text-center py-4"},[(0,o.Lk)("i",{class:"bi bi-search text-muted",style:{"font-size":"2rem"}}),(0,o.Lk)("p",{class:"mt-2 text-muted"},"No orders found")],-1)]))):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.paginatedOrders,(e=>((0,o.uX)(),(0,o.CE)("tr",{key:`desktop-${e.id}`},[(0,o.Lk)("td",null,[(0,o.Lk)("span",gi,"#"+(0,i.v_)(e.id),1)]),(0,o.Lk)("td",null,(0,i.v_)(n.formatDate(e.date_ordered)),1),(0,o.Lk)("td",null,(0,i.v_)(e.customer),1),(0,o.Lk)("td",null,(0,i.v_)(e.items?e.items.length:0)+" items",1),(0,o.Lk)("td",null,"â‚±"+(0,i.v_)(n.calculateOrderTotal(e).toFixed(2)),1),t[40]||(t[40]=(0,o.Lk)("td",null,[(0,o.Lk)("span",{class:"badge bg-success"},"Completed")],-1)),(0,o.Lk)("td",null,[(0,o.Lk)("button",{class:"btn btn-sm btn-primary btn-view",onClick:t=>n.viewOrderDetails(e)},t[39]||(t[39]=[(0,o.Lk)("i",{class:"bi bi-eye"},null,-1)]),8,bi)])])))),128))])])])),n.filteredOrders.length>0?((0,o.uX)(),(0,o.CE)("div",hi,[(0,o.Lk)("div",vi," Showing "+(0,i.v_)(n.paginationInfo.from)+" to "+(0,i.v_)(n.paginationInfo.to)+" of "+(0,i.v_)(n.filteredOrders.length)+" orders ",1),(0,o.Lk)("nav",ki,[(0,o.Lk)("ul",fi,[(0,o.Lk)("li",{class:(0,i.C4)(["page-item",{disabled:1===l.currentPage}])},[(0,o.Lk)("button",{class:"page-link",onClick:t[9]||(t[9]=e=>n.changePage(l.currentPage-1)),disabled:1===l.currentPage,"aria-label":"Previous page"},t[42]||(t[42]=[(0,o.Lk)("i",{class:"bi bi-chevron-left"},null,-1)]),8,Li)],2),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(n.getPageNumbers(),(e=>((0,o.uX)(),(0,o.CE)("li",{key:e,class:(0,i.C4)(["page-item",{active:l.currentPage===e}])},["..."===e?((0,o.uX)(),(0,o.CE)("button",yi,(0,i.v_)(e),1)):((0,o.uX)(),(0,o.CE)("button",{key:1,class:"page-link",onClick:t=>n.changePage(e)},(0,i.v_)(e),9,wi))],2)))),128)),(0,o.Lk)("li",{class:(0,i.C4)(["page-item",{disabled:l.currentPage===n.totalPages}])},[(0,o.Lk)("button",{class:"page-link",onClick:t[10]||(t[10]=e=>n.changePage(l.currentPage+1)),disabled:l.currentPage===n.totalPages,"aria-label":"Next page"},t[43]||(t[43]=[(0,o.Lk)("i",{class:"bi bi-chevron-right"},null,-1)]),8,Ci)],2)])])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Pi,[(0,o.Lk)("div",xi,[(0,o.Lk)("div",Si,[(0,o.Lk)("div",Ei,[(0,o.Lk)("h5",Mi,"Order Details #"+(0,i.v_)(l.selectedOrder?.id),1),(0,o.Lk)("button",{type:"button",class:"btn-close",onClick:t[11]||(t[11]=(...e)=>n.closeOrderModal&&n.closeOrderModal(...e)),"aria-label":"Close"})]),l.selectedOrder?((0,o.uX)(),(0,o.CE)("div",Ii,[(0,o.Lk)("div",_i,[(0,o.Lk)("div",Ai,[(0,o.Lk)("div",Di,[(0,o.Lk)("p",null,[t[44]||(t[44]=(0,o.Lk)("strong",null,"Customer:",-1)),(0,o.eW)(" "+(0,i.v_)(l.selectedOrder.customer),1)]),(0,o.Lk)("p",null,[t[45]||(t[45]=(0,o.Lk)("strong",null,"Date:",-1)),(0,o.eW)(" "+(0,i.v_)(n.formatDate(l.selectedOrder.date_ordered)),1)])]),(0,o.Lk)("div",Oi,[t[47]||(t[47]=(0,o.Lk)("p",null,[(0,o.Lk)("strong",null,"Status:"),(0,o.eW)(),(0,o.Lk)("span",{class:"badge bg-success"},"Completed")],-1)),(0,o.Lk)("p",null,[t[46]||(t[46]=(0,o.Lk)("strong",null,"Total:",-1)),(0,o.eW)(" â‚±"+(0,i.v_)(n.calculateOrderTotal(l.selectedOrder).toFixed(2)),1)])])])]),t[51]||(t[51]=(0,o.Lk)("h6",{class:"mb-3"},"Order Items",-1)),(0,o.Lk)("div",Ti,[(0,o.Lk)("table",Fi,[t[50]||(t[50]=(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",{scope:"col"},"Product"),(0,o.Lk)("th",{scope:"col",class:"text-center"},"Price"),(0,o.Lk)("th",{scope:"col",class:"text-center"},"Quantity"),(0,o.Lk)("th",{scope:"col",class:"text-center"},"Total")])],-1)),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.selectedOrder.items,(e=>((0,o.uX)(),(0,o.CE)("tr",{key:e.id},[(0,o.Lk)("td",null,[(0,o.Lk)("div",Wi,[n.getProductDetails(e.product)?((0,o.uX)(),(0,o.CE)("div",Ni,[n.getProductDetails(e.product).image?((0,o.uX)(),(0,o.CE)("img",{key:0,src:n.fullImageUrl(n.getProductDetails(e.product).image),alt:"Product"},null,8,Ri)):((0,o.uX)(),(0,o.CE)("div",qi,t[48]||(t[48]=[(0,o.Lk)("i",{class:"bi bi-image"},null,-1)])))])):(0,o.Q3)("",!0),(0,o.Lk)("span",null,(0,i.v_)(n.getProductDetails(e.product)?n.getProductDetails(e.product).name:`Product #${e.product}`),1)])]),(0,o.Lk)("td",Xi,"â‚±"+(0,i.v_)(n.getProductDetails(e.product)?n.getProductDetails(e.product).price:"N/A"),1),(0,o.Lk)("td",Hi,(0,i.v_)(e.quantity),1),(0,o.Lk)("td",Bi,"â‚±"+(0,i.v_)(n.getProductDetails(e.product)?(n.getProductDetails(e.product).price*e.quantity).toFixed(2):"N/A"),1)])))),128))]),(0,o.Lk)("tfoot",null,[(0,o.Lk)("tr",null,[t[49]||(t[49]=(0,o.Lk)("td",{colspan:"3",class:"text-end"},[(0,o.Lk)("strong",null,"Total:")],-1)),(0,o.Lk)("td",zi,"â‚±"+(0,i.v_)(n.calculateOrderTotal(l.selectedOrder).toFixed(2)),1)])])])])])):(0,o.Q3)("",!0),(0,o.Lk)("div",Ji,[(0,o.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[12]||(t[12]=(...e)=>n.closeOrderModal&&n.closeOrderModal(...e))},"Close"),(0,o.Lk)("button",{type:"button",class:"btn btn-primary btn-view",onClick:t[13]||(t[13]=(...e)=>n.printOrder&&n.printOrder(...e))},t[52]||(t[52]=[(0,o.Lk)("i",{class:"bi bi-printer me-2"},null,-1),(0,o.eW)("Print ")]))])])])],512)])}a(7642),a(8004),a(3853),a(5876),a(2475),a(5024),a(1698);var Qi={data(){return{orders:[],products:[],selectedOrder:null,modalInstance:null,searchQuery:"",dateFrom:"",dateTo:"",sortBy:"date_desc",currentPage:1,perPage:10,isLoading:!0,isRefreshing:!1,cachedOrderTotals:{}}},computed:{filteredOrders(){let e=[...this.orders];if(this.searchQuery){const t=this.searchQuery.toLowerCase();e=e.filter((e=>e.id.toString().includes(t)||e.customer.toString().toLowerCase().includes(t)))}if(this.dateFrom){const t=new Date(this.dateFrom);t.setHours(0,0,0,0),e=e.filter((e=>new Date(e.date_ordered)>=t))}if(this.dateTo){const t=new Date(this.dateTo);t.setHours(23,59,59,999),e=e.filter((e=>new Date(e.date_ordered)<=t))}return"date_desc"===this.sortBy?e.sort(((e,t)=>new Date(t.date_ordered)-new Date(e.date_ordered))):"date_asc"===this.sortBy?e.sort(((e,t)=>new Date(e.date_ordered)-new Date(t.date_ordered))):"amount_desc"===this.sortBy?e.sort(((e,t)=>this.getOrderTotal(t)-this.getOrderTotal(e))):"amount_asc"===this.sortBy&&e.sort(((e,t)=>this.getOrderTotal(e)-this.getOrderTotal(t))),e},paginatedOrders(){const e=(this.currentPage-1)*this.perPage,t=e+this.perPage;return this.filteredOrders.slice(e,t)},totalPages(){return Math.ceil(this.filteredOrders.length/this.perPage)},paginationInfo(){const e=0===this.filteredOrders.length?0:(this.currentPage-1)*this.perPage+1,t=Math.min(this.currentPage*this.perPage,this.filteredOrders.length);return{from:e,to:t}},uniqueCustomers(){const e=new Set;return this.orders.forEach((t=>e.add(t.customer))),Array.from(e)},isMobile(){return window.innerWidth<768}},methods:{fullImageUrl(e){return e?e.startsWith("http")?e:`http://127.0.0.1:8000${e.startsWith("/")?e:"/media/"+e}`:""},formatDate(e){const t={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(e).toLocaleDateString(void 0,t)},getProductDetails(e){return this.products.find((t=>t.id===e))},calculateOrderTotal(e){let t=0;return e.items&&e.items.forEach((e=>{const a=this.getProductDetails(e.product);a&&(t+=a.price*e.quantity)})),t},getOrderTotal(e){if(void 0!==this.cachedOrderTotals[e.id])return this.cachedOrderTotals[e.id];const t=this.calculateOrderTotal(e);return this.cachedOrderTotals[e.id]=t,t},calculateTotalSales(){let e=0;return this.orders.forEach((t=>{e+=this.calculateOrderTotal(t)})),e.toFixed(2)},viewOrderDetails(e){this.selectedOrder=e,this.modalInstance=new pe.aF(this.$refs.orderModal),this.modalInstance.show()},closeOrderModal(){this.modalInstance&&this.modalInstance.hide()},changePage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e,setTimeout((()=>{const e=document.querySelector(".card");e&&e.scrollIntoView({behavior:"smooth",block:"start"})}),100))},getPageNumbers(){const e=[],t=5;if(this.totalPages<=t)for(let a=1;a<=this.totalPages;a++)e.push(a);else{e.push(1);let t=Math.max(2,this.currentPage-1),a=Math.min(this.totalPages-1,t+2);a===this.totalPages-1&&(t=Math.max(2,a-2)),t>2&&e.push("...");for(let s=t;s<=a;s++)e.push(s);a<this.totalPages-1&&e.push("..."),e.push(this.totalPages)}return e},resetFilters(){this.searchQuery="",this.dateFrom="",this.dateTo="",this.sortBy="date_desc",this.currentPage=1,this.showNotification("info","Filters have been reset")},printOrder(){const e=window.open("","_blank","width=800,height=600"),t=this.generatePrintContent();e.document.open(),e.document.write(t),e.document.close(),e.focus()},generatePrintContent(){let e="<!DOCTYPE html>\n";e+="<html>\n",e+="<head>\n",e+="  <title>Order #"+this.selectedOrder.id+" - Invoice</title>\n",e+='  <meta charset="utf-8">\n',e+='  <meta name="viewport" content="width=device-width, initial-scale=1">\n',e+="  <style>\n",e+="    body { font-family: Arial, sans-serif; padding: 20px; color: #333; line-height: 1.4; }\n",e+="    .print-container { max-width: 800px; margin: 0 auto; padding: 20px; }\n",e+="    .print-header { text-align: center; margin-bottom: 30px; padding-bottom: 15px; border-bottom: 2px solid #eee; }\n",e+="    .print-header h2 { margin-bottom: 5px; font-size: 24px; }\n",e+="    .print-header h3 { margin-top: 0; font-size: 18px; color: #666; }\n",e+="    .print-order-details { margin-bottom: 30px; }\n",e+="    .print-row { display: flex; margin: 0 -15px; }\n",e+="    .print-col { flex: 1; padding: 0 15px; }\n",e+="    .print-items h4 { margin-bottom: 15px; font-size: 18px; border-bottom: 1px solid #eee; padding-bottom: 8px; }\n",e+="    .print-table { width: 100%; border-collapse: collapse; margin-bottom: 30px; }\n",e+="    .print-table th, .print-table td { border: 1px solid #ddd; padding: 8px 12px; text-align: left; }\n",e+="    .print-table th { background-color: #f5f5f5; }\n",e+="    .print-table tfoot { font-weight: bold; }\n",e+="    .print-footer { margin-top: 50px; text-align: center; font-style: italic; color: #666; padding-top: 15px; border-top: 1px solid #eee; }\n",e+="    @media print { .no-print { display: none; } }\n",e+="    .print-button { background-color: #007bff; color: white; border: none; padding: 10px 15px; border-radius: 4px; cursor: pointer; margin: 20px 0; font-size: 14px; }\n",e+="    .print-button:hover { background-color: #0069d9; }\n",e+="  </style>\n",e+="</head>\n",e+="<body>\n",e+='  <div class="print-container">\n',e+='    <div class="print-header">\n',e+="      <h2>Order Invoice</h2>\n",e+="      <h3>Order #"+this.selectedOrder.id+"</h3>\n",e+="    </div>\n",e+='    <div class="print-order-details">\n',e+='      <div class="print-row">\n',e+='        <div class="print-col">\n',e+="          <p><strong>Customer:</strong> "+this.selectedOrder.customer+"</p>\n",e+="          <p><strong>Date:</strong> "+this.formatDate(this.selectedOrder.date_ordered)+"</p>\n",e+="        </div>\n",e+='        <div class="print-col">\n',e+="          <p><strong>Status:</strong> Completed</p>\n",e+="          <p><strong>Total:</strong> â‚±"+this.calculateOrderTotal(this.selectedOrder).toFixed(2)+"</p>\n",e+="        </div>\n",e+="      </div>\n",e+="    </div>\n",e+='    <div class="print-items">\n',e+="      <h4>Order Items</h4>\n",e+='      <table class="print-table">\n',e+="        <thead>\n",e+="          <tr>\n",e+="            <th>Product</th>\n",e+='            <th style="text-align: center">Price</th>\n',e+='            <th style="text-align: center">Quantity</th>\n',e+='            <th style="text-align: center">Total</th>\n',e+="          </tr>\n",e+="        </thead>\n",e+="        <tbody>\n",this.selectedOrder.items.forEach((t=>{const a=this.getProductDetails(t.product),s=a?a.name:`Product #${t.product}`,o=a?a.price:"N/A",i=a?(a.price*t.quantity).toFixed(2):"N/A";e+="          <tr>\n",e+="            <td>"+s+"</td>\n",e+='            <td style="text-align: center">â‚±'+o+"</td>\n",e+='            <td style="text-align: center">'+t.quantity+"</td>\n",e+='            <td style="text-align: center">â‚±'+i+"</td>\n",e+="          </tr>\n"})),e+="        </tbody>\n",e+="        <tfoot>\n",e+="          <tr>\n",e+='            <td colspan="3" style="text-align: right"><strong>Total:</strong></td>\n',e+='            <td style="text-align: center">â‚±'+this.calculateOrderTotal(this.selectedOrder).toFixed(2)+"</td>\n",e+="          </tr>\n",e+="        </tfoot>\n",e+="      </table>\n",e+="    </div>\n",e+='    <div class="print-footer">\n',e+="      <p>Thank you for your business!</p>\n",e+="    </div>\n",e+='    <div class="no-print" style="text-align: center; margin-top: 30px;">\n',e+='      <button class="print-button" onclick="window.print(); window.close();">Print Invoice</button>\n',e+='      <button class="print-button" style="background-color: #6c757d;" onclick="window.close();">Close</button>\n',e+="    </div>\n",e+="  </div>\n";const t="script",a="body",s="html";return e+="  <"+t+">\n",e+="    window.onload = function() { /* Auto-print is optional */ }\n",e+="  </"+t+">\n",e+="</"+a+">\n",e+="</"+s+">",e},async fetchOrders(){try{console.log("ðŸ“‹ Fetching admin orders...");const e=await $.get("orders/");this.orders=e.data||[],0===this.orders.length?console.warn("No admin orders received from API"):console.log("âœ… Loaded",this.orders.length,"admin orders")}catch(e){console.error("Error fetching admin orders:",e),this.showNotification("error","Failed to load orders.")}},async fetchProducts(){try{console.log("ðŸ“¦ Fetching admin products...");const e=await $.get("products/");this.products=e.data||[],0===this.products.length?console.warn("No admin products received from API"):console.log("âœ… Loaded",this.products.length,"admin products for order details")}catch(e){console.error("Error fetching admin products:",e),this.showNotification("error","Failed to load products.")}},showNotification(e,t){const a=document.createElement("div");a.className=`notification notification-${e}`;let s="bi-info-circle";"success"===e&&(s="bi-check-circle"),"warning"===e&&(s="bi-exclamation-triangle"),"error"===e&&(s="bi-x-circle"),a.innerHTML=`<i class="bi ${s}"></i> ${t}`,document.body.appendChild(a),setTimeout((()=>{a.classList.add("show")}),10),setTimeout((()=>{a.classList.remove("show"),setTimeout((()=>{document.body.removeChild(a)}),300)}),3e3)},debugOrders(){console.log("=== DEBUG ORDERS ==="),console.log("Total orders:",this.orders.length),console.log("Filtered orders:",this.filteredOrders.length),console.log("Paginated orders:",this.paginatedOrders.length),console.log("Current page:",this.currentPage),console.log("Per page:",this.perPage),console.log("First few orders:",this.orders.slice(0,3)),console.log("First few paginated:",this.paginatedOrders.slice(0,3))}},watch:{searchQuery(){this.currentPage=1},sortBy(){this.currentPage=1,this.cachedOrderTotals={}},perPage(){this.currentPage=1},dateFrom(){this.currentPage=1},dateTo(){this.currentPage=1}},async mounted(){console.log("ðŸš€ CheckoutMonitor component mounted"),this.isLoading=!0;try{await Promise.all([this.fetchOrders(),this.fetchProducts()]),this.debugOrders()}catch(e){console.error("Error loading initial data:",e)}finally{this.isLoading=!1}}};const ji=(0,de.A)(Qi,[["render",Ui],["__scopeId","data-v-893d0de8"]]);var Ki=ji;const Vi={class:"container"},Zi={class:"admin-header mb-4"},$i={class:"admin-actions"},Yi={class:"row mb-4"},Gi={class:"col-md-4"},er={class:"stat-card card"},tr={class:"card-body"},ar={class:"stat-info"},sr={class:"col-md-4"},or={class:"stat-card card"},ir={class:"card-body"},rr={class:"stat-info"},lr={class:"col-md-4"},nr={class:"stat-card card"},cr={class:"card-body"},dr={class:"stat-info"},ur={class:"card mb-4"},mr={class:"card-header d-flex justify-content-between align-items-center flex-wrap gap-2"},pr={class:"d-flex align-items-center gap-2"},gr={class:"search-container"},br=["disabled"],hr={key:0,class:"spinner-border spinner-border-sm me-1",role:"status"},vr={key:1,class:"bi bi-arrow-clockwise me-1"},kr={key:0,class:"loading-container py-5"},fr={key:1,class:"empty-products py-5"},Lr={key:2,class:"table-responsive"},yr={class:"table table-hover"},wr={class:"product-image"},Cr=["src","alt"],Pr={key:1,class:"image-placeholder"},xr={class:"product-name"},Sr={class:"product-description"},Er={class:"btn-group"},Mr=["onClick"],Ir=["onClick"],_r={key:3,class:"card-footer"},Ar={"aria-label":"Product pagination"},Dr={class:"pagination justify-content-center mb-0"},Or=["disabled"],Tr={key:0,class:"page-link",disabled:""},Fr=["onClick"],Wr=["disabled"],Nr={class:"card"},Rr={class:"table-responsive"},qr={class:"table"},Xr={key:0},Hr={class:"modal fade",ref:"editModal",id:"editModal",tabindex:"-1","aria-labelledby":"editModalLabel","aria-hidden":"true"},Br={class:"modal-dialog modal-dialog-centered modal-lg"},zr={class:"modal-content"},Jr={class:"modal-header"},Ur={class:"modal-body"},Qr={class:"modal-body-scrollable"},jr={key:0,class:"text-center mb-4"},Kr={class:"product-image-preview"},Vr=["src","alt"],Zr={class:"form-group mb-3"},$r={key:0,class:"invalid-feedback"},Yr={class:"form-group mb-3"},Gr={key:0,class:"invalid-feedback"},el={class:"row mb-3"},tl={class:"col-12 col-sm-6 mb-3 mb-sm-0"},al={class:"input-group"},sl={key:0,class:"invalid-feedback"},ol={class:"col-12 col-sm-6"},il={class:"input-group"},rl={key:0,class:"invalid-feedback"},ll={class:"form-group mb-3"},nl={class:"custom-file-upload"},cl={class:"modal-footer"},dl=["disabled"],ul={key:0,class:"spinner-border spinner-border-sm me-1",role:"status"},ml={key:1,class:"bi bi-check-circle me-1"},pl={class:"modal fade confirm-modal",ref:"confirmModal",tabindex:"-1","aria-labelledby":"confirmModalLabel","aria-hidden":"true"},gl={class:"modal-dialog modal-dialog-centered modal-sm"},bl={class:"modal-content"},hl={class:"modal-header"},vl={class:"modal-footer"},kl=["disabled"],fl={key:0,class:"spinner-border spinner-border-sm me-1",role:"status"},Ll={key:1,class:"bi bi-trash me-1"};function yl(e,t,a,r,l,n){const c=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",Vi,[(0,o.Lk)("div",Zi,[t[21]||(t[21]=(0,o.Lk)("h2",{class:"section-title"},[(0,o.Lk)("i",{class:"bi bi-box-seam me-2"}),(0,o.eW)("Product Inventory ")],-1)),(0,o.Lk)("div",$i,[(0,o.bF)(c,{to:"/add-product",class:"btn btn-add"},{default:(0,o.k6)((()=>t[20]||(t[20]=[(0,o.Lk)("i",{class:"bi bi-plus-circle me-2"},null,-1),(0,o.eW)("Add New Product ")]))),_:1})])]),(0,o.Lk)("div",Yi,[(0,o.Lk)("div",Gi,[(0,o.Lk)("div",er,[(0,o.Lk)("div",tr,[t[23]||(t[23]=(0,o.Lk)("div",{class:"stat-icon"},[(0,o.Lk)("i",{class:"bi bi-box-seam"})],-1)),(0,o.Lk)("div",ar,[(0,o.Lk)("h3",null,(0,i.v_)(r.products.length),1),t[22]||(t[22]=(0,o.Lk)("p",null,"Total Products",-1))])])])]),(0,o.Lk)("div",sr,[(0,o.Lk)("div",or,[(0,o.Lk)("div",ir,[t[25]||(t[25]=(0,o.Lk)("div",{class:"stat-icon"},[(0,o.Lk)("i",{class:"bi bi-exclamation-triangle"})],-1)),(0,o.Lk)("div",rr,[(0,o.Lk)("h3",null,(0,i.v_)(r.lowStockCount),1),t[24]||(t[24]=(0,o.Lk)("p",null,"Low Stock Items",-1))])])])]),(0,o.Lk)("div",lr,[(0,o.Lk)("div",nr,[(0,o.Lk)("div",cr,[t[27]||(t[27]=(0,o.Lk)("div",{class:"stat-icon"},[(0,o.Lk)("i",{class:"bi bi-cart-check"})],-1)),(0,o.Lk)("div",dr,[(0,o.Lk)("h3",null,(0,i.v_)(r.orders.length),1),t[26]||(t[26]=(0,o.Lk)("p",null,"Total Orders",-1))])])])])]),(0,o.Lk)("div",ur,[(0,o.Lk)("div",mr,[t[29]||(t[29]=(0,o.Lk)("h5",{class:"mb-0"},"Product Inventory",-1)),(0,o.Lk)("div",pr,[(0,o.Lk)("div",gr,[(0,o.bo)((0,o.Lk)("input",{type:"text",class:"form-control search-input",placeholder:"Search products...","onUpdate:modelValue":t[0]||(t[0]=e=>r.searchQuery=e),"aria-label":"Search products"},null,512),[[s.Jo,r.searchQuery]]),t[28]||(t[28]=(0,o.Lk)("i",{class:"bi bi-search search-icon"},null,-1))]),(0,o.Lk)("button",{class:"btn btn-sm btn-outline-secondary",onClick:t[1]||(t[1]=(...e)=>r.refreshProducts&&r.refreshProducts(...e)),disabled:r.isRefreshing},[r.isRefreshing?((0,o.uX)(),(0,o.CE)("span",hr)):((0,o.uX)(),(0,o.CE)("i",vr)),(0,o.eW)(" "+(0,i.v_)(r.isRefreshing?"Refreshing...":"Refresh"),1)],8,br)])]),r.isLoading?((0,o.uX)(),(0,o.CE)("div",kr,t[30]||(t[30]=[(0,o.Lk)("div",{class:"spinner"},[(0,o.Lk)("div",{class:"bounce1"}),(0,o.Lk)("div",{class:"bounce2"}),(0,o.Lk)("div",{class:"bounce3"})],-1),(0,o.Lk)("p",null,"Loading products...",-1)]))):0===r.filteredProducts.length?((0,o.uX)(),(0,o.CE)("div",fr,[t[32]||(t[32]=(0,o.Lk)("i",{class:"bi bi-search-heart"},null,-1)),t[33]||(t[33]=(0,o.Lk)("h3",null,"No products found",-1)),t[34]||(t[34]=(0,o.Lk)("p",null,"Try adjusting your search criteria.",-1)),(0,o.Lk)("button",{class:"btn btn-primary mt-3",onClick:t[2]||(t[2]=(...e)=>r.resetSearch&&r.resetSearch(...e))},t[31]||(t[31]=[(0,o.Lk)("i",{class:"bi bi-arrow-counterclockwise me-2"},null,-1),(0,o.eW)("Reset Search ")]))])):((0,o.uX)(),(0,o.CE)("div",Lr,[(0,o.Lk)("table",yr,[t[38]||(t[38]=(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"Image"),(0,o.Lk)("th",null,"Name"),(0,o.Lk)("th",null,"Price"),(0,o.Lk)("th",null,"Stock"),(0,o.Lk)("th",null,"Actions")])],-1)),(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.paginatedProducts,(e=>((0,o.uX)(),(0,o.CE)("tr",{key:e.id},[(0,o.Lk)("td",null,[(0,o.Lk)("div",wr,[e.image?((0,o.uX)(),(0,o.CE)("img",{key:0,src:r.fullImageUrl(e.image),alt:e.name,loading:"lazy"},null,8,Cr)):((0,o.uX)(),(0,o.CE)("div",Pr,t[35]||(t[35]=[(0,o.Lk)("i",{class:"bi bi-image"},null,-1)])))])]),(0,o.Lk)("td",null,[(0,o.Lk)("div",xr,(0,i.v_)(e.name),1),(0,o.Lk)("div",Sr,(0,i.v_)(r.truncate(e.description,50)),1)]),(0,o.Lk)("td",null,"â‚±"+(0,i.v_)(r.formatPrice(e.price)),1),(0,o.Lk)("td",null,[(0,o.Lk)("span",{class:(0,i.C4)(["stock-badge",{"bg-danger":0===e.stock,"bg-warning":e.stock>0&&e.stock<5,"bg-success":e.stock>=5}])},(0,i.v_)(e.stock),3)]),(0,o.Lk)("td",null,[(0,o.Lk)("div",Er,[(0,o.Lk)("button",{class:"btn btn-sm btn-primary",onClick:t=>r.openEditModal(e),"aria-label":"Edit product"},t[36]||(t[36]=[(0,o.Lk)("i",{class:"bi bi-pencil"},null,-1)]),8,Mr),(0,o.Lk)("button",{class:"btn btn-sm btn-danger",onClick:t=>r.confirmDeleteProduct(e.id),"aria-label":"Delete product"},t[37]||(t[37]=[(0,o.Lk)("i",{class:"bi bi-trash"},null,-1)]),8,Ir)])])])))),128))])])])),r.totalPages>1?((0,o.uX)(),(0,o.CE)("div",_r,[(0,o.Lk)("nav",Ar,[(0,o.Lk)("ul",Dr,[(0,o.Lk)("li",{class:(0,i.C4)(["page-item",{disabled:1===r.currentPage}])},[(0,o.Lk)("button",{class:"page-link",onClick:t[3]||(t[3]=e=>r.changePage(r.currentPage-1)),disabled:1===r.currentPage,"aria-label":"Previous page"},t[39]||(t[39]=[(0,o.Lk)("i",{class:"bi bi-chevron-left"},null,-1)]),8,Or)],2),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.getPageNumbers(),(e=>((0,o.uX)(),(0,o.CE)("li",{key:e,class:(0,i.C4)(["page-item",{active:r.currentPage===e}])},["..."===e?((0,o.uX)(),(0,o.CE)("button",Tr,(0,i.v_)(e),1)):((0,o.uX)(),(0,o.CE)("button",{key:1,class:"page-link",onClick:t=>r.changePage(e)},(0,i.v_)(e),9,Fr))],2)))),128)),(0,o.Lk)("li",{class:(0,i.C4)(["page-item",{disabled:r.currentPage===r.totalPages}])},[(0,o.Lk)("button",{class:"page-link",onClick:t[4]||(t[4]=e=>r.changePage(r.currentPage+1)),disabled:r.currentPage===r.totalPages,"aria-label":"Next page"},t[40]||(t[40]=[(0,o.Lk)("i",{class:"bi bi-chevron-right"},null,-1)]),8,Wr)],2)])])])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Nr,[t[44]||(t[44]=(0,o.Lk)("div",{class:"card-header"},[(0,o.Lk)("h5",{class:"mb-0"},"Recent Orders")],-1)),(0,o.Lk)("div",Rr,[(0,o.Lk)("table",qr,[t[43]||(t[43]=(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("th",null,"Order ID"),(0,o.Lk)("th",null,"Date"),(0,o.Lk)("th",null,"Customer"),(0,o.Lk)("th",null,"Items"),(0,o.Lk)("th",null,"Status")])],-1)),(0,o.Lk)("tbody",null,[0===r.orders.length?((0,o.uX)(),(0,o.CE)("tr",Xr,t[41]||(t[41]=[(0,o.Lk)("td",{colspan:"5",class:"text-center py-4"},"No orders found",-1)]))):(0,o.Q3)("",!0),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.recentOrders,(e=>((0,o.uX)(),(0,o.CE)("tr",{key:e.id},[(0,o.Lk)("td",null,"#"+(0,i.v_)(e.id),1),(0,o.Lk)("td",null,(0,i.v_)(r.formatDate(e.date_ordered)),1),(0,o.Lk)("td",null,(0,i.v_)(e.customer),1),(0,o.Lk)("td",null,(0,i.v_)(e.items?e.items.length:0)+" items",1),t[42]||(t[42]=(0,o.Lk)("td",null,[(0,o.Lk)("span",{class:"badge bg-success"},"Completed")],-1))])))),128))])])])]),(0,o.Lk)("div",Hr,[(0,o.Lk)("div",Br,[(0,o.Lk)("div",zr,[(0,o.Lk)("form",{onSubmit:t[16]||(t[16]=(0,s.D$)(((...e)=>r.validateAndSubmitEdit&&r.validateAndSubmitEdit(...e)),["prevent"])),novalidate:""},[(0,o.Lk)("div",Jr,[t[45]||(t[45]=(0,o.Lk)("h5",{class:"modal-title",id:"editModalLabel"},[(0,o.Lk)("i",{class:"bi bi-pencil-square me-2"}),(0,o.eW)("Edit Product ")],-1)),(0,o.Lk)("button",{type:"button",class:"btn-close",onClick:t[5]||(t[5]=(...e)=>r.closeEditModal&&r.closeEditModal(...e)),"aria-label":"Close"})]),(0,o.Lk)("div",Ur,[(0,o.Lk)("div",Qr,[r.editProduct.image?((0,o.uX)(),(0,o.CE)("div",jr,[(0,o.Lk)("div",Kr,[(0,o.Lk)("img",{src:r.fullImageUrl(r.editProduct.image),alt:r.editProduct.name,class:"img-fluid rounded"},null,8,Vr)]),t[46]||(t[46]=(0,o.Lk)("p",{class:"image-caption mt-2"},"Current image",-1))])):(0,o.Q3)("",!0),(0,o.Lk)("div",Zr,[t[47]||(t[47]=(0,o.Lk)("label",{class:"form-label fw-medium"},"Product Name",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>r.editProduct.name=e),class:(0,i.C4)(["form-control",{"is-invalid":r.errors.name}]),required:"",onBlur:t[7]||(t[7]=(...e)=>r.validateName&&r.validateName(...e)),placeholder:"Enter product name"},null,34),[[s.Jo,r.editProduct.name]]),r.errors.name?((0,o.uX)(),(0,o.CE)("div",$r,(0,i.v_)(r.errors.name),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Yr,[t[48]||(t[48]=(0,o.Lk)("label",{class:"form-label fw-medium"},"Description",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[8]||(t[8]=e=>r.editProduct.description=e),class:(0,i.C4)(["form-control",{"is-invalid":r.errors.description}]),rows:"3",required:"",onBlur:t[9]||(t[9]=(...e)=>r.validateDescription&&r.validateDescription(...e)),placeholder:"Enter product description"},null,34),[[s.Jo,r.editProduct.description]]),r.errors.description?((0,o.uX)(),(0,o.CE)("div",Gr,(0,i.v_)(r.errors.description),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",el,[(0,o.Lk)("div",tl,[t[50]||(t[50]=(0,o.Lk)("label",{class:"form-label fw-medium"},"Price (â‚±)",-1)),(0,o.Lk)("div",al,[t[49]||(t[49]=(0,o.Lk)("span",{class:"input-group-text"},"â‚±",-1)),(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":t[10]||(t[10]=e=>r.editProduct.price=e),class:(0,i.C4)(["form-control",{"is-invalid":r.errors.price}]),min:"0",step:"0.01",required:"",onBlur:t[11]||(t[11]=(...e)=>r.validatePrice&&r.validatePrice(...e)),placeholder:"0.00"},null,34),[[s.Jo,r.editProduct.price,void 0,{number:!0}]]),r.errors.price?((0,o.uX)(),(0,o.CE)("div",sl,(0,i.v_)(r.errors.price),1)):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",ol,[t[52]||(t[52]=(0,o.Lk)("label",{class:"form-label fw-medium"},"Stock",-1)),(0,o.Lk)("div",il,[t[51]||(t[51]=(0,o.Lk)("span",{class:"input-group-text"},[(0,o.Lk)("i",{class:"bi bi-box-seam"})],-1)),(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":t[12]||(t[12]=e=>r.editProduct.stock=e),class:(0,i.C4)(["form-control",{"is-invalid":r.errors.stock}]),min:"0",required:"",onBlur:t[13]||(t[13]=(...e)=>r.validateStock&&r.validateStock(...e)),placeholder:"0"},null,34),[[s.Jo,r.editProduct.stock,void 0,{number:!0}]]),r.errors.stock?((0,o.uX)(),(0,o.CE)("div",rl,(0,i.v_)(r.errors.stock),1)):(0,o.Q3)("",!0)])])]),(0,o.Lk)("div",ll,[t[54]||(t[54]=(0,o.Lk)("label",{class:"form-label fw-medium"},"Product Image",-1)),(0,o.Lk)("div",nl,[(0,o.Lk)("input",{type:"file",id:"productImage",onChange:t[14]||(t[14]=(...e)=>r.handleEditImage&&r.handleEditImage(...e)),class:"form-control",accept:"image/*"},null,32),t[53]||(t[53]=(0,o.Lk)("label",{for:"productImage",class:"file-upload-label"},[(0,o.Lk)("i",{class:"bi bi-cloud-arrow-up me-2"}),(0,o.eW)(" Choose a new image ")],-1))]),t[55]||(t[55]=(0,o.Lk)("small",{class:"text-muted d-block mt-1"}," Recommended size: 800x800px, max 2MB ",-1))])])]),(0,o.Lk)("div",cl,[(0,o.Lk)("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[15]||(t[15]=(...e)=>r.closeEditModal&&r.closeEditModal(...e))},t[56]||(t[56]=[(0,o.Lk)("i",{class:"bi bi-x-circle me-1"},null,-1),(0,o.eW)("Cancel ")])),(0,o.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:r.isSubmitting},[r.isSubmitting?((0,o.uX)(),(0,o.CE)("span",ul)):((0,o.uX)(),(0,o.CE)("i",ml)),(0,o.eW)(" "+(0,i.v_)(r.isSubmitting?"Saving...":"Save Changes"),1)],8,dl)])],32)])])],512),(0,o.Lk)("div",pl,[(0,o.Lk)("div",gl,[(0,o.Lk)("div",bl,[(0,o.Lk)("div",hl,[t[57]||(t[57]=(0,o.Lk)("h5",{class:"modal-title",id:"confirmModalLabel"},"Confirm Deletion",-1)),(0,o.Lk)("button",{type:"button",class:"btn-close",onClick:t[17]||(t[17]=(...e)=>r.hideConfirmModal&&r.hideConfirmModal(...e)),"aria-label":"Close"})]),t[58]||(t[58]=(0,o.Lk)("div",{class:"modal-body"},[(0,o.Lk)("i",{class:"bi bi-exclamation-triangle-fill text-danger mb-3",style:{"font-size":"2rem"}}),(0,o.Lk)("p",null,"Are you sure you want to delete this product? This action cannot be undone.")],-1)),(0,o.Lk)("div",vl,[(0,o.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[18]||(t[18]=(...e)=>r.hideConfirmModal&&r.hideConfirmModal(...e))},"Cancel"),(0,o.Lk)("button",{type:"button",class:"btn btn-danger",onClick:t[19]||(t[19]=(...e)=>r.deleteProduct&&r.deleteProduct(...e)),disabled:r.isDeleting},[r.isDeleting?((0,o.uX)(),(0,o.CE)("span",fl)):((0,o.uX)(),(0,o.CE)("i",Ll)),(0,o.eW)(" "+(0,i.v_)(r.isDeleting?"Deleting...":"Delete"),1)],8,kl)])])])],512)])}var wl={setup(){const e=(0,O.KR)([]),t=(0,O.KR)(1),a=(0,O.KR)(5),s=(0,O.Kh)({id:null,name:"",description:"",price:0,stock:0,image:null}),i=(0,O.KR)(null),r=(0,O.KR)(null),l=(0,O.KR)(null),n=(0,O.KR)([]),c=(0,O.KR)(""),d=(0,O.KR)(null),u=(0,O.KR)(null),m=(0,O.KR)(null),p=(0,O.KR)(!0),g=(0,O.KR)(!1),b=(0,O.KR)(!1),h=(0,O.KR)(!1),{success:v,error:k}=le(),f=(0,O.Kh)({name:"",description:"",price:"",stock:""}),L=(0,o.EW)((()=>[...n.value].sort(((e,t)=>t.id-e.id)).slice(0,5))),y=()=>s.name.trim()?(f.name="",!0):(f.name="Product name is required",!1),w=()=>s.description.trim()?(f.description="",!0):(f.description="Product description is required",!1),C=()=>null===s.price||void 0===s.price?(f.price="Price is required",!1):s.price<0?(f.price="Price cannot be negative",!1):(f.price="",!0),P=()=>null===s.stock||void 0===s.stock?(f.stock="Stock quantity is required",!1):s.stock<0?(f.stock="Stock cannot be negative",!1):(f.stock="",!0),x=()=>{const e=y(),t=w(),a=C(),s=P();return e&&t&&a&&s},S=(0,o.EW)((()=>{let t=[...e.value];if(c.value){const e=c.value.toLowerCase();t=t.filter((t=>t.name.toLowerCase().includes(e)||t.description.toLowerCase().includes(e)))}return t})),E=(0,o.EW)((()=>Math.ceil(S.value.length/a.value))),M=(0,o.EW)((()=>{const e=(t.value-1)*a.value;return S.value.slice(e,e+a.value)})),I=(0,o.EW)((()=>e.value.filter((e=>e.stock<5)).length)),_=e=>e?e.startsWith("http")?e:`http://127.0.0.1:8000${e.startsWith("/")?e:"/media/"+e}`:"",A=e=>parseFloat(e).toFixed(2),D=(e,t)=>e?e.length>t?e.substring(0,t)+"...":e:"",T=e=>{const t={year:"numeric",month:"short",day:"numeric"};return new Date(e).toLocaleDateString(void 0,t)},F=e=>{e>=1&&e<=E.value&&(t.value=e,setTimeout((()=>{const e=document.querySelector(".card");e&&e.scrollIntoView({behavior:"smooth",block:"start"})}),100))},W=()=>{const e=[],a=5;if(E.value<=a)for(let t=1;t<=E.value;t++)e.push(t);else{e.push(1);let a=Math.max(2,t.value-1),s=Math.min(E.value-1,a+2);s===E.value-1&&(a=Math.max(2,s-2)),a>2&&e.push("...");for(let t=a;t<=s;t++)e.push(t);s<E.value-1&&e.push("..."),e.push(E.value)}return e},N=()=>{c.value="",t.value=1},R=async(t=!0)=>{t?p.value=!0:g.value=!0;try{console.log("ðŸ“¦ Fetching admin products...");const t=await $.get("products/");e.value=t.data||[],0===e.value.length?(console.warn("No admin products received from API"),k("No products available at the moment.")):console.log("âœ… Loaded",e.value.length,"admin products")}catch(a){console.error("Error fetching admin products:",a),k("Failed to load products. Please try refreshing the page.")}finally{p.value=!1,g.value=!1}},q=async()=>{await R(!1),v("Products refreshed successfully!")},X=async()=>{try{console.log("ðŸ“‹ Fetching admin orders...");const e=await $.get("orders/");n.value=e.data||[],0===n.value.length?console.warn("No admin orders received from API"):console.log("âœ… Loaded",n.value.length,"admin orders")}catch(e){console.error("Error fetching admin orders:",e),k("Failed to load orders.")}},H=e=>{Object.keys(f).forEach((e=>{f[e]=""})),s.id=e.id,s.name=e.name,s.description=e.description,s.price=e.price,s.stock=e.stock,s.image=e.image,i.value=null,r.value?r.value.show():d.value&&(r.value=new pe.aF(d.value),r.value.show())},B=()=>{r.value&&r.value.hide()},z=e=>{i.value=e.target.files[0]},J=()=>{x()?U():k("Please fix the errors in the form")},U=async()=>{b.value=!0;const e=new FormData;e.append("name",s.name),e.append("description",s.description),e.append("price",s.price),e.append("stock",s.stock),i.value&&e.append("image",i.value);try{await $.patch(`products/${s.id}/`,e,{headers:{"Content-Type":"multipart/form-data"}}),v("Product updated successfully!"),R(),B()}catch(t){if(console.error("Error updating product:",t),k("Failed to update product."),t.response&&t.response.data){const e=t.response.data;Object.keys(e).forEach((t=>{t in f&&(f[t]=e[t][0])}))}}finally{b.value=!1}},Q=e=>{m.value=e,l.value?l.value.show():u.value&&(l.value=new pe.aF(u.value),l.value.show())},j=()=>{l.value&&l.value.hide()},V=async()=>{if(m.value){h.value=!0;try{await $.delete(`products/${m.value}/`),v("Product deleted successfully."),R(),j()}catch(e){console.error("Error deleting product:",e),e.response&&e.response.data&&e.response.data.error?k(e.response.data.error):k("Cannot delete product. It may be in an order.")}finally{h.value=!1}}};return(0,o.sV)((async()=>{console.log("ðŸš€ MonitorProducts component mounted"),d.value&&(r.value=new pe.aF(d.value)),u.value&&(l.value=new pe.aF(u.value));const e=localStorage.getItem("access"),t="true"===localStorage.getItem("is_staff");if(!e||!t)return k("Access denied. Staff only."),void(window.location.href="/login");await K.waitForInitialization(),await Promise.all([R(),X()])})),(0,o.wB)((()=>K.isLoggedIn),(async e=>{e&&K.isInitialized&&K.isStaff&&await Promise.all([R(),X()])})),{products:e,filteredProducts:S,paginatedProducts:M,currentPage:t,totalPages:E,editProduct:s,editModal:d,confirmModal:u,orders:n,recentOrders:L,searchQuery:c,lowStockCount:I,isLoading:p,isRefreshing:g,isSubmitting:b,isDeleting:h,errors:f,fullImageUrl:_,formatPrice:A,truncate:D,formatDate:T,changePage:F,getPageNumbers:W,resetSearch:N,refreshProducts:q,openEditModal:H,closeEditModal:B,handleEditImage:z,validateAndSubmitEdit:J,confirmDeleteProduct:Q,hideConfirmModal:j,deleteProduct:V,validateName:y,validateDescription:w,validatePrice:C,validateStock:P}}};const Cl=(0,de.A)(wl,[["render",yl],["__scopeId","data-v-c746e78e"]]);var Pl=Cl;const xl={class:"container"},Sl={class:"admin-header mb-3 mb-md-4"},El={class:"admin-actions ms-auto"},Ml={class:"row"},Il={class:"col-12 col-lg-8 mx-auto"},_l={class:"card"},Al={class:"card-body p-3 p-md-4"},Dl={class:"mb-3"},Ol={class:"mb-3"},Tl={class:"row g-2 mb-3"},Fl={class:"col-12 col-md-6"},Wl={class:"input-group"},Nl={class:"col-12 col-md-6"},Rl={class:"mb-4"},ql={key:0,class:"image-preview mt-3"},Xl=["src"],Hl={class:"d-grid"},Bl=["disabled"],zl={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},Jl={key:1,class:"bi bi-plus-circle me-1 me-md-2"};function Ul(e,t,a,r,l,n){const c=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",xl,[(0,o.Lk)("div",Sl,[t[7]||(t[7]=(0,o.Lk)("h2",{class:"section-title"},[(0,o.Lk)("i",{class:"bi bi-plus-circle me-2"}),(0,o.eW)("Add New Product ")],-1)),(0,o.Lk)("div",El,[(0,o.bF)(c,{to:"/monitor-products",class:"btn btn-outline-primary btn-back"},{default:(0,o.k6)((()=>t[6]||(t[6]=[(0,o.Lk)("i",{class:"bi bi-arrow-left me-1 me-md-2"},null,-1),(0,o.Lk)("span",{class:"btn-text"},"Back to Products",-1)]))),_:1})])]),(0,o.Lk)("div",Ml,[(0,o.Lk)("div",Il,[(0,o.Lk)("div",_l,[(0,o.Lk)("div",Al,[(0,o.Lk)("form",{onSubmit:t[5]||(t[5]=(0,s.D$)(((...e)=>n.submitProduct&&n.submitProduct(...e)),["prevent"])),enctype:"multipart/form-data"},[(0,o.Lk)("div",Dl,[t[8]||(t[8]=(0,o.Lk)("label",{class:"form-label"},"Product Name",-1)),(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.product.name=e),class:"form-control form-control-md",placeholder:"Enter product name",required:""},null,512),[[s.Jo,l.product.name]])]),(0,o.Lk)("div",Ol,[t[9]||(t[9]=(0,o.Lk)("label",{class:"form-label"},"Description",-1)),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.product.description=e),class:"form-control form-control-md",placeholder:"Enter product description",rows:"4",required:""},null,512),[[s.Jo,l.product.description]])]),(0,o.Lk)("div",Tl,[(0,o.Lk)("div",Fl,[t[11]||(t[11]=(0,o.Lk)("label",{class:"form-label"},"Price (â‚±)",-1)),(0,o.Lk)("div",Wl,[t[10]||(t[10]=(0,o.Lk)("span",{class:"input-group-text"},"â‚±",-1)),(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=e=>l.product.price=e),class:"form-control form-control-md",placeholder:"0.00",min:"0",step:"0.01",required:""},null,512),[[s.Jo,l.product.price,void 0,{number:!0}]])])]),(0,o.Lk)("div",Nl,[t[12]||(t[12]=(0,o.Lk)("label",{class:"form-label"},"Stock Quantity",-1)),(0,o.bo)((0,o.Lk)("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=e=>l.product.stock=e),class:"form-control form-control-md",placeholder:"0",min:"0",required:""},null,512),[[s.Jo,l.product.stock,void 0,{number:!0}]])])]),(0,o.Lk)("div",Rl,[t[13]||(t[13]=(0,o.Lk)("label",{class:"form-label"},"Product Image",-1)),(0,o.Lk)("input",{type:"file",onChange:t[4]||(t[4]=(...e)=>n.handleImage&&n.handleImage(...e)),class:"form-control form-control-md",accept:"image/*"},null,32),l.imagePreview?((0,o.uX)(),(0,o.CE)("div",ql,[(0,o.Lk)("img",{src:l.imagePreview,alt:"Preview",class:"img-thumbnail"},null,8,Xl)])):(0,o.Q3)("",!0)]),(0,o.Lk)("div",Hl,[(0,o.Lk)("button",{type:"submit",class:"btn btn-primary btn-md btn-lg btn-add",disabled:l.isSubmitting},[l.isSubmitting?((0,o.uX)(),(0,o.CE)("span",zl)):((0,o.uX)(),(0,o.CE)("i",Jl)),(0,o.eW)(" "+(0,i.v_)(l.isSubmitting?"Adding...":"Add Product"),1)],8,Bl)])],32)])])])])])}var Ql={data(){return{product:{name:"",description:"",price:0,stock:0},image:null,imagePreview:null,isSubmitting:!1}},methods:{handleImage(e){if(this.image=e.target.files[0],this.image){const e=new FileReader;e.onload=e=>{this.imagePreview=e.target.result},e.readAsDataURL(this.image)}else this.imagePreview=null},async submitProduct(){this.isSubmitting=!0;const e=new FormData;for(let a in this.product)e.append(a,this.product[a]);this.image&&e.append("image",this.image);try{await $.post("products/",e,{headers:{"Content-Type":"multipart/form-data"}}),this.showNotification("success","Product added successfully!"),this.product={name:"",description:"",price:0,stock:0},this.image=null,this.imagePreview=null,setTimeout((()=>{this.$router.push("/monitor-products")}),1500)}catch(t){this.showNotification("error","Failed to add product."),console.error(t)}finally{this.isSubmitting=!1}},showNotification(e,t){const a=document.createElement("div");a.className=`notification notification-${e}`;let s="bi-info-circle";"success"===e&&(s="bi-check-circle"),"warning"===e&&(s="bi-exclamation-triangle"),"error"===e&&(s="bi-x-circle"),a.innerHTML=`<i class="bi ${s}"></i> ${t}`,document.body.appendChild(a),setTimeout((()=>{a.classList.add("show")}),10),setTimeout((()=>{a.classList.remove("show"),setTimeout((()=>{document.body.removeChild(a)}),300)}),3e3)}},mounted(){const e=localStorage.getItem("access"),t="true"===localStorage.getItem("is_staff");e&&t||(this.showNotification("error","Access denied. Staff only."),this.$router.push("/login"))}};const jl=(0,de.A)(Ql,[["render",Ul],["__scopeId","data-v-3514f77c"]]);var Kl=jl;const Vl=[{path:"/",component:We},{path:"/login",component:Ye},{path:"/products",component:zt},{path:"/cart",component:Ua},{path:"/orders",component:po},{path:"/monitor",component:Ki},{path:"/monitor-products",component:Pl},{path:"/add-product",component:Kl}],Zl=(0,Y.aE)({history:(0,Y.Bt)(),routes:Vl});Zl.beforeEach(((e,t,a)=>{const s=!!localStorage.getItem("access"),o="true"===localStorage.getItem("is_staff"),i=["/login"],r=["/monitor","/monitor-products","/add-product"],l=["/products","/cart","/orders"],n=["/"];return n.includes(e.path)?a():s||i.includes(e.path)||n.includes(e.path)?s&&i.includes(e.path)?a(o?"/monitor":"/products"):s&&o&&l.includes(e.path)?a("/monitor"):s&&!o&&r.includes(e.path)?a("/products"):void a():a("/")}));var $l=Zl;const Yl=window.location.hostname.includes("github.io")||!0;Yl&&(console.log("ðŸš€ Running in demo mode with comprehensive mock data"),(0,F.initializeMockData)(),(0,X.aw)(),console.log("ðŸ“Š Mock data initialized:"),console.log("- Products:",JSON.parse(localStorage.getItem("adminMockProducts")||"[]").length),console.log("- Orders:",JSON.parse(localStorage.getItem("adminMockOrders")||"[]").length),console.log("- Demo Credentials:"),console.log('  Admin: username="admin", password="admin"'),console.log('  Customer: username="user", password="user"'));const Gl=(0,s.Ef)(he);Gl.use($l),Gl.provide("auth",K),Gl.mount("#app")},4821:function(e,t,a){a.d(t,{aw:function(){return l},ensureAdminMockDataExists:function(){return n}});a(4114),a(8111),a(2489),a(116),a(7588),a(8237),a(7642),a(8004),a(3853),a(5876),a(2475),a(5024),a(1698);const s=()=>[{id:1,name:"Premium Wireless Headphones",description:"Experience crystal-clear sound with our premium wireless headphones. Features active noise cancellation, 20-hour battery life, and premium leather comfort padding.",price:1299.99,stock:15,image:"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8cHJvZHVjdHxlbnwwfHwwfHx8MA%3D%3D",category:"Electronics",sku:"WH-001",created_at:"2024-01-15T10:30:00Z",updated_at:"2024-01-20T14:45:00Z"},{id:2,name:"Smart Fitness Watch",description:"Track your fitness goals with this advanced smartwatch. Monitors heart rate, steps, sleep quality, GPS tracking, and includes 50+ workout modes.",price:899.5,stock:8,image:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTB8fHByb2R1Y3R8ZW58MHx8MHx8fDA%3D",category:"Wearables",sku:"SW-002",created_at:"2024-01-10T09:15:00Z",updated_at:"2024-01-25T16:20:00Z"},{id:3,name:'Ultra HD Smart TV 55"',description:"Transform your living room with this 55-inch Ultra HD Smart TV. Features AI-powered picture quality, Dolby Atmos sound, and built-in streaming apps.",price:3499.99,stock:5,image:"https://images.unsplash.com/photo-1567690187548-f07b1d7bf5a9?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8OHx8dHZ8ZW58MHx8MHx8fDA%3D",category:"Electronics",sku:"TV-003",created_at:"2024-01-05T11:00:00Z",updated_at:"2024-01-30T13:10:00Z"},{id:4,name:"Professional Camera Kit",description:"Capture stunning photos and videos with this professional-grade camera kit. Includes 24-70mm lens, 50mm prime lens, tripod, and camera bag.",price:4999,stock:3,image:"https://images.unsplash.com/photo-1526170375885-4d8ecf77b99f?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8cHJvZHVjdHxlbnwwfHwwfHx8MA%3D%3D",category:"Photography",sku:"CAM-004",created_at:"2024-01-08T14:30:00Z",updated_at:"2024-02-01T10:15:00Z"},{id:5,name:"Ergonomic Office Chair",description:"Work in comfort with this ergonomic office chair. Features adjustable height, lumbar support, breathable mesh back, and 360-degree swivel.",price:1299,stock:12,image:"https://images.unsplash.com/photo-1596162954151-cdcb4c0f70a8?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTJ8fGNoYWlyfGVufDB8fDB8fHww",category:"Furniture",sku:"CHR-005",created_at:"2024-01-12T08:45:00Z",updated_at:"2024-01-28T15:30:00Z"},{id:6,name:"Portable Bluetooth Speaker",description:"Take your music anywhere with this waterproof portable Bluetooth speaker. Features 12-hour battery life, deep bass, and hands-free calling.",price:599.99,stock:20,image:"https://images.unsplash.com/photo-1608043152269-423dbba4e7e1?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8Ymx1ZXRvb3RoJTIwc3BlYWtlcnxlbnwwfHwwfHx8MA%3D%3D",category:"Audio",sku:"SPK-006",created_at:"2024-01-18T12:20:00Z",updated_at:"2024-02-03T09:40:00Z"},{id:7,name:"Gaming Laptop Pro",description:"Experience lag-free gaming with this high-performance gaming laptop. Features RTX 4070 graphics, 32GB RAM, 1TB SSD, and RGB mechanical keyboard.",price:5999,stock:7,image:"https://images.unsplash.com/photo-1603302576837-37561b2e2302?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTh8fGxhcHRvcHxlbnwwfHwwfHx8MA%3D%3D",category:"Computers",sku:"LAP-007",created_at:"2024-01-22T16:10:00Z",updated_at:"2024-02-05T11:25:00Z"},{id:8,name:"Coffee Maker Deluxe",description:"Brew perfect coffee every time with this programmable coffee maker. Features built-in grinder, thermal carafe, and multiple brewing strength options.",price:799.5,stock:9,image:"https://images.unsplash.com/photo-1570286424717-86d8a0082d0b?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTB8fGNvZmZlZSUyMG1ha2VyfGVufDB8fDB8fHww",category:"Kitchen",sku:"COF-008",created_at:"2024-01-25T13:55:00Z",updated_at:"2024-02-07T14:20:00Z"},{id:9,name:"Smartphone Pro Max",description:"Stay connected with our latest flagship smartphone. Features 108MP camera system, all-day battery life, 5G connectivity, and premium titanium build.",price:4299,stock:0,image:"https://images.unsplash.com/photo-1598327105666-5b89351aff97?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTZ8fHNtYXJ0cGhvbmV8ZW58MHx8MHx8fDA%3D",category:"Mobile",sku:"PHN-009",created_at:"2024-01-30T10:40:00Z",updated_at:"2024-02-10T16:50:00Z"},{id:10,name:"Wireless Charging Pad",description:"Charge your devices without the hassle of cables. Compatible with all Qi-enabled smartphones, fast charging up to 15W, with LED indicator.",price:299.99,stock:25,image:"https://images.unsplash.com/photo-1622445275463-afa2ab738c34?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8Y2hhcmdlcnxlbnwwfHwwfHx8MA%3D%3D",category:"Accessories",sku:"CHG-010",created_at:"2024-02-01T09:30:00Z",updated_at:"2024-02-12T12:15:00Z"},{id:11,name:"Smart Home Hub",description:"Control all your smart home devices from one central hub. Compatible with Alexa, Google Assistant, and most popular smart home brands.",price:899,stock:4,image:"https://images.unsplash.com/photo-1558002038-1055907df827?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8c21hcnQlMjBob21lfGVufDB8fDB8fHww",category:"Smart Home",sku:"HUB-011",created_at:"2024-02-03T15:20:00Z",updated_at:"2024-02-14T08:45:00Z"},{id:12,name:"Mechanical Gaming Keyboard",description:"Enhance your gaming experience with this mechanical keyboard. Features Cherry MX switches, customizable RGB lighting, and programmable macro keys.",price:499.5,stock:15,image:"https://images.unsplash.com/photo-1618384887929-16ec33fab9ef?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8a2V5Ym9hcmR8ZW58MHx8MHx8fDA%3D",category:"Gaming",sku:"KEY-012",created_at:"2024-02-05T11:10:00Z",updated_at:"2024-02-15T13:30:00Z"},{id:13,name:"4K Webcam Pro",description:"Professional 4K webcam for streaming and video calls. Features auto-focus, noise reduction, wide-angle lens, and plug-and-play setup.",price:399.99,stock:18,image:"https://images.unsplash.com/photo-1587825140708-dfaf72ae4b04?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8d2ViY2FtfGVufDB8fDB8fHww",category:"Electronics",sku:"WEB-013",created_at:"2024-02-08T14:25:00Z",updated_at:"2024-02-16T10:20:00Z"},{id:14,name:"Wireless Mouse Elite",description:"Precision wireless mouse with ergonomic design. Features 16000 DPI sensor, 7 programmable buttons, and 70-hour battery life.",price:199.99,stock:22,image:"https://images.unsplash.com/photo-1527864550417-7fd91fc51a46?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8bW91c2V8ZW58MHx8MHx8fDA%3D",category:"Accessories",sku:"MOU-014",created_at:"2024-02-10T16:40:00Z",updated_at:"2024-02-17T09:15:00Z"},{id:15,name:'Tablet Pro 12.9"',description:"Powerful tablet for work and creativity. Features M2 chip, 12.9-inch Liquid Retina display, Apple Pencil support, and all-day battery life.",price:3299,stock:6,image:"https://images.unsplash.com/photo-1544244015-0df4b3ffc6b0?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8dGFibGV0fGVufDB8fDB8fHww",category:"Mobile",sku:"TAB-015",created_at:"2024-02-12T12:50:00Z",updated_at:"2024-02-18T15:35:00Z"}],o=e=>{const t=[{id:1,name:"John Doe",email:"john.doe@email.com",phone:"+1-555-0123"},{id:2,name:"Jane Smith",email:"jane.smith@email.com",phone:"+1-555-0124"},{id:3,name:"Robert Johnson",email:"robert.j@email.com",phone:"+1-555-0125"},{id:4,name:"Emily Davis",email:"emily.davis@email.com",phone:"+1-555-0126"},{id:5,name:"Michael Brown",email:"m.brown@email.com",phone:"+1-555-0127"},{id:6,name:"Sarah Wilson",email:"sarah.w@email.com",phone:"+1-555-0128"},{id:7,name:"David Miller",email:"david.miller@email.com",phone:"+1-555-0129"},{id:8,name:"Lisa Anderson",email:"lisa.anderson@email.com",phone:"+1-555-0130"},{id:9,name:"James Taylor",email:"james.taylor@email.com",phone:"+1-555-0131"},{id:10,name:"Maria Garcia",email:"maria.garcia@email.com",phone:"+1-555-0132"}],a=(e=60)=>{const t=new Date,a=Math.floor(Math.random()*e);return t.setDate(t.getDate()-a),t.setHours(Math.floor(24*Math.random())),t.setMinutes(Math.floor(60*Math.random())),t.toISOString()},s=["pending","processing","shipped","delivered","cancelled"],o=()=>{const e=[.1,.2,.3,.35,.05],t=Math.random();let a=0;for(let o=0;o<e.length;o++)if(a+=e[o],t<=a)return s[o];return"delivered"},i=["123 Main St, New York, NY 10001","456 Oak Ave, Los Angeles, CA 90210","789 Pine Rd, Chicago, IL 60601","321 Elm St, Houston, TX 77001","654 Maple Dr, Phoenix, AZ 85001","987 Cedar Ln, Philadelphia, PA 19101","147 Birch Way, San Antonio, TX 78201","258 Spruce St, San Diego, CA 92101","369 Willow Ave, Dallas, TX 75201","741 Poplar Rd, San Jose, CA 95101"],r=[{type:"credit_card",last4:"4242",brand:"Visa"},{type:"credit_card",last4:"5555",brand:"Mastercard"},{type:"credit_card",last4:"3782",brand:"American Express"},{type:"paypal",email:"user@paypal.com"},{type:"apple_pay",device:"iPhone"},{type:"google_pay",device:"Android"}],l=t=>{const a=Math.floor(5*Math.random())+1,s=[],o=new Set;for(let i=0;i<a;i++){let a,r=0;do{a=e[Math.floor(Math.random()*e.length)],r++}while(o.has(a.id)&&r<10);o.add(a.id),s.push({id:100*t+i,order:t,product:a.id,quantity:Math.floor(3*Math.random())+1,price_at_time:a.price})}return s},n=(e,t)=>{let a=0;e.forEach((e=>{const s=t.find((t=>t.id===e.product));s&&(a+=(e.price_at_time||s.price)*e.quantity)}));const s=.08*a,o=a>1e3?0:50,i=a+s+o;return{subtotal:a,tax:s,shipping:o,total:i}},c=[];for(let d=1;d<=25;d++){const s=t[Math.floor(Math.random()*t.length)],u=l(d),m=n(u,e),p=o(),g=r[Math.floor(Math.random()*r.length)],b=i[Math.floor(Math.random()*i.length)];c.push({id:d,customer:s.name,customer_email:s.email,customer_phone:s.phone,date_ordered:a(),status:p,complete:"delivered"===p||"shipped"===p,items:u,subtotal:m.subtotal,tax:m.tax,shipping:m.shipping,total:m.total,payment_method:g,shipping_address:b,tracking_number:"shipped"===p||"delivered"===p?`TRK${Math.random().toString(36).substr(2,9).toUpperCase()}`:null,notes:d%5===0?"Customer requested expedited shipping":null})}return c.sort(((e,t)=>new Date(t.date_ordered)-new Date(e.date_ordered)))},i=e=>{const t=new Date,a=new Date(t.getTime()-2592e6),s=new Date(t.getTime()-6048e5),o=e.filter((e=>new Date(e.date_ordered)>=a)),i=e.filter((e=>new Date(e.date_ordered)>=s)),r=e.filter((e=>{const a=new Date(e.date_ordered);return a.toDateString()===t.toDateString()})),l=e=>e.reduce(((e,t)=>(e.revenue+=t.total||0,e.orders+=1,e.items+=t.items?t.items.length:0,e)),{revenue:0,orders:0,items:0});return{today:l(r),last7Days:l(i),last30Days:l(o),total:l(e)}},r=e=>{const t=[];return e.forEach((e=>{0===e.stock?t.push({id:`alert-${e.id}`,type:"out_of_stock",product_id:e.id,product_name:e.name,message:`${e.name} is out of stock`,severity:"high",created_at:(new Date).toISOString()}):e.stock<5&&t.push({id:`alert-${e.id}`,type:"low_stock",product_id:e.id,product_name:e.name,message:`${e.name} has low stock (${e.stock} remaining)`,severity:"medium",created_at:(new Date).toISOString()})})),t},l=(e=!1)=>{console.log("ðŸ”„ Initializing admin mock data...");const t=window.location.hostname.includes("github.io")||!0,a="true"===localStorage.getItem("adminDataInitialized"),l=localStorage.getItem("adminMockProducts"),n=localStorage.getItem("adminMockOrders");if(!a||e||!l||!n||t){console.log("ðŸ”„ Generating fresh admin products...");const e=s();localStorage.setItem("adminMockProducts",JSON.stringify(e)),console.log("ðŸ”„ Generating fresh admin orders...");const t=o(e);localStorage.setItem("adminMockOrders",JSON.stringify(t)),console.log("ðŸ”„ Generating admin analytics and alerts...");const a=i(t),l=r(e);return localStorage.setItem("adminAnalytics",JSON.stringify(a)),localStorage.setItem("adminAlerts",JSON.stringify(l)),localStorage.setItem("adminDataInitialized","true"),console.log("âœ… Admin mock data initialized with",e.length,"products and",t.length,"orders"),{products:e,orders:t,analytics:a,alerts:l}}return{products:JSON.parse(localStorage.getItem("adminMockProducts")||"[]"),orders:JSON.parse(localStorage.getItem("adminMockOrders")||"[]"),analytics:JSON.parse(localStorage.getItem("adminAnalytics")||"{}"),alerts:JSON.parse(localStorage.getItem("adminAlerts")||"[]")}},n=()=>{console.log("ðŸ”§ Ensuring admin mock data exists...");const e=JSON.parse(localStorage.getItem("adminMockProducts")||"[]"),t=JSON.parse(localStorage.getItem("adminMockOrders")||"[]"),a="true"===localStorage.getItem("adminDataInitialized");return 0!==e.length&&0!==t.length&&a?(console.log("âœ… Admin mock data exists:",e.length,"products,",t.length,"orders"),{products:e,orders:t,analytics:c(),alerts:d()}):(console.log("ðŸ”§ Admin mock data missing or incomplete, reinitializing..."),l(!0))},c=()=>{const e=JSON.parse(localStorage.getItem("adminAnalytics")||"{}");if(0===Object.keys(e).length){const e=JSON.parse(localStorage.getItem("adminMockOrders")||"[]"),t=i(e);return localStorage.setItem("adminAnalytics",JSON.stringify(t)),t}return e},d=()=>{const e=JSON.parse(localStorage.getItem("adminAlerts")||"[]");if(0===e.length){const e=JSON.parse(localStorage.getItem("adminMockProducts")||"[]"),t=r(e);return localStorage.setItem("adminAlerts",JSON.stringify(t)),t}return e},u=(e,t)=>{const a=JSON.parse(localStorage.getItem("adminMockOrders")||"[]"),s=a.findIndex((t=>t.id===e));return-1!==s?(a[s].status=t,a[s].complete="delivered"===t||"shipped"===t,"shipped"!==t||a[s].tracking_number||(a[s].tracking_number=`TRK${Math.random().toString(36).substr(2,9).toUpperCase()}`),localStorage.setItem("adminMockOrders",JSON.stringify(a)),a[s]):null};t.Ay={initializeAdminMockData:l,ensureAdminMockDataExists:n,getAdminAnalytics:c,getAdminAlerts:d,updateOrderStatus:u}}},t={};function a(s){var o=t[s];if(void 0!==o)return o.exports;var i=t[s]={exports:{}};return e[s].call(i.exports,i,i.exports,a),i.exports}a.m=e,function(){var e=[];a.O=function(t,s,o,i){if(!s){var r=1/0;for(d=0;d<e.length;d++){s=e[d][0],o=e[d][1],i=e[d][2];for(var l=!0,n=0;n<s.length;n++)(!1&i||r>=i)&&Object.keys(a.O).every((function(e){return a.O[e](s[n])}))?s.splice(n--,1):(l=!1,i<r&&(r=i));if(l){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[s,o,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var o,i,r=s[0],l=s[1],n=s[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(o in l)a.o(l,o)&&(a.m[o]=l[o]);if(n)var d=n(a)}for(t&&t(s);c<r.length;c++)i=r[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(d)},s=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[504],(function(){return a(4038)}));s=a.O(s)})();
//# sourceMappingURL=app.6e217cf2.js.map