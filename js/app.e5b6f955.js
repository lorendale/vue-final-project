(function(){"use strict";var e={412:function(e,t,a){var s=a(5130),r=a(6768),o=a(4232);const i={class:"app-container"},n={class:"navbar navbar-expand-lg navbar-dark"},l={class:"container"},c={class:"collapse navbar-collapse",id:"navbarContent",ref:"navbarCollapse"},d={class:"navbar-nav me-auto mb-2 mb-lg-0"},u={key:0,class:"nav-item"},m={key:1,class:"nav-item"},p={key:2,class:"nav-item"},g={key:3,class:"nav-item"},h={key:4,class:"nav-item"},k={key:0,class:"cart-badge"},b={key:5,class:"nav-item"},f={class:"navbar-nav ms-auto"},v={key:0,class:"nav-item"},y={key:1,class:"nav-item d-flex align-items-center user-nav-item"},L={class:"user-info d-flex align-items-center"},w={class:"main-content"},P={class:"footer mt-auto py-3"},C={class:"container"},x={class:"row"},M={class:"col-md-4 mb-3 mb-md-0"},S={class:"footer-links"};function E(e,t,a,E,_,I){const A=(0,r.g2)("router-link"),D=(0,r.g2)("router-view"),O=(0,r.g2)("ToastNotification");return(0,r.uX)(),(0,r.CE)("div",i,[(0,r.Lk)("nav",n,[(0,r.Lk)("div",l,[(0,r.bF)(A,{class:"navbar-brand",to:E.auth&&E.auth.isLoggedIn?E.auth.isStaff?"/monitor":"/products":"/login"},{default:(0,r.k6)((()=>t[2]||(t[2]=[(0,r.Lk)("i",{class:"bi bi-bag-heart-fill me-2"},null,-1),(0,r.eW)("Bluora ")]))),_:1},8,["to"]),(0,r.Lk)("button",{class:"navbar-toggler",type:"button",onClick:t[0]||(t[0]=(...e)=>E.toggleNavbar&&E.toggleNavbar(...e)),"aria-controls":"navbarContent","aria-expanded":"false","aria-label":"Toggle navigation"},t[3]||(t[3]=[(0,r.Lk)("span",{class:"navbar-toggler-icon"},null,-1)])),(0,r.Lk)("div",c,[(0,r.Lk)("ul",d,[E.auth.isLoggedIn&&E.auth.isStaff?((0,r.uX)(),(0,r.CE)("li",u,[(0,r.bF)(A,{class:"nav-link",to:"/monitor-products",onClick:E.closeNavbar},{default:(0,r.k6)((()=>t[4]||(t[4]=[(0,r.Lk)("i",{class:"bi bi-box-seam me-1"},null,-1),(0,r.eW)(" Products ")]))),_:1},8,["onClick"])])):(0,r.Q3)("",!0),E.auth.isLoggedIn&&E.auth.isStaff?((0,r.uX)(),(0,r.CE)("li",m,[(0,r.bF)(A,{class:"nav-link",to:"/add-product",onClick:E.closeNavbar},{default:(0,r.k6)((()=>t[5]||(t[5]=[(0,r.Lk)("i",{class:"bi bi-plus-circle me-1"},null,-1),(0,r.eW)(" Add Product ")]))),_:1},8,["onClick"])])):(0,r.Q3)("",!0),E.auth.isLoggedIn&&E.auth.isStaff?((0,r.uX)(),(0,r.CE)("li",p,[(0,r.bF)(A,{class:"nav-link",to:"/monitor",onClick:E.closeNavbar},{default:(0,r.k6)((()=>t[6]||(t[6]=[(0,r.Lk)("i",{class:"bi bi-clipboard-check me-1"},null,-1),(0,r.eW)(" Orders ")]))),_:1},8,["onClick"])])):(0,r.Q3)("",!0),E.auth.isLoggedIn&&!E.auth.isStaff?((0,r.uX)(),(0,r.CE)("li",g,[(0,r.bF)(A,{class:"nav-link",to:"/products",onClick:E.closeNavbar},{default:(0,r.k6)((()=>t[7]||(t[7]=[(0,r.Lk)("i",{class:"bi bi-shop me-1"},null,-1),(0,r.eW)(" Shop ")]))),_:1},8,["onClick"])])):(0,r.Q3)("",!0),E.auth.isLoggedIn&&!E.auth.isStaff?((0,r.uX)(),(0,r.CE)("li",h,[(0,r.bF)(A,{class:"nav-link position-relative",to:"/cart",onClick:E.closeNavbar},{default:(0,r.k6)((()=>[t[8]||(t[8]=(0,r.Lk)("i",{class:"bi bi-cart me-1"},null,-1)),t[9]||(t[9]=(0,r.eW)(" Cart ")),E.cartCount>0?((0,r.uX)(),(0,r.CE)("span",k,(0,o.v_)(E.cartCount),1)):(0,r.Q3)("",!0)])),_:1},8,["onClick"])])):(0,r.Q3)("",!0),E.auth.isLoggedIn&&!E.auth.isStaff?((0,r.uX)(),(0,r.CE)("li",b,[(0,r.bF)(A,{class:"nav-link",to:"/orders",onClick:E.closeNavbar},{default:(0,r.k6)((()=>t[10]||(t[10]=[(0,r.Lk)("i",{class:"bi bi-clock-history me-1"},null,-1),(0,r.eW)(" Orders ")]))),_:1},8,["onClick"])])):(0,r.Q3)("",!0)]),(0,r.Lk)("ul",f,[E.auth.isLoggedIn?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("li",v,["register"===e.$route.name?((0,r.uX)(),(0,r.Wv)(A,{key:0,class:"nav-link",to:"/login",onClick:E.closeNavbar},{default:(0,r.k6)((()=>t[11]||(t[11]=[(0,r.Lk)("i",{class:"bi bi-box-arrow-in-right me-1"},null,-1),(0,r.eW)(" Login ")]))),_:1},8,["onClick"])):((0,r.uX)(),(0,r.Wv)(A,{key:1,class:"nav-link",to:"/register",onClick:E.closeNavbar},{default:(0,r.k6)((()=>t[12]||(t[12]=[(0,r.Lk)("i",{class:"bi bi-person-plus me-1"},null,-1),(0,r.eW)(" Register ")]))),_:1},8,["onClick"]))])),E.auth.isLoggedIn?((0,r.uX)(),(0,r.CE)("li",y,[(0,r.Lk)("div",L,[t[13]||(t[13]=(0,r.Lk)("i",{class:"bi bi-person-circle me-1"},null,-1)),(0,r.Lk)("span",null,(0,o.v_)(E.username),1)]),(0,r.Lk)("button",{class:"btn btn-outline-light btn-sm ms-2",onClick:t[1]||(t[1]=(...e)=>E.logout&&E.logout(...e))},t[14]||(t[14]=[(0,r.Lk)("i",{class:"bi bi-box-arrow-right me-1"},null,-1),(0,r.eW)(" Logout ")]))])):(0,r.Q3)("",!0)])],512)])]),(0,r.Lk)("main",w,[(0,r.bF)(D,null,{default:(0,r.k6)((({Component:t})=>[(0,r.bF)(s.eB,{name:"fade",mode:"out-in"},{default:(0,r.k6)((()=>[((0,r.uX)(),(0,r.Wv)((0,r.$y)(t),{key:e.$route.fullPath}))])),_:2},1024)])),_:1})]),(0,r.Lk)("footer",P,[(0,r.Lk)("div",C,[(0,r.Lk)("div",x,[t[19]||(t[19]=(0,r.Lk)("div",{class:"col-md-4 mb-3 mb-md-0"},[(0,r.Lk)("h5",{class:"footer-heading"},"Bluora"),(0,r.Lk)("p",{class:"footer-text"},"Your one-stop shop for all your needs. Quality products at affordable prices.")],-1)),(0,r.Lk)("div",M,[t[18]||(t[18]=(0,r.Lk)("h5",{class:"footer-heading"},"Quick Links",-1)),(0,r.Lk)("ul",S,[(0,r.Lk)("li",null,[(0,r.bF)(A,{to:"/products"},{default:(0,r.k6)((()=>t[15]||(t[15]=[(0,r.eW)("Products")]))),_:1})]),(0,r.Lk)("li",null,[(0,r.bF)(A,{to:"/cart"},{default:(0,r.k6)((()=>t[16]||(t[16]=[(0,r.eW)("Cart")]))),_:1})]),(0,r.Lk)("li",null,[(0,r.bF)(A,{to:"/orders"},{default:(0,r.k6)((()=>t[17]||(t[17]=[(0,r.eW)("Orders")]))),_:1})])])]),t[20]||(t[20]=(0,r.Fv)('<div class="col-md-4"><h5 class="footer-heading">Contact Us</h5><p class="footer-text"><i class="bi bi-envelope me-2"></i> support@bluora.com<br><i class="bi bi-telephone me-2"></i> +1 (123) 456-7890<br><i class="bi bi-geo-alt me-2"></i> 123 E-Commerce St, Digital City </p></div>',1))]),t[21]||(t[21]=(0,r.Fv)('<div class="footer-bottom"><p class="mb-0">Â© 2025 Bluora. All rights reserved.</p><div class="social-icons"><a href="#" class="social-icon"><i class="bi bi-facebook"></i></a><a href="#" class="social-icon"><i class="bi bi-twitter"></i></a><a href="#" class="social-icon"><i class="bi bi-instagram"></i></a></div></div>',1))])]),(0,r.bF)(O)])}a(4114);var _=a(144),I=a(4373),A=(a(8111),a(2489),a(116),a(568));A.Ay.ensureMockDataExists();const D=(e=300)=>new Promise((t=>setTimeout(t,e))),O={getProducts:async()=>{await D();try{const e=A.Ay.getMockProducts();return console.log("ðŸ“¦ Fetched",e.length,"products from mock API"),{data:e}}catch(e){return console.error("Error fetching products:",e),A.Ay.ensureMockDataExists(),{data:A.Ay.getMockProducts()}}},getProduct:async e=>{await D();const t=A.Ay.getMockProducts(),a=t.find((t=>t.id===Number.parseInt(e)));return a?{data:a}:Promise.reject({response:{status:404,data:{error:"Product not found"}}})},createProduct:async e=>{await D(500);const t=A.Ay.addMockProduct(e);return{data:t}},updateProduct:async(e,t)=>{await D(500);const a=A.Ay.updateMockProduct(Number.parseInt(e),t);return a?{data:a}:Promise.reject({response:{status:404,data:{error:"Product not found"}}})},deleteProduct:async e=>{await D(500);const t=A.Ay.deleteMockProduct(Number.parseInt(e));return t?{data:{success:!0}}:Promise.reject({response:{status:404,data:{error:"Product not found"}}})},getOrders:async()=>{await D();try{const e=A.Ay.getMockOrders();return console.log("ðŸ“‹ Fetched",e.length,"orders from mock API"),{data:e}}catch(e){return console.error("Error fetching orders:",e),A.Ay.ensureMockDataExists(),{data:A.Ay.getMockOrders()}}},createOrder:async e=>{await D(800);const t=A.Ay.addMockOrder(e);return{data:t}},login:async e=>(await D(1e3),"admin"===e.username&&"admin"===e.password?{data:{access:"mock-token-admin",refresh:"mock-refresh-token",user:{id:1,username:"admin",is_staff:!0}}}:"user"===e.username&&"user"===e.password?{data:{access:"mock-token-user",refresh:"mock-refresh-token",user:{id:2,username:"user",is_staff:!1}}}:Promise.reject({response:{status:401,data:{detail:"Invalid username or password"}}})),register:async e=>(await D(1e3),"admin"===e.username||"user"===e.username?Promise.reject({response:{status:400,data:{username:["This username is already taken."]}}}):{data:{id:3,username:e.username,is_staff:!1}}),getUser:async()=>{await D();const e="true"===localStorage.getItem("is_staff"),t=localStorage.getItem("user_id")||(e?"1":"2"),a=localStorage.getItem("username")||(e?"admin":"user");return{data:{id:Number.parseInt(t),username:a,is_staff:e}}},request:async e=>{const{method:t="get",url:a,data:s}=e,r=a.split("/").filter(Boolean),o=r[0],i=r[1]?Number.parseInt(r[1]):null;switch(o){case"products":if("get"===t)return i?O.getProduct(i):O.getProducts();if("post"===t)return O.createProduct(s);if("put"===t||"patch"===t)return O.updateProduct(i,s);if("delete"===t)return O.deleteProduct(i);break;case"orders":if("get"===t)return O.getOrders();if("post"===t)return O.createOrder(s);break;case"token":if("post"===t)return O.login(s);break;case"register":if("post"===t)return O.register(s);break;case"user":if("get"===t)return O.getUser();break;case"order-items":if("post"===t)return await D(300),{data:{...s,id:Math.floor(1e3*Math.random())}};break}return Promise.reject({response:{status:404,data:{error:"Endpoint not found"}}})}},T=new Proxy(O,{get:(e,t)=>["get","post","put","patch","delete"].includes(t)?(a,s,r={})=>e.request({method:t,url:a,data:s,...r}):e[t]});var F=T,W=(a(7588),a(1701),a(8237),a(3579),a(4821));const R=()=>{console.log("ðŸš€ Initializing admin mock API service...");const e=window.location.hostname.includes("github.io")||!0;e?(console.log("ðŸŽ­ Demo mode detected, forcing admin data initialization..."),W.Ay.initializeAdminMockData(!0)):W.Ay.ensureAdminMockDataExists()};R();const X=(e=200)=>new Promise((t=>setTimeout(t,e))),N={getProducts:async()=>{console.log("ðŸ“¦ Admin API: Fetching products..."),await X();try{const e=W.Ay.ensureAdminMockDataExists(),t=e.products||[];if(0===t.length){console.log("âš ï¸ No admin products found, forcing reinitialize...");const e=W.Ay.initializeAdminMockData(!0);return console.log("âœ… Fresh admin products generated:",e.products.length),{data:e.products}}return console.log("âœ… Admin products loaded successfully:",t.length),{data:t}}catch(e){console.error("âŒ Error loading admin products:",e);const t=W.Ay.initializeAdminMockData(!0);return{data:t.products}}},getProduct:async e=>{await X();const t=W.Ay.ensureAdminMockDataExists(),a=t.products||[],s=a.find((t=>t.id===Number.parseInt(e)));return s?{data:s}:Promise.reject({response:{status:404,data:{error:"Product not found"}}})},createProduct:async e=>{await X(800);const t=W.Ay.ensureAdminMockDataExists(),a=t.products||[],s={...e,id:a.length>0?Math.max(...a.map((e=>e.id)))+1:1,sku:`PRD-${String(a.length+1).padStart(3,"0")}`,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),category:e.category||"General"};a.push(s),localStorage.setItem("adminMockProducts",JSON.stringify(a));const r=JSON.parse(localStorage.getItem("mockProducts")||"[]");return r.push(s),localStorage.setItem("mockProducts",JSON.stringify(r)),{data:s}},updateProduct:async(e,t)=>{await X(600);const a=W.Ay.ensureAdminMockDataExists(),s=a.products||[],r=s.findIndex((t=>t.id===Number.parseInt(e)));if(-1===r)return Promise.reject({response:{status:404,data:{error:"Product not found"}}});s[r]={...s[r],...t,updated_at:(new Date).toISOString()},localStorage.setItem("adminMockProducts",JSON.stringify(s));const o=JSON.parse(localStorage.getItem("mockProducts")||"[]"),i=o.findIndex((t=>t.id===Number.parseInt(e)));return-1!==i&&(o[i]=s[r],localStorage.setItem("mockProducts",JSON.stringify(o))),{data:s[r]}},deleteProduct:async e=>{await X(500);const t=W.Ay.ensureAdminMockDataExists(),a=t.products||[],s=t.orders||[],r=s.some((t=>t.items.some((t=>t.product===Number.parseInt(e)))));if(r)return Promise.reject({response:{status:400,data:{error:"Cannot delete product. It exists in one or more orders."}}});const o=a.filter((t=>t.id!==Number.parseInt(e)));if(o.length===a.length)return Promise.reject({response:{status:404,data:{error:"Product not found"}}});localStorage.setItem("adminMockProducts",JSON.stringify(o));const i=JSON.parse(localStorage.getItem("mockProducts")||"[]"),n=i.filter((t=>t.id!==Number.parseInt(e)));return localStorage.setItem("mockProducts",JSON.stringify(n)),{data:{success:!0}}},getOrders:async()=>{console.log("ðŸ“‹ Admin API: Fetching orders..."),await X();try{const e=W.Ay.ensureAdminMockDataExists(),t=e.orders||[];if(0===t.length){console.log("âš ï¸ No admin orders found, forcing reinitialize...");const e=W.Ay.initializeAdminMockData(!0);return console.log("âœ… Fresh admin orders generated:",e.orders.length),{data:e.orders}}return console.log("âœ… Admin orders loaded successfully:",t.length),{data:t}}catch(e){console.error("âŒ Error loading admin orders:",e);const t=W.Ay.initializeAdminMockData(!0);return{data:t.orders}}},getOrder:async e=>{await X();const t=W.Ay.ensureAdminMockDataExists(),a=t.orders||[],s=a.find((t=>t.id===Number.parseInt(e)));return s?{data:s}:Promise.reject({response:{status:404,data:{error:"Order not found"}}})},updateOrderStatus:async(e,t)=>{await X(400);const a=W.Ay.updateOrderStatus(Number.parseInt(e),t.status);return a?{data:a}:Promise.reject({response:{status:404,data:{error:"Order not found"}}})},createOrder:async e=>{await X(800);const t=W.Ay.ensureAdminMockDataExists(),a=t.orders||[],s=t.products||[],r={...e,id:a.length>0?Math.max(...a.map((e=>e.id)))+1:1,date_ordered:(new Date).toISOString(),status:"pending",complete:!1};a.push(r),localStorage.setItem("adminMockOrders",JSON.stringify(a));const o=JSON.parse(localStorage.getItem("mockOrders")||"[]");if(o.push(r),localStorage.setItem("mockOrders",JSON.stringify(o)),r.items&&r.items.length>0){r.items.forEach((e=>{const t=s.findIndex((t=>t.id===e.product));-1!==t&&(s[t].stock=Math.max(0,s[t].stock-e.quantity))})),localStorage.setItem("adminMockProducts",JSON.stringify(s));const e=JSON.parse(localStorage.getItem("mockProducts")||"[]");r.items.forEach((t=>{const a=e.findIndex((e=>e.id===t.product));-1!==a&&(e[a].stock=Math.max(0,e[a].stock-t.quantity))})),localStorage.setItem("mockProducts",JSON.stringify(e))}return{data:r}},getAnalytics:async()=>(await X(),{data:W.Ay.getAdminAnalytics()}),getAlerts:async()=>(await X(),{data:W.Ay.getAdminAlerts()}),getDashboardStats:async()=>{await X();const e=W.Ay.ensureAdminMockDataExists(),t=e.products||[],a=e.orders||[],s=W.Ay.getAdminAnalytics(),r=t.filter((e=>e.stock<5)).length,o=t.filter((e=>0===e.stock)).length,i=a.filter((e=>"pending"===e.status)).length,n=a.reduce(((e,t)=>e+t.total),0);return{data:{totalProducts:t.length,totalOrders:a.length,totalRevenue:n,lowStockCount:r,outOfStockCount:o,pendingOrders:i,analytics:s}}},getUser:async()=>{await X();const e="true"===localStorage.getItem("is_staff"),t=localStorage.getItem("user_id")||(e?"1":"2"),a=localStorage.getItem("username")||(e?"admin":"user");return{data:{id:Number.parseInt(t),username:a,is_staff:e,email:e?"admin@bluora.com":"user@bluora.com",first_name:e?"Admin":"User",last_name:e?"User":"Customer",date_joined:"2024-01-01T00:00:00Z"}}},login:async e=>(await X(1e3),"admin"===e.username&&"admin"===e.password?{data:{access:"mock-token-admin",refresh:"mock-refresh-token"}}:"user"===e.username&&"user"===e.password?{data:{access:"mock-token-user",refresh:"mock-refresh-token"}}:Promise.reject({response:{status:401,data:{detail:"Invalid username or password"}}})),request:async e=>{const{method:t="get",url:a,data:s}=e,r=a.split("/").filter(Boolean),o=r[0],i=r[1]?Number.parseInt(r[1]):null;switch(o){case"products":if("get"===t)return i?N.getProduct(i):N.getProducts();if("post"===t)return N.createProduct(s);if("put"===t||"patch"===t)return N.updateProduct(i,s);if("delete"===t)return N.deleteProduct(i);break;case"orders":if("get"===t)return i?N.getOrder(i):N.getOrders();if("post"===t)return N.createOrder(s);if("patch"===t)return N.updateOrderStatus(i,s);break;case"analytics":if("get"===t)return N.getAnalytics();break;case"alerts":if("get"===t)return N.getAlerts();break;case"dashboard":if("get"===t)return N.getDashboardStats();break;case"token":if("post"===t)return N.login(s);break;case"user":if("get"===t)return N.getUser();break;case"order-items":if("post"===t)return await X(300),{data:{...s,id:Math.floor(1e3*Math.random())}};break}return Promise.reject({response:{status:404,data:{error:"Endpoint not found"}}})}},q=new Proxy(N,{get:(e,t)=>["get","post","put","patch","delete"].includes(t)?(a,s,r={})=>e.request({method:t,url:a,data:s,...r}):e[t]});var H=q;const B=window.location.hostname.includes("github.io")||!0;console.log("ðŸ” Auth setup - Demo mode:",B);class U{constructor(){this.isLoggedIn=!1,this.isStaff=!1,this.isInitialized=!1,this.initializationPromise=null,this.initialize()}async initialize(){return this.initializationPromise||(this.initializationPromise=this._performInitialization()),this.initializationPromise}async _performInitialization(){console.log("ðŸ”„ Initializing auth...");const e=localStorage.getItem("access"),t="true"===localStorage.getItem("is_staff");if(e){if(console.log("ðŸ”‘ Found existing token, staff:",t),B){if(this.isLoggedIn=!0,this.isStaff=t,this.isInitialized=!0,console.log("âœ… Auth initialized (demo mode) - Staff:",this.isStaff),this.isStaff){console.log("ðŸ”§ Initializing admin mock data...");const{ensureAdminMockDataExists:e}=await Promise.resolve().then(a.bind(a,4821));e()}else{console.log("ðŸ”§ Initializing customer mock data...");const{initializeMockData:e}=await Promise.resolve().then(a.bind(a,568));e()}return void this._dispatchAuthChange()}try{const t=await I.A.get(`${{NODE_ENV:"production",VUE_APP_DEMO_MODE:"true",BASE_URL:"/vue-final-project/"}.VUE_APP_API_URL}user/`,{headers:{Authorization:`Bearer ${e}`}});this.isLoggedIn=!0,this.isStaff=t.data.is_staff||!1,localStorage.setItem("is_staff",this.isStaff.toString()),console.log("âœ… Auth initialized (real API) - Staff:",this.isStaff)}catch(s){console.error("âŒ Token validation failed:",s),this.logout()}}else console.log("â„¹ï¸ No token found");this.isInitialized=!0,this._dispatchAuthChange()}async login(e,t){console.log("ðŸ” Attempting login for:",e);try{let s;if(B){const r="admin"===e,o=r?H:F;if(console.log("ðŸŽ­ Using",r?"admin":"customer","mock service for login"),s=await o.post("token/",{username:e,password:t}),this.isStaff=r,localStorage.setItem("is_staff",this.isStaff.toString()),localStorage.setItem("username",e),localStorage.setItem("user_id",r?"1":"2"),console.log("âœ… Mock login successful - Staff:",this.isStaff),this.isStaff){console.log("ðŸ”§ Initializing admin mock data after login...");const{ensureAdminMockDataExists:e}=await Promise.resolve().then(a.bind(a,4821));e()}else{console.log("ðŸ”§ Initializing customer mock data after login...");const{initializeMockData:e}=await Promise.resolve().then(a.bind(a,568));e()}}else{s=await I.A.post(`${{NODE_ENV:"production",VUE_APP_DEMO_MODE:"true",BASE_URL:"/vue-final-project/"}.VUE_APP_API_URL}token/`,{username:e,password:t});const a=await I.A.get(`${{NODE_ENV:"production",VUE_APP_DEMO_MODE:"true",BASE_URL:"/vue-final-project/"}.VUE_APP_API_URL}user/`,{headers:{Authorization:`Bearer ${s.data.access}`}});this.isStaff=a.data.is_staff||!1,localStorage.setItem("is_staff",this.isStaff.toString()),localStorage.setItem("username",e),localStorage.setItem("user_id",a.data.id.toString()),console.log("âœ… Real API login successful - Staff:",this.isStaff)}return localStorage.setItem("access",s.data.access),localStorage.setItem("refresh",s.data.refresh),this.isLoggedIn=!0,this.isInitialized=!0,this._dispatchAuthChange(),s.data}catch(s){throw console.error("âŒ Login failed:",s),s}}logout(){console.log("ðŸšª Logging out..."),localStorage.removeItem("access"),localStorage.removeItem("refresh"),localStorage.removeItem("is_staff"),localStorage.removeItem("username"),localStorage.removeItem("user_id"),this.isLoggedIn=!1,this.isStaff=!1,this.isInitialized=!0,this._dispatchAuthChange()}async checkTokenValidity(){const e=localStorage.getItem("access");if(!e)return this.logout(),!1;if(B)return!0;try{return await I.A.get(`${{NODE_ENV:"production",VUE_APP_DEMO_MODE:"true",BASE_URL:"/vue-final-project/"}.VUE_APP_API_URL}user/`,{headers:{Authorization:`Bearer ${e}`}}),!0}catch(t){return console.error("Token validation failed:",t),this.logout(),!1}}_dispatchAuthChange(){console.log("ðŸ“¢ Dispatching auth change event - Logged in:",this.isLoggedIn,"Staff:",this.isStaff),window.dispatchEvent(new CustomEvent("auth-changed",{detail:{isLoggedIn:this.isLoggedIn,isStaff:this.isStaff,isInitialized:this.isInitialized}}))}async waitForInitialization(){return this.isInitialized?Promise.resolve():this.initializationPromise?this.initializationPromise:this.initialize()}}const z=new U;const K=window.location.hostname.includes("github.io")||!0;let Q;console.log("ðŸ”§ Axios setup - Demo mode:",K),K?(console.log("ðŸŽ­ Using mock API services for demo mode"),Q={get:async(e,t={})=>{console.log("ðŸ“¡ Mock GET request:",e);const a="true"===localStorage.getItem("is_staff"),s=a?H:F;console.log("ðŸ‘¤ Using",a?"admin":"customer","mock service for:",e);try{const a=await s.get(e,t.data,t);return console.log("âœ… Mock response received:",a.data?.length||"data"),a}catch(r){throw console.error("âŒ Mock API error:",r),r}},post:async(e,t,a={})=>{console.log("ðŸ“¡ Mock POST request:",e);const s="true"===localStorage.getItem("is_staff"),r=s?H:F;console.log("ðŸ‘¤ Using",s?"admin":"customer","mock service for:",e);try{const s=await r.post(e,t,a);return console.log("âœ… Mock POST response received"),s}catch(o){throw console.error("âŒ Mock API POST error:",o),o}},put:async(e,t,a={})=>{console.log("ðŸ“¡ Mock PUT request:",e);const s="true"===localStorage.getItem("is_staff"),r=s?H:F;return await r.put(e,t,a)},patch:async(e,t,a={})=>{console.log("ðŸ“¡ Mock PATCH request:",e);const s="true"===localStorage.getItem("is_staff"),r=s?H:F;return await r.patch(e,t,a)},delete:async(e,t={})=>{console.log("ðŸ“¡ Mock DELETE request:",e);const a="true"===localStorage.getItem("is_staff"),s=a?H:F;return await s.delete(e,t)},interceptors:{request:{use:()=>{}},response:{use:()=>{}}}}):(console.log("ðŸŒ Using real API service"),Q=I.A.create({baseURL:{NODE_ENV:"production",VUE_APP_DEMO_MODE:"true",BASE_URL:"/vue-final-project/"}.VUE_APP_API_URL||"http://127.0.0.1:8000/api/",timeout:1e4,headers:{"Content-Type":"application/json"}}),Q.interceptors.request.use((e=>{const t=localStorage.getItem("access");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),(e=>Promise.reject(e))),Q.interceptors.response.use((e=>e),(async e=>{const t=e.config;if(401===e.response?.status&&!t._retry){t._retry=!0;try{const e=localStorage.getItem("refresh");if(e){const a=await I.A.post(`${{NODE_ENV:"production",VUE_APP_DEMO_MODE:"true",BASE_URL:"/vue-final-project/"}.VUE_APP_API_URL}token/refresh/`,{refresh:e}),s=a.data.access;return localStorage.setItem("access",s),t.headers.Authorization=`Bearer ${s}`,Q(t)}}catch(a){console.error("Token refresh failed:",a),z.logout(),window.location.href="/login"}}return Promise.reject(e)})));var J=Q,j=a(1387);a(323);const V={class:"toast-container"},Z={class:"toast-icon"},$={class:"toast-content"},Y={class:"toast-message"},G=["onClick"];function ee(e,t,a,i,n,l){return(0,r.uX)(),(0,r.CE)("div",V,[(0,r.bF)(s.F,{name:"toast"},{default:(0,r.k6)((()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.toasts,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:(0,o.C4)(["toast-notification",[`toast-${e.type}`,{"toast-visible":e.visible}]]),role:"alert","aria-live":"assertive"},[(0,r.Lk)("div",Z,[(0,r.Lk)("i",{class:(0,o.C4)(["bi",{"bi-check-circle-fill":"success"===e.type,"bi-exclamation-triangle-fill":"warning"===e.type,"bi-x-circle-fill":"error"===e.type,"bi-info-circle-fill":"info"===e.type}])},null,2)]),(0,r.Lk)("div",$,[(0,r.Lk)("p",Y,(0,o.v_)(e.message),1)]),(0,r.Lk)("button",{class:"toast-close",onClick:t=>i.removeToast(e.id),"aria-label":"Close notification"},t[0]||(t[0]=[(0,r.Lk)("i",{class:"bi bi-x"},null,-1)]),8,G),(0,r.Lk)("div",{class:"toast-progress",style:(0,o.Tr)({animationDuration:`${e.duration}ms`})},null,4)],2)))),128))])),_:1})])}const te=(0,_.KR)([]);let ae=1;const se=()=>{const e=(e,a="info",s=5e3)=>{const r=window.innerWidth<768,o=r?3:5;if(te.value.length>=o){const e=[...te.value].sort(((e,t)=>e.id-t.id)).slice(0,te.value.length-o+1);e.forEach((e=>{t(e.id)}))}const i=ae++,n=(0,_.Kh)({id:i,message:e,type:a,visible:!1,duration:r?Math.min(s,4e3):s});return te.value.push(n),setTimeout((()=>{n.visible=!0}),10),setTimeout((()=>{t(i)}),n.duration),i},t=e=>{const t=te.value.findIndex((t=>t.id===e));-1!==t&&(te.value[t].visible=!1,setTimeout((()=>{te.value=te.value.filter((t=>t.id!==e))}),300))},a=(t,a)=>e(t,"success",a),s=(t,a)=>e(t,"error",a),r=(t,a)=>e(t,"warning",a),o=(t,a)=>e(t,"info",a);return{toasts:te,addToast:e,removeToast:t,success:a,error:s,warning:r,info:o}},re=se;var oe={setup(){const{toasts:e,removeToast:t}=se();return{toasts:e,removeToast:t}}},ie=a(1241);const ne=(0,ie.A)(oe,[["render",ee],["__scopeId","data-v-494e3f04"]]);var le=ne,ce=a(8077),de={components:{ToastNotification:le},setup(){const e=(0,j.rd)(),t=(0,_.KR)(0),a=(0,_.KR)(""),s=(0,_.KR)(null);let o=null;const i=(0,_.KR)(!1),n=()=>{const e=JSON.parse(localStorage.getItem("cart"))||[];t.value=e.length},l=()=>{z.logout(),window.location.hostname.includes("github.io")?window.location.href="https://lorendale.github.io/vue-final-project/#/login":e.push("/login")},c=()=>{o&&(i.value?o.hide():o.show(),i.value=!i.value)},d=()=>{o&&i.value&&(o.hide(),i.value=!1)},u=e=>{"cart"===e.key&&n()},m=()=>{n()},p=async()=>{console.log("Auth state changed in App.vue"),await(0,r.dY)(),g()},g=async()=>{if(z.isLoggedIn)try{const e=await J.get("user/");a.value=e.data.username}catch(e){console.error("Failed to fetch username:",e)}else a.value=""};return(0,r.sV)((()=>{z.isLoggedIn&&(z.checkTokenValidity(),g()),n(),window.addEventListener("storage",u),window.addEventListener("cart-updated",m),window.addEventListener("auth-changed",p);const e=document.getElementById("navbarContent");e&&(o=new ce.SD(e,{toggle:!1}),e.addEventListener("shown.bs.collapse",(()=>{i.value=!0})),e.addEventListener("hidden.bs.collapse",(()=>{i.value=!1})),document.addEventListener("click",(e=>{if(!i.value)return;const t=e.target.closest(".navbar-toggler"),a=e.target.closest(".navbar-collapse");t||a||d()}))),window.history&&window.addEventListener("popstate",d),window.addEventListener("resize",(()=>{window.innerWidth>=992&&i.value&&d()}))})),(0,r.hi)((()=>{window.removeEventListener("storage",u),window.removeEventListener("cart-updated",m),window.removeEventListener("auth-changed",p),window.removeEventListener("popstate",d),window.removeEventListener("resize",(()=>{}));const e=document.getElementById("navbarContent");e&&(e.removeEventListener("shown.bs.collapse",(()=>{})),e.removeEventListener("hidden.bs.collapse",(()=>{}))),document.removeEventListener("click",(()=>{}))})),(0,r.wB)((()=>localStorage.getItem("cart")),(()=>{n()})),{auth:z,cartCount:t,username:a,logout:l,updateCartCount:n,closeNavbar:d,toggleNavbar:c,navbarCollapse:s}}};const ue=(0,ie.A)(de,[["render",E]]);var me=ue;const pe={class:"auth-container"},ge={class:"auth-card"},he={class:"form-group"},ke={key:0,class:"invalid-feedback"},be={class:"form-group"},fe=["type"],ve={key:0,class:"invalid-feedback"},ye={class:"form-check mb-3"},Le=["disabled"],we={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},Pe={key:1,class:"bi bi-box-arrow-in-right me-2"},Ce={key:0,class:"auth-error mt-3"},xe={class:"auth-footer"};function Me(e,t,a,i,n,l){const c=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",pe,[(0,r.Lk)("div",ge,[t[15]||(t[15]=(0,r.Lk)("div",{class:"auth-header"},[(0,r.Lk)("i",{class:"bi bi-bag-heart-fill me-2 bag-icon"}),(0,r.Lk)("h2",null,"Welcome Back"),(0,r.Lk)("p",null,"Sign in to your account to continue")],-1)),(0,r.Lk)("form",{onSubmit:t[6]||(t[6]=(0,s.D$)(((...e)=>i.validateAndLogin&&i.validateAndLogin(...e)),["prevent"])),class:"auth-form",novalidate:""},[(0,r.Lk)("div",he,[t[8]||(t[8]=(0,r.Lk)("label",{for:"username"},"Username",-1)),(0,r.Lk)("div",{class:(0,o.C4)(["input-group",{"is-invalid":i.errors.username}])},[t[7]||(t[7]=(0,r.Lk)("span",{class:"input-group-text"},[(0,r.Lk)("i",{class:"bi bi-person"})],-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.username=e),id:"username",type:"text",class:(0,o.C4)(["form-control",{"is-invalid":i.errors.username}]),placeholder:"Enter your username",onBlur:t[1]||(t[1]=(...e)=>i.validateUsername&&i.validateUsername(...e))},null,34),[[s.Jo,i.username]])],2),i.errors.username?((0,r.uX)(),(0,r.CE)("div",ke,(0,o.v_)(i.errors.username),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",be,[t[10]||(t[10]=(0,r.Lk)("label",{for:"password"},"Password",-1)),(0,r.Lk)("div",{class:(0,o.C4)(["input-group",{"is-invalid":i.errors.password}])},[t[9]||(t[9]=(0,r.Lk)("span",{class:"input-group-text"},[(0,r.Lk)("i",{class:"bi bi-key"})],-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>i.password=e),id:"password",type:i.showPassword?"text":"password",class:(0,o.C4)(["form-control",{"is-invalid":i.errors.password}]),placeholder:"Enter your password",onBlur:t[3]||(t[3]=(...e)=>i.validatePassword&&i.validatePassword(...e))},null,42,fe),[[s.hp,i.password]]),(0,r.Lk)("button",{type:"button",class:"input-group-text password-toggle",onClick:t[4]||(t[4]=e=>i.showPassword=!i.showPassword)},[(0,r.Lk)("i",{class:(0,o.C4)(i.showPassword?"bi bi-eye-slash":"bi bi-eye")},null,2)])],2),i.errors.password?((0,r.uX)(),(0,r.CE)("div",ve,(0,o.v_)(i.errors.password),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",ye,[(0,r.bo)((0,r.Lk)("input",{class:"form-check-input",type:"checkbox",id:"rememberMe","onUpdate:modelValue":t[5]||(t[5]=e=>i.rememberMe=e)},null,512),[[s.lH,i.rememberMe]]),t[11]||(t[11]=(0,r.Lk)("label",{class:"form-check-label",for:"rememberMe"},"Remember me",-1))]),(0,r.Lk)("button",{type:"submit",class:"btn btn-primary w-100",disabled:i.isLoading},[i.isLoading?((0,r.uX)(),(0,r.CE)("span",we)):((0,r.uX)(),(0,r.CE)("i",Pe)),(0,r.eW)(" "+(0,o.v_)(i.isLoading?"Signing in...":"Sign In"),1)],8,Le),i.error?((0,r.uX)(),(0,r.CE)("div",Ce,[t[12]||(t[12]=(0,r.Lk)("i",{class:"bi bi-exclamation-triangle-fill me-2"},null,-1)),(0,r.eW)(" "+(0,o.v_)(i.error),1)])):(0,r.Q3)("",!0)],32),(0,r.Lk)("div",xe,[(0,r.Lk)("p",null,[t[14]||(t[14]=(0,r.eW)("Don't have an account? ")),(0,r.bF)(c,{to:"/register",class:"auth-link"},{default:(0,r.k6)((()=>t[13]||(t[13]=[(0,r.eW)("Create Account")]))),_:1})])])])])}var Se={name:"UserLogin",setup(){const e=(0,j.rd)(),t=(0,_.KR)(""),s=(0,_.KR)(""),r=(0,_.KR)(!1),o=(0,_.KR)(!1),i=(0,_.KR)(!1),n=(0,_.KR)(null),l=(0,_.Kh)({username:"",password:""}),{error:c,success:d}=re(),u=()=>t.value.trim()?(l.username="",!0):(l.username="Username is required",!1),m=()=>s.value?(l.password="",!0):(l.password="Password is required",!1),p=()=>{const e=u(),t=m();return e&&t},g=()=>{p()?h():c("Please fix the errors in the form")},h=async()=>{i.value=!0,n.value=null;try{{const s="admin"===t.value.trim().toLowerCase();if(localStorage.setItem("access","demo-token"),localStorage.setItem("refresh","demo-refresh"),localStorage.setItem("is_staff",s?"true":"false"),localStorage.setItem("user_id",s?"1":"2"),localStorage.setItem("username",t.value||"demo_user"),z.isLoggedIn=!0,z.isStaff=s,s){const{initializeAdminMockData:e}=await Promise.resolve().then(a.bind(a,4821));e()}else{const{ensureMockDataExists:e}=await Promise.resolve().then(a.bind(a,568));e()}return d("Login successful!"),void setTimeout((()=>{e.push(s?"/monitor":"/products")}),500)}}catch(s){console.error("Login error:",s),n.value="Invalid username or password. Please try again.",c("Login failed: Check your username or password.")}finally{i.value=!1}};return{username:t,password:s,rememberMe:r,showPassword:o,isLoading:i,error:n,errors:l,validateUsername:u,validatePassword:m,validateAndLogin:g}}};const Ee=(0,ie.A)(Se,[["render",Me],["__scopeId","data-v-2371fc5c"]]);var _e=Ee;const Ie={class:"auth-container"},Ae={class:"auth-card"},De={class:"form-group"},Oe={key:0,class:"invalid-feedback"},Te={class:"form-group"},Fe=["type"],We={key:0,class:"invalid-feedback"},Re={key:1,class:"password-strength mt-2"},Xe={class:"strength-meter"},Ne={class:"form-group"},qe=["type"],He={key:0,class:"invalid-feedback"},Be={class:"form-check mb-3"},Ue={class:"form-check-label",for:"termsAgreed"},ze={key:0,class:"invalid-feedback"},Ke=["disabled"],Qe={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},Je={key:1,class:"bi bi-person-plus me-2"},je={key:0,class:"auth-error mt-3"},Ve={class:"auth-footer"},Ze={class:"modal fade",ref:"termsModal",tabindex:"-1"},$e={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable"},Ye={class:"modal-content"},Ge={class:"modal-header"},et={class:"modal-footer"};function tt(e,t,a,i,n,l){const c=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",Ie,[(0,r.Lk)("div",Ae,[t[25]||(t[25]=(0,r.Lk)("div",{class:"auth-header"},[(0,r.Lk)("i",{class:"bi bi-person-plus auth-icon"}),(0,r.Lk)("h2",null,"Create Account"),(0,r.Lk)("p",null,"Join our community and start shopping")],-1)),(0,r.Lk)("form",{onSubmit:t[11]||(t[11]=(0,s.D$)(((...e)=>i.validateAndRegister&&i.validateAndRegister(...e)),["prevent"])),class:"auth-form",novalidate:""},[(0,r.Lk)("div",De,[t[16]||(t[16]=(0,r.Lk)("label",{for:"username"},"Username",-1)),(0,r.Lk)("div",{class:(0,o.C4)(["input-group",{"is-invalid":i.errors.username}])},[t[15]||(t[15]=(0,r.Lk)("span",{class:"input-group-text"},[(0,r.Lk)("i",{class:"bi bi-person"})],-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.username=e),id:"username",type:"text",class:(0,o.C4)(["form-control",{"is-invalid":i.errors.username}]),placeholder:"Choose a username",onBlur:t[1]||(t[1]=(...e)=>i.validateUsername&&i.validateUsername(...e))},null,34),[[s.Jo,i.username]])],2),i.errors.username?((0,r.uX)(),(0,r.CE)("div",Oe,(0,o.v_)(i.errors.username),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",Te,[t[18]||(t[18]=(0,r.Lk)("label",{for:"password"},"Password",-1)),(0,r.Lk)("div",{class:(0,o.C4)(["input-group",{"is-invalid":i.errors.password}])},[t[17]||(t[17]=(0,r.Lk)("span",{class:"input-group-text"},[(0,r.Lk)("i",{class:"bi bi-key"})],-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>i.password=e),id:"password",type:i.showPassword?"text":"password",class:(0,o.C4)(["form-control",{"is-invalid":i.errors.password}]),placeholder:"Create a password",onBlur:t[3]||(t[3]=(...e)=>i.validatePassword&&i.validatePassword(...e)),onInput:t[4]||(t[4]=(...e)=>i.validatePasswordStrength&&i.validatePasswordStrength(...e))},null,42,Fe),[[s.hp,i.password]]),(0,r.Lk)("button",{type:"button",class:"input-group-text password-toggle",onClick:t[5]||(t[5]=e=>i.showPassword=!i.showPassword)},[(0,r.Lk)("i",{class:(0,o.C4)(i.showPassword?"bi bi-eye-slash":"bi bi-eye")},null,2)])],2),i.errors.password?((0,r.uX)(),(0,r.CE)("div",We,(0,o.v_)(i.errors.password),1)):(0,r.Q3)("",!0),i.password?((0,r.uX)(),(0,r.CE)("div",Re,[(0,r.Lk)("div",Xe,[(0,r.Lk)("div",{class:(0,o.C4)(["strength-meter-fill",i.passwordStrength.class]),style:(0,o.Tr)({width:i.passwordStrength.score+"%"})},null,6)]),(0,r.Lk)("div",{class:(0,o.C4)(["strength-text",i.passwordStrength.class])},(0,o.v_)(i.passwordStrength.text),3)])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",Ne,[t[20]||(t[20]=(0,r.Lk)("label",{for:"confirmPassword"},"Confirm Password",-1)),(0,r.Lk)("div",{class:(0,o.C4)(["input-group",{"is-invalid":i.errors.confirmPassword}])},[t[19]||(t[19]=(0,r.Lk)("span",{class:"input-group-text"},[(0,r.Lk)("i",{class:"bi bi-key-fill"})],-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>i.confirmPassword=e),id:"confirmPassword",type:i.showConfirmPassword?"text":"password",class:(0,o.C4)(["form-control",{"is-invalid":i.errors.confirmPassword}]),placeholder:"Confirm your password",onBlur:t[7]||(t[7]=(...e)=>i.validateConfirmPassword&&i.validateConfirmPassword(...e))},null,42,qe),[[s.hp,i.confirmPassword]]),(0,r.Lk)("button",{type:"button",class:"input-group-text password-toggle",onClick:t[8]||(t[8]=e=>i.showConfirmPassword=!i.showConfirmPassword)},[(0,r.Lk)("i",{class:(0,o.C4)(i.showConfirmPassword?"bi bi-eye-slash":"bi bi-eye")},null,2)])],2),i.errors.confirmPassword?((0,r.uX)(),(0,r.CE)("div",He,(0,o.v_)(i.errors.confirmPassword),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",Be,[(0,r.bo)((0,r.Lk)("input",{class:(0,o.C4)(["form-check-input",{"is-invalid":i.errors.termsAgreed}]),type:"checkbox",id:"termsAgreed","onUpdate:modelValue":t[9]||(t[9]=e=>i.termsAgreed=e)},null,2),[[s.lH,i.termsAgreed]]),(0,r.Lk)("label",Ue,[t[21]||(t[21]=(0,r.eW)(" I agree to the ")),(0,r.Lk)("a",{href:"#",onClick:t[10]||(t[10]=(0,s.D$)(((...e)=>i.showTerms&&i.showTerms(...e)),["prevent"]))},"Terms and Conditions")]),i.errors.termsAgreed?((0,r.uX)(),(0,r.CE)("div",ze,(0,o.v_)(i.errors.termsAgreed),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("button",{type:"submit",class:"btn btn-primary w-100",disabled:i.isLoading},[i.isLoading?((0,r.uX)(),(0,r.CE)("span",Qe)):((0,r.uX)(),(0,r.CE)("i",Je)),(0,r.eW)(" "+(0,o.v_)(i.isLoading?"Creating account...":"Create Account"),1)],8,Ke),i.error?((0,r.uX)(),(0,r.CE)("div",je,[t[22]||(t[22]=(0,r.Lk)("i",{class:"bi bi-exclamation-triangle-fill me-2"},null,-1)),(0,r.eW)(" "+(0,o.v_)(i.error),1)])):(0,r.Q3)("",!0)],32),(0,r.Lk)("div",Ve,[(0,r.Lk)("p",null,[t[24]||(t[24]=(0,r.eW)("Already have an account? ")),(0,r.bF)(c,{to:"/login",class:"auth-link"},{default:(0,r.k6)((()=>t[23]||(t[23]=[(0,r.eW)("Sign In")]))),_:1})])])]),(0,r.Lk)("div",Ze,[(0,r.Lk)("div",$e,[(0,r.Lk)("div",Ye,[(0,r.Lk)("div",Ge,[t[26]||(t[26]=(0,r.Lk)("h5",{class:"modal-title"},"Terms and Conditions",-1)),(0,r.Lk)("button",{type:"button",class:"btn-close",onClick:t[12]||(t[12]=(...e)=>i.hideTerms&&i.hideTerms(...e))})]),t[27]||(t[27]=(0,r.Fv)('<div class="modal-body" data-v-410489ce><h6 data-v-410489ce>1. Acceptance of Terms</h6><p data-v-410489ce>By accessing and using this e-commerce platform, you agree to be bound by these Terms and Conditions.</p><h6 data-v-410489ce>2. User Accounts</h6><p data-v-410489ce>You are responsible for maintaining the confidentiality of your account information and password.</p><h6 data-v-410489ce>3. Privacy Policy</h6><p data-v-410489ce>Your use of our service is also governed by our Privacy Policy.</p><h6 data-v-410489ce>4. Product Information</h6><p data-v-410489ce>We strive to provide accurate product information, but we do not warrant that product descriptions or other content is accurate, complete, or error-free.</p><h6 data-v-410489ce>5. Pricing and Payment</h6><p data-v-410489ce>All prices are subject to change without notice. We reserve the right to refuse or cancel orders in cases of pricing errors.</p></div>',1)),(0,r.Lk)("div",et,[(0,r.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[13]||(t[13]=(...e)=>i.hideTerms&&i.hideTerms(...e))},"Close"),(0,r.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[14]||(t[14]=(...e)=>i.acceptTerms&&i.acceptTerms(...e))},"Accept")])])])],512)])}var at={name:"UserRegister",setup(){const e=(0,_.KR)(""),t=(0,_.KR)(""),a=(0,_.KR)(""),s=(0,_.KR)(!1),o=(0,_.KR)(!1),i=(0,_.KR)(!1),n=(0,_.KR)(!1),l=(0,_.KR)(null),c=(0,_.KR)(null),d=(0,_.KR)(null),u=(0,j.rd)(),{success:m,error:p}=re(),g=(0,_.Kh)({username:"",password:"",confirmPassword:"",termsAgreed:""}),h=(0,r.EW)((()=>{if(!t.value)return{score:0,text:"",class:""};let e=0,a="Very Weak",s="very-weak";return t.value.length>=8&&(e+=20),/[A-Z]/.test(t.value)&&(e+=20),/[a-z]/.test(t.value)&&(e+=20),/[0-9]/.test(t.value)&&(e+=20),/[^A-Za-z0-9]/.test(t.value)&&(e+=20),e>=80?(a="Very Strong",s="very-strong"):e>=60?(a="Strong",s="strong"):e>=40?(a="Medium",s="medium"):e>=20&&(a="Weak",s="weak"),{score:e,text:a,class:s}})),k=()=>e.value.trim()?e.value.length<3?(g.username="Username must be at least 3 characters",!1):/^[a-zA-Z0-9_]+$/.test(e.value)?(g.username="",!0):(g.username="Username can only contain letters, numbers, and underscores",!1):(g.username="Username is required",!1),b=()=>t.value?t.value.length<8?(g.password="Password must be at least 8 characters",!1):(g.password="",!0):(g.password="Password is required",!1),f=()=>h.value.score>0,v=()=>a.value?a.value!==t.value?(g.confirmPassword="Passwords do not match",!1):(g.confirmPassword="",!0):(g.confirmPassword="Please confirm your password",!1),y=()=>s.value?(g.termsAgreed="",!0):(g.termsAgreed="You must agree to the Terms and Conditions",!1),L=()=>{const e=k(),t=b(),a=v(),s=y();return e&&t&&a&&s},w=()=>{L()?P():p("Please fix the errors in the form")},P=async()=>{n.value=!0,l.value=null;try{await J.post("register/",{username:e.value,password:t.value}),m("Registration successful! Please log in."),setTimeout((()=>{u.push("/login")}),1500)}catch(a){console.error("Registration error:",a),a.response&&a.response.data?(a.response.data.username&&(g.username=a.response.data.username[0]),l.value="Registration failed. Please check the form for errors."):l.value="Registration failed. Please try again later.",p("Registration failed. Please try again.")}finally{n.value=!1}},C=()=>{d.value&&d.value.show()},x=()=>{d.value&&d.value.hide()},M=()=>{s.value=!0,g.termsAgreed="",x()};return(0,r.sV)((()=>{c.value&&(d.value=new ce.aF(c.value))})),{username:e,password:t,confirmPassword:a,termsAgreed:s,showPassword:o,showConfirmPassword:i,isLoading:n,error:l,errors:g,passwordStrength:h,termsModal:c,validateUsername:k,validatePassword:b,validatePasswordStrength:f,validateConfirmPassword:v,validateAndRegister:w,showTerms:C,hideTerms:x,acceptTerms:M}}};const st=(0,ie.A)(at,[["render",tt],["__scopeId","data-v-410489ce"]]);var rt=st;const ot={class:"product-catalog container"},it={class:"catalog-header"},nt={class:"search-container"},lt={key:0,class:"loading-container"},ct={key:1,class:"empty-products"},dt={class:"empty-actions"},ut={key:2},mt={class:"product-count"},pt={key:0,class:"search-info"},gt=["disabled"],ht={key:0,class:"spinner-border spinner-border-sm me-1",role:"status"},kt={key:1,class:"bi bi-arrow-clockwise me-1"},bt={class:"product-grid"},ft={class:"product-image"},vt=["src","alt"],yt={key:1,class:"image-placeholder"},Lt={class:"product-badges"},wt={key:0,class:"stock-badge new-badge"},Pt={class:"product-details"},Ct={class:"product-rating"},xt={class:"stars"},Mt={class:"rating-count"},St={class:"product-name"},Et={class:"product-description"},_t={class:"product-price"},It={key:0,class:"product-actions"},At={class:"quantity-selector"},Dt=["onClick","disabled"],Ot={class:"quantity"},Tt=["onClick","disabled"],Ft=["onClick"],Wt={key:1,class:"out-of-stock-btn",disabled:"","aria-label":"Out of stock"},Rt={key:0,class:"pagination-container"},Xt={class:"pagination-info"},Nt={class:"pagination-controls"},qt=["disabled"],Ht={class:"pagination-numbers"},Bt={key:1,class:"pagination-ellipsis"},Ut=["onClick"],zt={key:2,class:"pagination-ellipsis"},Kt=["disabled"];function Qt(e,t,a,i,n,l){return(0,r.uX)(),(0,r.CE)("div",ot,[(0,r.Lk)("div",it,[t[9]||(t[9]=(0,r.Lk)("h2",{class:"section-title"},[(0,r.Lk)("i",{class:"bi bi-shop me-2"}),(0,r.eW)("Discover Our Collection ")],-1)),(0,r.Lk)("div",nt,[(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>i.searchQuery=e),placeholder:"Search products...",class:"search-input","aria-label":"Search products"},null,512),[[s.Jo,i.searchQuery]]),t[8]||(t[8]=(0,r.Lk)("i",{class:"bi bi-search search-icon"},null,-1))])]),i.isLoading?((0,r.uX)(),(0,r.CE)("div",lt,t[10]||(t[10]=[(0,r.Lk)("div",{class:"spinner"},[(0,r.Lk)("div",{class:"bounce1"}),(0,r.Lk)("div",{class:"bounce2"}),(0,r.Lk)("div",{class:"bounce3"})],-1),(0,r.Lk)("p",null,"Loading products...",-1)]))):0===i.filteredProducts.length?((0,r.uX)(),(0,r.CE)("div",ct,[t[13]||(t[13]=(0,r.Lk)("i",{class:"bi bi-search-heart"},null,-1)),t[14]||(t[14]=(0,r.Lk)("h3",null,"No products found",-1)),t[15]||(t[15]=(0,r.Lk)("p",null,"We couldn't find any products matching your search.",-1)),(0,r.Lk)("div",dt,[(0,r.Lk)("button",{class:"btn btn-primary mt-3",onClick:t[1]||(t[1]=(...e)=>i.resetSearch&&i.resetSearch(...e))},t[11]||(t[11]=[(0,r.Lk)("i",{class:"bi bi-arrow-counterclockwise me-2"},null,-1),(0,r.eW)("View All Products ")])),(0,r.Lk)("button",{class:"btn btn-outline-primary mt-3 ms-2",onClick:t[2]||(t[2]=(...e)=>i.refreshProducts&&i.refreshProducts(...e))},t[12]||(t[12]=[(0,r.Lk)("i",{class:"bi bi-arrow-clockwise me-2"},null,-1),(0,r.eW)("Refresh Products ")]))])])):((0,r.uX)(),(0,r.CE)("div",ut,[(0,r.Lk)("div",mt,[(0,r.Lk)("span",null,(0,o.v_)(i.filteredProducts.length)+" products found",1),i.searchQuery?((0,r.uX)(),(0,r.CE)("span",pt,'for "'+(0,o.v_)(i.searchQuery)+'"',1)):(0,r.Q3)("",!0),(0,r.Lk)("button",{class:"btn btn-sm btn-outline-secondary ms-3",onClick:t[3]||(t[3]=(...e)=>i.refreshProducts&&i.refreshProducts(...e)),disabled:i.isRefreshing},[i.isRefreshing?((0,r.uX)(),(0,r.CE)("span",ht)):((0,r.uX)(),(0,r.CE)("i",kt)),(0,r.eW)(" "+(0,o.v_)(i.isRefreshing?"Refreshing...":"Refresh"),1)],8,gt)]),(0,r.Lk)("div",bt,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.paginatedProducts,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:(0,o.C4)(["product-card",{"out-of-stock":0===e.stock}])},[(0,r.Lk)("div",ft,[e.image?((0,r.uX)(),(0,r.CE)("img",{key:0,src:i.fullImageUrl(e.image),alt:e.name,loading:"lazy"},null,8,vt)):((0,r.uX)(),(0,r.CE)("div",yt,t[16]||(t[16]=[(0,r.Lk)("i",{class:"bi bi-image"},null,-1)]))),(0,r.Lk)("div",Lt,[(0,r.Lk)("div",{class:(0,o.C4)(["stock-count-badge",i.getStockCountBadgeClass(e)])},(0,o.v_)(e.stock>0?`${e.stock} in stock`:"Out of stock"),3),i.isNewProduct(e)?((0,r.uX)(),(0,r.CE)("div",wt,t[17]||(t[17]=[(0,r.Lk)("i",{class:"bi bi-star-fill"},null,-1),(0,r.eW)(" New ")]))):(0,r.Q3)("",!0)])]),(0,r.Lk)("div",Pt,[(0,r.Lk)("div",Ct,[(0,r.Lk)("div",xt,[((0,r.uX)(),(0,r.CE)(r.FK,null,(0,r.pI)(5,(t=>(0,r.Lk)("i",{key:t,class:(0,o.C4)(["bi",t<=i.getProductRating(e)?"bi-star-fill":"bi-star"])},null,2))),64))]),(0,r.Lk)("span",Mt,"("+(0,o.v_)(i.getReviewCount(e))+")",1)]),(0,r.Lk)("h3",St,(0,o.v_)(e.name),1),(0,r.Lk)("p",Et,(0,o.v_)(i.truncate(e.description,80)),1),(0,r.Lk)("div",_t,"â‚±"+(0,o.v_)(i.formatPrice(e.price)),1),e.stock>0?((0,r.uX)(),(0,r.CE)("div",It,[(0,r.Lk)("div",At,[(0,r.Lk)("button",{class:"quantity-btn",onClick:t=>i.decrementQuantity(e),disabled:i.quantities[e.id]<=1,"aria-label":"Decrease quantity"},t[18]||(t[18]=[(0,r.Lk)("i",{class:"bi bi-dash"},null,-1)]),8,Dt),(0,r.Lk)("span",Ot,(0,o.v_)(i.quantities[e.id]||1),1),(0,r.Lk)("button",{class:"quantity-btn",onClick:t=>i.incrementQuantity(e),disabled:i.quantities[e.id]>=e.stock,"aria-label":"Increase quantity"},t[19]||(t[19]=[(0,r.Lk)("i",{class:"bi bi-plus"},null,-1)]),8,Tt)]),(0,r.Lk)("button",{class:"add-to-cart-btn",onClick:t=>i.addToCart(e),"aria-label":"Add to cart"},t[20]||(t[20]=[(0,r.Lk)("i",{class:"bi bi-cart-plus me-2"},null,-1),(0,r.eW)("Add to Cart ")]),8,Ft)])):((0,r.uX)(),(0,r.CE)("button",Wt,t[21]||(t[21]=[(0,r.Lk)("i",{class:"bi bi-x-circle me-2"},null,-1),(0,r.eW)("Out of Stock ")])))])],2)))),128))]),i.totalPages>1?((0,r.uX)(),(0,r.CE)("div",Rt,[(0,r.Lk)("div",Xt,[(0,r.Lk)("span",null," Showing "+(0,o.v_)(i.startIndex+1)+" to "+(0,o.v_)(Math.min(i.startIndex+i.productsPerPage,i.filteredProducts.length))+" of "+(0,o.v_)(i.filteredProducts.length)+" products ",1)]),(0,r.Lk)("div",Nt,[(0,r.Lk)("button",{class:"pagination-btn",onClick:t[4]||(t[4]=e=>i.goToPage(i.currentPage-1)),disabled:1===i.currentPage,"aria-label":"Previous page"},t[22]||(t[22]=[(0,r.Lk)("i",{class:"bi bi-chevron-left"},null,-1),(0,r.eW)(" Previous ")]),8,qt),(0,r.Lk)("div",Ht,[i.currentPage>3?((0,r.uX)(),(0,r.CE)("button",{key:0,class:"pagination-number",onClick:t[5]||(t[5]=e=>i.goToPage(1))}," 1 ")):(0,r.Q3)("",!0),i.currentPage>4?((0,r.uX)(),(0,r.CE)("span",Bt,"...")):(0,r.Q3)("",!0),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.visiblePages,(e=>((0,r.uX)(),(0,r.CE)("button",{key:e,class:(0,o.C4)(["pagination-number",{active:e===i.currentPage}]),onClick:t=>i.goToPage(e)},(0,o.v_)(e),11,Ut)))),128)),i.currentPage<i.totalPages-3?((0,r.uX)(),(0,r.CE)("span",zt,"...")):(0,r.Q3)("",!0),i.currentPage<i.totalPages-2?((0,r.uX)(),(0,r.CE)("button",{key:3,class:"pagination-number",onClick:t[6]||(t[6]=e=>i.goToPage(i.totalPages))},(0,o.v_)(i.totalPages),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("button",{class:"pagination-btn",onClick:t[7]||(t[7]=e=>i.goToPage(i.currentPage+1)),disabled:i.currentPage===i.totalPages,"aria-label":"Next page"},t[23]||(t[23]=[(0,r.eW)(" Next "),(0,r.Lk)("i",{class:"bi bi-chevron-right"},null,-1)]),8,Kt)])])):(0,r.Q3)("",!0)]))])}var Jt={setup(){const e=(0,_.KR)([]),t=(0,_.KR)(!0),a=(0,_.KR)(!1),s=(0,_.KR)(""),o=se(),i=(0,_.Kh)({}),n=(0,_.KR)(1),l=(0,_.KR)(12),c=()=>{window.dispatchEvent(new CustomEvent("cart-updated"))},d=(0,r.EW)((()=>{if(!s.value)return e.value;const t=s.value.toLowerCase();return e.value.filter((e=>e.name.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)))})),u=(0,r.EW)((()=>Math.ceil(d.value.length/l.value))),m=(0,r.EW)((()=>(n.value-1)*l.value)),p=(0,r.EW)((()=>{const e=m.value,t=e+l.value;return d.value.slice(e,t)})),g=(0,r.EW)((()=>{const e=[],t=Math.max(1,n.value-2),a=Math.min(u.value,n.value+2);for(let s=t;s<=a;s++)e.push(s);return e}));(0,r.wB)(s,(()=>{n.value=1}));const h=e=>{e>=1&&e<=u.value&&(n.value=e,document.querySelector(".product-grid")?.scrollIntoView({behavior:"smooth",block:"start"}))},k=e=>e?e.startsWith("http")?e:`http://127.0.0.1:8000${e.startsWith("/")?e:"/media/"+e}`:"",b=e=>parseFloat(e).toFixed(2),f=(e,t)=>e?e.length>t?e.substring(0,t)+"...":e:"",v=()=>{s.value=""},y=e=>7*e.id%3+3,L=e=>7*e.id%115+5,w=e=>e.id%4===0,P=e=>0===e.stock?"stock-count-out":e.stock<5?"stock-count-low":e.stock<20?"stock-count-medium":"stock-count-high",C=e=>{i[e.id]||(i[e.id]=1),i[e.id]<e.stock&&i[e.id]++},x=e=>{i[e.id]||(i[e.id]=1),i[e.id]>1&&i[e.id]--},M=async(s=!0)=>{s?t.value=!0:a.value=!0;try{(0,A.ensureMockDataExists)();const t=await J.get("products/");e.value=t.data||[],e.value.forEach((e=>{i[e.id]||(i[e.id]=1)})),0===e.value.length&&(console.warn("No products received from API"),o.warning("No products available at the moment."))}catch(r){console.error("Error fetching products:",r),o.error("Failed to load products. Please try refreshing the page.");try{const t=JSON.parse(localStorage.getItem("mockProducts")||"[]");t.length>0&&(e.value=t,o.info("Loaded products from cache."))}catch(n){console.error("Fallback loading failed:",n)}}finally{t.value=!1,a.value=!1}},S=async()=>{await M(!1),o.success("Products refreshed successfully!")},E=e=>{if(0!==e.stock)try{let t=[];const a=localStorage.getItem("cart");a&&(t=JSON.parse(a));const s=t.find((t=>t.product&&t.product.id===e.id)),r=i[e.id]||1;if(s){if(!(s.quantity+r<=e.stock))return void o.warning(`Cannot add ${r} more ${e.name}. Maximum stock reached.`);s.quantity+=r,o.success(`Added ${r} ${e.name} to your cart.`)}else t.push({product:{id:e.id,name:e.name,price:e.price,description:e.description,image:e.image,stock:e.stock},quantity:r}),o.success(`Added ${r} ${e.name} to your cart!`);localStorage.setItem("cart",JSON.stringify(t)),i[e.id]=1,window.dispatchEvent(new Event("storage")),c()}catch(t){console.error("Error adding to cart:",t),o.error("Failed to add product to cart.")}else o.error("Sorry, this product is out of stock.")};return(0,r.sV)((()=>{M()})),{products:e,filteredProducts:d,paginatedProducts:p,isLoading:t,isRefreshing:a,searchQuery:s,quantities:i,currentPage:n,productsPerPage:l,totalPages:u,startIndex:m,visiblePages:g,fullImageUrl:k,formatPrice:b,truncate:f,resetSearch:v,refreshProducts:S,addToCart:E,incrementQuantity:C,decrementQuantity:x,getProductRating:y,getReviewCount:L,isNewProduct:w,getStockCountBadgeClass:P,goToPage:h}}};const jt=(0,ie.A)(Jt,[["render",Qt],["__scopeId","data-v-8221468e"]]);var Vt=jt;const Zt={class:"container"},$t={key:0,class:"empty-cart"},Yt={class:"empty-cart-content"},Gt={key:1,class:"row"},ea={class:"col-lg-8"},ta={class:"cart-items card mb-4"},aa={class:"card-header"},sa={class:"mb-0"},ra={class:"card-body p-0"},oa={class:"cart-item-image"},ia=["src","alt"],na={key:1,class:"image-placeholder"},la={class:"cart-item-details"},ca={class:"cart-item-name"},da={class:"cart-item-description"},ua={class:"cart-item-price"},ma={key:0,class:"stock-warning"},pa={class:"cart-item-quantity"},ga={class:"quantity-selector"},ha=["onClick","disabled"],ka=["onUpdate:modelValue","max","disabled","onChange"],ba=["onClick","disabled"],fa={class:"cart-item-total"},va={class:"cart-item-actions"},ya=["onClick"],La={class:"card-footer"},wa={class:"d-flex justify-content-between flex-wrap gap-2"},Pa={class:"col-lg-4"},Ca={class:"cart-summary card"},xa={class:"card-body"},Ma={class:"summary-item"},Sa={class:"summary-item"},Ea={class:"summary-item"},_a={class:"summary-total"},Ia={class:"promo-section mt-3"},Aa=["disabled"],Da={key:0,class:"spinner-border spinner-border-sm",role:"status"},Oa={key:1},Ta={key:0,class:"invalid-feedback"},Fa={key:1,class:"promo-success"},Wa={class:"card-footer"},Ra=["disabled"],Xa={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},Na={key:1,class:"bi bi-credit-card me-2"},qa={key:0,class:"checkout-warning mt-2"},Ha={class:"modal fade confirm-modal",ref:"confirmModal",tabindex:"-1","aria-labelledby":"confirmModalLabel","aria-hidden":"true"},Ba={class:"modal-dialog modal-dialog-centered modal-sm"},Ua={class:"modal-content"},za={class:"modal-header"},Ka={class:"modal-body"},Qa={class:"mb-0"},Ja={class:"modal-footer"};function ja(e,t,a,i,n,l){const c=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",Zt,[t[28]||(t[28]=(0,r.Lk)("div",{class:"cart-header mb-4"},[(0,r.Lk)("h2",{class:"section-title"},[(0,r.Lk)("i",{class:"bi bi-cart me-2"}),(0,r.eW)("Shopping Cart ")])],-1)),i.cart&&0!==i.cart.length?((0,r.uX)(),(0,r.CE)("div",Gt,[(0,r.Lk)("div",ea,[(0,r.Lk)("div",ta,[(0,r.Lk)("div",aa,[(0,r.Lk)("h5",sa,"Cart Items ("+(0,o.v_)(i.cart.length)+")",1)]),(0,r.Lk)("div",ra,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.cart,((e,a)=>((0,r.uX)(),(0,r.CE)("div",{class:"cart-item",key:a},[(0,r.Lk)("div",oa,[e&&e.product&&e.product.image?((0,r.uX)(),(0,r.CE)("img",{key:0,src:i.fullImageUrl(e.product.image),alt:e.product?e.product.name:"Product",loading:"lazy"},null,8,ia)):((0,r.uX)(),(0,r.CE)("div",na,t[11]||(t[11]=[(0,r.Lk)("i",{class:"bi bi-image"},null,-1)])))]),(0,r.Lk)("div",la,[(0,r.Lk)("h5",ca,(0,o.v_)(e&&e.product?e.product.name:"Unknown Product"),1),(0,r.Lk)("p",da,(0,o.v_)(e&&e.product?i.truncate(e.product.description,100):"No description available"),1),(0,r.Lk)("div",ua,"â‚±"+(0,o.v_)(i.formatPrice(e&&e.product?e.product.price:0)),1),e&&e.product&&0===e.product.stock?((0,r.uX)(),(0,r.CE)("div",ma,t[12]||(t[12]=[(0,r.Lk)("i",{class:"bi bi-exclamation-triangle-fill me-1"},null,-1),(0,r.eW)(" Out of stock ")]))):(0,r.Q3)("",!0)]),(0,r.Lk)("div",pa,[(0,r.Lk)("div",ga,[(0,r.Lk)("button",{class:"btn btn-sm btn-outline-secondary",onClick:e=>i.decrementQuantity(a),disabled:!e||e.quantity<=1||e.product&&0===e.product.stock,"aria-label":"Decrease quantity"},t[13]||(t[13]=[(0,r.Lk)("i",{class:"bi bi-dash"},null,-1)]),8,ha),(0,r.bo)((0,r.Lk)("input",{type:"number",class:"form-control form-control-sm","onUpdate:modelValue":t=>e.quantity=t,min:"1",max:e&&e.product?e.product.stock:1,disabled:e&&e.product&&0===e.product.stock,onChange:t=>i.validateQuantity(a,e&&e.product?e.product.stock:1),"aria-label":"Quantity"},null,40,ka),[[s.Jo,e.quantity,void 0,{number:!0}]]),(0,r.Lk)("button",{class:"btn btn-sm btn-outline-secondary",onClick:t=>i.incrementQuantity(a,e&&e.product?e.product.stock:1),disabled:!e||!e.product||e.quantity>=e.product.stock||0===e.product.stock,"aria-label":"Increase quantity"},t[14]||(t[14]=[(0,r.Lk)("i",{class:"bi bi-plus"},null,-1)]),8,ba)])]),(0,r.Lk)("div",fa," â‚±"+(0,o.v_)(i.formatPrice(e&&e.product?e.product.price*e.quantity:0)),1),(0,r.Lk)("div",va,[(0,r.Lk)("button",{class:"btn btn-sm btn-danger",onClick:e=>i.removeItem(a),"aria-label":"Remove item"},t[15]||(t[15]=[(0,r.Lk)("i",{class:"bi bi-trash"},null,-1)]),8,ya)])])))),128))]),(0,r.Lk)("div",La,[(0,r.Lk)("div",wa,[(0,r.Lk)("button",{class:"btn btn-outline-danger",onClick:t[0]||(t[0]=(...e)=>i.confirmClearCart&&i.confirmClearCart(...e))},t[16]||(t[16]=[(0,r.Lk)("i",{class:"bi bi-trash me-2"},null,-1),(0,r.eW)("Clear Cart ")])),(0,r.bF)(c,{to:"/products",class:"btn btn-outline-primary"},{default:(0,r.k6)((()=>t[17]||(t[17]=[(0,r.Lk)("i",{class:"bi bi-shop me-2"},null,-1),(0,r.eW)("Continue Shopping ")]))),_:1})])])])]),(0,r.Lk)("div",Pa,[(0,r.Lk)("div",Ca,[t[25]||(t[25]=(0,r.Lk)("div",{class:"card-header"},[(0,r.Lk)("h5",{class:"mb-0"},"Order Summary")],-1)),(0,r.Lk)("div",xa,[(0,r.Lk)("div",Ma,[t[18]||(t[18]=(0,r.Lk)("span",null,"Subtotal",-1)),(0,r.Lk)("span",null,"â‚±"+(0,o.v_)(i.formatPrice(i.calculateSubtotal())),1)]),(0,r.Lk)("div",Sa,[t[19]||(t[19]=(0,r.Lk)("span",null,"Shipping",-1)),(0,r.Lk)("span",null,"â‚±"+(0,o.v_)(i.formatPrice(i.shippingCost)),1)]),(0,r.Lk)("div",Ea,[t[20]||(t[20]=(0,r.Lk)("span",null,"Tax (12%)",-1)),(0,r.Lk)("span",null,"â‚±"+(0,o.v_)(i.formatPrice(i.calculateTax())),1)]),t[23]||(t[23]=(0,r.Lk)("div",{class:"summary-divider"},null,-1)),(0,r.Lk)("div",_a,[t[21]||(t[21]=(0,r.Lk)("span",null,"Total",-1)),(0,r.Lk)("span",null,"â‚±"+(0,o.v_)(i.formatPrice(i.calculateTotal())),1)]),(0,r.Lk)("div",Ia,[(0,r.Lk)("div",{class:(0,o.C4)(["input-group",{"is-invalid":i.promoError}])},[(0,r.bo)((0,r.Lk)("input",{type:"text",class:(0,o.C4)(["form-control",{"is-invalid":i.promoError}]),placeholder:"Promo code","onUpdate:modelValue":t[1]||(t[1]=e=>i.promoCode=e),"aria-label":"Promo code"},null,2),[[s.Jo,i.promoCode]]),(0,r.Lk)("button",{class:"btn btn-outline-primary",type:"button",onClick:t[2]||(t[2]=(...e)=>i.applyPromoCode&&i.applyPromoCode(...e)),disabled:i.isApplyingPromo||!i.promoCode},[i.isApplyingPromo?((0,r.uX)(),(0,r.CE)("span",Da)):((0,r.uX)(),(0,r.CE)("span",Oa,"Apply"))],8,Aa)],2),i.promoError?((0,r.uX)(),(0,r.CE)("div",Ta,(0,o.v_)(i.promoError),1)):(0,r.Q3)("",!0),i.activePromo?((0,r.uX)(),(0,r.CE)("div",Fa,[t[22]||(t[22]=(0,r.Lk)("i",{class:"bi bi-check-circle-fill me-1"},null,-1)),(0,r.eW)(" "+(0,o.v_)(i.activePromo.code)+" applied: "+(0,o.v_)(i.activePromo.discount)+"% off ",1)])):(0,r.Q3)("",!0)])]),(0,r.Lk)("div",Wa,[(0,r.Lk)("button",{class:"btn btn-primary w-100",onClick:t[3]||(t[3]=(...e)=>i.proceedToCheckout&&i.proceedToCheckout(...e)),disabled:i.isCheckingOut||i.hasOutOfStockItems||0===i.cart.length},[i.isCheckingOut?((0,r.uX)(),(0,r.CE)("span",Xa)):((0,r.uX)(),(0,r.CE)("i",Na)),(0,r.eW)(" "+(0,o.v_)(i.isCheckingOut?"Processing...":"Proceed to Checkout"),1)],8,Ra),i.hasOutOfStockItems?((0,r.uX)(),(0,r.CE)("div",qa,t[24]||(t[24]=[(0,r.Lk)("i",{class:"bi bi-exclamation-triangle-fill me-1"},null,-1),(0,r.eW)(" Please remove out of stock items before checkout ")]))):(0,r.Q3)("",!0)])])])])):((0,r.uX)(),(0,r.CE)("div",$t,[(0,r.Lk)("div",Yt,[t[8]||(t[8]=(0,r.Lk)("i",{class:"bi bi-cart-x cart-icon"},null,-1)),t[9]||(t[9]=(0,r.Lk)("h3",null,"Your cart is empty",-1)),t[10]||(t[10]=(0,r.Lk)("p",null,"Add some products to your cart to continue shopping.",-1)),(0,r.bF)(c,{to:"/products",class:"btn btn-primary mt-3"},{default:(0,r.k6)((()=>t[7]||(t[7]=[(0,r.Lk)("i",{class:"bi bi-shop me-2"},null,-1),(0,r.eW)("Continue Shopping ")]))),_:1})])])),(0,r.Lk)("div",Ha,[(0,r.Lk)("div",Ba,[(0,r.Lk)("div",Ua,[(0,r.Lk)("div",za,[t[26]||(t[26]=(0,r.Lk)("h5",{class:"modal-title",id:"confirmModalLabel"},"Confirm Action",-1)),(0,r.Lk)("button",{type:"button",class:"btn-close",onClick:t[4]||(t[4]=(...e)=>i.hideConfirmModal&&i.hideConfirmModal(...e)),"aria-label":"Close"})]),(0,r.Lk)("div",Ka,[t[27]||(t[27]=(0,r.Lk)("i",{class:"bi bi-question-circle-fill text-warning mb-3",style:{"font-size":"2rem"}},null,-1)),(0,r.Lk)("p",Qa,(0,o.v_)(i.confirmMessage),1)]),(0,r.Lk)("div",Ja,[(0,r.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[5]||(t[5]=(...e)=>i.hideConfirmModal&&i.hideConfirmModal(...e))},"Cancel"),(0,r.Lk)("button",{type:"button",class:"btn btn-danger",onClick:t[6]||(t[6]=(...e)=>i.confirmAction&&i.confirmAction(...e))},"Confirm")])])])],512)])}var Va={setup(){const e=(0,_.KR)([]),t=(0,_.KR)(50),a=(0,j.rd)(),{success:s,warning:o,error:i,info:n}=re(),l=(0,_.KR)([]),c=(0,_.KR)(!1),d=(0,_.KR)(""),u=(0,_.KR)(""),m=(0,_.KR)(!1),p=(0,_.KR)(null),g=(0,_.KR)(null),h=(0,_.KR)(null),k=(0,_.KR)(""),b=(0,_.KR)(null),f=(0,r.EW)((()=>e.value.some((e=>e&&e.product&&0===e.product.stock)))),v=()=>{window.dispatchEvent(new CustomEvent("cart-updated"))},y=e=>e?e.startsWith("http")?e:`http://127.0.0.1:8000${e.startsWith("/")?e:"/media/"+e}`:"",L=e=>parseFloat(e).toFixed(2),w=(e,t)=>e?e.length>t?e.substring(0,t)+"...":e:"",P=()=>{let t=e.value.reduce(((e,t)=>t&&t.product&&0!==t.product.stock?e+t.product.price*t.quantity:e),0);return p.value&&(t*=1-p.value.discount/100),t},C=()=>.12*P(),x=()=>P()+C()+t.value,M=(t,a)=>{try{if(t<0||t>=e.value.length)return;const s=e.value[t];if(!s||!s.product||0===s.product.stock)return;s.quantity<a&&(s.quantity++,O(),n("Quantity updated"))}catch(s){console.error("Error incrementing quantity:",s),i("Failed to update quantity")}},S=t=>{try{if(t<0||t>=e.value.length)return;const a=e.value[t];if(!a||0===a.product.stock)return;a.quantity>1&&(a.quantity--,O(),n("Quantity updated"))}catch(a){console.error("Error decrementing quantity:",a),i("Failed to update quantity")}},E=(t,a)=>{try{if(t<0||t>=e.value.length)return;const s=e.value[t];if(!s)return;if(s.product&&0===s.product.stock)return s.quantity=0,o(`${s.product.name} is out of stock`),void O();s.quantity<1?(s.quantity=1,O()):s.quantity>a&&(s.quantity=a,o(`Maximum stock available: ${a}`),O())}catch(s){console.error("Error validating quantity:",s),i("Failed to update quantity")}},I=t=>{k.value="Are you sure you want to remove this item from your cart?",b.value=()=>{try{if(t<0||t>=e.value.length)return;const a=e.value[t]?.product?.name||"Item";e.value.splice(t,1),O(),s(`Removed ${a} from cart`),B()}catch(a){console.error("Error removing item:",a),i("Failed to remove item")}},H()},A=()=>{try{e.value=[],O(),p.value=null,d.value="",u.value="",n("Cart cleared"),B()}catch(t){console.error("Error clearing cart:",t),i("Failed to clear cart")}},D=()=>{k.value="Are you sure you want to clear your cart? This will remove all items.",b.value=A,H()},O=()=>{try{localStorage.setItem("cart",JSON.stringify(e.value)),window.dispatchEvent(new Event("storage")),v()}catch(t){console.error("Error updating cart:",t),i("Failed to update cart")}},T=[{code:"WELCOME10",discount:10},{code:"SAVE20",discount:20},{code:"SPECIAL30",discount:30}],F=()=>{d.value?(m.value=!0,u.value="",setTimeout((()=>{const e=T.find((e=>e.code===d.value.toUpperCase()));e?(p.value=e,s(`Promo code ${e.code} applied successfully!`)):(u.value="Invalid promo code",i("Invalid promo code. Please try again.")),m.value=!1}),800)):u.value="Please enter a promo code"},W=async()=>{if(f.value)i("Please remove out of stock items before checkout");else if(R()){c.value=!0;try{for(const a of e.value){if(!a||!a.product||!a.product.id)return void i("Invalid item in cart. Please remove it and try again.");if(0===a.product.stock)return void i(`${a.product.name} is out of stock. Please remove it from your cart.`)}const t=await J.get("user/"),r=await J.post("orders/",{customer:t.data.id,complete:!0}),o=r.data.id;for(const a of e.value)0!==a.product.stock&&await J.post("order-items/",{order:o,product:a.product.id,quantity:a.quantity});e.value=[],O(),p.value=null,d.value="",s("Order placed successfully!"),setTimeout((()=>{a.push("/orders")}),1500)}catch(t){console.error("Error during checkout:",t),i("Failed to place order. Please try again.")}finally{c.value=!1}}},R=()=>{let t=!0;return e.value.forEach((e=>e&&e.product&&e.product.id?0===e.product.stock?(o(`${e.product.name} is out of stock. Please remove it from your cart.`),void(t=!1)):void(e.quantity>e.product.stock&&(o(`Quantity for ${e.product.name} exceeds available stock. Adjusting to maximum.`),e.quantity=e.product.stock,O())):(i("Invalid item in cart. Please remove it and try again."),void(t=!1)))),t},X=async()=>{try{const e=await J.get("products/");l.value=e.data,N()}catch(e){console.error("Error fetching products:",e)}},N=()=>{if(!e.value.length||!l.value.length)return;let t=!1;e.value.forEach((e=>{if(!e||!e.product||!e.product.id)return;const a=l.value.find((t=>t.id===e.product.id));if(a&&(e.product.name!==a.name||e.product.price!==a.price||e.product.image!==a.image||e.product.description!==a.description||e.product.stock!==a.stock)){const s=e.quantity;e.product={id:a.id,name:a.name,price:a.price,description:a.description,image:a.image,stock:a.stock},e.quantity=s,e.quantity>a.stock&&(e.quantity=a.stock>0?a.stock:0,o(`Quantity for ${a.name} adjusted to match available stock`)),t=!0}})),t&&(O(),n("Cart updated with latest product information"))},q=()=>{try{const t=localStorage.getItem("cart");if(t){const a=JSON.parse(t);e.value=a.filter((e=>e&&e.product&&e.product.id)),e.value.length!==a.length&&(O(),o("Some invalid items were removed from your cart"))}}catch(t){console.error("Error loading cart:",t),i("Failed to load cart"),e.value=[]}},H=()=>{h.value&&h.value.show()},B=()=>{h.value&&h.value.hide()},U=()=>{"function"===typeof b.value&&b.value()};let z;return(0,r.sV)((()=>{q(),X(),g.value&&(h.value=new ce.aF(g.value)),z=setInterval((()=>{X()}),6e4),v()})),(0,r.hi)((()=>{z&&clearInterval(z)})),(0,r.wB)(e,(()=>{R()}),{deep:!0}),{cart:e,shippingCost:t,fullImageUrl:y,formatPrice:L,truncate:w,calculateSubtotal:P,calculateTax:C,calculateTotal:x,incrementQuantity:M,decrementQuantity:S,validateQuantity:E,removeItem:I,clearCart:A,confirmClearCart:D,updateCart:O,proceedToCheckout:W,isCheckingOut:c,promoCode:d,promoError:u,isApplyingPromo:m,activePromo:p,applyPromoCode:F,confirmModal:g,confirmMessage:k,hideConfirmModal:B,confirmAction:U,hasOutOfStockItems:f}}};const Za=(0,ie.A)(Va,[["render",ja],["__scopeId","data-v-2026dce0"]]);var $a=Za;const Ya={class:"container"},Ga={class:"order-header mb-4"},es={class:"controls-wrapper mt-3"},ts={class:"search-wrapper"},as={class:"input-group"},ss={class:"sort-wrapper"},rs={class:"input-group"},os={key:0,class:"text-center py-5"},is={key:1,class:"empty-orders"},ns={key:2,class:"empty-orders"},ls={key:3},cs={key:0,class:"results-summary mb-3"},ds={class:"card-header"},us={class:"d-flex justify-content-between align-items-center"},ms={class:"mb-0"},ps={class:"order-date"},gs={class:"card-body"},hs={class:"order-items"},ks={key:0,class:"order-item-image"},bs=["src"],fs={key:1,class:"image-placeholder"},vs={class:"order-item-details"},ys={class:"order-item-name"},Ls={key:0,class:"order-item-price"},ws={class:"order-item-quantity"},Ps={key:1,class:"stock-warning"},Cs={key:1,class:"order-item-total"},xs={class:"order-summary mt-3"},Ms={class:"order-total"},Ss={class:"card-footer"},Es={class:"d-flex flex-wrap justify-content-between align-items-center gap-2"},_s=["onClick","disabled"],Is={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},As={key:1,class:"bi bi-arrow-repeat me-2"},Ds={key:0,class:"reorder-warning mt-2"},Os={key:1,class:"pagination-wrapper"},Ts={"aria-label":"Order history pagination"},Fs={class:"pagination justify-content-center"},Ws=["disabled"],Rs=["disabled"],Xs=["onClick"],Ns=["disabled"],qs=["disabled"],Hs={class:"items-per-page"},Bs={class:"modal fade",ref:"confirmModal",tabindex:"-1","aria-labelledby":"confirmModalLabel","aria-hidden":"true"},Us={class:"modal-dialog modal-dialog-centered"},zs={class:"modal-content"},Ks={class:"modal-header"},Qs={class:"modal-body"},Js={class:"confirmation-content"},js={class:"confirmation-message"},Vs={key:0,class:"order-preview mt-4"},Zs={class:"preview-items"},$s={class:"preview-item-details"},Ys={class:"preview-item-name"},Gs={class:"preview-item-qty"},er={key:0,class:"unavailable-badge"},tr={key:1,class:"partial-badge"},ar={key:0,class:"preview-item-price"},sr={class:"preview-total"},rr={class:"preview-total-row"},or={class:"preview-total-row grand-total"},ir={class:"validation-section mt-3"},nr={key:0,class:"validation-message warning"},lr={class:"validation-desc"},cr={key:1,class:"validation-message info"},dr={key:2,class:"validation-message error"},ur={class:"modal-footer"},mr=["disabled"],pr={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},gr={key:1,class:"bi bi-check-circle me-2"};function hr(e,t,a,i,n,l){const c=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",Ya,[(0,r.Lk)("div",Ga,[t[17]||(t[17]=(0,r.Lk)("h2",{class:"section-title"},[(0,r.Lk)("i",{class:"bi bi-clock-history me-2"}),(0,r.eW)("My Orders ")],-1)),(0,r.Lk)("div",es,[(0,r.Lk)("div",ts,[(0,r.Lk)("div",as,[t[14]||(t[14]=(0,r.Lk)("span",{class:"input-group-text"},[(0,r.Lk)("i",{class:"bi bi-search"})],-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>i.searchTerm=e),placeholder:"Search orders or products..."},null,512),[[s.Jo,i.searchTerm]]),i.searchTerm?((0,r.uX)(),(0,r.CE)("button",{key:0,class:"btn btn-outline-secondary",type:"button",onClick:t[1]||(t[1]=e=>i.searchTerm="")},t[13]||(t[13]=[(0,r.Lk)("i",{class:"bi bi-x"},null,-1)]))):(0,r.Q3)("",!0)])]),(0,r.Lk)("div",ss,[(0,r.Lk)("div",rs,[t[16]||(t[16]=(0,r.Lk)("label",{class:"input-group-text",for:"sortSelect"},[(0,r.Lk)("i",{class:"bi bi-sort-down"})],-1)),(0,r.bo)((0,r.Lk)("select",{class:"form-select",id:"sortSelect","onUpdate:modelValue":t[2]||(t[2]=e=>i.sortOption=e)},t[15]||(t[15]=[(0,r.Lk)("option",{value:"newest"},"Newest First",-1),(0,r.Lk)("option",{value:"oldest"},"Oldest First",-1),(0,r.Lk)("option",{value:"highest"},"Highest Amount",-1),(0,r.Lk)("option",{value:"lowest"},"Lowest Amount",-1)]),512),[[s.u1,i.sortOption]])])])])]),i.isLoading?((0,r.uX)(),(0,r.CE)("div",os,t[18]||(t[18]=[(0,r.Fv)('<div class="spinner" data-v-12a93334><div class="bounce1" data-v-12a93334></div><div class="bounce2" data-v-12a93334></div><div class="bounce3" data-v-12a93334></div></div><p class="mt-3" data-v-12a93334>Loading your orders...</p>',2)]))):0===i.orders.length?((0,r.uX)(),(0,r.CE)("div",is,[t[20]||(t[20]=(0,r.Lk)("i",{class:"bi bi-bag-x"},null,-1)),t[21]||(t[21]=(0,r.Lk)("h3",null,"No orders found",-1)),t[22]||(t[22]=(0,r.Lk)("p",null,"You haven't placed any orders yet.",-1)),(0,r.bF)(c,{to:"/products",class:"btn btn-primary mt-3"},{default:(0,r.k6)((()=>t[19]||(t[19]=[(0,r.Lk)("i",{class:"bi bi-shop me-2"},null,-1),(0,r.eW)("Start Shopping ")]))),_:1})])):0===i.paginatedOrders.length?((0,r.uX)(),(0,r.CE)("div",ns,[t[24]||(t[24]=(0,r.Lk)("i",{class:"bi bi-search"},null,-1)),t[25]||(t[25]=(0,r.Lk)("h3",null,"No matching orders",-1)),t[26]||(t[26]=(0,r.Lk)("p",null,"No orders match your search criteria.",-1)),(0,r.Lk)("button",{class:"btn btn-primary mt-3",onClick:t[3]||(t[3]=e=>i.searchTerm="")},t[23]||(t[23]=[(0,r.Lk)("i",{class:"bi bi-arrow-counterclockwise me-2"},null,-1),(0,r.eW)("Clear Search ")]))])):((0,r.uX)(),(0,r.CE)("div",ls,[i.searchTerm?((0,r.uX)(),(0,r.CE)("div",cs,[(0,r.Lk)("span",null,[(0,r.Lk)("strong",null,(0,o.v_)(i.filteredOrders.length),1),(0,r.eW)(" "+(0,o.v_)(1===i.filteredOrders.length?"result":"results")+" found ",1),(0,r.Lk)("button",{class:"btn btn-sm btn-link p-0 ms-2",onClick:t[4]||(t[4]=e=>i.searchTerm="")},t[27]||(t[27]=[(0,r.Lk)("i",{class:"bi bi-x-circle"},null,-1),(0,r.eW)(" Clear ")]))])])):(0,r.Q3)("",!0),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.paginatedOrders,(e=>((0,r.uX)(),(0,r.CE)("div",{class:"order-card card mb-4",key:e.id},[(0,r.Lk)("div",ds,[(0,r.Lk)("div",us,[(0,r.Lk)("h5",ms,[t[28]||(t[28]=(0,r.Lk)("i",{class:"bi bi-bag-check me-2"},null,-1)),(0,r.eW)("Order #"+(0,o.v_)(e.id),1)]),(0,r.Lk)("span",ps,(0,o.v_)(i.formatDate(e.date_ordered)),1)])]),(0,r.Lk)("div",gs,[(0,r.Lk)("div",hs,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.items,(e=>((0,r.uX)(),(0,r.CE)("div",{class:"order-item",key:e.id},[i.getProductDetails(e.product)?((0,r.uX)(),(0,r.CE)("div",ks,[i.getProductDetails(e.product).image?((0,r.uX)(),(0,r.CE)("img",{key:0,src:i.fullImageUrl(i.getProductDetails(e.product).image),alt:"Product"},null,8,bs)):((0,r.uX)(),(0,r.CE)("div",fs,t[29]||(t[29]=[(0,r.Lk)("i",{class:"bi bi-image"},null,-1)])))])):(0,r.Q3)("",!0),(0,r.Lk)("div",vs,[(0,r.Lk)("h6",ys,(0,o.v_)(i.getProductDetails(e.product)?i.getProductDetails(e.product).name:`Product #${e.product}`),1),i.getProductDetails(e.product)?((0,r.uX)(),(0,r.CE)("p",Ls," â‚±"+(0,o.v_)(i.getProductDetails(e.product).price)+" Ã— "+(0,o.v_)(e.quantity),1)):(0,r.Q3)("",!0),(0,r.Lk)("p",ws," Quantity: "+(0,o.v_)(e.quantity),1),i.getProductDetails(e.product)&&0===i.getProductDetails(e.product).stock?((0,r.uX)(),(0,r.CE)("div",Ps,t[30]||(t[30]=[(0,r.Lk)("i",{class:"bi bi-exclamation-triangle-fill me-1"},null,-1),(0,r.eW)(" Currently out of stock ")]))):(0,r.Q3)("",!0)]),i.getProductDetails(e.product)?((0,r.uX)(),(0,r.CE)("div",Cs," â‚±"+(0,o.v_)((i.getProductDetails(e.product).price*e.quantity).toFixed(2)),1)):(0,r.Q3)("",!0)])))),128))]),(0,r.Lk)("div",xs,[(0,r.Lk)("div",Ms,[t[31]||(t[31]=(0,r.Lk)("span",null,"Total:",-1)),(0,r.Lk)("span",null,"â‚±"+(0,o.v_)(i.calculateOrderTotal(e).toFixed(2)),1)])])]),(0,r.Lk)("div",Ss,[(0,r.Lk)("div",Es,[t[32]||(t[32]=(0,r.Lk)("span",{class:"order-status d-flex align-items-center"},[(0,r.Lk)("i",{class:"bi bi-check-circle-fill text-success me-1"}),(0,r.eW)(" Completed ")],-1)),(0,r.Lk)("button",{class:"btn btn-primary btn-sm",onClick:t=>i.reorderItems(e),disabled:i.isReordering||!i.hasAvailableItems(e)},[i.isReordering?((0,r.uX)(),(0,r.CE)("span",Is)):((0,r.uX)(),(0,r.CE)("i",As)),(0,r.eW)(" "+(0,o.v_)(i.isReordering?"Processing...":"Reorder"),1)],8,_s)]),i.hasAvailableItems(e)?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",Ds,t[33]||(t[33]=[(0,r.Lk)("i",{class:"bi bi-exclamation-triangle-fill me-1"},null,-1),(0,r.eW)(" Cannot reorder - all items are out of stock ")])))])])))),128)),i.totalPages>1?((0,r.uX)(),(0,r.CE)("div",Os,[(0,r.Lk)("nav",Ts,[(0,r.Lk)("ul",Fs,[(0,r.Lk)("li",{class:(0,o.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,r.Lk)("button",{class:"page-link",onClick:t[5]||(t[5]=e=>i.currentPage=1),disabled:1===i.currentPage},t[34]||(t[34]=[(0,r.Lk)("i",{class:"bi bi-chevron-double-left"},null,-1)]),8,Ws)],2),(0,r.Lk)("li",{class:(0,o.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,r.Lk)("button",{class:"page-link",onClick:t[6]||(t[6]=e=>i.currentPage--),disabled:1===i.currentPage},t[35]||(t[35]=[(0,r.Lk)("i",{class:"bi bi-chevron-left"},null,-1)]),8,Rs)],2),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.displayedPages,(e=>((0,r.uX)(),(0,r.CE)("li",{key:e,class:(0,o.C4)(["page-item",{active:i.currentPage===e}])},[(0,r.Lk)("button",{class:"page-link",onClick:t=>i.currentPage=e},(0,o.v_)(e),9,Xs)],2)))),128)),(0,r.Lk)("li",{class:(0,o.C4)(["page-item",{disabled:i.currentPage===i.totalPages}])},[(0,r.Lk)("button",{class:"page-link",onClick:t[7]||(t[7]=e=>i.currentPage++),disabled:i.currentPage===i.totalPages},t[36]||(t[36]=[(0,r.Lk)("i",{class:"bi bi-chevron-right"},null,-1)]),8,Ns)],2),(0,r.Lk)("li",{class:(0,o.C4)(["page-item",{disabled:i.currentPage===i.totalPages}])},[(0,r.Lk)("button",{class:"page-link",onClick:t[8]||(t[8]=e=>i.currentPage=i.totalPages),disabled:i.currentPage===i.totalPages},t[37]||(t[37]=[(0,r.Lk)("i",{class:"bi bi-chevron-double-right"},null,-1)]),8,qs)],2)])]),(0,r.Lk)("div",Hs,[t[39]||(t[39]=(0,r.Lk)("span",null,"Items per page:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>i.itemsPerPage=e),class:"form-select form-select-sm"},t[38]||(t[38]=[(0,r.Lk)("option",{value:5},"5",-1),(0,r.Lk)("option",{value:10},"10",-1),(0,r.Lk)("option",{value:20},"20",-1)]),512),[[s.u1,i.itemsPerPage]])])])):(0,r.Q3)("",!0)])),(0,r.Lk)("div",Bs,[(0,r.Lk)("div",Us,[(0,r.Lk)("div",zs,[(0,r.Lk)("div",Ks,[t[40]||(t[40]=(0,r.Lk)("h5",{class:"modal-title",id:"confirmModalLabel"},[(0,r.Lk)("i",{class:"bi bi-cart-check me-2"}),(0,r.eW)("Confirm ")],-1)),(0,r.Lk)("button",{type:"button",class:"btn-close",onClick:t[10]||(t[10]=(...e)=>i.hideConfirmModal&&i.hideConfirmModal(...e)),"aria-label":"Close"})]),(0,r.Lk)("div",Qs,[(0,r.Lk)("div",Js,[(0,r.Lk)("p",js,(0,o.v_)(i.confirmMessage),1),i.orderToReorder?((0,r.uX)(),(0,r.CE)("div",Vs,[t[49]||(t[49]=(0,r.Lk)("h6",{class:"preview-heading"},[(0,r.Lk)("i",{class:"bi bi-receipt me-2"}),(0,r.eW)("Order Summary ")],-1)),(0,r.Lk)("div",Zs,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.orderToReorder.items,(e=>((0,r.uX)(),(0,r.CE)("div",{class:(0,o.C4)(["preview-item",{unavailable:i.isItemUnavailable(e)}]),key:e.id},[(0,r.Lk)("div",$s,[(0,r.Lk)("span",Ys,(0,o.v_)(i.getProductDetails(e.product)?i.getProductDetails(e.product).name:`Product #${e.product}`),1),(0,r.Lk)("span",Gs,[(0,r.eW)(" Ã— "+(0,o.v_)(e.quantity)+" ",1),i.isItemUnavailable(e)?((0,r.uX)(),(0,r.CE)("span",er,t[41]||(t[41]=[(0,r.Lk)("i",{class:"bi bi-x-circle-fill"},null,-1),(0,r.eW)(" Out of stock ")]))):i.isItemPartiallyAvailable(e)?((0,r.uX)(),(0,r.CE)("span",tr,[t[42]||(t[42]=(0,r.Lk)("i",{class:"bi bi-exclamation-circle-fill"},null,-1)),(0,r.eW)(" Limited stock ("+(0,o.v_)(i.getProductDetails(e.product).stock)+") ",1)])):(0,r.Q3)("",!0)])]),i.getProductDetails(e.product)?((0,r.uX)(),(0,r.CE)("span",ar," â‚±"+(0,o.v_)((i.getProductDetails(e.product).price*(i.isItemUnavailable(e)?0:Math.min(e.quantity,i.getProductDetails(e.product).stock))).toFixed(2)),1)):(0,r.Q3)("",!0)],2)))),128))]),(0,r.Lk)("div",sr,[(0,r.Lk)("div",rr,[t[43]||(t[43]=(0,r.Lk)("span",null,"Subtotal:",-1)),(0,r.Lk)("span",null,"â‚±"+(0,o.v_)(i.calculateAvailableTotal(i.orderToReorder).subtotal.toFixed(2)),1)]),(0,r.Lk)("div",or,[t[44]||(t[44]=(0,r.Lk)("span",null,"Total:",-1)),(0,r.Lk)("span",null,"â‚±"+(0,o.v_)(i.calculateAvailableTotal(i.orderToReorder).total.toFixed(2)),1)])]),(0,r.Lk)("div",ir,[i.unavailableItems.length>0?((0,r.uX)(),(0,r.CE)("div",nr,[t[46]||(t[46]=(0,r.Lk)("i",{class:"bi bi-exclamation-triangle-fill me-2"},null,-1)),(0,r.Lk)("div",null,[t[45]||(t[45]=(0,r.Lk)("p",{class:"validation-title"},"Some items are unavailable",-1)),(0,r.Lk)("p",lr,(0,o.v_)(i.unavailableItems.length)+" item(s) will be skipped due to stock issues.",1)])])):(0,r.Q3)("",!0),i.partiallyAvailableItems.length>0?((0,r.uX)(),(0,r.CE)("div",cr,t[47]||(t[47]=[(0,r.Lk)("i",{class:"bi bi-info-circle-fill me-2"},null,-1),(0,r.Lk)("div",null,[(0,r.Lk)("p",{class:"validation-title"},"Limited stock available"),(0,r.Lk)("p",{class:"validation-desc"},"Some items have limited stock and quantities will be adjusted.")],-1)]))):(0,r.Q3)("",!0),0===i.calculateAvailableTotal(i.orderToReorder).total?((0,r.uX)(),(0,r.CE)("div",dr,t[48]||(t[48]=[(0,r.Lk)("i",{class:"bi bi-x-octagon-fill me-2"},null,-1),(0,r.Lk)("div",null,[(0,r.Lk)("p",{class:"validation-title"},"Cannot proceed"),(0,r.Lk)("p",{class:"validation-desc"},"All items in this order are out of stock.")],-1)]))):(0,r.Q3)("",!0)])])):(0,r.Q3)("",!0)])]),(0,r.Lk)("div",ur,[(0,r.Lk)("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[11]||(t[11]=(...e)=>i.hideConfirmModal&&i.hideConfirmModal(...e))},t[50]||(t[50]=[(0,r.Lk)("i",{class:"bi bi-x me-1"},null,-1),(0,r.eW)("Cancel ")])),(0,r.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[12]||(t[12]=(...e)=>i.confirmReorder&&i.confirmReorder(...e)),disabled:i.isReordering||i.orderToReorder&&0===i.calculateAvailableTotal(i.orderToReorder).total},[i.isReordering?((0,r.uX)(),(0,r.CE)("span",pr)):((0,r.uX)(),(0,r.CE)("i",gr)),(0,r.eW)(" "+(0,o.v_)(i.isReordering?"Processing...":"Confirm"),1)],8,mr)])])])],512)])}var kr={setup(){const e=(0,_.KR)([]),t=(0,_.KR)([]),a=(0,_.KR)(!0),s=(0,_.KR)(!1),o=(0,_.KR)(null),i=(0,_.KR)(null),n=(0,_.KR)(""),l=(0,_.KR)(null),c=(0,_.KR)([]),d=(0,_.KR)([]),u=se(),m=(0,_.KR)(""),p=(0,_.KR)("newest"),g=(0,_.KR)(1),h=(0,_.KR)(5);(0,r.wB)([m,p,h],(()=>{g.value=1}));const k=(0,r.EW)((()=>{if(!m.value.trim())return e.value;const t=m.value.toLowerCase().trim();return e.value.filter((e=>!!e.id.toString().includes(t)||!!(e.items&&e.items.length>0)&&e.items.some((e=>{const a=P(e.product);return!(!a||!a.name)&&a.name.toLowerCase().includes(t)}))))})),b=(0,r.EW)((()=>{const e=[...k.value];switch(p.value){case"newest":return e.sort(((e,t)=>new Date(t.date_ordered)-new Date(e.date_ordered)));case"oldest":return e.sort(((e,t)=>new Date(e.date_ordered)-new Date(t.date_ordered)));case"highest":return e.sort(((e,t)=>C(t)-C(e)));case"lowest":return e.sort(((e,t)=>C(e)-C(t)));default:return e}})),f=(0,r.EW)((()=>Math.ceil(b.value.length/h.value))),v=(0,r.EW)((()=>{const e=[],t=5;if(f.value<=t)for(let a=1;a<=f.value;a++)e.push(a);else{e.push(1);let t=Math.max(2,g.value-1),a=Math.min(f.value-1,g.value+1);g.value<=3&&(a=4),g.value>=f.value-2&&(t=f.value-3),t>2&&e.push("...");for(let s=t;s<=a;s++)e.push(s);a<f.value-1&&e.push("..."),e.push(f.value)}return e})),y=(0,r.EW)((()=>{const e=(g.value-1)*h.value,t=e+h.value;return b.value.slice(e,t)})),L=e=>{const t={year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(e).toLocaleDateString(void 0,t)},w=e=>e?e.startsWith("http")?e:`http://127.0.0.1:8000${e.startsWith("/")?e:"/media/"+e}`:"",P=e=>t.value.find((t=>t.id===e)),C=e=>{let t=0;return e.items&&e.items.forEach((e=>{const a=P(e.product);a&&(t+=a.price*e.quantity)})),t},x=e=>!(!e.items||0===e.items.length)&&e.items.some((e=>{const t=P(e.product);return t&&t.stock>0})),M=e=>{if(!e.items)return[];const t=[];return e.items.forEach((e=>{const a=P(e.product);a&&0===a.stock&&t.push({id:a.id,name:a.name})})),t},S=e=>{if(!e.items)return[];const t=[];return e.items.forEach((e=>{const a=P(e.product);a&&a.stock>0&&a.stock<e.quantity&&t.push({id:a.id,name:a.name,requestedQty:e.quantity,availableQty:a.stock})})),t},E=e=>{const t=P(e.product);return!t||0===t.stock},I=e=>{const t=P(e.product);return t&&t.stock>0&&t.stock<e.quantity},A=e=>{let t=0;return e&&e.items&&e.items.forEach((e=>{const a=P(e.product);if(a&&a.stock>0){const s=Math.min(e.quantity,a.stock);t+=a.price*s}})),{subtotal:t,total:t}},D=e=>{x(e)?(l.value=e,c.value=M(e),d.value=S(e),c.value.length>0?n.value="Some items in this order are out of stock and will be skipped. Do you want to continue with the reorder?":n.value="Are you sure you want to reorder these items?",W()):u.error("Cannot reorder - all items are out of stock")},O=async()=>{if(l.value){s.value=!0;try{const e=await J.get("user/"),t=await J.post("orders/",{customer:e.data.id,complete:!0}),a=t.data.id;let s=0;for(const r of l.value.items){const e=P(r.product);if(!e||e.stock<1)continue;const t=Math.min(r.quantity,e.stock);await J.post("order-items/",{order:a,product:r.product,quantity:t}),s++}s>0?(u.success("Order placed successfully!"),setTimeout((()=>{T()}),1e3)):u.error("No items could be added to your order."),R()}catch(e){console.error(e),u.error("Failed to reorder. Please try again.")}finally{s.value=!1}}},T=async()=>{try{const t=await J.get("orders/");e.value=t.data}catch(t){u.error("Failed to load orders."),console.error(t)}},F=async()=>{try{const e=await J.get("products/");t.value=e.data}catch(e){console.error("Failed to load products:",e)}finally{a.value=!1}},W=()=>{i.value?i.value.show():o.value&&(i.value=new ce.aF(o.value),i.value.show())},R=()=>{i.value&&i.value.hide()},X=async()=>{try{await T(),await F()}catch(e){console.error(e),a.value=!1}};return X(),{orders:e,isLoading:a,isReordering:s,confirmModal:o,confirmMessage:n,orderToReorder:l,unavailableItems:c,partiallyAvailableItems:d,searchTerm:m,sortOption:p,currentPage:g,itemsPerPage:h,filteredOrders:k,sortedOrders:b,paginatedOrders:y,totalPages:f,displayedPages:v,formatDate:L,fullImageUrl:w,getProductDetails:P,calculateOrderTotal:C,hasAvailableItems:x,isItemUnavailable:E,isItemPartiallyAvailable:I,calculateAvailableTotal:A,reorderItems:D,confirmReorder:O,hideConfirmModal:R}}};const br=(0,ie.A)(kr,[["render",hr],["__scopeId","data-v-12a93334"]]);var fr=br;const vr={class:"container"},yr={class:"row g-3 mb-3 mb-md-4"},Lr={class:"col-12 col-md-4"},wr={class:"stat-card card h-100"},Pr={class:"card-body"},Cr={class:"stat-info"},xr={class:"col-12 col-md-4"},Mr={class:"stat-card card h-100"},Sr={class:"card-body"},Er={class:"stat-info"},_r={class:"col-12 col-md-4"},Ir={class:"stat-card card h-100"},Ar={class:"card-body"},Dr={class:"stat-info"},Or={class:"card mb-3"},Tr={class:"card-body"},Fr={class:"row g-2"},Wr={class:"col-12 col-md-4"},Rr={class:"form-group"},Xr={class:"input-group"},Nr={class:"col-12 col-md-4"},qr={class:"form-group"},Hr={class:"d-flex gap-2"},Br={class:"input-group"},Ur={class:"input-group"},zr={class:"col-12 col-md-4"},Kr={class:"form-group"},Qr={class:"d-flex justify-content-end mt-3"},Jr={class:"card mb-3 mb-md-4"},jr={class:"card-header d-flex flex-column flex-md-row justify-content-between align-items-md-center"},Vr={class:"mb-2 mb-md-0"},Zr={class:"mobile-pagination-select d-md-none"},$r={class:"per-page-selector"},Yr={class:"d-none d-md-flex align-items-center"},Gr={class:"me-2 text-muted"},eo={class:"per-page-selector ms-2"},to={key:0,class:"loading-container py-5"},ao={key:1,class:"d-md-none"},so={key:0,class:"text-center py-4"},ro={key:1,class:"mobile-orders-list"},oo=["onClick"],io={class:"d-flex justify-content-between align-items-center mb-2"},no={class:"order-id"},lo={class:"text-muted small mb-2"},co={class:"mb-2"},uo={class:"d-flex justify-content-between"},mo={key:0,class:"mobile-pagination"},po={class:"pagination-info"},go={class:"pagination-controls"},ho=["disabled"],ko=["disabled"],bo={key:2,class:"table-responsive d-none d-md-block"},fo={class:"table table-hover mb-0"},vo={key:0},yo={class:"order-id"},Lo=["onClick"],wo={key:3,class:"card-footer d-none d-md-flex justify-content-between align-items-center"},Po={class:"pagination-info"},Co={"aria-label":"Orders pagination"},xo={class:"pagination pagination-sm mb-0"},Mo=["disabled"],So={key:0,class:"page-link",disabled:""},Eo=["onClick"],_o=["disabled"],Io={class:"modal fade",ref:"orderModal",id:"orderModal",tabindex:"-1"},Ao={class:"modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable"},Do={class:"modal-content"},Oo={class:"modal-header"},To={class:"modal-title"},Fo={key:0,class:"modal-body"},Wo={class:"order-info mb-4"},Ro={class:"row"},Xo={class:"col-md-6 mb-3 mb-md-0"},No={class:"col-md-6"},qo={class:"table-responsive"},Ho={class:"table table-bordered mb-0"},Bo={class:"d-flex align-items-center"},Uo={key:0,class:"order-item-image me-2"},zo=["src"],Ko={key:1,class:"image-placeholder"},Qo={class:"text-center"},Jo={class:"text-center"},jo={class:"text-center"},Vo={class:"text-center"},Zo={class:"modal-footer"};function $o(e,t,a,i,n,l){return(0,r.uX)(),(0,r.CE)("div",vr,[t[53]||(t[53]=(0,r.Lk)("div",{class:"admin-header mb-3 mb-md-4"},[(0,r.Lk)("h2",{class:"section-title"},[(0,r.Lk)("i",{class:"bi bi-clipboard-check me-2"}),(0,r.eW)("Checkout Monitor ")])],-1)),(0,r.Lk)("div",yr,[(0,r.Lk)("div",Lr,[(0,r.Lk)("div",wr,[(0,r.Lk)("div",Pr,[t[15]||(t[15]=(0,r.Lk)("div",{class:"stat-icon"},[(0,r.Lk)("i",{class:"bi bi-cart-check"})],-1)),(0,r.Lk)("div",Cr,[(0,r.Lk)("h3",null,(0,o.v_)(n.orders.length),1),t[14]||(t[14]=(0,r.Lk)("p",null,"Total Orders",-1))])])])]),(0,r.Lk)("div",xr,[(0,r.Lk)("div",Mr,[(0,r.Lk)("div",Sr,[t[17]||(t[17]=(0,r.Lk)("div",{class:"stat-icon"},[(0,r.Lk)("span",null,"â‚±")],-1)),(0,r.Lk)("div",Er,[(0,r.Lk)("h3",null,"â‚±"+(0,o.v_)(l.calculateTotalSales()),1),t[16]||(t[16]=(0,r.Lk)("p",null,"Total Sales",-1))])])])]),(0,r.Lk)("div",_r,[(0,r.Lk)("div",Ir,[(0,r.Lk)("div",Ar,[t[19]||(t[19]=(0,r.Lk)("div",{class:"stat-icon"},[(0,r.Lk)("i",{class:"bi bi-people"})],-1)),(0,r.Lk)("div",Dr,[(0,r.Lk)("h3",null,(0,o.v_)(l.uniqueCustomers.length),1),t[18]||(t[18]=(0,r.Lk)("p",null,"Unique Customers",-1))])])])])]),(0,r.Lk)("div",Or,[(0,r.Lk)("div",Tr,[t[28]||(t[28]=(0,r.Lk)("h5",{class:"filter-title mb-3"},[(0,r.Lk)("i",{class:"bi bi-funnel me-2"}),(0,r.eW)("Search & Filter")],-1)),(0,r.Lk)("div",Fr,[(0,r.Lk)("div",Wr,[(0,r.Lk)("div",Rr,[t[21]||(t[21]=(0,r.Lk)("label",{class:"form-label"},"Search",-1)),(0,r.Lk)("div",Xr,[t[20]||(t[20]=(0,r.Lk)("span",{class:"input-group-text"},[(0,r.Lk)("i",{class:"bi bi-search"})],-1)),(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>n.searchQuery=e),class:"form-control",placeholder:"Order ID..."},null,512),[[s.Jo,n.searchQuery]])])])]),(0,r.Lk)("div",Nr,[(0,r.Lk)("div",qr,[t[24]||(t[24]=(0,r.Lk)("label",{class:"form-label"},"Date Range",-1)),(0,r.Lk)("div",Hr,[(0,r.Lk)("div",Br,[t[22]||(t[22]=(0,r.Lk)("span",{class:"input-group-text"},[(0,r.Lk)("i",{class:"bi bi-calendar3"})],-1)),(0,r.bo)((0,r.Lk)("input",{type:"date","onUpdate:modelValue":t[1]||(t[1]=e=>n.dateFrom=e),class:"form-control",placeholder:"From"},null,512),[[s.Jo,n.dateFrom]])]),(0,r.Lk)("div",Ur,[t[23]||(t[23]=(0,r.Lk)("span",{class:"input-group-text"},[(0,r.Lk)("i",{class:"bi bi-calendar3"})],-1)),(0,r.bo)((0,r.Lk)("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=e=>n.dateTo=e),class:"form-control",placeholder:"To"},null,512),[[s.Jo,n.dateTo]])])])])]),(0,r.Lk)("div",zr,[(0,r.Lk)("div",Kr,[t[26]||(t[26]=(0,r.Lk)("label",{class:"form-label"},"Sort By",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>n.sortBy=e),class:"form-select"},t[25]||(t[25]=[(0,r.Lk)("option",{value:"date_desc"},"Newest First",-1),(0,r.Lk)("option",{value:"date_asc"},"Oldest First",-1),(0,r.Lk)("option",{value:"amount_desc"},"Highest Amount",-1),(0,r.Lk)("option",{value:"amount_asc"},"Lowest Amount",-1)]),512),[[s.u1,n.sortBy]])])])]),(0,r.Lk)("div",Qr,[(0,r.Lk)("button",{class:"btn btn-outline-secondary me-2",onClick:t[4]||(t[4]=(...e)=>l.resetFilters&&l.resetFilters(...e))},t[27]||(t[27]=[(0,r.Lk)("i",{class:"bi bi-x-circle me-1"},null,-1),(0,r.eW)("Reset ")]))])])]),(0,r.Lk)("div",Jr,[(0,r.Lk)("div",jr,[(0,r.Lk)("h5",Vr,[t[30]||(t[30]=(0,r.Lk)("i",{class:"bi bi-list-check me-2"},null,-1)),t[31]||(t[31]=(0,r.eW)("Recent Orders ")),(0,r.Lk)("div",Zr,[(0,r.Lk)("div",$r,[(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>n.perPage=e),class:"form-select form-select-sm","aria-label":"Items per page"},t[29]||(t[29]=[(0,r.Lk)("option",{value:5},"5",-1),(0,r.Lk)("option",{value:10},"10",-1),(0,r.Lk)("option",{value:25},"25",-1),(0,r.Lk)("option",{value:50},"50",-1)]),512),[[s.u1,n.perPage]])])])]),(0,r.Lk)("div",Yr,[(0,r.Lk)("span",Gr,(0,o.v_)(l.filteredOrders.length)+" orders found",1),(0,r.Lk)("div",eo,[(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>n.perPage=e),class:"form-select form-select-sm","aria-label":"Items per page"},t[32]||(t[32]=[(0,r.Lk)("option",{value:5},"5",-1),(0,r.Lk)("option",{value:10},"10",-1),(0,r.Lk)("option",{value:25},"25",-1),(0,r.Lk)("option",{value:50},"50",-1)]),512),[[s.u1,n.perPage]])])])]),n.isLoading?((0,r.uX)(),(0,r.CE)("div",to,t[33]||(t[33]=[(0,r.Lk)("div",{class:"spinner"},[(0,r.Lk)("div",{class:"bounce1"}),(0,r.Lk)("div",{class:"bounce2"}),(0,r.Lk)("div",{class:"bounce3"})],-1),(0,r.Lk)("p",null,"Loading orders...",-1)]))):l.isMobile?((0,r.uX)(),(0,r.CE)("div",ao,[0===l.paginatedOrders.length?((0,r.uX)(),(0,r.CE)("div",so,t[34]||(t[34]=[(0,r.Lk)("i",{class:"bi bi-search text-muted",style:{"font-size":"2rem"}},null,-1),(0,r.Lk)("p",{class:"mt-2 text-muted"},"No orders found",-1)]))):((0,r.uX)(),(0,r.CE)("div",ro,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.paginatedOrders,(e=>((0,r.uX)(),(0,r.CE)("div",{key:`mobile-${e.id}`,class:"mobile-order-item",onClick:t=>l.viewOrderDetails(e)},[(0,r.Lk)("div",io,[(0,r.Lk)("strong",no,"#"+(0,o.v_)(e.id),1),t[35]||(t[35]=(0,r.Lk)("span",{class:"badge bg-success"},"Completed",-1))]),(0,r.Lk)("div",lo,(0,o.v_)(l.formatDate(e.date_ordered)),1),(0,r.Lk)("div",co,(0,o.v_)(e.customer),1),(0,r.Lk)("div",uo,[(0,r.Lk)("span",null,(0,o.v_)(e.items?e.items.length:0)+" items",1),(0,r.Lk)("strong",null,"â‚±"+(0,o.v_)(l.calculateOrderTotal(e).toFixed(2)),1)])],8,oo)))),128)),l.totalPages>1?((0,r.uX)(),(0,r.CE)("div",mo,[(0,r.Lk)("div",po," Page "+(0,o.v_)(n.currentPage)+" of "+(0,o.v_)(l.totalPages),1),(0,r.Lk)("div",go,[(0,r.Lk)("button",{class:"btn btn-sm btn-outline-primary",disabled:1===n.currentPage,onClick:t[7]||(t[7]=e=>l.changePage(n.currentPage-1))},t[36]||(t[36]=[(0,r.Lk)("i",{class:"bi bi-chevron-left"},null,-1)]),8,ho),(0,r.Lk)("button",{class:"btn btn-sm btn-outline-primary",disabled:n.currentPage===l.totalPages,onClick:t[8]||(t[8]=e=>l.changePage(n.currentPage+1))},t[37]||(t[37]=[(0,r.Lk)("i",{class:"bi bi-chevron-right"},null,-1)]),8,ko)])])):(0,r.Q3)("",!0)]))])):((0,r.uX)(),(0,r.CE)("div",bo,[(0,r.Lk)("table",fo,[t[41]||(t[41]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",{scope:"col"},"Order ID"),(0,r.Lk)("th",{scope:"col"},"Date"),(0,r.Lk)("th",{scope:"col"},"Customer"),(0,r.Lk)("th",{scope:"col"},"Items"),(0,r.Lk)("th",{scope:"col"},"Total"),(0,r.Lk)("th",{scope:"col"},"Status"),(0,r.Lk)("th",{scope:"col"},"Actions")])],-1)),(0,r.Lk)("tbody",null,[0===l.paginatedOrders.length?((0,r.uX)(),(0,r.CE)("tr",vo,t[38]||(t[38]=[(0,r.Lk)("td",{colspan:"7",class:"text-center py-4"},[(0,r.Lk)("i",{class:"bi bi-search text-muted",style:{"font-size":"2rem"}}),(0,r.Lk)("p",{class:"mt-2 text-muted"},"No orders found")],-1)]))):(0,r.Q3)("",!0),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.paginatedOrders,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:`desktop-${e.id}`},[(0,r.Lk)("td",null,[(0,r.Lk)("span",yo,"#"+(0,o.v_)(e.id),1)]),(0,r.Lk)("td",null,(0,o.v_)(l.formatDate(e.date_ordered)),1),(0,r.Lk)("td",null,(0,o.v_)(e.customer),1),(0,r.Lk)("td",null,(0,o.v_)(e.items?e.items.length:0)+" items",1),(0,r.Lk)("td",null,"â‚±"+(0,o.v_)(l.calculateOrderTotal(e).toFixed(2)),1),t[40]||(t[40]=(0,r.Lk)("td",null,[(0,r.Lk)("span",{class:"badge bg-success"},"Completed")],-1)),(0,r.Lk)("td",null,[(0,r.Lk)("button",{class:"btn btn-sm btn-primary btn-view",onClick:t=>l.viewOrderDetails(e)},t[39]||(t[39]=[(0,r.Lk)("i",{class:"bi bi-eye"},null,-1)]),8,Lo)])])))),128))])])])),l.filteredOrders.length>0?((0,r.uX)(),(0,r.CE)("div",wo,[(0,r.Lk)("div",Po," Showing "+(0,o.v_)(l.paginationInfo.from)+" to "+(0,o.v_)(l.paginationInfo.to)+" of "+(0,o.v_)(l.filteredOrders.length)+" orders ",1),(0,r.Lk)("nav",Co,[(0,r.Lk)("ul",xo,[(0,r.Lk)("li",{class:(0,o.C4)(["page-item",{disabled:1===n.currentPage}])},[(0,r.Lk)("button",{class:"page-link",onClick:t[9]||(t[9]=e=>l.changePage(n.currentPage-1)),disabled:1===n.currentPage,"aria-label":"Previous page"},t[42]||(t[42]=[(0,r.Lk)("i",{class:"bi bi-chevron-left"},null,-1)]),8,Mo)],2),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.getPageNumbers(),(e=>((0,r.uX)(),(0,r.CE)("li",{key:e,class:(0,o.C4)(["page-item",{active:n.currentPage===e}])},["..."===e?((0,r.uX)(),(0,r.CE)("button",So,(0,o.v_)(e),1)):((0,r.uX)(),(0,r.CE)("button",{key:1,class:"page-link",onClick:t=>l.changePage(e)},(0,o.v_)(e),9,Eo))],2)))),128)),(0,r.Lk)("li",{class:(0,o.C4)(["page-item",{disabled:n.currentPage===l.totalPages}])},[(0,r.Lk)("button",{class:"page-link",onClick:t[10]||(t[10]=e=>l.changePage(n.currentPage+1)),disabled:n.currentPage===l.totalPages,"aria-label":"Next page"},t[43]||(t[43]=[(0,r.Lk)("i",{class:"bi bi-chevron-right"},null,-1)]),8,_o)],2)])])])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",Io,[(0,r.Lk)("div",Ao,[(0,r.Lk)("div",Do,[(0,r.Lk)("div",Oo,[(0,r.Lk)("h5",To,"Order Details #"+(0,o.v_)(n.selectedOrder?.id),1),(0,r.Lk)("button",{type:"button",class:"btn-close",onClick:t[11]||(t[11]=(...e)=>l.closeOrderModal&&l.closeOrderModal(...e)),"aria-label":"Close"})]),n.selectedOrder?((0,r.uX)(),(0,r.CE)("div",Fo,[(0,r.Lk)("div",Wo,[(0,r.Lk)("div",Ro,[(0,r.Lk)("div",Xo,[(0,r.Lk)("p",null,[t[44]||(t[44]=(0,r.Lk)("strong",null,"Customer:",-1)),(0,r.eW)(" "+(0,o.v_)(n.selectedOrder.customer),1)]),(0,r.Lk)("p",null,[t[45]||(t[45]=(0,r.Lk)("strong",null,"Date:",-1)),(0,r.eW)(" "+(0,o.v_)(l.formatDate(n.selectedOrder.date_ordered)),1)])]),(0,r.Lk)("div",No,[t[47]||(t[47]=(0,r.Lk)("p",null,[(0,r.Lk)("strong",null,"Status:"),(0,r.eW)(),(0,r.Lk)("span",{class:"badge bg-success"},"Completed")],-1)),(0,r.Lk)("p",null,[t[46]||(t[46]=(0,r.Lk)("strong",null,"Total:",-1)),(0,r.eW)(" â‚±"+(0,o.v_)(l.calculateOrderTotal(n.selectedOrder).toFixed(2)),1)])])])]),t[51]||(t[51]=(0,r.Lk)("h6",{class:"mb-3"},"Order Items",-1)),(0,r.Lk)("div",qo,[(0,r.Lk)("table",Ho,[t[50]||(t[50]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",{scope:"col"},"Product"),(0,r.Lk)("th",{scope:"col",class:"text-center"},"Price"),(0,r.Lk)("th",{scope:"col",class:"text-center"},"Quantity"),(0,r.Lk)("th",{scope:"col",class:"text-center"},"Total")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.selectedOrder.items,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.id},[(0,r.Lk)("td",null,[(0,r.Lk)("div",Bo,[l.getProductDetails(e.product)?((0,r.uX)(),(0,r.CE)("div",Uo,[l.getProductDetails(e.product).image?((0,r.uX)(),(0,r.CE)("img",{key:0,src:l.fullImageUrl(l.getProductDetails(e.product).image),alt:"Product"},null,8,zo)):((0,r.uX)(),(0,r.CE)("div",Ko,t[48]||(t[48]=[(0,r.Lk)("i",{class:"bi bi-image"},null,-1)])))])):(0,r.Q3)("",!0),(0,r.Lk)("span",null,(0,o.v_)(l.getProductDetails(e.product)?l.getProductDetails(e.product).name:`Product #${e.product}`),1)])]),(0,r.Lk)("td",Qo,"â‚±"+(0,o.v_)(l.getProductDetails(e.product)?l.getProductDetails(e.product).price:"N/A"),1),(0,r.Lk)("td",Jo,(0,o.v_)(e.quantity),1),(0,r.Lk)("td",jo,"â‚±"+(0,o.v_)(l.getProductDetails(e.product)?(l.getProductDetails(e.product).price*e.quantity).toFixed(2):"N/A"),1)])))),128))]),(0,r.Lk)("tfoot",null,[(0,r.Lk)("tr",null,[t[49]||(t[49]=(0,r.Lk)("td",{colspan:"3",class:"text-end"},[(0,r.Lk)("strong",null,"Total:")],-1)),(0,r.Lk)("td",Vo,"â‚±"+(0,o.v_)(l.calculateOrderTotal(n.selectedOrder).toFixed(2)),1)])])])])])):(0,r.Q3)("",!0),(0,r.Lk)("div",Zo,[(0,r.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[12]||(t[12]=(...e)=>l.closeOrderModal&&l.closeOrderModal(...e))},"Close"),(0,r.Lk)("button",{type:"button",class:"btn btn-primary btn-view",onClick:t[13]||(t[13]=(...e)=>l.printOrder&&l.printOrder(...e))},t[52]||(t[52]=[(0,r.Lk)("i",{class:"bi bi-printer me-2"},null,-1),(0,r.eW)("Print ")]))])])])],512)])}a(7642),a(8004),a(3853),a(5876),a(2475),a(5024),a(1698);var Yo={data(){return{orders:[],products:[],selectedOrder:null,modalInstance:null,searchQuery:"",dateFrom:"",dateTo:"",sortBy:"date_desc",currentPage:1,perPage:10,isLoading:!0,isRefreshing:!1,cachedOrderTotals:{}}},computed:{filteredOrders(){let e=[...this.orders];if(this.searchQuery){const t=this.searchQuery.toLowerCase();e=e.filter((e=>e.id.toString().includes(t)||e.customer.toString().toLowerCase().includes(t)))}if(this.dateFrom){const t=new Date(this.dateFrom);t.setHours(0,0,0,0),e=e.filter((e=>new Date(e.date_ordered)>=t))}if(this.dateTo){const t=new Date(this.dateTo);t.setHours(23,59,59,999),e=e.filter((e=>new Date(e.date_ordered)<=t))}return"date_desc"===this.sortBy?e.sort(((e,t)=>new Date(t.date_ordered)-new Date(e.date_ordered))):"date_asc"===this.sortBy?e.sort(((e,t)=>new Date(e.date_ordered)-new Date(t.date_ordered))):"amount_desc"===this.sortBy?e.sort(((e,t)=>this.getOrderTotal(t)-this.getOrderTotal(e))):"amount_asc"===this.sortBy&&e.sort(((e,t)=>this.getOrderTotal(e)-this.getOrderTotal(t))),e},paginatedOrders(){const e=(this.currentPage-1)*this.perPage,t=e+this.perPage;return this.filteredOrders.slice(e,t)},totalPages(){return Math.ceil(this.filteredOrders.length/this.perPage)},paginationInfo(){const e=0===this.filteredOrders.length?0:(this.currentPage-1)*this.perPage+1,t=Math.min(this.currentPage*this.perPage,this.filteredOrders.length);return{from:e,to:t}},uniqueCustomers(){const e=new Set;return this.orders.forEach((t=>e.add(t.customer))),Array.from(e)},isMobile(){return window.innerWidth<768}},methods:{fullImageUrl(e){return e?e.startsWith("http")?e:`http://127.0.0.1:8000${e.startsWith("/")?e:"/media/"+e}`:""},formatDate(e){const t={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(e).toLocaleDateString(void 0,t)},getProductDetails(e){return this.products.find((t=>t.id===e))},calculateOrderTotal(e){let t=0;return e.items&&e.items.forEach((e=>{const a=this.getProductDetails(e.product);a&&(t+=a.price*e.quantity)})),t},getOrderTotal(e){if(void 0!==this.cachedOrderTotals[e.id])return this.cachedOrderTotals[e.id];const t=this.calculateOrderTotal(e);return this.cachedOrderTotals[e.id]=t,t},calculateTotalSales(){let e=0;return this.orders.forEach((t=>{e+=this.calculateOrderTotal(t)})),e.toFixed(2)},viewOrderDetails(e){this.selectedOrder=e,this.modalInstance=new ce.aF(this.$refs.orderModal),this.modalInstance.show()},closeOrderModal(){this.modalInstance&&this.modalInstance.hide()},changePage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e,setTimeout((()=>{const e=document.querySelector(".card");e&&e.scrollIntoView({behavior:"smooth",block:"start"})}),100))},getPageNumbers(){const e=[],t=5;if(this.totalPages<=t)for(let a=1;a<=this.totalPages;a++)e.push(a);else{e.push(1);let t=Math.max(2,this.currentPage-1),a=Math.min(this.totalPages-1,t+2);a===this.totalPages-1&&(t=Math.max(2,a-2)),t>2&&e.push("...");for(let s=t;s<=a;s++)e.push(s);a<this.totalPages-1&&e.push("..."),e.push(this.totalPages)}return e},resetFilters(){this.searchQuery="",this.dateFrom="",this.dateTo="",this.sortBy="date_desc",this.currentPage=1,this.showNotification("info","Filters have been reset")},printOrder(){const e=window.open("","_blank","width=800,height=600"),t=this.generatePrintContent();e.document.open(),e.document.write(t),e.document.close(),e.focus()},generatePrintContent(){let e="<!DOCTYPE html>\n";e+="<html>\n",e+="<head>\n",e+="  <title>Order #"+this.selectedOrder.id+" - Invoice</title>\n",e+='  <meta charset="utf-8">\n',e+='  <meta name="viewport" content="width=device-width, initial-scale=1">\n',e+="  <style>\n",e+="    body { font-family: Arial, sans-serif; padding: 20px; color: #333; line-height: 1.4; }\n",e+="    .print-container { max-width: 800px; margin: 0 auto; padding: 20px; }\n",e+="    .print-header { text-align: center; margin-bottom: 30px; padding-bottom: 15px; border-bottom: 2px solid #eee; }\n",e+="    .print-header h2 { margin-bottom: 5px; font-size: 24px; }\n",e+="    .print-header h3 { margin-top: 0; font-size: 18px; color: #666; }\n",e+="    .print-order-details { margin-bottom: 30px; }\n",e+="    .print-row { display: flex; margin: 0 -15px; }\n",e+="    .print-col { flex: 1; padding: 0 15px; }\n",e+="    .print-items h4 { margin-bottom: 15px; font-size: 18px; border-bottom: 1px solid #eee; padding-bottom: 8px; }\n",e+="    .print-table { width: 100%; border-collapse: collapse; margin-bottom: 30px; }\n",e+="    .print-table th, .print-table td { border: 1px solid #ddd; padding: 8px 12px; text-align: left; }\n",e+="    .print-table th { background-color: #f5f5f5; }\n",e+="    .print-table tfoot { font-weight: bold; }\n",e+="    .print-footer { margin-top: 50px; text-align: center; font-style: italic; color: #666; padding-top: 15px; border-top: 1px solid #eee; }\n",e+="    @media print { .no-print { display: none; } }\n",e+="    .print-button { background-color: #007bff; color: white; border: none; padding: 10px 15px; border-radius: 4px; cursor: pointer; margin: 20px 0; font-size: 14px; }\n",e+="    .print-button:hover { background-color: #0069d9; }\n",e+="  </style>\n",e+="</head>\n",e+="<body>\n",e+='  <div class="print-container">\n',e+='    <div class="print-header">\n',e+="      <h2>Order Invoice</h2>\n",e+="      <h3>Order #"+this.selectedOrder.id+"</h3>\n",e+="    </div>\n",e+='    <div class="print-order-details">\n',e+='      <div class="print-row">\n',e+='        <div class="print-col">\n',e+="          <p><strong>Customer:</strong> "+this.selectedOrder.customer+"</p>\n",e+="          <p><strong>Date:</strong> "+this.formatDate(this.selectedOrder.date_ordered)+"</p>\n",e+="        </div>\n",e+='        <div class="print-col">\n',e+="          <p><strong>Status:</strong> Completed</p>\n",e+="          <p><strong>Total:</strong> â‚±"+this.calculateOrderTotal(this.selectedOrder).toFixed(2)+"</p>\n",e+="        </div>\n",e+="      </div>\n",e+="    </div>\n",e+='    <div class="print-items">\n',e+="      <h4>Order Items</h4>\n",e+='      <table class="print-table">\n',e+="        <thead>\n",e+="          <tr>\n",e+="            <th>Product</th>\n",e+='            <th style="text-align: center">Price</th>\n',e+='            <th style="text-align: center">Quantity</th>\n',e+='            <th style="text-align: center">Total</th>\n',e+="          </tr>\n",e+="        </thead>\n",e+="        <tbody>\n",this.selectedOrder.items.forEach((t=>{const a=this.getProductDetails(t.product),s=a?a.name:`Product #${t.product}`,r=a?a.price:"N/A",o=a?(a.price*t.quantity).toFixed(2):"N/A";e+="          <tr>\n",e+="            <td>"+s+"</td>\n",e+='            <td style="text-align: center">â‚±'+r+"</td>\n",e+='            <td style="text-align: center">'+t.quantity+"</td>\n",e+='            <td style="text-align: center">â‚±'+o+"</td>\n",e+="          </tr>\n"})),e+="        </tbody>\n",e+="        <tfoot>\n",e+="          <tr>\n",e+='            <td colspan="3" style="text-align: right"><strong>Total:</strong></td>\n',e+='            <td style="text-align: center">â‚±'+this.calculateOrderTotal(this.selectedOrder).toFixed(2)+"</td>\n",e+="          </tr>\n",e+="        </tfoot>\n",e+="      </table>\n",e+="    </div>\n",e+='    <div class="print-footer">\n',e+="      <p>Thank you for your business!</p>\n",e+="    </div>\n",e+='    <div class="no-print" style="text-align: center; margin-top: 30px;">\n',e+='      <button class="print-button" onclick="window.print(); window.close();">Print Invoice</button>\n',e+='      <button class="print-button" style="background-color: #6c757d;" onclick="window.close();">Close</button>\n',e+="    </div>\n",e+="  </div>\n";const t="script",a="body",s="html";return e+="  <"+t+">\n",e+="    window.onload = function() { /* Auto-print is optional */ }\n",e+="  </"+t+">\n",e+="</"+a+">\n",e+="</"+s+">",e},async fetchOrders(){try{console.log("ðŸ“‹ Fetching admin orders...");const e=await J.get("orders/");this.orders=e.data||[],0===this.orders.length?console.warn("No admin orders received from API"):console.log("âœ… Loaded",this.orders.length,"admin orders")}catch(e){console.error("Error fetching admin orders:",e),this.showNotification("error","Failed to load orders.")}},async fetchProducts(){try{console.log("ðŸ“¦ Fetching admin products...");const e=await J.get("products/");this.products=e.data||[],0===this.products.length?console.warn("No admin products received from API"):console.log("âœ… Loaded",this.products.length,"admin products for order details")}catch(e){console.error("Error fetching admin products:",e),this.showNotification("error","Failed to load products.")}},showNotification(e,t){const a=document.createElement("div");a.className=`notification notification-${e}`;let s="bi-info-circle";"success"===e&&(s="bi-check-circle"),"warning"===e&&(s="bi-exclamation-triangle"),"error"===e&&(s="bi-x-circle"),a.innerHTML=`<i class="bi ${s}"></i> ${t}`,document.body.appendChild(a),setTimeout((()=>{a.classList.add("show")}),10),setTimeout((()=>{a.classList.remove("show"),setTimeout((()=>{document.body.removeChild(a)}),300)}),3e3)},debugOrders(){console.log("=== DEBUG ORDERS ==="),console.log("Total orders:",this.orders.length),console.log("Filtered orders:",this.filteredOrders.length),console.log("Paginated orders:",this.paginatedOrders.length),console.log("Current page:",this.currentPage),console.log("Per page:",this.perPage),console.log("First few orders:",this.orders.slice(0,3)),console.log("First few paginated:",this.paginatedOrders.slice(0,3))}},watch:{searchQuery(){this.currentPage=1},sortBy(){this.currentPage=1,this.cachedOrderTotals={}},perPage(){this.currentPage=1},dateFrom(){this.currentPage=1},dateTo(){this.currentPage=1}},async mounted(){console.log("ðŸš€ CheckoutMonitor component mounted"),this.isLoading=!0;try{await Promise.all([this.fetchOrders(),this.fetchProducts()]),this.debugOrders()}catch(e){console.error("Error loading initial data:",e)}finally{this.isLoading=!1}}};const Go=(0,ie.A)(Yo,[["render",$o],["__scopeId","data-v-893d0de8"]]);var ei=Go;const ti={class:"container"},ai={class:"admin-header mb-4"},si={class:"admin-actions"},ri={class:"row mb-4"},oi={class:"col-md-4"},ii={class:"stat-card card"},ni={class:"card-body"},li={class:"stat-info"},ci={class:"col-md-4"},di={class:"stat-card card"},ui={class:"card-body"},mi={class:"stat-info"},pi={class:"col-md-4"},gi={class:"stat-card card"},hi={class:"card-body"},ki={class:"stat-info"},bi={class:"card mb-4"},fi={class:"card-header d-flex justify-content-between align-items-center flex-wrap gap-2"},vi={class:"d-flex align-items-center gap-2"},yi={class:"search-container"},Li=["disabled"],wi={key:0,class:"spinner-border spinner-border-sm me-1",role:"status"},Pi={key:1,class:"bi bi-arrow-clockwise me-1"},Ci={key:0,class:"loading-container py-5"},xi={key:1,class:"empty-products py-5"},Mi={key:2,class:"table-responsive"},Si={class:"table table-hover"},Ei={class:"product-image"},_i=["src","alt"],Ii={key:1,class:"image-placeholder"},Ai={class:"product-name"},Di={class:"product-description"},Oi={class:"btn-group"},Ti=["onClick"],Fi=["onClick"],Wi={key:3,class:"card-footer"},Ri={"aria-label":"Product pagination"},Xi={class:"pagination justify-content-center mb-0"},Ni=["disabled"],qi={key:0,class:"page-link",disabled:""},Hi=["onClick"],Bi=["disabled"],Ui={class:"card"},zi={class:"table-responsive"},Ki={class:"table"},Qi={key:0},Ji={class:"modal fade",ref:"editModal",id:"editModal",tabindex:"-1","aria-labelledby":"editModalLabel","aria-hidden":"true"},ji={class:"modal-dialog modal-dialog-centered modal-lg"},Vi={class:"modal-content"},Zi={class:"modal-header"},$i={class:"modal-body"},Yi={class:"modal-body-scrollable"},Gi={key:0,class:"text-center mb-4"},en={class:"product-image-preview"},tn=["src","alt"],an={class:"form-group mb-3"},sn={key:0,class:"invalid-feedback"},rn={class:"form-group mb-3"},on={key:0,class:"invalid-feedback"},nn={class:"row mb-3"},ln={class:"col-12 col-sm-6 mb-3 mb-sm-0"},cn={class:"input-group"},dn={key:0,class:"invalid-feedback"},un={class:"col-12 col-sm-6"},mn={class:"input-group"},pn={key:0,class:"invalid-feedback"},gn={class:"form-group mb-3"},hn={class:"custom-file-upload"},kn={class:"modal-footer"},bn=["disabled"],fn={key:0,class:"spinner-border spinner-border-sm me-1",role:"status"},vn={key:1,class:"bi bi-check-circle me-1"},yn={class:"modal fade confirm-modal",ref:"confirmModal",tabindex:"-1","aria-labelledby":"confirmModalLabel","aria-hidden":"true"},Ln={class:"modal-dialog modal-dialog-centered modal-sm"},wn={class:"modal-content"},Pn={class:"modal-header"},Cn={class:"modal-footer"},xn=["disabled"],Mn={key:0,class:"spinner-border spinner-border-sm me-1",role:"status"},Sn={key:1,class:"bi bi-trash me-1"};function En(e,t,a,i,n,l){const c=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",ti,[(0,r.Lk)("div",ai,[t[21]||(t[21]=(0,r.Lk)("h2",{class:"section-title"},[(0,r.Lk)("i",{class:"bi bi-box-seam me-2"}),(0,r.eW)("Product Inventory ")],-1)),(0,r.Lk)("div",si,[(0,r.bF)(c,{to:"/add-product",class:"btn btn-add"},{default:(0,r.k6)((()=>t[20]||(t[20]=[(0,r.Lk)("i",{class:"bi bi-plus-circle me-2"},null,-1),(0,r.eW)("Add New Product ")]))),_:1})])]),(0,r.Lk)("div",ri,[(0,r.Lk)("div",oi,[(0,r.Lk)("div",ii,[(0,r.Lk)("div",ni,[t[23]||(t[23]=(0,r.Lk)("div",{class:"stat-icon"},[(0,r.Lk)("i",{class:"bi bi-box-seam"})],-1)),(0,r.Lk)("div",li,[(0,r.Lk)("h3",null,(0,o.v_)(i.products.length),1),t[22]||(t[22]=(0,r.Lk)("p",null,"Total Products",-1))])])])]),(0,r.Lk)("div",ci,[(0,r.Lk)("div",di,[(0,r.Lk)("div",ui,[t[25]||(t[25]=(0,r.Lk)("div",{class:"stat-icon"},[(0,r.Lk)("i",{class:"bi bi-exclamation-triangle"})],-1)),(0,r.Lk)("div",mi,[(0,r.Lk)("h3",null,(0,o.v_)(i.lowStockCount),1),t[24]||(t[24]=(0,r.Lk)("p",null,"Low Stock Items",-1))])])])]),(0,r.Lk)("div",pi,[(0,r.Lk)("div",gi,[(0,r.Lk)("div",hi,[t[27]||(t[27]=(0,r.Lk)("div",{class:"stat-icon"},[(0,r.Lk)("i",{class:"bi bi-cart-check"})],-1)),(0,r.Lk)("div",ki,[(0,r.Lk)("h3",null,(0,o.v_)(i.orders.length),1),t[26]||(t[26]=(0,r.Lk)("p",null,"Total Orders",-1))])])])])]),(0,r.Lk)("div",bi,[(0,r.Lk)("div",fi,[t[29]||(t[29]=(0,r.Lk)("h5",{class:"mb-0"},"Product Inventory",-1)),(0,r.Lk)("div",vi,[(0,r.Lk)("div",yi,[(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control search-input",placeholder:"Search products...","onUpdate:modelValue":t[0]||(t[0]=e=>i.searchQuery=e),"aria-label":"Search products"},null,512),[[s.Jo,i.searchQuery]]),t[28]||(t[28]=(0,r.Lk)("i",{class:"bi bi-search search-icon"},null,-1))]),(0,r.Lk)("button",{class:"btn btn-sm btn-outline-secondary",onClick:t[1]||(t[1]=(...e)=>i.refreshProducts&&i.refreshProducts(...e)),disabled:i.isRefreshing},[i.isRefreshing?((0,r.uX)(),(0,r.CE)("span",wi)):((0,r.uX)(),(0,r.CE)("i",Pi)),(0,r.eW)(" "+(0,o.v_)(i.isRefreshing?"Refreshing...":"Refresh"),1)],8,Li)])]),i.isLoading?((0,r.uX)(),(0,r.CE)("div",Ci,t[30]||(t[30]=[(0,r.Lk)("div",{class:"spinner"},[(0,r.Lk)("div",{class:"bounce1"}),(0,r.Lk)("div",{class:"bounce2"}),(0,r.Lk)("div",{class:"bounce3"})],-1),(0,r.Lk)("p",null,"Loading products...",-1)]))):0===i.filteredProducts.length?((0,r.uX)(),(0,r.CE)("div",xi,[t[32]||(t[32]=(0,r.Lk)("i",{class:"bi bi-search-heart"},null,-1)),t[33]||(t[33]=(0,r.Lk)("h3",null,"No products found",-1)),t[34]||(t[34]=(0,r.Lk)("p",null,"Try adjusting your search criteria.",-1)),(0,r.Lk)("button",{class:"btn btn-primary mt-3",onClick:t[2]||(t[2]=(...e)=>i.resetSearch&&i.resetSearch(...e))},t[31]||(t[31]=[(0,r.Lk)("i",{class:"bi bi-arrow-counterclockwise me-2"},null,-1),(0,r.eW)("Reset Search ")]))])):((0,r.uX)(),(0,r.CE)("div",Mi,[(0,r.Lk)("table",Si,[t[38]||(t[38]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"Image"),(0,r.Lk)("th",null,"Name"),(0,r.Lk)("th",null,"Price"),(0,r.Lk)("th",null,"Stock"),(0,r.Lk)("th",null,"Actions")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.paginatedProducts,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.id},[(0,r.Lk)("td",null,[(0,r.Lk)("div",Ei,[e.image?((0,r.uX)(),(0,r.CE)("img",{key:0,src:i.fullImageUrl(e.image),alt:e.name,loading:"lazy"},null,8,_i)):((0,r.uX)(),(0,r.CE)("div",Ii,t[35]||(t[35]=[(0,r.Lk)("i",{class:"bi bi-image"},null,-1)])))])]),(0,r.Lk)("td",null,[(0,r.Lk)("div",Ai,(0,o.v_)(e.name),1),(0,r.Lk)("div",Di,(0,o.v_)(i.truncate(e.description,50)),1)]),(0,r.Lk)("td",null,"â‚±"+(0,o.v_)(i.formatPrice(e.price)),1),(0,r.Lk)("td",null,[(0,r.Lk)("span",{class:(0,o.C4)(["stock-badge",{"bg-danger":0===e.stock,"bg-warning":e.stock>0&&e.stock<5,"bg-success":e.stock>=5}])},(0,o.v_)(e.stock),3)]),(0,r.Lk)("td",null,[(0,r.Lk)("div",Oi,[(0,r.Lk)("button",{class:"btn btn-sm btn-primary",onClick:t=>i.openEditModal(e),"aria-label":"Edit product"},t[36]||(t[36]=[(0,r.Lk)("i",{class:"bi bi-pencil"},null,-1)]),8,Ti),(0,r.Lk)("button",{class:"btn btn-sm btn-danger",onClick:t=>i.confirmDeleteProduct(e.id),"aria-label":"Delete product"},t[37]||(t[37]=[(0,r.Lk)("i",{class:"bi bi-trash"},null,-1)]),8,Fi)])])])))),128))])])])),i.totalPages>1?((0,r.uX)(),(0,r.CE)("div",Wi,[(0,r.Lk)("nav",Ri,[(0,r.Lk)("ul",Xi,[(0,r.Lk)("li",{class:(0,o.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,r.Lk)("button",{class:"page-link",onClick:t[3]||(t[3]=e=>i.changePage(i.currentPage-1)),disabled:1===i.currentPage,"aria-label":"Previous page"},t[39]||(t[39]=[(0,r.Lk)("i",{class:"bi bi-chevron-left"},null,-1)]),8,Ni)],2),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.getPageNumbers(),(e=>((0,r.uX)(),(0,r.CE)("li",{key:e,class:(0,o.C4)(["page-item",{active:i.currentPage===e}])},["..."===e?((0,r.uX)(),(0,r.CE)("button",qi,(0,o.v_)(e),1)):((0,r.uX)(),(0,r.CE)("button",{key:1,class:"page-link",onClick:t=>i.changePage(e)},(0,o.v_)(e),9,Hi))],2)))),128)),(0,r.Lk)("li",{class:(0,o.C4)(["page-item",{disabled:i.currentPage===i.totalPages}])},[(0,r.Lk)("button",{class:"page-link",onClick:t[4]||(t[4]=e=>i.changePage(i.currentPage+1)),disabled:i.currentPage===i.totalPages,"aria-label":"Next page"},t[40]||(t[40]=[(0,r.Lk)("i",{class:"bi bi-chevron-right"},null,-1)]),8,Bi)],2)])])])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",Ui,[t[44]||(t[44]=(0,r.Lk)("div",{class:"card-header"},[(0,r.Lk)("h5",{class:"mb-0"},"Recent Orders")],-1)),(0,r.Lk)("div",zi,[(0,r.Lk)("table",Ki,[t[43]||(t[43]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"Order ID"),(0,r.Lk)("th",null,"Date"),(0,r.Lk)("th",null,"Customer"),(0,r.Lk)("th",null,"Items"),(0,r.Lk)("th",null,"Status")])],-1)),(0,r.Lk)("tbody",null,[0===i.orders.length?((0,r.uX)(),(0,r.CE)("tr",Qi,t[41]||(t[41]=[(0,r.Lk)("td",{colspan:"5",class:"text-center py-4"},"No orders found",-1)]))):(0,r.Q3)("",!0),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.recentOrders,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.id},[(0,r.Lk)("td",null,"#"+(0,o.v_)(e.id),1),(0,r.Lk)("td",null,(0,o.v_)(i.formatDate(e.date_ordered)),1),(0,r.Lk)("td",null,(0,o.v_)(e.customer),1),(0,r.Lk)("td",null,(0,o.v_)(e.items?e.items.length:0)+" items",1),t[42]||(t[42]=(0,r.Lk)("td",null,[(0,r.Lk)("span",{class:"badge bg-success"},"Completed")],-1))])))),128))])])])]),(0,r.Lk)("div",Ji,[(0,r.Lk)("div",ji,[(0,r.Lk)("div",Vi,[(0,r.Lk)("form",{onSubmit:t[16]||(t[16]=(0,s.D$)(((...e)=>i.validateAndSubmitEdit&&i.validateAndSubmitEdit(...e)),["prevent"])),novalidate:""},[(0,r.Lk)("div",Zi,[t[45]||(t[45]=(0,r.Lk)("h5",{class:"modal-title",id:"editModalLabel"},[(0,r.Lk)("i",{class:"bi bi-pencil-square me-2"}),(0,r.eW)("Edit Product ")],-1)),(0,r.Lk)("button",{type:"button",class:"btn-close",onClick:t[5]||(t[5]=(...e)=>i.closeEditModal&&i.closeEditModal(...e)),"aria-label":"Close"})]),(0,r.Lk)("div",$i,[(0,r.Lk)("div",Yi,[i.editProduct.image?((0,r.uX)(),(0,r.CE)("div",Gi,[(0,r.Lk)("div",en,[(0,r.Lk)("img",{src:i.fullImageUrl(i.editProduct.image),alt:i.editProduct.name,class:"img-fluid rounded"},null,8,tn)]),t[46]||(t[46]=(0,r.Lk)("p",{class:"image-caption mt-2"},"Current image",-1))])):(0,r.Q3)("",!0),(0,r.Lk)("div",an,[t[47]||(t[47]=(0,r.Lk)("label",{class:"form-label fw-medium"},"Product Name",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>i.editProduct.name=e),class:(0,o.C4)(["form-control",{"is-invalid":i.errors.name}]),required:"",onBlur:t[7]||(t[7]=(...e)=>i.validateName&&i.validateName(...e)),placeholder:"Enter product name"},null,34),[[s.Jo,i.editProduct.name]]),i.errors.name?((0,r.uX)(),(0,r.CE)("div",sn,(0,o.v_)(i.errors.name),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",rn,[t[48]||(t[48]=(0,r.Lk)("label",{class:"form-label fw-medium"},"Description",-1)),(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":t[8]||(t[8]=e=>i.editProduct.description=e),class:(0,o.C4)(["form-control",{"is-invalid":i.errors.description}]),rows:"3",required:"",onBlur:t[9]||(t[9]=(...e)=>i.validateDescription&&i.validateDescription(...e)),placeholder:"Enter product description"},null,34),[[s.Jo,i.editProduct.description]]),i.errors.description?((0,r.uX)(),(0,r.CE)("div",on,(0,o.v_)(i.errors.description),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",nn,[(0,r.Lk)("div",ln,[t[50]||(t[50]=(0,r.Lk)("label",{class:"form-label fw-medium"},"Price (â‚±)",-1)),(0,r.Lk)("div",cn,[t[49]||(t[49]=(0,r.Lk)("span",{class:"input-group-text"},"â‚±",-1)),(0,r.bo)((0,r.Lk)("input",{type:"number","onUpdate:modelValue":t[10]||(t[10]=e=>i.editProduct.price=e),class:(0,o.C4)(["form-control",{"is-invalid":i.errors.price}]),min:"0",step:"0.01",required:"",onBlur:t[11]||(t[11]=(...e)=>i.validatePrice&&i.validatePrice(...e)),placeholder:"0.00"},null,34),[[s.Jo,i.editProduct.price,void 0,{number:!0}]]),i.errors.price?((0,r.uX)(),(0,r.CE)("div",dn,(0,o.v_)(i.errors.price),1)):(0,r.Q3)("",!0)])]),(0,r.Lk)("div",un,[t[52]||(t[52]=(0,r.Lk)("label",{class:"form-label fw-medium"},"Stock",-1)),(0,r.Lk)("div",mn,[t[51]||(t[51]=(0,r.Lk)("span",{class:"input-group-text"},[(0,r.Lk)("i",{class:"bi bi-box-seam"})],-1)),(0,r.bo)((0,r.Lk)("input",{type:"number","onUpdate:modelValue":t[12]||(t[12]=e=>i.editProduct.stock=e),class:(0,o.C4)(["form-control",{"is-invalid":i.errors.stock}]),min:"0",required:"",onBlur:t[13]||(t[13]=(...e)=>i.validateStock&&i.validateStock(...e)),placeholder:"0"},null,34),[[s.Jo,i.editProduct.stock,void 0,{number:!0}]]),i.errors.stock?((0,r.uX)(),(0,r.CE)("div",pn,(0,o.v_)(i.errors.stock),1)):(0,r.Q3)("",!0)])])]),(0,r.Lk)("div",gn,[t[54]||(t[54]=(0,r.Lk)("label",{class:"form-label fw-medium"},"Product Image",-1)),(0,r.Lk)("div",hn,[(0,r.Lk)("input",{type:"file",id:"productImage",onChange:t[14]||(t[14]=(...e)=>i.handleEditImage&&i.handleEditImage(...e)),class:"form-control",accept:"image/*"},null,32),t[53]||(t[53]=(0,r.Lk)("label",{for:"productImage",class:"file-upload-label"},[(0,r.Lk)("i",{class:"bi bi-cloud-arrow-up me-2"}),(0,r.eW)(" Choose a new image ")],-1))]),t[55]||(t[55]=(0,r.Lk)("small",{class:"text-muted d-block mt-1"}," Recommended size: 800x800px, max 2MB ",-1))])])]),(0,r.Lk)("div",kn,[(0,r.Lk)("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[15]||(t[15]=(...e)=>i.closeEditModal&&i.closeEditModal(...e))},t[56]||(t[56]=[(0,r.Lk)("i",{class:"bi bi-x-circle me-1"},null,-1),(0,r.eW)("Cancel ")])),(0,r.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:i.isSubmitting},[i.isSubmitting?((0,r.uX)(),(0,r.CE)("span",fn)):((0,r.uX)(),(0,r.CE)("i",vn)),(0,r.eW)(" "+(0,o.v_)(i.isSubmitting?"Saving...":"Save Changes"),1)],8,bn)])],32)])])],512),(0,r.Lk)("div",yn,[(0,r.Lk)("div",Ln,[(0,r.Lk)("div",wn,[(0,r.Lk)("div",Pn,[t[57]||(t[57]=(0,r.Lk)("h5",{class:"modal-title",id:"confirmModalLabel"},"Confirm Deletion",-1)),(0,r.Lk)("button",{type:"button",class:"btn-close",onClick:t[17]||(t[17]=(...e)=>i.hideConfirmModal&&i.hideConfirmModal(...e)),"aria-label":"Close"})]),t[58]||(t[58]=(0,r.Lk)("div",{class:"modal-body"},[(0,r.Lk)("i",{class:"bi bi-exclamation-triangle-fill text-danger mb-3",style:{"font-size":"2rem"}}),(0,r.Lk)("p",null,"Are you sure you want to delete this product? This action cannot be undone.")],-1)),(0,r.Lk)("div",Cn,[(0,r.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[18]||(t[18]=(...e)=>i.hideConfirmModal&&i.hideConfirmModal(...e))},"Cancel"),(0,r.Lk)("button",{type:"button",class:"btn btn-danger",onClick:t[19]||(t[19]=(...e)=>i.deleteProduct&&i.deleteProduct(...e)),disabled:i.isDeleting},[i.isDeleting?((0,r.uX)(),(0,r.CE)("span",Mn)):((0,r.uX)(),(0,r.CE)("i",Sn)),(0,r.eW)(" "+(0,o.v_)(i.isDeleting?"Deleting...":"Delete"),1)],8,xn)])])])],512)])}var _n={setup(){const e=(0,_.KR)([]),t=(0,_.KR)(1),a=(0,_.KR)(5),s=(0,_.Kh)({id:null,name:"",description:"",price:0,stock:0,image:null}),o=(0,_.KR)(null),i=(0,_.KR)(null),n=(0,_.KR)(null),l=(0,_.KR)([]),c=(0,_.KR)(""),d=(0,_.KR)(null),u=(0,_.KR)(null),m=(0,_.KR)(null),p=(0,_.KR)(!0),g=(0,_.KR)(!1),h=(0,_.KR)(!1),k=(0,_.KR)(!1),{success:b,error:f}=se(),v=(0,_.Kh)({name:"",description:"",price:"",stock:""}),y=(0,r.EW)((()=>[...l.value].sort(((e,t)=>t.id-e.id)).slice(0,5))),L=()=>s.name.trim()?(v.name="",!0):(v.name="Product name is required",!1),w=()=>s.description.trim()?(v.description="",!0):(v.description="Product description is required",!1),P=()=>null===s.price||void 0===s.price?(v.price="Price is required",!1):s.price<0?(v.price="Price cannot be negative",!1):(v.price="",!0),C=()=>null===s.stock||void 0===s.stock?(v.stock="Stock quantity is required",!1):s.stock<0?(v.stock="Stock cannot be negative",!1):(v.stock="",!0),x=()=>{const e=L(),t=w(),a=P(),s=C();return e&&t&&a&&s},M=(0,r.EW)((()=>{let t=[...e.value];if(c.value){const e=c.value.toLowerCase();t=t.filter((t=>t.name.toLowerCase().includes(e)||t.description.toLowerCase().includes(e)))}return t})),S=(0,r.EW)((()=>Math.ceil(M.value.length/a.value))),E=(0,r.EW)((()=>{const e=(t.value-1)*a.value;return M.value.slice(e,e+a.value)})),I=(0,r.EW)((()=>e.value.filter((e=>e.stock<5)).length)),A=e=>e?e.startsWith("http")?e:`http://127.0.0.1:8000${e.startsWith("/")?e:"/media/"+e}`:"",D=e=>parseFloat(e).toFixed(2),O=(e,t)=>e?e.length>t?e.substring(0,t)+"...":e:"",T=e=>{const t={year:"numeric",month:"short",day:"numeric"};return new Date(e).toLocaleDateString(void 0,t)},F=e=>{e>=1&&e<=S.value&&(t.value=e,setTimeout((()=>{const e=document.querySelector(".card");e&&e.scrollIntoView({behavior:"smooth",block:"start"})}),100))},W=()=>{const e=[],a=5;if(S.value<=a)for(let t=1;t<=S.value;t++)e.push(t);else{e.push(1);let a=Math.max(2,t.value-1),s=Math.min(S.value-1,a+2);s===S.value-1&&(a=Math.max(2,s-2)),a>2&&e.push("...");for(let t=a;t<=s;t++)e.push(t);s<S.value-1&&e.push("..."),e.push(S.value)}return e},R=()=>{c.value="",t.value=1},X=async(t=!0)=>{t?p.value=!0:g.value=!0;try{console.log("ðŸ“¦ Fetching admin products...");const t=await J.get("products/");e.value=t.data||[],0===e.value.length?(console.warn("No admin products received from API"),f("No products available at the moment.")):console.log("âœ… Loaded",e.value.length,"admin products")}catch(a){console.error("Error fetching admin products:",a),f("Failed to load products. Please try refreshing the page.")}finally{p.value=!1,g.value=!1}},N=async()=>{await X(!1),b("Products refreshed successfully!")},q=async()=>{try{console.log("ðŸ“‹ Fetching admin orders...");const e=await J.get("orders/");l.value=e.data||[],0===l.value.length?console.warn("No admin orders received from API"):console.log("âœ… Loaded",l.value.length,"admin orders")}catch(e){console.error("Error fetching admin orders:",e),f("Failed to load orders.")}},H=e=>{Object.keys(v).forEach((e=>{v[e]=""})),s.id=e.id,s.name=e.name,s.description=e.description,s.price=e.price,s.stock=e.stock,s.image=e.image,o.value=null,i.value?i.value.show():d.value&&(i.value=new ce.aF(d.value),i.value.show())},B=()=>{i.value&&i.value.hide()},U=e=>{o.value=e.target.files[0]},K=()=>{x()?Q():f("Please fix the errors in the form")},Q=async()=>{h.value=!0;const e=new FormData;e.append("name",s.name),e.append("description",s.description),e.append("price",s.price),e.append("stock",s.stock),o.value&&e.append("image",o.value);try{await J.patch(`products/${s.id}/`,e,{headers:{"Content-Type":"multipart/form-data"}}),b("Product updated successfully!"),X(),B()}catch(t){if(console.error("Error updating product:",t),f("Failed to update product."),t.response&&t.response.data){const e=t.response.data;Object.keys(e).forEach((t=>{t in v&&(v[t]=e[t][0])}))}}finally{h.value=!1}},j=e=>{m.value=e,n.value?n.value.show():u.value&&(n.value=new ce.aF(u.value),n.value.show())},V=()=>{n.value&&n.value.hide()},Z=async()=>{if(m.value){k.value=!0;try{await J.delete(`products/${m.value}/`),b("Product deleted successfully."),X(),V()}catch(e){console.error("Error deleting product:",e),e.response&&e.response.data&&e.response.data.error?f(e.response.data.error):f("Cannot delete product. It may be in an order.")}finally{k.value=!1}}};return(0,r.sV)((async()=>{console.log("ðŸš€ MonitorProducts component mounted"),d.value&&(i.value=new ce.aF(d.value)),u.value&&(n.value=new ce.aF(u.value));const e=localStorage.getItem("access"),t="true"===localStorage.getItem("is_staff");if(!e||!t)return f("Access denied. Staff only."),void(window.location.href="/login");await z.waitForInitialization(),await Promise.all([X(),q()])})),(0,r.wB)((()=>z.isLoggedIn),(async e=>{e&&z.isInitialized&&z.isStaff&&await Promise.all([X(),q()])})),{products:e,filteredProducts:M,paginatedProducts:E,currentPage:t,totalPages:S,editProduct:s,editModal:d,confirmModal:u,orders:l,recentOrders:y,searchQuery:c,lowStockCount:I,isLoading:p,isRefreshing:g,isSubmitting:h,isDeleting:k,errors:v,fullImageUrl:A,formatPrice:D,truncate:O,formatDate:T,changePage:F,getPageNumbers:W,resetSearch:R,refreshProducts:N,openEditModal:H,closeEditModal:B,handleEditImage:U,validateAndSubmitEdit:K,confirmDeleteProduct:j,hideConfirmModal:V,deleteProduct:Z,validateName:L,validateDescription:w,validatePrice:P,validateStock:C}}};const In=(0,ie.A)(_n,[["render",En],["__scopeId","data-v-c746e78e"]]);var An=In;const Dn={class:"container"},On={class:"admin-header mb-3 mb-md-4"},Tn={class:"admin-actions ms-auto"},Fn={class:"row"},Wn={class:"col-12 col-lg-8 mx-auto"},Rn={class:"card"},Xn={class:"card-body p-3 p-md-4"},Nn={class:"mb-3"},qn={class:"mb-3"},Hn={class:"row g-2 mb-3"},Bn={class:"col-12 col-md-6"},Un={class:"input-group"},zn={class:"col-12 col-md-6"},Kn={class:"mb-4"},Qn={key:0,class:"image-preview mt-3"},Jn=["src"],jn={class:"d-grid"},Vn=["disabled"],Zn={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},$n={key:1,class:"bi bi-plus-circle me-1 me-md-2"};function Yn(e,t,a,i,n,l){const c=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",Dn,[(0,r.Lk)("div",On,[t[7]||(t[7]=(0,r.Lk)("h2",{class:"section-title"},[(0,r.Lk)("i",{class:"bi bi-plus-circle me-2"}),(0,r.eW)("Add New Product ")],-1)),(0,r.Lk)("div",Tn,[(0,r.bF)(c,{to:"/monitor-products",class:"btn btn-outline-primary btn-back"},{default:(0,r.k6)((()=>t[6]||(t[6]=[(0,r.Lk)("i",{class:"bi bi-arrow-left me-1 me-md-2"},null,-1),(0,r.Lk)("span",{class:"btn-text"},"Back to Products",-1)]))),_:1})])]),(0,r.Lk)("div",Fn,[(0,r.Lk)("div",Wn,[(0,r.Lk)("div",Rn,[(0,r.Lk)("div",Xn,[(0,r.Lk)("form",{onSubmit:t[5]||(t[5]=(0,s.D$)(((...e)=>l.submitProduct&&l.submitProduct(...e)),["prevent"])),enctype:"multipart/form-data"},[(0,r.Lk)("div",Nn,[t[8]||(t[8]=(0,r.Lk)("label",{class:"form-label"},"Product Name",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.product.name=e),class:"form-control form-control-md",placeholder:"Enter product name",required:""},null,512),[[s.Jo,n.product.name]])]),(0,r.Lk)("div",qn,[t[9]||(t[9]=(0,r.Lk)("label",{class:"form-label"},"Description",-1)),(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.product.description=e),class:"form-control form-control-md",placeholder:"Enter product description",rows:"4",required:""},null,512),[[s.Jo,n.product.description]])]),(0,r.Lk)("div",Hn,[(0,r.Lk)("div",Bn,[t[11]||(t[11]=(0,r.Lk)("label",{class:"form-label"},"Price (â‚±)",-1)),(0,r.Lk)("div",Un,[t[10]||(t[10]=(0,r.Lk)("span",{class:"input-group-text"},"â‚±",-1)),(0,r.bo)((0,r.Lk)("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=e=>n.product.price=e),class:"form-control form-control-md",placeholder:"0.00",min:"0",step:"0.01",required:""},null,512),[[s.Jo,n.product.price,void 0,{number:!0}]])])]),(0,r.Lk)("div",zn,[t[12]||(t[12]=(0,r.Lk)("label",{class:"form-label"},"Stock Quantity",-1)),(0,r.bo)((0,r.Lk)("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=e=>n.product.stock=e),class:"form-control form-control-md",placeholder:"0",min:"0",required:""},null,512),[[s.Jo,n.product.stock,void 0,{number:!0}]])])]),(0,r.Lk)("div",Kn,[t[13]||(t[13]=(0,r.Lk)("label",{class:"form-label"},"Product Image",-1)),(0,r.Lk)("input",{type:"file",onChange:t[4]||(t[4]=(...e)=>l.handleImage&&l.handleImage(...e)),class:"form-control form-control-md",accept:"image/*"},null,32),n.imagePreview?((0,r.uX)(),(0,r.CE)("div",Qn,[(0,r.Lk)("img",{src:n.imagePreview,alt:"Preview",class:"img-thumbnail"},null,8,Jn)])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",jn,[(0,r.Lk)("button",{type:"submit",class:"btn btn-primary btn-md btn-lg btn-add",disabled:n.isSubmitting},[n.isSubmitting?((0,r.uX)(),(0,r.CE)("span",Zn)):((0,r.uX)(),(0,r.CE)("i",$n)),(0,r.eW)(" "+(0,o.v_)(n.isSubmitting?"Adding...":"Add Product"),1)],8,Vn)])],32)])])])])])}var Gn={data(){return{product:{name:"",description:"",price:0,stock:0},image:null,imagePreview:null,isSubmitting:!1}},methods:{handleImage(e){if(this.image=e.target.files[0],this.image){const e=new FileReader;e.onload=e=>{this.imagePreview=e.target.result},e.readAsDataURL(this.image)}else this.imagePreview=null},async submitProduct(){this.isSubmitting=!0;const e=new FormData;for(let a in this.product)e.append(a,this.product[a]);this.image&&e.append("image",this.image);try{await J.post("products/",e,{headers:{"Content-Type":"multipart/form-data"}}),this.showNotification("success","Product added successfully!"),this.product={name:"",description:"",price:0,stock:0},this.image=null,this.imagePreview=null,setTimeout((()=>{this.$router.push("/monitor-products")}),1500)}catch(t){this.showNotification("error","Failed to add product."),console.error(t)}finally{this.isSubmitting=!1}},showNotification(e,t){const a=document.createElement("div");a.className=`notification notification-${e}`;let s="bi-info-circle";"success"===e&&(s="bi-check-circle"),"warning"===e&&(s="bi-exclamation-triangle"),"error"===e&&(s="bi-x-circle"),a.innerHTML=`<i class="bi ${s}"></i> ${t}`,document.body.appendChild(a),setTimeout((()=>{a.classList.add("show")}),10),setTimeout((()=>{a.classList.remove("show"),setTimeout((()=>{document.body.removeChild(a)}),300)}),3e3)}},mounted(){const e=localStorage.getItem("access"),t="true"===localStorage.getItem("is_staff");e&&t||(this.showNotification("error","Access denied. Staff only."),this.$router.push("/login"))}};const el=(0,ie.A)(Gn,[["render",Yn],["__scopeId","data-v-3514f77c"]]);var tl=el;const al=[{path:"/",redirect:"/login"},{path:"/login",component:_e},{path:"/register",component:rt},{path:"/products",component:Vt},{path:"/cart",component:$a},{path:"/orders",component:fr},{path:"/monitor",component:ei},{path:"/monitor-products",component:An},{path:"/add-product",component:tl}],sl=(0,j.aE)({history:(0,j.Bt)(),routes:al});sl.beforeEach(((e,t,a)=>{const s=!!localStorage.getItem("access"),r="true"===localStorage.getItem("is_staff"),o=["/login","/register"],i=["/monitor"],n=["/products","/cart","/orders"];return s||o.includes(e.path)?s&&o.includes(e.path)?a(r?"/monitor":"/products"):s&&r&&n.includes(e.path)?a("/monitor"):s&&!r&&i.includes(e.path)?a("/products"):void a():a("/login")}));var rl=sl;const ol=window.location.hostname.includes("github.io")||!0;ol&&(console.log("ðŸš€ Running in demo mode with comprehensive mock data"),(0,A.initializeMockData)(),(0,W.initializeAdminMockData)(),console.log("ðŸ“Š Mock data initialized:"),console.log("- Products:",JSON.parse(localStorage.getItem("adminMockProducts")||"[]").length),console.log("- Orders:",JSON.parse(localStorage.getItem("adminMockOrders")||"[]").length),console.log("- Demo Credentials:"),console.log('  Admin: username="admin", password="admin"'),console.log('  Customer: username="user", password="user"'));const il=(0,s.Ef)(me);il.use(rl),il.provide("auth",z),il.mount("#app")},568:function(e,t,a){a.d(t,{ensureMockDataExists:function(){return i},initializeMockData:function(){return o}});a(4114),a(8111),a(2489),a(7588),a(1701);const s=()=>[{id:1,name:"Premium Wireless Headphones",description:"Experience crystal-clear sound with our premium wireless headphones. Features noise cancellation and 20-hour battery life.",price:1299.99,stock:15,image:"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8cHJvZHVjdHxlbnwwfHwwfHx8MA%3D%3D"},{id:2,name:"Smart Fitness Watch",description:"Track your fitness goals with this advanced smartwatch. Monitors heart rate, steps, sleep quality and more.",price:899.5,stock:8,image:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTB8fHByb2R1Y3R8ZW58MHx8MHx8fDA%3D"},{id:3,name:"Ultra HD Smart TV",description:"Transform your living room with this 55-inch Ultra HD Smart TV. Features AI-powered picture quality and immersive sound.",price:3499.99,stock:5,image:"https://images.unsplash.com/photo-1567690187548-f07b1d7bf5a9?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8OHx8dHZ8ZW58MHx8MHx8fDA%3D"},{id:4,name:"Professional Camera Kit",description:"Capture stunning photos and videos with this professional-grade camera kit. Includes multiple lenses and accessories.",price:4999,stock:3,image:"https://images.unsplash.com/photo-1526170375885-4d8ecf77b99f?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8cHJvZHVjdHxlbnwwfHwwfHx8MA%3D%3D"},{id:5,name:"Ergonomic Office Chair",description:"Work in comfort with this ergonomic office chair. Features adjustable height, lumbar support, and breathable mesh back.",price:1299,stock:12,image:"https://images.unsplash.com/photo-1596162954151-cdcb4c0f70a8?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTJ8fGNoYWlyfGVufDB8fDB8fHww"},{id:6,name:"Portable Bluetooth Speaker",description:"Take your music anywhere with this waterproof portable Bluetooth speaker. Features 12-hour battery life and deep bass.",price:599.99,stock:20,image:"https://images.unsplash.com/photo-1608043152269-423dbba4e7e1?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8Ymx1ZXRvb3RoJTIwc3BlYWtlcnxlbnwwfHwwfHx8MA%3D%3D"},{id:7,name:"Gaming Laptop",description:"Experience lag-free gaming with this high-performance gaming laptop. Features dedicated graphics card and RGB keyboard.",price:5999,stock:7,image:"https://images.unsplash.com/photo-1603302576837-37561b2e2302?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTh8fGxhcHRvcHxlbnwwfHwwfHx8MA%3D%3D"},{id:8,name:"Coffee Maker Deluxe",description:"Brew perfect coffee every time with this programmable coffee maker. Features multiple brewing options and built-in grinder.",price:799.5,stock:9,image:"https://images.unsplash.com/photo-1565452344518-47faca79dc69?q=80&w=1935&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{id:9,name:"Smartphone Pro Max",description:"Stay connected with our latest smartphone. Features high-resolution camera, all-day battery life, and fast processor.",price:4299,stock:0,image:"https://images.unsplash.com/photo-1598327105666-5b89351aff97?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTZ8fHNtYXJ0cGhvbmV8ZW58MHx8MHx8fDA%3D"},{id:10,name:"Wireless Charging Pad",description:"Charge your devices without the hassle of cables. Compatible with all Qi-enabled smartphones and accessories.",price:299.99,stock:25,image:"https://images.unsplash.com/photo-1622445275463-afa2ab738c34?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8Y2hhcmdlcnxlbnwwfHwwfHx8MA%3D%3D"},{id:11,name:"Smart Home Hub",description:"Control all your smart home devices from one central hub. Compatible with most popular smart home brands.",price:899,stock:4,image:"https://images.unsplash.com/photo-1558002038-1055907df827?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8c21hcnQlMjBob21lfGVufDB8fDB8fHww"},{id:12,name:"Mechanical Keyboard",description:"Enhance your typing experience with this mechanical keyboard. Features customizable RGB lighting and tactile feedback.",price:499.5,stock:15,image:"https://images.unsplash.com/photo-1618384887929-16ec33fab9ef?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8a2V5Ym9hcmR8ZW58MHx8MHx8fDA%3D"}],r=e=>{const t=[{id:1,name:"John Doe"},{id:2,name:"Jane Smith"},{id:3,name:"Robert Johnson"}],a=()=>{const e=new Date,t=Math.floor(30*Math.random());return e.setDate(e.getDate()-t),e.toISOString()},s=t=>{const a=Math.floor(4*Math.random())+1,s=[];for(let r=0;r<a;r++){const a=e[Math.floor(Math.random()*e.length)],o=s.find((e=>e.product===a.id));o?o.quantity+=Math.floor(2*Math.random())+1:s.push({id:100*t+r,order:t,product:a.id,quantity:Math.floor(3*Math.random())+1})}return s},r=[];for(let o=1;o<=10;o++){const e=t[Math.floor(Math.random()*t.length)];r.push({id:o,customer:e.name,date_ordered:a(),complete:!0,items:s(o)})}return r},o=(e=!1)=>{if(!localStorage.getItem("mockProducts")||e){const e=s();localStorage.setItem("mockProducts",JSON.stringify(e))}if(!localStorage.getItem("mockOrders")||e){const e=JSON.parse(localStorage.getItem("mockProducts")),t=r(e);localStorage.setItem("mockOrders",JSON.stringify(t))}return{products:JSON.parse(localStorage.getItem("mockProducts")),orders:JSON.parse(localStorage.getItem("mockOrders"))}},i=()=>{const e=localStorage.getItem("mockProducts"),t=localStorage.getItem("mockOrders");return e&&t?{products:JSON.parse(e),orders:JSON.parse(t)}:(console.log("ðŸ”„ Reinitializing missing mock data..."),o(!0))},n=()=>JSON.parse(localStorage.getItem("mockProducts"))||[],l=()=>JSON.parse(localStorage.getItem("mockOrders"))||[],c=e=>{const t=n(),a={...e,id:t.length>0?Math.max(...t.map((e=>e.id)))+1:1};return t.push(a),localStorage.setItem("mockProducts",JSON.stringify(t)),a},d=(e,t)=>{const a=n(),s=a.findIndex((t=>t.id===e));return-1!==s?(a[s]={...a[s],...t},localStorage.setItem("mockProducts",JSON.stringify(a)),a[s]):null},u=e=>{const t=n(),a=t.filter((t=>t.id!==e));return a.length<t.length&&(localStorage.setItem("mockProducts",JSON.stringify(a)),!0)},m=e=>{const t=l(),a={...e,id:t.length>0?Math.max(...t.map((e=>e.id)))+1:1,date_ordered:(new Date).toISOString(),complete:!0};if(t.push(a),localStorage.setItem("mockOrders",JSON.stringify(t)),a.items&&a.items.length>0){const e=n();a.items.forEach((t=>{const a=e.findIndex((e=>e.id===t.product));-1!==a&&(e[a].stock=Math.max(0,e[a].stock-t.quantity))})),localStorage.setItem("mockProducts",JSON.stringify(e))}return a};t.Ay={initializeMockData:o,ensureMockDataExists:i,getMockProducts:n,getMockOrders:l,addMockProduct:c,updateMockProduct:d,deleteMockProduct:u,addMockOrder:m}},4821:function(e,t,a){a.d(t,{ensureAdminMockDataExists:function(){return l},initializeAdminMockData:function(){return n}});a(4114),a(8111),a(2489),a(116),a(7588),a(8237),a(7642),a(8004),a(3853),a(5876),a(2475),a(5024),a(1698);const s=()=>[{id:1,name:"Premium Wireless Headphones",description:"Experience crystal-clear sound with our premium wireless headphones. Features active noise cancellation, 20-hour battery life, and premium leather comfort padding.",price:1299.99,stock:15,image:"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8cHJvZHVjdHxlbnwwfHwwfHx8MA%3D%3D",category:"Electronics",sku:"WH-001",created_at:"2024-01-15T10:30:00Z",updated_at:"2024-01-20T14:45:00Z"},{id:2,name:"Smart Fitness Watch",description:"Track your fitness goals with this advanced smartwatch. Monitors heart rate, steps, sleep quality, GPS tracking, and includes 50+ workout modes.",price:899.5,stock:8,image:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTB8fHByb2R1Y3R8ZW58MHx8MHx8fDA%3D",category:"Wearables",sku:"SW-002",created_at:"2024-01-10T09:15:00Z",updated_at:"2024-01-25T16:20:00Z"},{id:3,name:'Ultra HD Smart TV 55"',description:"Transform your living room with this 55-inch Ultra HD Smart TV. Features AI-powered picture quality, Dolby Atmos sound, and built-in streaming apps.",price:3499.99,stock:5,image:"https://images.unsplash.com/photo-1567690187548-f07b1d7bf5a9?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8OHx8dHZ8ZW58MHx8MHx8fDA%3D",category:"Electronics",sku:"TV-003",created_at:"2024-01-05T11:00:00Z",updated_at:"2024-01-30T13:10:00Z"},{id:4,name:"Professional Camera Kit",description:"Capture stunning photos and videos with this professional-grade camera kit. Includes 24-70mm lens, 50mm prime lens, tripod, and camera bag.",price:4999,stock:3,image:"https://images.unsplash.com/photo-1526170375885-4d8ecf77b99f?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8cHJvZHVjdHxlbnwwfHwwfHx8MA%3D%3D",category:"Photography",sku:"CAM-004",created_at:"2024-01-08T14:30:00Z",updated_at:"2024-02-01T10:15:00Z"},{id:5,name:"Ergonomic Office Chair",description:"Work in comfort with this ergonomic office chair. Features adjustable height, lumbar support, breathable mesh back, and 360-degree swivel.",price:1299,stock:12,image:"https://images.unsplash.com/photo-1596162954151-cdcb4c0f70a8?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTJ8fGNoYWlyfGVufDB8fDB8fHww",category:"Furniture",sku:"CHR-005",created_at:"2024-01-12T08:45:00Z",updated_at:"2024-01-28T15:30:00Z"},{id:6,name:"Portable Bluetooth Speaker",description:"Take your music anywhere with this waterproof portable Bluetooth speaker. Features 12-hour battery life, deep bass, and hands-free calling.",price:599.99,stock:20,image:"https://images.unsplash.com/photo-1608043152269-423dbba4e7e1?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8Ymx1ZXRvb3RoJTIwc3BlYWtlcnxlbnwwfHwwfHx8MA%3D%3D",category:"Audio",sku:"SPK-006",created_at:"2024-01-18T12:20:00Z",updated_at:"2024-02-03T09:40:00Z"},{id:7,name:"Gaming Laptop Pro",description:"Experience lag-free gaming with this high-performance gaming laptop. Features RTX 4070 graphics, 32GB RAM, 1TB SSD, and RGB mechanical keyboard.",price:5999,stock:7,image:"https://images.unsplash.com/photo-1603302576837-37561b2e2302?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTh8fGxhcHRvcHxlbnwwfHwwfHx8MA%3D%3D",category:"Computers",sku:"LAP-007",created_at:"2024-01-22T16:10:00Z",updated_at:"2024-02-05T11:25:00Z"},{id:8,name:"Coffee Maker Deluxe",description:"Brew perfect coffee every time with this programmable coffee maker. Features built-in grinder, thermal carafe, and multiple brewing strength options.",price:799.5,stock:9,image:"https://images.unsplash.com/photo-1570286424717-86d8a0082d0b?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTB8fGNvZmZlZSUyMG1ha2VyfGVufDB8fDB8fHww",category:"Kitchen",sku:"COF-008",created_at:"2024-01-25T13:55:00Z",updated_at:"2024-02-07T14:20:00Z"},{id:9,name:"Smartphone Pro Max",description:"Stay connected with our latest flagship smartphone. Features 108MP camera system, all-day battery life, 5G connectivity, and premium titanium build.",price:4299,stock:0,image:"https://images.unsplash.com/photo-1598327105666-5b89351aff97?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTZ8fHNtYXJ0cGhvbmV8ZW58MHx8MHx8fDA%3D",category:"Mobile",sku:"PHN-009",created_at:"2024-01-30T10:40:00Z",updated_at:"2024-02-10T16:50:00Z"},{id:10,name:"Wireless Charging Pad",description:"Charge your devices without the hassle of cables. Compatible with all Qi-enabled smartphones, fast charging up to 15W, with LED indicator.",price:299.99,stock:25,image:"https://images.unsplash.com/photo-1622445275463-afa2ab738c34?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8Y2hhcmdlcnxlbnwwfHwwfHx8MA%3D%3D",category:"Accessories",sku:"CHG-010",created_at:"2024-02-01T09:30:00Z",updated_at:"2024-02-12T12:15:00Z"},{id:11,name:"Smart Home Hub",description:"Control all your smart home devices from one central hub. Compatible with Alexa, Google Assistant, and most popular smart home brands.",price:899,stock:4,image:"https://images.unsplash.com/photo-1558002038-1055907df827?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8c21hcnQlMjBob21lfGVufDB8fDB8fHww",category:"Smart Home",sku:"HUB-011",created_at:"2024-02-03T15:20:00Z",updated_at:"2024-02-14T08:45:00Z"},{id:12,name:"Mechanical Gaming Keyboard",description:"Enhance your gaming experience with this mechanical keyboard. Features Cherry MX switches, customizable RGB lighting, and programmable macro keys.",price:499.5,stock:15,image:"https://images.unsplash.com/photo-1618384887929-16ec33fab9ef?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8a2V5Ym9hcmR8ZW58MHx8MHx8fDA%3D",category:"Gaming",sku:"KEY-012",created_at:"2024-02-05T11:10:00Z",updated_at:"2024-02-15T13:30:00Z"},{id:13,name:"4K Webcam Pro",description:"Professional 4K webcam for streaming and video calls. Features auto-focus, noise reduction, wide-angle lens, and plug-and-play setup.",price:399.99,stock:18,image:"https://images.unsplash.com/photo-1587825140708-dfaf72ae4b04?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8d2ViY2FtfGVufDB8fDB8fHww",category:"Electronics",sku:"WEB-013",created_at:"2024-02-08T14:25:00Z",updated_at:"2024-02-16T10:20:00Z"},{id:14,name:"Wireless Mouse Elite",description:"Precision wireless mouse with ergonomic design. Features 16000 DPI sensor, 7 programmable buttons, and 70-hour battery life.",price:199.99,stock:22,image:"https://images.unsplash.com/photo-1527864550417-7fd91fc51a46?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8bW91c2V8ZW58MHx8MHx8fDA%3D",category:"Accessories",sku:"MOU-014",created_at:"2024-02-10T16:40:00Z",updated_at:"2024-02-17T09:15:00Z"},{id:15,name:'Tablet Pro 12.9"',description:"Powerful tablet for work and creativity. Features M2 chip, 12.9-inch Liquid Retina display, Apple Pencil support, and all-day battery life.",price:3299,stock:6,image:"https://images.unsplash.com/photo-1544244015-0df4b3ffc6b0?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8dGFibGV0fGVufDB8fDB8fHww",category:"Mobile",sku:"TAB-015",created_at:"2024-02-12T12:50:00Z",updated_at:"2024-02-18T15:35:00Z"}],r=e=>{const t=[{id:1,name:"John Doe",email:"john.doe@email.com",phone:"+1-555-0123"},{id:2,name:"Jane Smith",email:"jane.smith@email.com",phone:"+1-555-0124"},{id:3,name:"Robert Johnson",email:"robert.j@email.com",phone:"+1-555-0125"},{id:4,name:"Emily Davis",email:"emily.davis@email.com",phone:"+1-555-0126"},{id:5,name:"Michael Brown",email:"m.brown@email.com",phone:"+1-555-0127"},{id:6,name:"Sarah Wilson",email:"sarah.w@email.com",phone:"+1-555-0128"},{id:7,name:"David Miller",email:"david.miller@email.com",phone:"+1-555-0129"},{id:8,name:"Lisa Anderson",email:"lisa.anderson@email.com",phone:"+1-555-0130"},{id:9,name:"James Taylor",email:"james.taylor@email.com",phone:"+1-555-0131"},{id:10,name:"Maria Garcia",email:"maria.garcia@email.com",phone:"+1-555-0132"}],a=(e=60)=>{const t=new Date,a=Math.floor(Math.random()*e);return t.setDate(t.getDate()-a),t.setHours(Math.floor(24*Math.random())),t.setMinutes(Math.floor(60*Math.random())),t.toISOString()},s=["pending","processing","shipped","delivered","cancelled"],r=()=>{const e=[.1,.2,.3,.35,.05],t=Math.random();let a=0;for(let r=0;r<e.length;r++)if(a+=e[r],t<=a)return s[r];return"delivered"},o=["123 Main St, New York, NY 10001","456 Oak Ave, Los Angeles, CA 90210","789 Pine Rd, Chicago, IL 60601","321 Elm St, Houston, TX 77001","654 Maple Dr, Phoenix, AZ 85001","987 Cedar Ln, Philadelphia, PA 19101","147 Birch Way, San Antonio, TX 78201","258 Spruce St, San Diego, CA 92101","369 Willow Ave, Dallas, TX 75201","741 Poplar Rd, San Jose, CA 95101"],i=[{type:"credit_card",last4:"4242",brand:"Visa"},{type:"credit_card",last4:"5555",brand:"Mastercard"},{type:"credit_card",last4:"3782",brand:"American Express"},{type:"paypal",email:"user@paypal.com"},{type:"apple_pay",device:"iPhone"},{type:"google_pay",device:"Android"}],n=t=>{const a=Math.floor(5*Math.random())+1,s=[],r=new Set;for(let o=0;o<a;o++){let a,i=0;do{a=e[Math.floor(Math.random()*e.length)],i++}while(r.has(a.id)&&i<10);r.add(a.id),s.push({id:100*t+o,order:t,product:a.id,quantity:Math.floor(3*Math.random())+1,price_at_time:a.price})}return s},l=(e,t)=>{let a=0;e.forEach((e=>{const s=t.find((t=>t.id===e.product));s&&(a+=(e.price_at_time||s.price)*e.quantity)}));const s=.08*a,r=a>1e3?0:50,o=a+s+r;return{subtotal:a,tax:s,shipping:r,total:o}},c=[];for(let d=1;d<=25;d++){const s=t[Math.floor(Math.random()*t.length)],u=n(d),m=l(u,e),p=r(),g=i[Math.floor(Math.random()*i.length)],h=o[Math.floor(Math.random()*o.length)];c.push({id:d,customer:s.name,customer_email:s.email,customer_phone:s.phone,date_ordered:a(),status:p,complete:"delivered"===p||"shipped"===p,items:u,subtotal:m.subtotal,tax:m.tax,shipping:m.shipping,total:m.total,payment_method:g,shipping_address:h,tracking_number:"shipped"===p||"delivered"===p?`TRK${Math.random().toString(36).substr(2,9).toUpperCase()}`:null,notes:d%5===0?"Customer requested expedited shipping":null})}return c.sort(((e,t)=>new Date(t.date_ordered)-new Date(e.date_ordered)))},o=e=>{const t=new Date,a=new Date(t.getTime()-2592e6),s=new Date(t.getTime()-6048e5),r=e.filter((e=>new Date(e.date_ordered)>=a)),o=e.filter((e=>new Date(e.date_ordered)>=s)),i=e.filter((e=>{const a=new Date(e.date_ordered);return a.toDateString()===t.toDateString()})),n=e=>e.reduce(((e,t)=>(e.revenue+=t.total||0,e.orders+=1,e.items+=t.items?t.items.length:0,e)),{revenue:0,orders:0,items:0});return{today:n(i),last7Days:n(o),last30Days:n(r),total:n(e)}},i=e=>{const t=[];return e.forEach((e=>{0===e.stock?t.push({id:`alert-${e.id}`,type:"out_of_stock",product_id:e.id,product_name:e.name,message:`${e.name} is out of stock`,severity:"high",created_at:(new Date).toISOString()}):e.stock<5&&t.push({id:`alert-${e.id}`,type:"low_stock",product_id:e.id,product_name:e.name,message:`${e.name} has low stock (${e.stock} remaining)`,severity:"medium",created_at:(new Date).toISOString()})})),t},n=(e=!1)=>{console.log("ðŸ”„ Initializing admin mock data...");const t=window.location.hostname.includes("github.io")||!0,a="true"===localStorage.getItem("adminDataInitialized"),n=localStorage.getItem("adminMockProducts"),l=localStorage.getItem("adminMockOrders");if(!a||e||!n||!l||t){console.log("ðŸ”„ Generating fresh admin products...");const e=s();localStorage.setItem("adminMockProducts",JSON.stringify(e)),console.log("ðŸ”„ Generating fresh admin orders...");const t=r(e);localStorage.setItem("adminMockOrders",JSON.stringify(t)),console.log("ðŸ”„ Generating admin analytics and alerts...");const a=o(t),n=i(e);return localStorage.setItem("adminAnalytics",JSON.stringify(a)),localStorage.setItem("adminAlerts",JSON.stringify(n)),localStorage.setItem("adminDataInitialized","true"),console.log("âœ… Admin mock data initialized with",e.length,"products and",t.length,"orders"),{products:e,orders:t,analytics:a,alerts:n}}return{products:JSON.parse(localStorage.getItem("adminMockProducts")||"[]"),orders:JSON.parse(localStorage.getItem("adminMockOrders")||"[]"),analytics:JSON.parse(localStorage.getItem("adminAnalytics")||"{}"),alerts:JSON.parse(localStorage.getItem("adminAlerts")||"[]")}},l=()=>{console.log("ðŸ”§ Ensuring admin mock data exists...");const e=JSON.parse(localStorage.getItem("adminMockProducts")||"[]"),t=JSON.parse(localStorage.getItem("adminMockOrders")||"[]"),a="true"===localStorage.getItem("adminDataInitialized");return 0!==e.length&&0!==t.length&&a?(console.log("âœ… Admin mock data exists:",e.length,"products,",t.length,"orders"),{products:e,orders:t,analytics:c(),alerts:d()}):(console.log("ðŸ”§ Admin mock data missing or incomplete, reinitializing..."),n(!0))},c=()=>{const e=JSON.parse(localStorage.getItem("adminAnalytics")||"{}");if(0===Object.keys(e).length){const e=JSON.parse(localStorage.getItem("adminMockOrders")||"[]"),t=o(e);return localStorage.setItem("adminAnalytics",JSON.stringify(t)),t}return e},d=()=>{const e=JSON.parse(localStorage.getItem("adminAlerts")||"[]");if(0===e.length){const e=JSON.parse(localStorage.getItem("adminMockProducts")||"[]"),t=i(e);return localStorage.setItem("adminAlerts",JSON.stringify(t)),t}return e},u=(e,t)=>{const a=JSON.parse(localStorage.getItem("adminMockOrders")||"[]"),s=a.findIndex((t=>t.id===e));return-1!==s?(a[s].status=t,a[s].complete="delivered"===t||"shipped"===t,"shipped"!==t||a[s].tracking_number||(a[s].tracking_number=`TRK${Math.random().toString(36).substr(2,9).toUpperCase()}`),localStorage.setItem("adminMockOrders",JSON.stringify(a)),a[s]):null};t.Ay={initializeAdminMockData:n,ensureAdminMockDataExists:l,getAdminAnalytics:c,getAdminAlerts:d,updateOrderStatus:u}}},t={};function a(s){var r=t[s];if(void 0!==r)return r.exports;var o=t[s]={exports:{}};return e[s].call(o.exports,o,o.exports,a),o.exports}a.m=e,function(){var e=[];a.O=function(t,s,r,o){if(!s){var i=1/0;for(d=0;d<e.length;d++){s=e[d][0],r=e[d][1],o=e[d][2];for(var n=!0,l=0;l<s.length;l++)(!1&o||i>=o)&&Object.keys(a.O).every((function(e){return a.O[e](s[l])}))?s.splice(l--,1):(n=!1,o<i&&(i=o));if(n){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[s,r,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var r,o,i=s[0],n=s[1],l=s[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(r in n)a.o(n,r)&&(a.m[r]=n[r]);if(l)var d=l(a)}for(t&&t(s);c<i.length;c++)o=i[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(d)},s=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[504],(function(){return a(412)}));s=a.O(s)})();
//# sourceMappingURL=app.e5b6f955.js.map