(function(){"use strict";var e={3602:function(e,t,a){var s=a(5130),r=a(6768),o=a(4232);const i={class:"app-container"},l={class:"navbar navbar-expand-lg navbar-dark"},n={class:"container"},c={class:"collapse navbar-collapse",id:"navbarContent",ref:"navbarCollapse"},d={class:"navbar-nav me-auto mb-2 mb-lg-0"},u={key:0,class:"nav-item"},m={key:1,class:"nav-item"},p={key:2,class:"nav-item"},g={key:3,class:"nav-item"},h={key:4,class:"nav-item"},k={key:0,class:"cart-badge"},b={key:5,class:"nav-item"},f={class:"navbar-nav ms-auto"},v={key:0,class:"nav-item"},y={key:1,class:"nav-item d-flex align-items-center user-nav-item"},L={class:"user-info d-flex align-items-center"},w={class:"main-content"},P={class:"footer mt-auto py-3"},C={class:"container"},x={class:"row"},S={class:"col-md-4 mb-3 mb-md-0"},M={class:"footer-links"};function I(e,t,a,I,E,O){const _=(0,r.g2)("router-link"),D=(0,r.g2)("router-view"),T=(0,r.g2)("ToastNotification");return(0,r.uX)(),(0,r.CE)("div",i,[(0,r.Lk)("nav",l,[(0,r.Lk)("div",n,[(0,r.bF)(_,{class:"navbar-brand",to:I.auth&&I.auth.isLoggedIn?I.auth.isStaff?"/monitor":"/products":"/login"},{default:(0,r.k6)((()=>t[2]||(t[2]=[(0,r.Lk)("i",{class:"bi bi-bag-heart-fill me-2"},null,-1),(0,r.eW)("Bluora ")]))),_:1},8,["to"]),(0,r.Lk)("button",{class:"navbar-toggler",type:"button",onClick:t[0]||(t[0]=(...e)=>I.toggleNavbar&&I.toggleNavbar(...e)),"aria-controls":"navbarContent","aria-expanded":"false","aria-label":"Toggle navigation"},t[3]||(t[3]=[(0,r.Lk)("span",{class:"navbar-toggler-icon"},null,-1)])),(0,r.Lk)("div",c,[(0,r.Lk)("ul",d,[I.auth.isLoggedIn&&I.auth.isStaff?((0,r.uX)(),(0,r.CE)("li",u,[(0,r.bF)(_,{class:"nav-link",to:"/monitor-products",onClick:I.closeNavbar},{default:(0,r.k6)((()=>t[4]||(t[4]=[(0,r.Lk)("i",{class:"bi bi-box-seam me-1"},null,-1),(0,r.eW)(" Products ")]))),_:1},8,["onClick"])])):(0,r.Q3)("",!0),I.auth.isLoggedIn&&I.auth.isStaff?((0,r.uX)(),(0,r.CE)("li",m,[(0,r.bF)(_,{class:"nav-link",to:"/add-product",onClick:I.closeNavbar},{default:(0,r.k6)((()=>t[5]||(t[5]=[(0,r.Lk)("i",{class:"bi bi-plus-circle me-1"},null,-1),(0,r.eW)(" Add Product ")]))),_:1},8,["onClick"])])):(0,r.Q3)("",!0),I.auth.isLoggedIn&&I.auth.isStaff?((0,r.uX)(),(0,r.CE)("li",p,[(0,r.bF)(_,{class:"nav-link",to:"/monitor",onClick:I.closeNavbar},{default:(0,r.k6)((()=>t[6]||(t[6]=[(0,r.Lk)("i",{class:"bi bi-clipboard-check me-1"},null,-1),(0,r.eW)(" Orders ")]))),_:1},8,["onClick"])])):(0,r.Q3)("",!0),I.auth.isLoggedIn&&!I.auth.isStaff?((0,r.uX)(),(0,r.CE)("li",g,[(0,r.bF)(_,{class:"nav-link",to:"/products",onClick:I.closeNavbar},{default:(0,r.k6)((()=>t[7]||(t[7]=[(0,r.Lk)("i",{class:"bi bi-shop me-1"},null,-1),(0,r.eW)(" Shop ")]))),_:1},8,["onClick"])])):(0,r.Q3)("",!0),I.auth.isLoggedIn&&!I.auth.isStaff?((0,r.uX)(),(0,r.CE)("li",h,[(0,r.bF)(_,{class:"nav-link position-relative",to:"/cart",onClick:I.closeNavbar},{default:(0,r.k6)((()=>[t[8]||(t[8]=(0,r.Lk)("i",{class:"bi bi-cart me-1"},null,-1)),t[9]||(t[9]=(0,r.eW)(" Cart ")),I.cartCount>0?((0,r.uX)(),(0,r.CE)("span",k,(0,o.v_)(I.cartCount),1)):(0,r.Q3)("",!0)])),_:1},8,["onClick"])])):(0,r.Q3)("",!0),I.auth.isLoggedIn&&!I.auth.isStaff?((0,r.uX)(),(0,r.CE)("li",b,[(0,r.bF)(_,{class:"nav-link",to:"/orders",onClick:I.closeNavbar},{default:(0,r.k6)((()=>t[10]||(t[10]=[(0,r.Lk)("i",{class:"bi bi-clock-history me-1"},null,-1),(0,r.eW)(" Orders ")]))),_:1},8,["onClick"])])):(0,r.Q3)("",!0)]),(0,r.Lk)("ul",f,[I.auth.isLoggedIn?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("li",v,["register"===e.$route.name?((0,r.uX)(),(0,r.Wv)(_,{key:0,class:"nav-link",to:"/login",onClick:I.closeNavbar},{default:(0,r.k6)((()=>t[11]||(t[11]=[(0,r.Lk)("i",{class:"bi bi-box-arrow-in-right me-1"},null,-1),(0,r.eW)(" Login ")]))),_:1},8,["onClick"])):((0,r.uX)(),(0,r.Wv)(_,{key:1,class:"nav-link",to:"/register",onClick:I.closeNavbar},{default:(0,r.k6)((()=>t[12]||(t[12]=[(0,r.Lk)("i",{class:"bi bi-person-plus me-1"},null,-1),(0,r.eW)(" Register ")]))),_:1},8,["onClick"]))])),I.auth.isLoggedIn?((0,r.uX)(),(0,r.CE)("li",y,[(0,r.Lk)("div",L,[t[13]||(t[13]=(0,r.Lk)("i",{class:"bi bi-person-circle me-1"},null,-1)),(0,r.Lk)("span",null,(0,o.v_)(I.username),1)]),(0,r.Lk)("button",{class:"btn btn-outline-light btn-sm ms-2",onClick:t[1]||(t[1]=(...e)=>I.logout&&I.logout(...e))},t[14]||(t[14]=[(0,r.Lk)("i",{class:"bi bi-box-arrow-right me-1"},null,-1),(0,r.eW)(" Logout ")]))])):(0,r.Q3)("",!0)])],512)])]),(0,r.Lk)("main",w,[(0,r.bF)(D,null,{default:(0,r.k6)((({Component:t})=>[(0,r.bF)(s.eB,{name:"fade",mode:"out-in"},{default:(0,r.k6)((()=>[((0,r.uX)(),(0,r.Wv)((0,r.$y)(t),{key:e.$route.fullPath}))])),_:2},1024)])),_:1})]),(0,r.Lk)("footer",P,[(0,r.Lk)("div",C,[(0,r.Lk)("div",x,[t[19]||(t[19]=(0,r.Lk)("div",{class:"col-md-4 mb-3 mb-md-0"},[(0,r.Lk)("h5",{class:"footer-heading"},"Bluora"),(0,r.Lk)("p",{class:"footer-text"},"Your one-stop shop for all your needs. Quality products at affordable prices.")],-1)),(0,r.Lk)("div",S,[t[18]||(t[18]=(0,r.Lk)("h5",{class:"footer-heading"},"Quick Links",-1)),(0,r.Lk)("ul",M,[(0,r.Lk)("li",null,[(0,r.bF)(_,{to:"/products"},{default:(0,r.k6)((()=>t[15]||(t[15]=[(0,r.eW)("Products")]))),_:1})]),(0,r.Lk)("li",null,[(0,r.bF)(_,{to:"/cart"},{default:(0,r.k6)((()=>t[16]||(t[16]=[(0,r.eW)("Cart")]))),_:1})]),(0,r.Lk)("li",null,[(0,r.bF)(_,{to:"/orders"},{default:(0,r.k6)((()=>t[17]||(t[17]=[(0,r.eW)("Orders")]))),_:1})])])]),t[20]||(t[20]=(0,r.Fv)('<div class="col-md-4"><h5 class="footer-heading">Contact Us</h5><p class="footer-text"><i class="bi bi-envelope me-2"></i> support@bluora.com<br><i class="bi bi-telephone me-2"></i> +1 (123) 456-7890<br><i class="bi bi-geo-alt me-2"></i> 123 E-Commerce St, Digital City </p></div>',1))]),t[21]||(t[21]=(0,r.Fv)('<div class="footer-bottom"><p class="mb-0">Â© 2025 Bluora. All rights reserved.</p><div class="social-icons"><a href="#" class="social-icon"><i class="bi bi-facebook"></i></a><a href="#" class="social-icon"><i class="bi bi-twitter"></i></a><a href="#" class="social-icon"><i class="bi bi-instagram"></i></a></div></div>',1))])]),(0,r.bF)(T)])}a(4114);var E=a(144),O=a(4373);a(8111),a(2489),a(116),a(7588),a(1701);const _=()=>[{id:1,name:"Premium Wireless Headphones",description:"Experience crystal-clear sound with our premium wireless headphones. Features noise cancellation and 20-hour battery life.",price:1299.99,stock:15,image:"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8cHJvZHVjdHxlbnwwfHwwfHx8MA%3D%3D"},{id:2,name:"Smart Fitness Watch",description:"Track your fitness goals with this advanced smartwatch. Monitors heart rate, steps, sleep quality and more.",price:899.5,stock:8,image:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTB8fHByb2R1Y3R8ZW58MHx8MHx8fDA%3D"},{id:3,name:"Ultra HD Smart TV",description:"Transform your living room with this 55-inch Ultra HD Smart TV. Features AI-powered picture quality and immersive sound.",price:3499.99,stock:5,image:"https://images.unsplash.com/photo-1567690187548-f07b1d7bf5a9?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8OHx8dHZ8ZW58MHx8MHx8fDA%3D"},{id:4,name:"Professional Camera Kit",description:"Capture stunning photos and videos with this professional-grade camera kit. Includes multiple lenses and accessories.",price:4999,stock:3,image:"https://images.unsplash.com/photo-1526170375885-4d8ecf77b99f?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8cHJvZHVjdHxlbnwwfHwwfHx8MA%3D%3D"},{id:5,name:"Ergonomic Office Chair",description:"Work in comfort with this ergonomic office chair. Features adjustable height, lumbar support, and breathable mesh back.",price:1299,stock:12,image:"https://images.unsplash.com/photo-1596162954151-cdcb4c0f70a8?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTJ8fGNoYWlyfGVufDB8fDB8fHww"},{id:6,name:"Portable Bluetooth Speaker",description:"Take your music anywhere with this waterproof portable Bluetooth speaker. Features 12-hour battery life and deep bass.",price:599.99,stock:20,image:"https://images.unsplash.com/photo-1608043152269-423dbba4e7e1?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8Ymx1ZXRvb3RoJTIwc3BlYWtlcnxlbnwwfHwwfHx8MA%3D%3D"},{id:7,name:"Gaming Laptop",description:"Experience lag-free gaming with this high-performance gaming laptop. Features dedicated graphics card and RGB keyboard.",price:5999,stock:7,image:"https://images.unsplash.com/photo-1603302576837-37561b2e2302?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTh8fGxhcHRvcHxlbnwwfHwwfHx8MA%3D%3D"},{id:8,name:"Coffee Maker Deluxe",description:"Brew perfect coffee every time with this programmable coffee maker. Features multiple brewing options and built-in grinder.",price:799.5,stock:9,image:"https://images.unsplash.com/photo-1565452344518-47faca79dc69?q=80&w=1935&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{id:9,name:"Smartphone Pro Max",description:"Stay connected with our latest smartphone. Features high-resolution camera, all-day battery life, and fast processor.",price:4299,stock:0,image:"https://images.unsplash.com/photo-1598327105666-5b89351aff97?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTZ8fHNtYXJ0cGhvbmV8ZW58MHx8MHx8fDA%3D"},{id:10,name:"Wireless Charging Pad",description:"Charge your devices without the hassle of cables. Compatible with all Qi-enabled smartphones and accessories.",price:299.99,stock:25,image:"https://images.unsplash.com/photo-1622445275463-afa2ab738c34?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8Y2hhcmdlcnxlbnwwfHwwfHx8MA%3D%3D"},{id:11,name:"Smart Home Hub",description:"Control all your smart home devices from one central hub. Compatible with most popular smart home brands.",price:899,stock:4,image:"https://images.unsplash.com/photo-1558002038-1055907df827?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8c21hcnQlMjBob21lfGVufDB8fDB8fHww"},{id:12,name:"Mechanical Keyboard",description:"Enhance your typing experience with this mechanical keyboard. Features customizable RGB lighting and tactile feedback.",price:499.5,stock:15,image:"https://images.unsplash.com/photo-1618384887929-16ec33fab9ef?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8a2V5Ym9hcmR8ZW58MHx8MHx8fDA%3D"}],D=e=>{const t=[{id:1,name:"John Doe"},{id:2,name:"Jane Smith"},{id:3,name:"Robert Johnson"}],a=()=>{const e=new Date,t=Math.floor(30*Math.random());return e.setDate(e.getDate()-t),e.toISOString()},s=t=>{const a=Math.floor(4*Math.random())+1,s=[];for(let r=0;r<a;r++){const a=e[Math.floor(Math.random()*e.length)],o=s.find((e=>e.product===a.id));o?o.quantity+=Math.floor(2*Math.random())+1:s.push({id:100*t+r,order:t,product:a.id,quantity:Math.floor(3*Math.random())+1})}return s},r=[];for(let o=1;o<=10;o++){const e=t[Math.floor(Math.random()*t.length)];r.push({id:o,customer:e.name,date_ordered:a(),complete:!0,items:s(o)})}return r},T=(e=!1)=>{if(!localStorage.getItem("mockProducts")||e){const e=_();localStorage.setItem("mockProducts",JSON.stringify(e))}if(!localStorage.getItem("mockOrders")||e){const e=JSON.parse(localStorage.getItem("mockProducts")),t=D(e);localStorage.setItem("mockOrders",JSON.stringify(t))}return{products:JSON.parse(localStorage.getItem("mockProducts")),orders:JSON.parse(localStorage.getItem("mockOrders"))}},A=()=>{const e=localStorage.getItem("mockProducts"),t=localStorage.getItem("mockOrders");return e&&t?{products:JSON.parse(e),orders:JSON.parse(t)}:(console.log("ð Reinitializing missing mock data..."),T(!0))},F=()=>JSON.parse(localStorage.getItem("mockProducts"))||[],N=()=>JSON.parse(localStorage.getItem("mockOrders"))||[],W=e=>{const t=F(),a={...e,id:t.length>0?Math.max(...t.map((e=>e.id)))+1:1};return t.push(a),localStorage.setItem("mockProducts",JSON.stringify(t)),a},X=(e,t)=>{const a=F(),s=a.findIndex((t=>t.id===e));return-1!==s?(a[s]={...a[s],...t},localStorage.setItem("mockProducts",JSON.stringify(a)),a[s]):null},R=e=>{const t=F(),a=t.filter((t=>t.id!==e));return a.length<t.length&&(localStorage.setItem("mockProducts",JSON.stringify(a)),!0)},q=e=>{const t=N(),a={...e,id:t.length>0?Math.max(...t.map((e=>e.id)))+1:1,date_ordered:(new Date).toISOString(),complete:!0};if(t.push(a),localStorage.setItem("mockOrders",JSON.stringify(t)),a.items&&a.items.length>0){const e=F();a.items.forEach((t=>{const a=e.findIndex((e=>e.id===t.product));-1!==a&&(e[a].stock=Math.max(0,e[a].stock-t.quantity))})),localStorage.setItem("mockProducts",JSON.stringify(e))}return a};var H={initializeMockData:T,ensureMockDataExists:A,getMockProducts:F,getMockOrders:N,addMockProduct:W,updateMockProduct:X,deleteMockProduct:R,addMockOrder:q};H.ensureMockDataExists();const J=(e=300)=>new Promise((t=>setTimeout(t,e))),B={getProducts:async()=>{await J();try{const e=H.getMockProducts();return console.log("ð¦ Fetched",e.length,"products from mock API"),{data:e}}catch(e){return console.error("Error fetching products:",e),H.ensureMockDataExists(),{data:H.getMockProducts()}}},getProduct:async e=>{await J();const t=H.getMockProducts(),a=t.find((t=>t.id===Number.parseInt(e)));return a?{data:a}:Promise.reject({response:{status:404,data:{error:"Product not found"}}})},createProduct:async e=>{await J(500);const t=H.addMockProduct(e);return{data:t}},updateProduct:async(e,t)=>{await J(500);const a=H.updateMockProduct(Number.parseInt(e),t);return a?{data:a}:Promise.reject({response:{status:404,data:{error:"Product not found"}}})},deleteProduct:async e=>{await J(500);const t=H.deleteMockProduct(Number.parseInt(e));return t?{data:{success:!0}}:Promise.reject({response:{status:404,data:{error:"Product not found"}}})},getOrders:async()=>{await J();try{const e=H.getMockOrders();return console.log("ð Fetched",e.length,"orders from mock API"),{data:e}}catch(e){return console.error("Error fetching orders:",e),H.ensureMockDataExists(),{data:H.getMockOrders()}}},createOrder:async e=>{await J(800);const t=H.addMockOrder(e);return{data:t}},login:async e=>(await J(1e3),"admin"===e.username&&"admin"===e.password?{data:{access:"mock-token-admin",refresh:"mock-refresh-token",user:{id:1,username:"admin",is_staff:!0}}}:"user"===e.username&&"user"===e.password?{data:{access:"mock-token-user",refresh:"mock-refresh-token",user:{id:2,username:"user",is_staff:!1}}}:Promise.reject({response:{status:401,data:{detail:"Invalid username or password"}}})),register:async e=>(await J(1e3),"admin"===e.username||"user"===e.username?Promise.reject({response:{status:400,data:{username:["This username is already taken."]}}}):{data:{id:3,username:e.username,is_staff:!1}}),getUser:async()=>{await J();const e="true"===localStorage.getItem("is_staff"),t=localStorage.getItem("user_id")||(e?"1":"2"),a=localStorage.getItem("username")||(e?"admin":"user");return{data:{id:Number.parseInt(t),username:a,is_staff:e}}},request:async e=>{const{method:t="get",url:a,data:s}=e,r=a.split("/").filter(Boolean),o=r[0],i=r[1]?Number.parseInt(r[1]):null;switch(o){case"products":if("get"===t)return i?B.getProduct(i):B.getProducts();if("post"===t)return B.createProduct(s);if("put"===t||"patch"===t)return B.updateProduct(i,s);if("delete"===t)return B.deleteProduct(i);break;case"orders":if("get"===t)return B.getOrders();if("post"===t)return B.createOrder(s);break;case"token":if("post"===t)return B.login(s);break;case"register":if("post"===t)return B.register(s);break;case"user":if("get"===t)return B.getUser();break;case"order-items":if("post"===t)return await J(300),{data:{...s,id:Math.floor(1e3*Math.random())}};break}return Promise.reject({response:{status:404,data:{error:"Endpoint not found"}}})}},Q=new Proxy(B,{get:(e,t)=>["get","post","put","patch","delete"].includes(t)?(a,s,r={})=>e.request({method:t,url:a,data:s,...r}):e[t]});var K=Q;a(8237),a(3579),a(7642),a(8004),a(3853),a(5876),a(2475),a(5024),a(1698);const z=()=>[{id:1,name:"Premium Wireless Headphones",description:"Experience crystal-clear sound with our premium wireless headphones. Features active noise cancellation, 20-hour battery life, and premium leather comfort padding.",price:1299.99,stock:15,image:"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8cHJvZHVjdHxlbnwwfHwwfHx8MA%3D%3D",category:"Electronics",sku:"WH-001",created_at:"2024-01-15T10:30:00Z",updated_at:"2024-01-20T14:45:00Z"},{id:2,name:"Smart Fitness Watch",description:"Track your fitness goals with this advanced smartwatch. Monitors heart rate, steps, sleep quality, GPS tracking, and includes 50+ workout modes.",price:899.5,stock:8,image:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTB8fHByb2R1Y3R8ZW58MHx8MHx8fDA%3D",category:"Wearables",sku:"SW-002",created_at:"2024-01-10T09:15:00Z",updated_at:"2024-01-25T16:20:00Z"},{id:3,name:'Ultra HD Smart TV 55"',description:"Transform your living room with this 55-inch Ultra HD Smart TV. Features AI-powered picture quality, Dolby Atmos sound, and built-in streaming apps.",price:3499.99,stock:5,image:"https://images.unsplash.com/photo-1567690187548-f07b1d7bf5a9?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8OHx8dHZ8ZW58MHx8MHx8fDA%3D",category:"Electronics",sku:"TV-003",created_at:"2024-01-05T11:00:00Z",updated_at:"2024-01-30T13:10:00Z"},{id:4,name:"Professional Camera Kit",description:"Capture stunning photos and videos with this professional-grade camera kit. Includes 24-70mm lens, 50mm prime lens, tripod, and camera bag.",price:4999,stock:3,image:"https://images.unsplash.com/photo-1526170375885-4d8ecf77b99f?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8NHx8cHJvZHVjdHxlbnwwfHwwfHx8MA%3D%3D",category:"Photography",sku:"CAM-004",created_at:"2024-01-08T14:30:00Z",updated_at:"2024-02-01T10:15:00Z"},{id:5,name:"Ergonomic Office Chair",description:"Work in comfort with this ergonomic office chair. Features adjustable height, lumbar support, breathable mesh back, and 360-degree swivel.",price:1299,stock:12,image:"https://images.unsplash.com/photo-1596162954151-cdcb4c0f70a8?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTJ8fGNoYWlyfGVufDB8fDB8fHww",category:"Furniture",sku:"CHR-005",created_at:"2024-01-12T08:45:00Z",updated_at:"2024-01-28T15:30:00Z"},{id:6,name:"Portable Bluetooth Speaker",description:"Take your music anywhere with this waterproof portable Bluetooth speaker. Features 12-hour battery life, deep bass, and hands-free calling.",price:599.99,stock:20,image:"https://images.unsplash.com/photo-1608043152269-423dbba4e7e1?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8Ymx1ZXRvb3RoJTIwc3BlYWtlcnxlbnwwfHwwfHx8MA%3D%3D",category:"Audio",sku:"SPK-006",created_at:"2024-01-18T12:20:00Z",updated_at:"2024-02-03T09:40:00Z"},{id:7,name:"Gaming Laptop Pro",description:"Experience lag-free gaming with this high-performance gaming laptop. Features RTX 4070 graphics, 32GB RAM, 1TB SSD, and RGB mechanical keyboard.",price:5999,stock:7,image:"https://images.unsplash.com/photo-1603302576837-37561b2e2302?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTh8fGxhcHRvcHxlbnwwfHwwfHx8MA%3D%3D",category:"Computers",sku:"LAP-007",created_at:"2024-01-22T16:10:00Z",updated_at:"2024-02-05T11:25:00Z"},{id:8,name:"Coffee Maker Deluxe",description:"Brew perfect coffee every time with this programmable coffee maker. Features built-in grinder, thermal carafe, and multiple brewing strength options.",price:799.5,stock:9,image:"https://images.unsplash.com/photo-1570286424717-86d8a0082d0b?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTB8fGNvZmZlZSUyMG1ha2VyfGVufDB8fDB8fHww",category:"Kitchen",sku:"COF-008",created_at:"2024-01-25T13:55:00Z",updated_at:"2024-02-07T14:20:00Z"},{id:9,name:"Smartphone Pro Max",description:"Stay connected with our latest flagship smartphone. Features 108MP camera system, all-day battery life, 5G connectivity, and premium titanium build.",price:4299,stock:0,image:"https://images.unsplash.com/photo-1598327105666-5b89351aff97?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTZ8fHNtYXJ0cGhvbmV8ZW58MHx8MHx8fDA%3D",category:"Mobile",sku:"PHN-009",created_at:"2024-01-30T10:40:00Z",updated_at:"2024-02-10T16:50:00Z"},{id:10,name:"Wireless Charging Pad",description:"Charge your devices without the hassle of cables. Compatible with all Qi-enabled smartphones, fast charging up to 15W, with LED indicator.",price:299.99,stock:25,image:"https://images.unsplash.com/photo-1622445275463-afa2ab738c34?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8Y2hhcmdlcnxlbnwwfHwwfHx8MA%3D%3D",category:"Accessories",sku:"CHG-010",created_at:"2024-02-01T09:30:00Z",updated_at:"2024-02-12T12:15:00Z"},{id:11,name:"Smart Home Hub",description:"Control all your smart home devices from one central hub. Compatible with Alexa, Google Assistant, and most popular smart home brands.",price:899,stock:4,image:"https://images.unsplash.com/photo-1558002038-1055907df827?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8c21hcnQlMjBob21lfGVufDB8fDB8fHww",category:"Smart Home",sku:"HUB-011",created_at:"2024-02-03T15:20:00Z",updated_at:"2024-02-14T08:45:00Z"},{id:12,name:"Mechanical Gaming Keyboard",description:"Enhance your gaming experience with this mechanical keyboard. Features Cherry MX switches, customizable RGB lighting, and programmable macro keys.",price:499.5,stock:15,image:"https://images.unsplash.com/photo-1618384887929-16ec33fab9ef?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8a2V5Ym9hcmR8ZW58MHx8MHx8fDA%3D",category:"Gaming",sku:"KEY-012",created_at:"2024-02-05T11:10:00Z",updated_at:"2024-02-15T13:30:00Z"},{id:13,name:"4K Webcam Pro",description:"Professional 4K webcam for streaming and video calls. Features auto-focus, noise reduction, wide-angle lens, and plug-and-play setup.",price:399.99,stock:18,image:"https://images.unsplash.com/photo-1587825140708-dfaf72ae4b04?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8d2ViY2FtfGVufDB8fDB8fHww",category:"Electronics",sku:"WEB-013",created_at:"2024-02-08T14:25:00Z",updated_at:"2024-02-16T10:20:00Z"},{id:14,name:"Wireless Mouse Elite",description:"Precision wireless mouse with ergonomic design. Features 16000 DPI sensor, 7 programmable buttons, and 70-hour battery life.",price:199.99,stock:22,image:"https://images.unsplash.com/photo-1527864550417-7fd91fc51a46?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8bW91c2V8ZW58MHx8MHx8fDA%3D",category:"Accessories",sku:"MOU-014",created_at:"2024-02-10T16:40:00Z",updated_at:"2024-02-17T09:15:00Z"},{id:15,name:'Tablet Pro 12.9"',description:"Powerful tablet for work and creativity. Features M2 chip, 12.9-inch Liquid Retina display, Apple Pencil support, and all-day battery life.",price:3299,stock:6,image:"https://images.unsplash.com/photo-1544244015-0df4b3ffc6b0?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8dGFibGV0fGVufDB8fDB8fHww",category:"Mobile",sku:"TAB-015",created_at:"2024-02-12T12:50:00Z",updated_at:"2024-02-18T15:35:00Z"}],Z=e=>{const t=[{id:1,name:"John Doe",email:"john.doe@email.com",phone:"+1-555-0123"},{id:2,name:"Jane Smith",email:"jane.smith@email.com",phone:"+1-555-0124"},{id:3,name:"Robert Johnson",email:"robert.j@email.com",phone:"+1-555-0125"},{id:4,name:"Emily Davis",email:"emily.davis@email.com",phone:"+1-555-0126"},{id:5,name:"Michael Brown",email:"m.brown@email.com",phone:"+1-555-0127"},{id:6,name:"Sarah Wilson",email:"sarah.w@email.com",phone:"+1-555-0128"},{id:7,name:"David Miller",email:"david.miller@email.com",phone:"+1-555-0129"},{id:8,name:"Lisa Anderson",email:"lisa.anderson@email.com",phone:"+1-555-0130"},{id:9,name:"James Taylor",email:"james.taylor@email.com",phone:"+1-555-0131"},{id:10,name:"Maria Garcia",email:"maria.garcia@email.com",phone:"+1-555-0132"}],a=(e=60)=>{const t=new Date,a=Math.floor(Math.random()*e);return t.setDate(t.getDate()-a),t.setHours(Math.floor(24*Math.random())),t.setMinutes(Math.floor(60*Math.random())),t.toISOString()},s=["pending","processing","shipped","delivered","cancelled"],r=()=>{const e=[.1,.2,.3,.35,.05],t=Math.random();let a=0;for(let r=0;r<e.length;r++)if(a+=e[r],t<=a)return s[r];return"delivered"},o=["123 Main St, New York, NY 10001","456 Oak Ave, Los Angeles, CA 90210","789 Pine Rd, Chicago, IL 60601","321 Elm St, Houston, TX 77001","654 Maple Dr, Phoenix, AZ 85001","987 Cedar Ln, Philadelphia, PA 19101","147 Birch Way, San Antonio, TX 78201","258 Spruce St, San Diego, CA 92101","369 Willow Ave, Dallas, TX 75201","741 Poplar Rd, San Jose, CA 95101"],i=[{type:"credit_card",last4:"4242",brand:"Visa"},{type:"credit_card",last4:"5555",brand:"Mastercard"},{type:"credit_card",last4:"3782",brand:"American Express"},{type:"paypal",email:"user@paypal.com"},{type:"apple_pay",device:"iPhone"},{type:"google_pay",device:"Android"}],l=t=>{const a=Math.floor(5*Math.random())+1,s=[],r=new Set;for(let o=0;o<a;o++){let a,i=0;do{a=e[Math.floor(Math.random()*e.length)],i++}while(r.has(a.id)&&i<10);r.add(a.id),s.push({id:100*t+o,order:t,product:a.id,quantity:Math.floor(3*Math.random())+1,price_at_time:a.price})}return s},n=(e,t)=>{let a=0;e.forEach((e=>{const s=t.find((t=>t.id===e.product));s&&(a+=(e.price_at_time||s.price)*e.quantity)}));const s=.08*a,r=a>1e3?0:50,o=a+s+r;return{subtotal:a,tax:s,shipping:r,total:o}},c=[];for(let d=1;d<=25;d++){const s=t[Math.floor(Math.random()*t.length)],u=l(d),m=n(u,e),p=r(),g=i[Math.floor(Math.random()*i.length)],h=o[Math.floor(Math.random()*o.length)];c.push({id:d,customer:s.name,customer_email:s.email,customer_phone:s.phone,date_ordered:a(),status:p,complete:"delivered"===p||"shipped"===p,items:u,subtotal:m.subtotal,tax:m.tax,shipping:m.shipping,total:m.total,payment_method:g,shipping_address:h,tracking_number:"shipped"===p||"delivered"===p?`TRK${Math.random().toString(36).substr(2,9).toUpperCase()}`:null,notes:d%5===0?"Customer requested expedited shipping":null})}return c.sort(((e,t)=>new Date(t.date_ordered)-new Date(e.date_ordered)))},j=e=>{const t=new Date,a=new Date(t.getTime()-2592e6),s=new Date(t.getTime()-6048e5),r=e.filter((e=>new Date(e.date_ordered)>=a)),o=e.filter((e=>new Date(e.date_ordered)>=s)),i=e.filter((e=>{const a=new Date(e.date_ordered);return a.toDateString()===t.toDateString()})),l=e=>e.reduce(((e,t)=>(e.revenue+=t.total||0,e.orders+=1,e.items+=t.items?t.items.length:0,e)),{revenue:0,orders:0,items:0});return{today:l(i),last7Days:l(o),last30Days:l(r),total:l(e)}},U=e=>{const t=[];return e.forEach((e=>{0===e.stock?t.push({id:`alert-${e.id}`,type:"out_of_stock",product_id:e.id,product_name:e.name,message:`${e.name} is out of stock`,severity:"high",created_at:(new Date).toISOString()}):e.stock<5&&t.push({id:`alert-${e.id}`,type:"low_stock",product_id:e.id,product_name:e.name,message:`${e.name} has low stock (${e.stock} remaining)`,severity:"medium",created_at:(new Date).toISOString()})})),t},V=(e=!1)=>{console.log("ð Initializing admin mock data...");const t="true"===localStorage.getItem("adminDataInitialized");if(!t||e||!localStorage.getItem("adminMockProducts")){console.log("ð Generating fresh admin products...");const e=z();localStorage.setItem("adminMockProducts",JSON.stringify(e)),console.log("ð Generating fresh admin orders...");const t=Z(e);localStorage.setItem("adminMockOrders",JSON.stringify(t)),console.log("ð Generating admin analytics and alerts...");const a=j(t),s=U(e);return localStorage.setItem("adminAnalytics",JSON.stringify(a)),localStorage.setItem("adminAlerts",JSON.stringify(s)),localStorage.setItem("adminDataInitialized","true"),console.log("â Admin mock data initialized with",e.length,"products and",t.length,"orders"),{products:e,orders:t,analytics:a,alerts:s}}return{products:JSON.parse(localStorage.getItem("adminMockProducts")||"[]"),orders:JSON.parse(localStorage.getItem("adminMockOrders")||"[]"),analytics:JSON.parse(localStorage.getItem("adminAnalytics")||"{}"),alerts:JSON.parse(localStorage.getItem("adminAlerts")||"[]")}},$=()=>{const e=JSON.parse(localStorage.getItem("adminMockProducts")||"[]"),t=JSON.parse(localStorage.getItem("adminMockOrders")||"[]");return 0===e.length||0===t.length?(console.log("ð§ Admin mock data missing, reinitializing..."),V(!0)):{products:e,orders:t,analytics:Y(),alerts:G()}},Y=()=>{const e=JSON.parse(localStorage.getItem("adminAnalytics")||"{}");if(0===Object.keys(e).length){const e=JSON.parse(localStorage.getItem("adminMockOrders")||"[]"),t=j(e);return localStorage.setItem("adminAnalytics",JSON.stringify(t)),t}return e},G=()=>{const e=JSON.parse(localStorage.getItem("adminAlerts")||"[]");if(0===e.length){const e=JSON.parse(localStorage.getItem("adminMockProducts")||"[]"),t=U(e);return localStorage.setItem("adminAlerts",JSON.stringify(t)),t}return e},ee=(e,t)=>{const a=JSON.parse(localStorage.getItem("adminMockOrders")||"[]"),s=a.findIndex((t=>t.id===e));return-1!==s?(a[s].status=t,a[s].complete="delivered"===t||"shipped"===t,"shipped"!==t||a[s].tracking_number||(a[s].tracking_number=`TRK${Math.random().toString(36).substr(2,9).toUpperCase()}`),localStorage.setItem("adminMockOrders",JSON.stringify(a)),a[s]):null};var te={initializeAdminMockData:V,ensureAdminMockDataExists:$,getAdminAnalytics:Y,getAdminAlerts:G,updateOrderStatus:ee};te.initializeAdminMockData();const ae=(e=300)=>new Promise((t=>setTimeout(t,e))),se={getProducts:async()=>{await ae();try{const e=JSON.parse(localStorage.getItem("adminMockProducts"))||[];if(0===e.length){console.log("ð No admin products found, reinitializing...");const e=te.initializeAdminMockData();return{data:e.products}}return console.log("ð¦ Fetched",e.length,"admin products"),{data:e}}catch(e){console.error("Error loading admin products:",e);const t=te.initializeAdminMockData();return{data:t.products}}},getProduct:async e=>{await ae();const t=JSON.parse(localStorage.getItem("adminMockProducts"))||[],a=t.find((t=>t.id===Number.parseInt(e)));return a?{data:a}:Promise.reject({response:{status:404,data:{error:"Product not found"}}})},createProduct:async e=>{await ae(800);const t=JSON.parse(localStorage.getItem("adminMockProducts"))||[],a={...e,id:t.length>0?Math.max(...t.map((e=>e.id)))+1:1,sku:`PRD-${String(t.length+1).padStart(3,"0")}`,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),category:e.category||"General"};t.push(a),localStorage.setItem("adminMockProducts",JSON.stringify(t));const s=JSON.parse(localStorage.getItem("mockProducts"))||[];return s.push(a),localStorage.setItem("mockProducts",JSON.stringify(s)),{data:a}},updateProduct:async(e,t)=>{await ae(600);const a=JSON.parse(localStorage.getItem("adminMockProducts"))||[],s=a.findIndex((t=>t.id===Number.parseInt(e)));if(-1===s)return Promise.reject({response:{status:404,data:{error:"Product not found"}}});a[s]={...a[s],...t,updated_at:(new Date).toISOString()},localStorage.setItem("adminMockProducts",JSON.stringify(a));const r=JSON.parse(localStorage.getItem("mockProducts"))||[],o=r.findIndex((t=>t.id===Number.parseInt(e)));return-1!==o&&(r[o]=a[s],localStorage.setItem("mockProducts",JSON.stringify(r))),{data:a[s]}},deleteProduct:async e=>{await ae(500);const t=JSON.parse(localStorage.getItem("adminMockProducts"))||[],a=JSON.parse(localStorage.getItem("adminMockOrders"))||[],s=a.some((t=>t.items.some((t=>t.product===Number.parseInt(e)))));if(s)return Promise.reject({response:{status:400,data:{error:"Cannot delete product. It exists in one or more orders."}}});const r=t.filter((t=>t.id!==Number.parseInt(e)));if(r.length===t.length)return Promise.reject({response:{status:404,data:{error:"Product not found"}}});localStorage.setItem("adminMockProducts",JSON.stringify(r));const o=JSON.parse(localStorage.getItem("mockProducts"))||[],i=o.filter((t=>t.id!==Number.parseInt(e)));return localStorage.setItem("mockProducts",JSON.stringify(i)),{data:{success:!0}}},getOrders:async()=>{await ae();try{const e=JSON.parse(localStorage.getItem("adminMockOrders"))||[];if(0===e.length){console.log("ð No admin orders found, reinitializing...");const e=te.initializeAdminMockData();return{data:e.orders}}return console.log("ð Fetched",e.length,"admin orders"),{data:e}}catch(e){console.error("Error loading admin orders:",e);const t=te.initializeAdminMockData();return{data:t.orders}}},getOrder:async e=>{await ae();const t=JSON.parse(localStorage.getItem("adminMockOrders"))||[],a=t.find((t=>t.id===Number.parseInt(e)));return a?{data:a}:Promise.reject({response:{status:404,data:{error:"Order not found"}}})},updateOrderStatus:async(e,t)=>{await ae(400);const a=te.updateOrderStatus(Number.parseInt(e),t.status);return a?{data:a}:Promise.reject({response:{status:404,data:{error:"Order not found"}}})},createOrder:async e=>{await ae(800);const t=JSON.parse(localStorage.getItem("adminMockOrders"))||[],a=JSON.parse(localStorage.getItem("adminMockProducts"))||[],s={...e,id:t.length>0?Math.max(...t.map((e=>e.id)))+1:1,date_ordered:(new Date).toISOString(),status:"pending",complete:!1};t.push(s),localStorage.setItem("adminMockOrders",JSON.stringify(t));const r=JSON.parse(localStorage.getItem("mockOrders"))||[];if(r.push(s),localStorage.setItem("mockOrders",JSON.stringify(r)),s.items&&s.items.length>0){s.items.forEach((e=>{const t=a.findIndex((t=>t.id===e.product));-1!==t&&(a[t].stock=Math.max(0,a[t].stock-e.quantity))})),localStorage.setItem("adminMockProducts",JSON.stringify(a));const e=JSON.parse(localStorage.getItem("mockProducts"))||[];s.items.forEach((t=>{const a=e.findIndex((e=>e.id===t.product));-1!==a&&(e[a].stock=Math.max(0,e[a].stock-t.quantity))})),localStorage.setItem("mockProducts",JSON.stringify(e))}return{data:s}},getAnalytics:async()=>(await ae(),{data:te.getAdminAnalytics()}),getAlerts:async()=>(await ae(),{data:te.getAdminAlerts()}),getDashboardStats:async()=>{await ae();const e=JSON.parse(localStorage.getItem("adminMockProducts"))||[],t=JSON.parse(localStorage.getItem("adminMockOrders"))||[],a=te.getAdminAnalytics(),s=e.filter((e=>e.stock<5)).length,r=e.filter((e=>0===e.stock)).length,o=t.filter((e=>"pending"===e.status)).length,i=t.reduce(((e,t)=>e+t.total),0);return{data:{totalProducts:e.length,totalOrders:t.length,totalRevenue:i,lowStockCount:s,outOfStockCount:r,pendingOrders:o,analytics:a}}},getUser:async()=>{await ae();const e="true"===localStorage.getItem("is_staff"),t=localStorage.getItem("user_id")||(e?"1":"2"),a=localStorage.getItem("username")||(e?"admin":"user");return{data:{id:Number.parseInt(t),username:a,is_staff:e,email:e?"admin@bluora.com":"user@bluora.com",first_name:e?"Admin":"User",last_name:e?"User":"Customer",date_joined:"2024-01-01T00:00:00Z"}}},login:async e=>(await ae(1e3),"admin"===e.username&&"admin"===e.password?{data:{access:"mock-token-admin",refresh:"mock-refresh-token"}}:"user"===e.username&&"user"===e.password?{data:{access:"mock-token-user",refresh:"mock-refresh-token"}}:Promise.reject({response:{status:401,data:{detail:"Invalid username or password"}}})),request:async e=>{const{method:t="get",url:a,data:s}=e,r=a.split("/").filter(Boolean),o=r[0],i=r[1]?Number.parseInt(r[1]):null;switch(o){case"products":if("get"===t)return i?se.getProduct(i):se.getProducts();if("post"===t)return se.createProduct(s);if("put"===t||"patch"===t)return se.updateProduct(i,s);if("delete"===t)return se.deleteProduct(i);break;case"orders":if("get"===t)return i?se.getOrder(i):se.getOrders();if("post"===t)return se.createOrder(s);if("patch"===t)return se.updateOrderStatus(i,s);break;case"analytics":if("get"===t)return se.getAnalytics();break;case"alerts":if("get"===t)return se.getAlerts();break;case"dashboard":if("get"===t)return se.getDashboardStats();break;case"token":if("post"===t)return se.login(s);break;case"user":if("get"===t)return se.getUser();break;case"order-items":if("post"===t)return await ae(300),{data:{...s,id:Math.floor(1e3*Math.random())}};break}return Promise.reject({response:{status:404,data:{error:"Endpoint not found"}}})}},re=new Proxy(se,{get:(e,t)=>["get","post","put","patch","delete"].includes(t)?(a,s,r={})=>e.request({method:t,url:a,data:s,...r}):e[t]});var oe=re;const ie=window.location.hostname.includes("github.io")||!0,le=()=>{if(!ie)return O.A.create({baseURL:"http://127.0.0.1:8000/api/"});const e="true"===localStorage.getItem("is_staff");return e?oe:K},ne=O.A.create({baseURL:"http://127.0.0.1:8000/api/"});!ie&&ne.interceptors&&ne.interceptors.request.use((e=>{const t=localStorage.getItem("access");return t&&(e.headers.Authorization=`Bearer ${t}`),e}));const ce={get:(e,t)=>le().get(e,t),post:(e,t,a)=>le().post(e,t,a),put:(e,t,a)=>le().put(e,t,a),patch:(e,t,a)=>le().patch(e,t,a),delete:(e,t)=>le().delete(e,t),request:e=>le().request(e)};var de=ie?ce:ne;const ue=(0,E.Kh)({isLoggedIn:!1,isStaff:!1,isInitialized:!1,isInitializing:!1,init(){if(this.isInitializing)return;this.isInitializing=!0;window.location.hostname.includes("github.io");this.isLoggedIn=!!localStorage.getItem("access"),this.isStaff="true"===localStorage.getItem("is_staff"),this.isInitialized=!0,this.isInitializing=!1,window.dispatchEvent(new CustomEvent("auth-changed"))},async checkTokenValidity(){return this.isInitialized=!0,!0},logout(e=!1){const t=localStorage.getItem("cart");localStorage.clear(),t&&localStorage.setItem("cart",t),this.isLoggedIn=!1,this.isStaff=!1,this.isInitialized=!1,this.isInitializing=!1,window.dispatchEvent(new CustomEvent("auth-changed"))},async waitForInitialization(){return new Promise((e=>{if(this.isInitialized&&!this.isInitializing)return void e();const t=setInterval((()=>{this.isInitialized&&!this.isInitializing&&(clearInterval(t),e())}),50);setTimeout((()=>{clearInterval(t),e()}),5e3)}))},reinitialize(){this.isInitialized=!1,this.isInitializing=!1,this.init()},handleLoginSuccess(e){this.isLoggedIn=!0,this.isStaff=e.is_staff||!1,this.isInitialized=!0,this.isInitializing=!1,localStorage.setItem("access",e.access||"mock-token"),localStorage.setItem("is_staff",this.isStaff.toString()),localStorage.setItem("username",e.username||e.user?.username||""),window.dispatchEvent(new CustomEvent("auth-changed"))}});ue.init();var me=a(1387);a(323);const pe={class:"toast-container"},ge={class:"toast-icon"},he={class:"toast-content"},ke={class:"toast-message"},be=["onClick"];function fe(e,t,a,i,l,n){return(0,r.uX)(),(0,r.CE)("div",pe,[(0,r.bF)(s.F,{name:"toast"},{default:(0,r.k6)((()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.toasts,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:(0,o.C4)(["toast-notification",[`toast-${e.type}`,{"toast-visible":e.visible}]]),role:"alert","aria-live":"assertive"},[(0,r.Lk)("div",ge,[(0,r.Lk)("i",{class:(0,o.C4)(["bi",{"bi-check-circle-fill":"success"===e.type,"bi-exclamation-triangle-fill":"warning"===e.type,"bi-x-circle-fill":"error"===e.type,"bi-info-circle-fill":"info"===e.type}])},null,2)]),(0,r.Lk)("div",he,[(0,r.Lk)("p",ke,(0,o.v_)(e.message),1)]),(0,r.Lk)("button",{class:"toast-close",onClick:t=>i.removeToast(e.id),"aria-label":"Close notification"},t[0]||(t[0]=[(0,r.Lk)("i",{class:"bi bi-x"},null,-1)]),8,be),(0,r.Lk)("div",{class:"toast-progress",style:(0,o.Tr)({animationDuration:`${e.duration}ms`})},null,4)],2)))),128))])),_:1})])}const ve=(0,E.KR)([]);let ye=1;const Le=()=>{const e=(e,a="info",s=5e3)=>{const r=window.innerWidth<768,o=r?3:5;if(ve.value.length>=o){const e=[...ve.value].sort(((e,t)=>e.id-t.id)).slice(0,ve.value.length-o+1);e.forEach((e=>{t(e.id)}))}const i=ye++,l=(0,E.Kh)({id:i,message:e,type:a,visible:!1,duration:r?Math.min(s,4e3):s});return ve.value.push(l),setTimeout((()=>{l.visible=!0}),10),setTimeout((()=>{t(i)}),l.duration),i},t=e=>{const t=ve.value.findIndex((t=>t.id===e));-1!==t&&(ve.value[t].visible=!1,setTimeout((()=>{ve.value=ve.value.filter((t=>t.id!==e))}),300))},a=(t,a)=>e(t,"success",a),s=(t,a)=>e(t,"error",a),r=(t,a)=>e(t,"warning",a),o=(t,a)=>e(t,"info",a);return{toasts:ve,addToast:e,removeToast:t,success:a,error:s,warning:r,info:o}},we=Le;var Pe={setup(){const{toasts:e,removeToast:t}=Le();return{toasts:e,removeToast:t}}},Ce=a(1241);const xe=(0,Ce.A)(Pe,[["render",fe],["__scopeId","data-v-494e3f04"]]);var Se=xe,Me=a(8077),Ie={components:{ToastNotification:Se},setup(){const e=(0,me.rd)(),t=(0,E.KR)(0),a=(0,E.KR)(""),s=(0,E.KR)(null);let o=null;const i=(0,E.KR)(!1),l=()=>{const e=JSON.parse(localStorage.getItem("cart"))||[];t.value=e.length},n=()=>{ue.logout(),window.location.hostname.includes("github.io")?window.location.href="https://lorendale.github.io/vue-final-project/#/login":e.push("/login")},c=()=>{o&&(i.value?o.hide():o.show(),i.value=!i.value)},d=()=>{o&&i.value&&(o.hide(),i.value=!1)},u=e=>{"cart"===e.key&&l()},m=()=>{l()},p=async()=>{console.log("Auth state changed in App.vue"),await(0,r.dY)(),g()},g=async()=>{if(ue.isLoggedIn)try{const e=await de.get("user/");a.value=e.data.username}catch(e){console.error("Failed to fetch username:",e)}else a.value=""};return(0,r.sV)((()=>{ue.isLoggedIn&&(ue.checkTokenValidity(),g()),l(),window.addEventListener("storage",u),window.addEventListener("cart-updated",m),window.addEventListener("auth-changed",p);const e=document.getElementById("navbarContent");e&&(o=new Me.SD(e,{toggle:!1}),e.addEventListener("shown.bs.collapse",(()=>{i.value=!0})),e.addEventListener("hidden.bs.collapse",(()=>{i.value=!1})),document.addEventListener("click",(e=>{if(!i.value)return;const t=e.target.closest(".navbar-toggler"),a=e.target.closest(".navbar-collapse");t||a||d()}))),window.history&&window.addEventListener("popstate",d),window.addEventListener("resize",(()=>{window.innerWidth>=992&&i.value&&d()}))})),(0,r.hi)((()=>{window.removeEventListener("storage",u),window.removeEventListener("cart-updated",m),window.removeEventListener("auth-changed",p),window.removeEventListener("popstate",d),window.removeEventListener("resize",(()=>{}));const e=document.getElementById("navbarContent");e&&(e.removeEventListener("shown.bs.collapse",(()=>{})),e.removeEventListener("hidden.bs.collapse",(()=>{}))),document.removeEventListener("click",(()=>{}))})),(0,r.wB)((()=>localStorage.getItem("cart")),(()=>{l()})),{auth:ue,cartCount:t,username:a,logout:n,updateCartCount:l,closeNavbar:d,toggleNavbar:c,navbarCollapse:s}}};const Ee=(0,Ce.A)(Ie,[["render",I]]);var Oe=Ee;const _e={class:"login-container"},De={key:0,class:"error-message"},Te={class:"form-group"},Ae={class:"form-group"},Fe=["disabled"],Ne={key:0},We={key:1};function Xe(e,t,a,i,l,n){return(0,r.uX)(),(0,r.CE)("div",_e,[t[5]||(t[5]=(0,r.Lk)("h1",null,"Login",-1)),l.error?((0,r.uX)(),(0,r.CE)("div",De,(0,o.v_)(l.error),1)):(0,r.Q3)("",!0),(0,r.Lk)("form",{onSubmit:t[2]||(t[2]=(0,s.D$)(((...e)=>n.login&&n.login(...e)),["prevent"]))},[(0,r.Lk)("div",Te,[t[3]||(t[3]=(0,r.Lk)("label",{for:"username"},"Username:",-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",id:"username","onUpdate:modelValue":t[0]||(t[0]=e=>l.username=e),required:""},null,512),[[s.Jo,l.username]])]),(0,r.Lk)("div",Ae,[t[4]||(t[4]=(0,r.Lk)("label",{for:"password"},"Password:",-1)),(0,r.bo)((0,r.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>l.password=e),required:""},null,512),[[s.Jo,l.password]])]),(0,r.Lk)("button",{type:"submit",disabled:l.isLoading},[l.isLoading?((0,r.uX)(),(0,r.CE)("span",Ne,"Logging in...")):((0,r.uX)(),(0,r.CE)("span",We,"Login"))],8,Fe)],32),l.notificationMessage?((0,r.uX)(),(0,r.CE)("div",{key:1,class:(0,o.C4)(["notification",l.notificationType])},(0,o.v_)(l.notificationMessage),3)):(0,r.Q3)("",!0)])}var Re={data(){return{username:"",password:"",isLoading:!1,error:"",notificationMessage:"",notificationType:""}},methods:{async login(){if(!this.isLoading){this.isLoading=!0,this.error="";try{const e=await O.A.post("token/",{username:this.username,password:this.password}),t=e.data;this.$auth.handleLoginSuccess({access:t.access,username:t.user?.username||this.username,is_staff:t.user?.is_staff||!1}),this.showNotification("success","Login successful!"),this.$auth.isStaff?this.$router.push("/monitor"):this.$router.push("/products")}catch(e){console.error("Login error:",e),e.response?.data?.detail?this.error=e.response.data.detail:this.error="Login failed. Please try again.",this.showNotification("error",this.error)}finally{this.isLoading=!1}}},showNotification(e,t){this.notificationType=e,this.notificationMessage=t,setTimeout((()=>{this.notificationMessage="",this.notificationType=""}),3e3)}}};const qe=(0,Ce.A)(Re,[["render",Xe],["__scopeId","data-v-dbf67958"]]);var He=qe;const Je={class:"auth-container"},Be={class:"auth-card"},Qe={class:"form-group"},Ke={key:0,class:"invalid-feedback"},ze={class:"form-group"},Ze=["type"],je={key:0,class:"invalid-feedback"},Ue={key:1,class:"password-strength mt-2"},Ve={class:"strength-meter"},$e={class:"form-group"},Ye=["type"],Ge={key:0,class:"invalid-feedback"},et={class:"form-check mb-3"},tt={class:"form-check-label",for:"termsAgreed"},at={key:0,class:"invalid-feedback"},st=["disabled"],rt={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},ot={key:1,class:"bi bi-person-plus me-2"},it={key:0,class:"auth-error mt-3"},lt={class:"auth-footer"},nt={class:"modal fade",ref:"termsModal",tabindex:"-1"},ct={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable"},dt={class:"modal-content"},ut={class:"modal-header"},mt={class:"modal-footer"};function pt(e,t,a,i,l,n){const c=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",Je,[(0,r.Lk)("div",Be,[t[25]||(t[25]=(0,r.Lk)("div",{class:"auth-header"},[(0,r.Lk)("i",{class:"bi bi-person-plus auth-icon"}),(0,r.Lk)("h2",null,"Create Account"),(0,r.Lk)("p",null,"Join our community and start shopping")],-1)),(0,r.Lk)("form",{onSubmit:t[11]||(t[11]=(0,s.D$)(((...e)=>i.validateAndRegister&&i.validateAndRegister(...e)),["prevent"])),class:"auth-form",novalidate:""},[(0,r.Lk)("div",Qe,[t[16]||(t[16]=(0,r.Lk)("label",{for:"username"},"Username",-1)),(0,r.Lk)("div",{class:(0,o.C4)(["input-group",{"is-invalid":i.errors.username}])},[t[15]||(t[15]=(0,r.Lk)("span",{class:"input-group-text"},[(0,r.Lk)("i",{class:"bi bi-person"})],-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.username=e),id:"username",type:"text",class:(0,o.C4)(["form-control",{"is-invalid":i.errors.username}]),placeholder:"Choose a username",onBlur:t[1]||(t[1]=(...e)=>i.validateUsername&&i.validateUsername(...e))},null,34),[[s.Jo,i.username]])],2),i.errors.username?((0,r.uX)(),(0,r.CE)("div",Ke,(0,o.v_)(i.errors.username),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",ze,[t[18]||(t[18]=(0,r.Lk)("label",{for:"password"},"Password",-1)),(0,r.Lk)("div",{class:(0,o.C4)(["input-group",{"is-invalid":i.errors.password}])},[t[17]||(t[17]=(0,r.Lk)("span",{class:"input-group-text"},[(0,r.Lk)("i",{class:"bi bi-key"})],-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>i.password=e),id:"password",type:i.showPassword?"text":"password",class:(0,o.C4)(["form-control",{"is-invalid":i.errors.password}]),placeholder:"Create a password",onBlur:t[3]||(t[3]=(...e)=>i.validatePassword&&i.validatePassword(...e)),onInput:t[4]||(t[4]=(...e)=>i.validatePasswordStrength&&i.validatePasswordStrength(...e))},null,42,Ze),[[s.hp,i.password]]),(0,r.Lk)("button",{type:"button",class:"input-group-text password-toggle",onClick:t[5]||(t[5]=e=>i.showPassword=!i.showPassword)},[(0,r.Lk)("i",{class:(0,o.C4)(i.showPassword?"bi bi-eye-slash":"bi bi-eye")},null,2)])],2),i.errors.password?((0,r.uX)(),(0,r.CE)("div",je,(0,o.v_)(i.errors.password),1)):(0,r.Q3)("",!0),i.password?((0,r.uX)(),(0,r.CE)("div",Ue,[(0,r.Lk)("div",Ve,[(0,r.Lk)("div",{class:(0,o.C4)(["strength-meter-fill",i.passwordStrength.class]),style:(0,o.Tr)({width:i.passwordStrength.score+"%"})},null,6)]),(0,r.Lk)("div",{class:(0,o.C4)(["strength-text",i.passwordStrength.class])},(0,o.v_)(i.passwordStrength.text),3)])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",$e,[t[20]||(t[20]=(0,r.Lk)("label",{for:"confirmPassword"},"Confirm Password",-1)),(0,r.Lk)("div",{class:(0,o.C4)(["input-group",{"is-invalid":i.errors.confirmPassword}])},[t[19]||(t[19]=(0,r.Lk)("span",{class:"input-group-text"},[(0,r.Lk)("i",{class:"bi bi-key-fill"})],-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>i.confirmPassword=e),id:"confirmPassword",type:i.showConfirmPassword?"text":"password",class:(0,o.C4)(["form-control",{"is-invalid":i.errors.confirmPassword}]),placeholder:"Confirm your password",onBlur:t[7]||(t[7]=(...e)=>i.validateConfirmPassword&&i.validateConfirmPassword(...e))},null,42,Ye),[[s.hp,i.confirmPassword]]),(0,r.Lk)("button",{type:"button",class:"input-group-text password-toggle",onClick:t[8]||(t[8]=e=>i.showConfirmPassword=!i.showConfirmPassword)},[(0,r.Lk)("i",{class:(0,o.C4)(i.showConfirmPassword?"bi bi-eye-slash":"bi bi-eye")},null,2)])],2),i.errors.confirmPassword?((0,r.uX)(),(0,r.CE)("div",Ge,(0,o.v_)(i.errors.confirmPassword),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",et,[(0,r.bo)((0,r.Lk)("input",{class:(0,o.C4)(["form-check-input",{"is-invalid":i.errors.termsAgreed}]),type:"checkbox",id:"termsAgreed","onUpdate:modelValue":t[9]||(t[9]=e=>i.termsAgreed=e)},null,2),[[s.lH,i.termsAgreed]]),(0,r.Lk)("label",tt,[t[21]||(t[21]=(0,r.eW)(" I agree to the ")),(0,r.Lk)("a",{href:"#",onClick:t[10]||(t[10]=(0,s.D$)(((...e)=>i.showTerms&&i.showTerms(...e)),["prevent"]))},"Terms and Conditions")]),i.errors.termsAgreed?((0,r.uX)(),(0,r.CE)("div",at,(0,o.v_)(i.errors.termsAgreed),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("button",{type:"submit",class:"btn btn-primary w-100",disabled:i.isLoading},[i.isLoading?((0,r.uX)(),(0,r.CE)("span",rt)):((0,r.uX)(),(0,r.CE)("i",ot)),(0,r.eW)(" "+(0,o.v_)(i.isLoading?"Creating account...":"Create Account"),1)],8,st),i.error?((0,r.uX)(),(0,r.CE)("div",it,[t[22]||(t[22]=(0,r.Lk)("i",{class:"bi bi-exclamation-triangle-fill me-2"},null,-1)),(0,r.eW)(" "+(0,o.v_)(i.error),1)])):(0,r.Q3)("",!0)],32),(0,r.Lk)("div",lt,[(0,r.Lk)("p",null,[t[24]||(t[24]=(0,r.eW)("Already have an account? ")),(0,r.bF)(c,{to:"/login",class:"auth-link"},{default:(0,r.k6)((()=>t[23]||(t[23]=[(0,r.eW)("Sign In")]))),_:1})])])]),(0,r.Lk)("div",nt,[(0,r.Lk)("div",ct,[(0,r.Lk)("div",dt,[(0,r.Lk)("div",ut,[t[26]||(t[26]=(0,r.Lk)("h5",{class:"modal-title"},"Terms and Conditions",-1)),(0,r.Lk)("button",{type:"button",class:"btn-close",onClick:t[12]||(t[12]=(...e)=>i.hideTerms&&i.hideTerms(...e))})]),t[27]||(t[27]=(0,r.Fv)('<div class="modal-body" data-v-410489ce><h6 data-v-410489ce>1. Acceptance of Terms</h6><p data-v-410489ce>By accessing and using this e-commerce platform, you agree to be bound by these Terms and Conditions.</p><h6 data-v-410489ce>2. User Accounts</h6><p data-v-410489ce>You are responsible for maintaining the confidentiality of your account information and password.</p><h6 data-v-410489ce>3. Privacy Policy</h6><p data-v-410489ce>Your use of our service is also governed by our Privacy Policy.</p><h6 data-v-410489ce>4. Product Information</h6><p data-v-410489ce>We strive to provide accurate product information, but we do not warrant that product descriptions or other content is accurate, complete, or error-free.</p><h6 data-v-410489ce>5. Pricing and Payment</h6><p data-v-410489ce>All prices are subject to change without notice. We reserve the right to refuse or cancel orders in cases of pricing errors.</p></div>',1)),(0,r.Lk)("div",mt,[(0,r.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[13]||(t[13]=(...e)=>i.hideTerms&&i.hideTerms(...e))},"Close"),(0,r.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[14]||(t[14]=(...e)=>i.acceptTerms&&i.acceptTerms(...e))},"Accept")])])])],512)])}var gt={name:"UserRegister",setup(){const e=(0,E.KR)(""),t=(0,E.KR)(""),a=(0,E.KR)(""),s=(0,E.KR)(!1),o=(0,E.KR)(!1),i=(0,E.KR)(!1),l=(0,E.KR)(!1),n=(0,E.KR)(null),c=(0,E.KR)(null),d=(0,E.KR)(null),u=(0,me.rd)(),{success:m,error:p}=we(),g=(0,E.Kh)({username:"",password:"",confirmPassword:"",termsAgreed:""}),h=(0,r.EW)((()=>{if(!t.value)return{score:0,text:"",class:""};let e=0,a="Very Weak",s="very-weak";return t.value.length>=8&&(e+=20),/[A-Z]/.test(t.value)&&(e+=20),/[a-z]/.test(t.value)&&(e+=20),/[0-9]/.test(t.value)&&(e+=20),/[^A-Za-z0-9]/.test(t.value)&&(e+=20),e>=80?(a="Very Strong",s="very-strong"):e>=60?(a="Strong",s="strong"):e>=40?(a="Medium",s="medium"):e>=20&&(a="Weak",s="weak"),{score:e,text:a,class:s}})),k=()=>e.value.trim()?e.value.length<3?(g.username="Username must be at least 3 characters",!1):/^[a-zA-Z0-9_]+$/.test(e.value)?(g.username="",!0):(g.username="Username can only contain letters, numbers, and underscores",!1):(g.username="Username is required",!1),b=()=>t.value?t.value.length<8?(g.password="Password must be at least 8 characters",!1):(g.password="",!0):(g.password="Password is required",!1),f=()=>h.value.score>0,v=()=>a.value?a.value!==t.value?(g.confirmPassword="Passwords do not match",!1):(g.confirmPassword="",!0):(g.confirmPassword="Please confirm your password",!1),y=()=>s.value?(g.termsAgreed="",!0):(g.termsAgreed="You must agree to the Terms and Conditions",!1),L=()=>{const e=k(),t=b(),a=v(),s=y();return e&&t&&a&&s},w=()=>{L()?P():p("Please fix the errors in the form")},P=async()=>{l.value=!0,n.value=null;try{await de.post("register/",{username:e.value,password:t.value}),m("Registration successful! Please log in."),setTimeout((()=>{u.push("/login")}),1500)}catch(a){console.error("Registration error:",a),a.response&&a.response.data?(a.response.data.username&&(g.username=a.response.data.username[0]),n.value="Registration failed. Please check the form for errors."):n.value="Registration failed. Please try again later.",p("Registration failed. Please try again.")}finally{l.value=!1}},C=()=>{d.value&&d.value.show()},x=()=>{d.value&&d.value.hide()},S=()=>{s.value=!0,g.termsAgreed="",x()};return(0,r.sV)((()=>{c.value&&(d.value=new Me.aF(c.value))})),{username:e,password:t,confirmPassword:a,termsAgreed:s,showPassword:o,showConfirmPassword:i,isLoading:l,error:n,errors:g,passwordStrength:h,termsModal:c,validateUsername:k,validatePassword:b,validatePasswordStrength:f,validateConfirmPassword:v,validateAndRegister:w,showTerms:C,hideTerms:x,acceptTerms:S}}};const ht=(0,Ce.A)(gt,[["render",pt],["__scopeId","data-v-410489ce"]]);var kt=ht;const bt={class:"product-catalog container"},ft={class:"catalog-header"},vt={class:"search-container"},yt={key:0,class:"loading-container"},Lt={key:1,class:"empty-products"},wt={class:"empty-actions"},Pt={key:2},Ct={class:"product-count"},xt={key:0,class:"search-info"},St=["disabled"],Mt={key:0,class:"spinner-border spinner-border-sm me-1",role:"status"},It={key:1,class:"bi bi-arrow-clockwise me-1"},Et={class:"product-grid"},Ot={class:"product-image"},_t=["src","alt"],Dt={key:1,class:"image-placeholder"},Tt={class:"product-badges"},At={key:0,class:"stock-badge new-badge"},Ft={class:"product-details"},Nt={class:"product-rating"},Wt={class:"stars"},Xt={class:"rating-count"},Rt={class:"product-name"},qt={class:"product-description"},Ht={class:"product-price"},Jt={key:0,class:"product-actions"},Bt={class:"quantity-selector"},Qt=["onClick","disabled"],Kt={class:"quantity"},zt=["onClick","disabled"],Zt=["onClick"],jt={key:1,class:"out-of-stock-btn",disabled:"","aria-label":"Out of stock"},Ut={key:0,class:"pagination-container"},Vt={class:"pagination-info"},$t={class:"pagination-controls"},Yt=["disabled"],Gt={class:"pagination-numbers"},ea={key:1,class:"pagination-ellipsis"},ta=["onClick"],aa={key:2,class:"pagination-ellipsis"},sa=["disabled"];function ra(e,t,a,i,l,n){return(0,r.uX)(),(0,r.CE)("div",bt,[(0,r.Lk)("div",ft,[t[9]||(t[9]=(0,r.Lk)("h2",{class:"section-title"},[(0,r.Lk)("i",{class:"bi bi-shop me-2"}),(0,r.eW)("Discover Our Collection ")],-1)),(0,r.Lk)("div",vt,[(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>i.searchQuery=e),placeholder:"Search products...",class:"search-input","aria-label":"Search products"},null,512),[[s.Jo,i.searchQuery]]),t[8]||(t[8]=(0,r.Lk)("i",{class:"bi bi-search search-icon"},null,-1))])]),i.isLoading?((0,r.uX)(),(0,r.CE)("div",yt,t[10]||(t[10]=[(0,r.Lk)("div",{class:"spinner"},[(0,r.Lk)("div",{class:"bounce1"}),(0,r.Lk)("div",{class:"bounce2"}),(0,r.Lk)("div",{class:"bounce3"})],-1),(0,r.Lk)("p",null,"Loading products...",-1)]))):0===i.filteredProducts.length?((0,r.uX)(),(0,r.CE)("div",Lt,[t[13]||(t[13]=(0,r.Lk)("i",{class:"bi bi-search-heart"},null,-1)),t[14]||(t[14]=(0,r.Lk)("h3",null,"No products found",-1)),t[15]||(t[15]=(0,r.Lk)("p",null,"We couldn't find any products matching your search.",-1)),(0,r.Lk)("div",wt,[(0,r.Lk)("button",{class:"btn btn-primary mt-3",onClick:t[1]||(t[1]=(...e)=>i.resetSearch&&i.resetSearch(...e))},t[11]||(t[11]=[(0,r.Lk)("i",{class:"bi bi-arrow-counterclockwise me-2"},null,-1),(0,r.eW)("View All Products ")])),(0,r.Lk)("button",{class:"btn btn-outline-primary mt-3 ms-2",onClick:t[2]||(t[2]=(...e)=>i.refreshProducts&&i.refreshProducts(...e))},t[12]||(t[12]=[(0,r.Lk)("i",{class:"bi bi-arrow-clockwise me-2"},null,-1),(0,r.eW)("Refresh Products ")]))])])):((0,r.uX)(),(0,r.CE)("div",Pt,[(0,r.Lk)("div",Ct,[(0,r.Lk)("span",null,(0,o.v_)(i.filteredProducts.length)+" products found",1),i.searchQuery?((0,r.uX)(),(0,r.CE)("span",xt,'for "'+(0,o.v_)(i.searchQuery)+'"',1)):(0,r.Q3)("",!0),(0,r.Lk)("button",{class:"btn btn-sm btn-outline-secondary ms-3",onClick:t[3]||(t[3]=(...e)=>i.refreshProducts&&i.refreshProducts(...e)),disabled:i.isRefreshing},[i.isRefreshing?((0,r.uX)(),(0,r.CE)("span",Mt)):((0,r.uX)(),(0,r.CE)("i",It)),(0,r.eW)(" "+(0,o.v_)(i.isRefreshing?"Refreshing...":"Refresh"),1)],8,St)]),(0,r.Lk)("div",Et,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.paginatedProducts,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:(0,o.C4)(["product-card",{"out-of-stock":0===e.stock}])},[(0,r.Lk)("div",Ot,[e.image?((0,r.uX)(),(0,r.CE)("img",{key:0,src:i.fullImageUrl(e.image),alt:e.name,loading:"lazy"},null,8,_t)):((0,r.uX)(),(0,r.CE)("div",Dt,t[16]||(t[16]=[(0,r.Lk)("i",{class:"bi bi-image"},null,-1)]))),(0,r.Lk)("div",Tt,[(0,r.Lk)("div",{class:(0,o.C4)(["stock-count-badge",i.getStockCountBadgeClass(e)])},(0,o.v_)(e.stock>0?`${e.stock} in stock`:"Out of stock"),3),i.isNewProduct(e)?((0,r.uX)(),(0,r.CE)("div",At,t[17]||(t[17]=[(0,r.Lk)("i",{class:"bi bi-star-fill"},null,-1),(0,r.eW)(" New ")]))):(0,r.Q3)("",!0)])]),(0,r.Lk)("div",Ft,[(0,r.Lk)("div",Nt,[(0,r.Lk)("div",Wt,[((0,r.uX)(),(0,r.CE)(r.FK,null,(0,r.pI)(5,(t=>(0,r.Lk)("i",{key:t,class:(0,o.C4)(["bi",t<=i.getProductRating(e)?"bi-star-fill":"bi-star"])},null,2))),64))]),(0,r.Lk)("span",Xt,"("+(0,o.v_)(i.getReviewCount(e))+")",1)]),(0,r.Lk)("h3",Rt,(0,o.v_)(e.name),1),(0,r.Lk)("p",qt,(0,o.v_)(i.truncate(e.description,80)),1),(0,r.Lk)("div",Ht,"â±"+(0,o.v_)(i.formatPrice(e.price)),1),e.stock>0?((0,r.uX)(),(0,r.CE)("div",Jt,[(0,r.Lk)("div",Bt,[(0,r.Lk)("button",{class:"quantity-btn",onClick:t=>i.decrementQuantity(e),disabled:i.quantities[e.id]<=1,"aria-label":"Decrease quantity"},t[18]||(t[18]=[(0,r.Lk)("i",{class:"bi bi-dash"},null,-1)]),8,Qt),(0,r.Lk)("span",Kt,(0,o.v_)(i.quantities[e.id]||1),1),(0,r.Lk)("button",{class:"quantity-btn",onClick:t=>i.incrementQuantity(e),disabled:i.quantities[e.id]>=e.stock,"aria-label":"Increase quantity"},t[19]||(t[19]=[(0,r.Lk)("i",{class:"bi bi-plus"},null,-1)]),8,zt)]),(0,r.Lk)("button",{class:"add-to-cart-btn",onClick:t=>i.addToCart(e),"aria-label":"Add to cart"},t[20]||(t[20]=[(0,r.Lk)("i",{class:"bi bi-cart-plus me-2"},null,-1),(0,r.eW)("Add to Cart ")]),8,Zt)])):((0,r.uX)(),(0,r.CE)("button",jt,t[21]||(t[21]=[(0,r.Lk)("i",{class:"bi bi-x-circle me-2"},null,-1),(0,r.eW)("Out of Stock ")])))])],2)))),128))]),i.totalPages>1?((0,r.uX)(),(0,r.CE)("div",Ut,[(0,r.Lk)("div",Vt,[(0,r.Lk)("span",null," Showing "+(0,o.v_)(i.startIndex+1)+" to "+(0,o.v_)(Math.min(i.startIndex+i.productsPerPage,i.filteredProducts.length))+" of "+(0,o.v_)(i.filteredProducts.length)+" products ",1)]),(0,r.Lk)("div",$t,[(0,r.Lk)("button",{class:"pagination-btn",onClick:t[4]||(t[4]=e=>i.goToPage(i.currentPage-1)),disabled:1===i.currentPage,"aria-label":"Previous page"},t[22]||(t[22]=[(0,r.Lk)("i",{class:"bi bi-chevron-left"},null,-1),(0,r.eW)(" Previous ")]),8,Yt),(0,r.Lk)("div",Gt,[i.currentPage>3?((0,r.uX)(),(0,r.CE)("button",{key:0,class:"pagination-number",onClick:t[5]||(t[5]=e=>i.goToPage(1))}," 1 ")):(0,r.Q3)("",!0),i.currentPage>4?((0,r.uX)(),(0,r.CE)("span",ea,"...")):(0,r.Q3)("",!0),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.visiblePages,(e=>((0,r.uX)(),(0,r.CE)("button",{key:e,class:(0,o.C4)(["pagination-number",{active:e===i.currentPage}]),onClick:t=>i.goToPage(e)},(0,o.v_)(e),11,ta)))),128)),i.currentPage<i.totalPages-3?((0,r.uX)(),(0,r.CE)("span",aa,"...")):(0,r.Q3)("",!0),i.currentPage<i.totalPages-2?((0,r.uX)(),(0,r.CE)("button",{key:3,class:"pagination-number",onClick:t[6]||(t[6]=e=>i.goToPage(i.totalPages))},(0,o.v_)(i.totalPages),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("button",{class:"pagination-btn",onClick:t[7]||(t[7]=e=>i.goToPage(i.currentPage+1)),disabled:i.currentPage===i.totalPages,"aria-label":"Next page"},t[23]||(t[23]=[(0,r.eW)(" Next "),(0,r.Lk)("i",{class:"bi bi-chevron-right"},null,-1)]),8,sa)])])):(0,r.Q3)("",!0)]))])}var oa={setup(){const e=(0,E.KR)([]),t=(0,E.KR)(!0),a=(0,E.KR)(!1),s=(0,E.KR)(""),o=Le(),i=(0,E.Kh)({}),l=(0,E.KR)(1),n=(0,E.KR)(12),c=()=>{window.dispatchEvent(new CustomEvent("cart-updated"))},d=(0,r.EW)((()=>{if(!s.value)return e.value;const t=s.value.toLowerCase();return e.value.filter((e=>e.name.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)))})),u=(0,r.EW)((()=>Math.ceil(d.value.length/n.value))),m=(0,r.EW)((()=>(l.value-1)*n.value)),p=(0,r.EW)((()=>{const e=m.value,t=e+n.value;return d.value.slice(e,t)})),g=(0,r.EW)((()=>{const e=[],t=Math.max(1,l.value-2),a=Math.min(u.value,l.value+2);for(let s=t;s<=a;s++)e.push(s);return e}));(0,r.wB)(s,(()=>{l.value=1}));const h=e=>{e>=1&&e<=u.value&&(l.value=e,document.querySelector(".product-grid")?.scrollIntoView({behavior:"smooth",block:"start"}))},k=e=>e?e.startsWith("http")?e:`http://127.0.0.1:8000${e.startsWith("/")?e:"/media/"+e}`:"",b=e=>parseFloat(e).toFixed(2),f=(e,t)=>e?e.length>t?e.substring(0,t)+"...":e:"",v=()=>{s.value=""},y=e=>7*e.id%3+3,L=e=>7*e.id%115+5,w=e=>e.id%4===0,P=e=>0===e.stock?"stock-count-out":e.stock<5?"stock-count-low":e.stock<20?"stock-count-medium":"stock-count-high",C=e=>{i[e.id]||(i[e.id]=1),i[e.id]<e.stock&&i[e.id]++},x=e=>{i[e.id]||(i[e.id]=1),i[e.id]>1&&i[e.id]--},S=async(s=!0)=>{s?t.value=!0:a.value=!0;try{A();const t=await de.get("products/");e.value=t.data||[],e.value.forEach((e=>{i[e.id]||(i[e.id]=1)})),0===e.value.length&&(console.warn("No products received from API"),o.warning("No products available at the moment."))}catch(r){console.error("Error fetching products:",r),o.error("Failed to load products. Please try refreshing the page.");try{const t=JSON.parse(localStorage.getItem("mockProducts")||"[]");t.length>0&&(e.value=t,o.info("Loaded products from cache."))}catch(l){console.error("Fallback loading failed:",l)}}finally{t.value=!1,a.value=!1}},M=async()=>{await S(!1),o.success("Products refreshed successfully!")},I=e=>{if(0!==e.stock)try{let t=[];const a=localStorage.getItem("cart");a&&(t=JSON.parse(a));const s=t.find((t=>t.product&&t.product.id===e.id)),r=i[e.id]||1;if(s){if(!(s.quantity+r<=e.stock))return void o.warning(`Cannot add ${r} more ${e.name}. Maximum stock reached.`);s.quantity+=r,o.success(`Added ${r} ${e.name} to your cart.`)}else t.push({product:{id:e.id,name:e.name,price:e.price,description:e.description,image:e.image,stock:e.stock},quantity:r}),o.success(`Added ${r} ${e.name} to your cart!`);localStorage.setItem("cart",JSON.stringify(t)),i[e.id]=1,window.dispatchEvent(new Event("storage")),c()}catch(t){console.error("Error adding to cart:",t),o.error("Failed to add product to cart.")}else o.error("Sorry, this product is out of stock.")};return(0,r.sV)((()=>{S()})),{products:e,filteredProducts:d,paginatedProducts:p,isLoading:t,isRefreshing:a,searchQuery:s,quantities:i,currentPage:l,productsPerPage:n,totalPages:u,startIndex:m,visiblePages:g,fullImageUrl:k,formatPrice:b,truncate:f,resetSearch:v,refreshProducts:M,addToCart:I,incrementQuantity:C,decrementQuantity:x,getProductRating:y,getReviewCount:L,isNewProduct:w,getStockCountBadgeClass:P,goToPage:h}}};const ia=(0,Ce.A)(oa,[["render",ra],["__scopeId","data-v-8221468e"]]);var la=ia;const na={class:"container"},ca={key:0,class:"empty-cart"},da={class:"empty-cart-content"},ua={key:1,class:"row"},ma={class:"col-lg-8"},pa={class:"cart-items card mb-4"},ga={class:"card-header"},ha={class:"mb-0"},ka={class:"card-body p-0"},ba={class:"cart-item-image"},fa=["src","alt"],va={key:1,class:"image-placeholder"},ya={class:"cart-item-details"},La={class:"cart-item-name"},wa={class:"cart-item-description"},Pa={class:"cart-item-price"},Ca={key:0,class:"stock-warning"},xa={class:"cart-item-quantity"},Sa={class:"quantity-selector"},Ma=["onClick","disabled"],Ia=["onUpdate:modelValue","max","disabled","onChange"],Ea=["onClick","disabled"],Oa={class:"cart-item-total"},_a={class:"cart-item-actions"},Da=["onClick"],Ta={class:"card-footer"},Aa={class:"d-flex justify-content-between flex-wrap gap-2"},Fa={class:"col-lg-4"},Na={class:"cart-summary card"},Wa={class:"card-body"},Xa={class:"summary-item"},Ra={class:"summary-item"},qa={class:"summary-item"},Ha={class:"summary-total"},Ja={class:"promo-section mt-3"},Ba=["disabled"],Qa={key:0,class:"spinner-border spinner-border-sm",role:"status"},Ka={key:1},za={key:0,class:"invalid-feedback"},Za={key:1,class:"promo-success"},ja={class:"card-footer"},Ua=["disabled"],Va={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},$a={key:1,class:"bi bi-credit-card me-2"},Ya={key:0,class:"checkout-warning mt-2"},Ga={class:"modal fade confirm-modal",ref:"confirmModal",tabindex:"-1","aria-labelledby":"confirmModalLabel","aria-hidden":"true"},es={class:"modal-dialog modal-dialog-centered modal-sm"},ts={class:"modal-content"},as={class:"modal-header"},ss={class:"modal-body"},rs={class:"mb-0"},os={class:"modal-footer"};function is(e,t,a,i,l,n){const c=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",na,[t[28]||(t[28]=(0,r.Lk)("div",{class:"cart-header mb-4"},[(0,r.Lk)("h2",{class:"section-title"},[(0,r.Lk)("i",{class:"bi bi-cart me-2"}),(0,r.eW)("Shopping Cart ")])],-1)),i.cart&&0!==i.cart.length?((0,r.uX)(),(0,r.CE)("div",ua,[(0,r.Lk)("div",ma,[(0,r.Lk)("div",pa,[(0,r.Lk)("div",ga,[(0,r.Lk)("h5",ha,"Cart Items ("+(0,o.v_)(i.cart.length)+")",1)]),(0,r.Lk)("div",ka,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.cart,((e,a)=>((0,r.uX)(),(0,r.CE)("div",{class:"cart-item",key:a},[(0,r.Lk)("div",ba,[e&&e.product&&e.product.image?((0,r.uX)(),(0,r.CE)("img",{key:0,src:i.fullImageUrl(e.product.image),alt:e.product?e.product.name:"Product",loading:"lazy"},null,8,fa)):((0,r.uX)(),(0,r.CE)("div",va,t[11]||(t[11]=[(0,r.Lk)("i",{class:"bi bi-image"},null,-1)])))]),(0,r.Lk)("div",ya,[(0,r.Lk)("h5",La,(0,o.v_)(e&&e.product?e.product.name:"Unknown Product"),1),(0,r.Lk)("p",wa,(0,o.v_)(e&&e.product?i.truncate(e.product.description,100):"No description available"),1),(0,r.Lk)("div",Pa,"â±"+(0,o.v_)(i.formatPrice(e&&e.product?e.product.price:0)),1),e&&e.product&&0===e.product.stock?((0,r.uX)(),(0,r.CE)("div",Ca,t[12]||(t[12]=[(0,r.Lk)("i",{class:"bi bi-exclamation-triangle-fill me-1"},null,-1),(0,r.eW)(" Out of stock ")]))):(0,r.Q3)("",!0)]),(0,r.Lk)("div",xa,[(0,r.Lk)("div",Sa,[(0,r.Lk)("button",{class:"btn btn-sm btn-outline-secondary",onClick:e=>i.decrementQuantity(a),disabled:!e||e.quantity<=1||e.product&&0===e.product.stock,"aria-label":"Decrease quantity"},t[13]||(t[13]=[(0,r.Lk)("i",{class:"bi bi-dash"},null,-1)]),8,Ma),(0,r.bo)((0,r.Lk)("input",{type:"number",class:"form-control form-control-sm","onUpdate:modelValue":t=>e.quantity=t,min:"1",max:e&&e.product?e.product.stock:1,disabled:e&&e.product&&0===e.product.stock,onChange:t=>i.validateQuantity(a,e&&e.product?e.product.stock:1),"aria-label":"Quantity"},null,40,Ia),[[s.Jo,e.quantity,void 0,{number:!0}]]),(0,r.Lk)("button",{class:"btn btn-sm btn-outline-secondary",onClick:t=>i.incrementQuantity(a,e&&e.product?e.product.stock:1),disabled:!e||!e.product||e.quantity>=e.product.stock||0===e.product.stock,"aria-label":"Increase quantity"},t[14]||(t[14]=[(0,r.Lk)("i",{class:"bi bi-plus"},null,-1)]),8,Ea)])]),(0,r.Lk)("div",Oa," â±"+(0,o.v_)(i.formatPrice(e&&e.product?e.product.price*e.quantity:0)),1),(0,r.Lk)("div",_a,[(0,r.Lk)("button",{class:"btn btn-sm btn-danger",onClick:e=>i.removeItem(a),"aria-label":"Remove item"},t[15]||(t[15]=[(0,r.Lk)("i",{class:"bi bi-trash"},null,-1)]),8,Da)])])))),128))]),(0,r.Lk)("div",Ta,[(0,r.Lk)("div",Aa,[(0,r.Lk)("button",{class:"btn btn-outline-danger",onClick:t[0]||(t[0]=(...e)=>i.confirmClearCart&&i.confirmClearCart(...e))},t[16]||(t[16]=[(0,r.Lk)("i",{class:"bi bi-trash me-2"},null,-1),(0,r.eW)("Clear Cart ")])),(0,r.bF)(c,{to:"/products",class:"btn btn-outline-primary"},{default:(0,r.k6)((()=>t[17]||(t[17]=[(0,r.Lk)("i",{class:"bi bi-shop me-2"},null,-1),(0,r.eW)("Continue Shopping ")]))),_:1})])])])]),(0,r.Lk)("div",Fa,[(0,r.Lk)("div",Na,[t[25]||(t[25]=(0,r.Lk)("div",{class:"card-header"},[(0,r.Lk)("h5",{class:"mb-0"},"Order Summary")],-1)),(0,r.Lk)("div",Wa,[(0,r.Lk)("div",Xa,[t[18]||(t[18]=(0,r.Lk)("span",null,"Subtotal",-1)),(0,r.Lk)("span",null,"â±"+(0,o.v_)(i.formatPrice(i.calculateSubtotal())),1)]),(0,r.Lk)("div",Ra,[t[19]||(t[19]=(0,r.Lk)("span",null,"Shipping",-1)),(0,r.Lk)("span",null,"â±"+(0,o.v_)(i.formatPrice(i.shippingCost)),1)]),(0,r.Lk)("div",qa,[t[20]||(t[20]=(0,r.Lk)("span",null,"Tax (12%)",-1)),(0,r.Lk)("span",null,"â±"+(0,o.v_)(i.formatPrice(i.calculateTax())),1)]),t[23]||(t[23]=(0,r.Lk)("div",{class:"summary-divider"},null,-1)),(0,r.Lk)("div",Ha,[t[21]||(t[21]=(0,r.Lk)("span",null,"Total",-1)),(0,r.Lk)("span",null,"â±"+(0,o.v_)(i.formatPrice(i.calculateTotal())),1)]),(0,r.Lk)("div",Ja,[(0,r.Lk)("div",{class:(0,o.C4)(["input-group",{"is-invalid":i.promoError}])},[(0,r.bo)((0,r.Lk)("input",{type:"text",class:(0,o.C4)(["form-control",{"is-invalid":i.promoError}]),placeholder:"Promo code","onUpdate:modelValue":t[1]||(t[1]=e=>i.promoCode=e),"aria-label":"Promo code"},null,2),[[s.Jo,i.promoCode]]),(0,r.Lk)("button",{class:"btn btn-outline-primary",type:"button",onClick:t[2]||(t[2]=(...e)=>i.applyPromoCode&&i.applyPromoCode(...e)),disabled:i.isApplyingPromo||!i.promoCode},[i.isApplyingPromo?((0,r.uX)(),(0,r.CE)("span",Qa)):((0,r.uX)(),(0,r.CE)("span",Ka,"Apply"))],8,Ba)],2),i.promoError?((0,r.uX)(),(0,r.CE)("div",za,(0,o.v_)(i.promoError),1)):(0,r.Q3)("",!0),i.activePromo?((0,r.uX)(),(0,r.CE)("div",Za,[t[22]||(t[22]=(0,r.Lk)("i",{class:"bi bi-check-circle-fill me-1"},null,-1)),(0,r.eW)(" "+(0,o.v_)(i.activePromo.code)+" applied: "+(0,o.v_)(i.activePromo.discount)+"% off ",1)])):(0,r.Q3)("",!0)])]),(0,r.Lk)("div",ja,[(0,r.Lk)("button",{class:"btn btn-primary w-100",onClick:t[3]||(t[3]=(...e)=>i.proceedToCheckout&&i.proceedToCheckout(...e)),disabled:i.isCheckingOut||i.hasOutOfStockItems||0===i.cart.length},[i.isCheckingOut?((0,r.uX)(),(0,r.CE)("span",Va)):((0,r.uX)(),(0,r.CE)("i",$a)),(0,r.eW)(" "+(0,o.v_)(i.isCheckingOut?"Processing...":"Proceed to Checkout"),1)],8,Ua),i.hasOutOfStockItems?((0,r.uX)(),(0,r.CE)("div",Ya,t[24]||(t[24]=[(0,r.Lk)("i",{class:"bi bi-exclamation-triangle-fill me-1"},null,-1),(0,r.eW)(" Please remove out of stock items before checkout ")]))):(0,r.Q3)("",!0)])])])])):((0,r.uX)(),(0,r.CE)("div",ca,[(0,r.Lk)("div",da,[t[8]||(t[8]=(0,r.Lk)("i",{class:"bi bi-cart-x cart-icon"},null,-1)),t[9]||(t[9]=(0,r.Lk)("h3",null,"Your cart is empty",-1)),t[10]||(t[10]=(0,r.Lk)("p",null,"Add some products to your cart to continue shopping.",-1)),(0,r.bF)(c,{to:"/products",class:"btn btn-primary mt-3"},{default:(0,r.k6)((()=>t[7]||(t[7]=[(0,r.Lk)("i",{class:"bi bi-shop me-2"},null,-1),(0,r.eW)("Continue Shopping ")]))),_:1})])])),(0,r.Lk)("div",Ga,[(0,r.Lk)("div",es,[(0,r.Lk)("div",ts,[(0,r.Lk)("div",as,[t[26]||(t[26]=(0,r.Lk)("h5",{class:"modal-title",id:"confirmModalLabel"},"Confirm Action",-1)),(0,r.Lk)("button",{type:"button",class:"btn-close",onClick:t[4]||(t[4]=(...e)=>i.hideConfirmModal&&i.hideConfirmModal(...e)),"aria-label":"Close"})]),(0,r.Lk)("div",ss,[t[27]||(t[27]=(0,r.Lk)("i",{class:"bi bi-question-circle-fill text-warning mb-3",style:{"font-size":"2rem"}},null,-1)),(0,r.Lk)("p",rs,(0,o.v_)(i.confirmMessage),1)]),(0,r.Lk)("div",os,[(0,r.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[5]||(t[5]=(...e)=>i.hideConfirmModal&&i.hideConfirmModal(...e))},"Cancel"),(0,r.Lk)("button",{type:"button",class:"btn btn-danger",onClick:t[6]||(t[6]=(...e)=>i.confirmAction&&i.confirmAction(...e))},"Confirm")])])])],512)])}var ls={setup(){const e=(0,E.KR)([]),t=(0,E.KR)(50),a=(0,me.rd)(),{success:s,warning:o,error:i,info:l}=we(),n=(0,E.KR)([]),c=(0,E.KR)(!1),d=(0,E.KR)(""),u=(0,E.KR)(""),m=(0,E.KR)(!1),p=(0,E.KR)(null),g=(0,E.KR)(null),h=(0,E.KR)(null),k=(0,E.KR)(""),b=(0,E.KR)(null),f=(0,r.EW)((()=>e.value.some((e=>e&&e.product&&0===e.product.stock)))),v=()=>{window.dispatchEvent(new CustomEvent("cart-updated"))},y=e=>e?e.startsWith("http")?e:`http://127.0.0.1:8000${e.startsWith("/")?e:"/media/"+e}`:"",L=e=>parseFloat(e).toFixed(2),w=(e,t)=>e?e.length>t?e.substring(0,t)+"...":e:"",P=()=>{let t=e.value.reduce(((e,t)=>t&&t.product&&0!==t.product.stock?e+t.product.price*t.quantity:e),0);return p.value&&(t*=1-p.value.discount/100),t},C=()=>.12*P(),x=()=>P()+C()+t.value,S=(t,a)=>{try{if(t<0||t>=e.value.length)return;const s=e.value[t];if(!s||!s.product||0===s.product.stock)return;s.quantity<a&&(s.quantity++,T(),l("Quantity updated"))}catch(s){console.error("Error incrementing quantity:",s),i("Failed to update quantity")}},M=t=>{try{if(t<0||t>=e.value.length)return;const a=e.value[t];if(!a||0===a.product.stock)return;a.quantity>1&&(a.quantity--,T(),l("Quantity updated"))}catch(a){console.error("Error decrementing quantity:",a),i("Failed to update quantity")}},I=(t,a)=>{try{if(t<0||t>=e.value.length)return;const s=e.value[t];if(!s)return;if(s.product&&0===s.product.stock)return s.quantity=0,o(`${s.product.name} is out of stock`),void T();s.quantity<1?(s.quantity=1,T()):s.quantity>a&&(s.quantity=a,o(`Maximum stock available: ${a}`),T())}catch(s){console.error("Error validating quantity:",s),i("Failed to update quantity")}},O=t=>{k.value="Are you sure you want to remove this item from your cart?",b.value=()=>{try{if(t<0||t>=e.value.length)return;const a=e.value[t]?.product?.name||"Item";e.value.splice(t,1),T(),s(`Removed ${a} from cart`),J()}catch(a){console.error("Error removing item:",a),i("Failed to remove item")}},H()},_=()=>{try{e.value=[],T(),p.value=null,d.value="",u.value="",l("Cart cleared"),J()}catch(t){console.error("Error clearing cart:",t),i("Failed to clear cart")}},D=()=>{k.value="Are you sure you want to clear your cart? This will remove all items.",b.value=_,H()},T=()=>{try{localStorage.setItem("cart",JSON.stringify(e.value)),window.dispatchEvent(new Event("storage")),v()}catch(t){console.error("Error updating cart:",t),i("Failed to update cart")}},A=[{code:"WELCOME10",discount:10},{code:"SAVE20",discount:20},{code:"SPECIAL30",discount:30}],F=()=>{d.value?(m.value=!0,u.value="",setTimeout((()=>{const e=A.find((e=>e.code===d.value.toUpperCase()));e?(p.value=e,s(`Promo code ${e.code} applied successfully!`)):(u.value="Invalid promo code",i("Invalid promo code. Please try again.")),m.value=!1}),800)):u.value="Please enter a promo code"},N=async()=>{if(f.value)i("Please remove out of stock items before checkout");else if(W()){c.value=!0;try{for(const a of e.value){if(!a||!a.product||!a.product.id)return void i("Invalid item in cart. Please remove it and try again.");if(0===a.product.stock)return void i(`${a.product.name} is out of stock. Please remove it from your cart.`)}const t=await de.get("user/"),r=await de.post("orders/",{customer:t.data.id,complete:!0}),o=r.data.id;for(const a of e.value)0!==a.product.stock&&await de.post("order-items/",{order:o,product:a.product.id,quantity:a.quantity});e.value=[],T(),p.value=null,d.value="",s("Order placed successfully!"),setTimeout((()=>{a.push("/orders")}),1500)}catch(t){console.error("Error during checkout:",t),i("Failed to place order. Please try again.")}finally{c.value=!1}}},W=()=>{let t=!0;return e.value.forEach((e=>e&&e.product&&e.product.id?0===e.product.stock?(o(`${e.product.name} is out of stock. Please remove it from your cart.`),void(t=!1)):void(e.quantity>e.product.stock&&(o(`Quantity for ${e.product.name} exceeds available stock. Adjusting to maximum.`),e.quantity=e.product.stock,T())):(i("Invalid item in cart. Please remove it and try again."),void(t=!1)))),t},X=async()=>{try{const e=await de.get("products/");n.value=e.data,R()}catch(e){console.error("Error fetching products:",e)}},R=()=>{if(!e.value.length||!n.value.length)return;let t=!1;e.value.forEach((e=>{if(!e||!e.product||!e.product.id)return;const a=n.value.find((t=>t.id===e.product.id));if(a&&(e.product.name!==a.name||e.product.price!==a.price||e.product.image!==a.image||e.product.description!==a.description||e.product.stock!==a.stock)){const s=e.quantity;e.product={id:a.id,name:a.name,price:a.price,description:a.description,image:a.image,stock:a.stock},e.quantity=s,e.quantity>a.stock&&(e.quantity=a.stock>0?a.stock:0,o(`Quantity for ${a.name} adjusted to match available stock`)),t=!0}})),t&&(T(),l("Cart updated with latest product information"))},q=()=>{try{const t=localStorage.getItem("cart");if(t){const a=JSON.parse(t);e.value=a.filter((e=>e&&e.product&&e.product.id)),e.value.length!==a.length&&(T(),o("Some invalid items were removed from your cart"))}}catch(t){console.error("Error loading cart:",t),i("Failed to load cart"),e.value=[]}},H=()=>{h.value&&h.value.show()},J=()=>{h.value&&h.value.hide()},B=()=>{"function"===typeof b.value&&b.value()};let Q;return(0,r.sV)((()=>{q(),X(),g.value&&(h.value=new Me.aF(g.value)),Q=setInterval((()=>{X()}),6e4),v()})),(0,r.hi)((()=>{Q&&clearInterval(Q)})),(0,r.wB)(e,(()=>{W()}),{deep:!0}),{cart:e,shippingCost:t,fullImageUrl:y,formatPrice:L,truncate:w,calculateSubtotal:P,calculateTax:C,calculateTotal:x,incrementQuantity:S,decrementQuantity:M,validateQuantity:I,removeItem:O,clearCart:_,confirmClearCart:D,updateCart:T,proceedToCheckout:N,isCheckingOut:c,promoCode:d,promoError:u,isApplyingPromo:m,activePromo:p,applyPromoCode:F,confirmModal:g,confirmMessage:k,hideConfirmModal:J,confirmAction:B,hasOutOfStockItems:f}}};const ns=(0,Ce.A)(ls,[["render",is],["__scopeId","data-v-2026dce0"]]);var cs=ns;const ds={class:"container"},us={class:"order-header mb-4"},ms={class:"controls-wrapper mt-3"},ps={class:"search-wrapper"},gs={class:"input-group"},hs={class:"sort-wrapper"},ks={class:"input-group"},bs={key:0,class:"text-center py-5"},fs={key:1,class:"empty-orders"},vs={key:2,class:"empty-orders"},ys={key:3},Ls={key:0,class:"results-summary mb-3"},ws={class:"card-header"},Ps={class:"d-flex justify-content-between align-items-center"},Cs={class:"mb-0"},xs={class:"order-date"},Ss={class:"card-body"},Ms={class:"order-items"},Is={key:0,class:"order-item-image"},Es=["src"],Os={key:1,class:"image-placeholder"},_s={class:"order-item-details"},Ds={class:"order-item-name"},Ts={key:0,class:"order-item-price"},As={class:"order-item-quantity"},Fs={key:1,class:"stock-warning"},Ns={key:1,class:"order-item-total"},Ws={class:"order-summary mt-3"},Xs={class:"order-total"},Rs={class:"card-footer"},qs={class:"d-flex flex-wrap justify-content-between align-items-center gap-2"},Hs=["onClick","disabled"],Js={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},Bs={key:1,class:"bi bi-arrow-repeat me-2"},Qs={key:0,class:"reorder-warning mt-2"},Ks={key:1,class:"pagination-wrapper"},zs={"aria-label":"Order history pagination"},Zs={class:"pagination justify-content-center"},js=["disabled"],Us=["disabled"],Vs=["onClick"],$s=["disabled"],Ys=["disabled"],Gs={class:"items-per-page"},er={class:"modal fade",ref:"confirmModal",tabindex:"-1","aria-labelledby":"confirmModalLabel","aria-hidden":"true"},tr={class:"modal-dialog modal-dialog-centered"},ar={class:"modal-content"},sr={class:"modal-header"},rr={class:"modal-body"},or={class:"confirmation-content"},ir={class:"confirmation-message"},lr={key:0,class:"order-preview mt-4"},nr={class:"preview-items"},cr={class:"preview-item-details"},dr={class:"preview-item-name"},ur={class:"preview-item-qty"},mr={key:0,class:"unavailable-badge"},pr={key:1,class:"partial-badge"},gr={key:0,class:"preview-item-price"},hr={class:"preview-total"},kr={class:"preview-total-row"},br={class:"preview-total-row grand-total"},fr={class:"validation-section mt-3"},vr={key:0,class:"validation-message warning"},yr={class:"validation-desc"},Lr={key:1,class:"validation-message info"},wr={key:2,class:"validation-message error"},Pr={class:"modal-footer"},Cr=["disabled"],xr={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},Sr={key:1,class:"bi bi-check-circle me-2"};function Mr(e,t,a,i,l,n){const c=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",ds,[(0,r.Lk)("div",us,[t[17]||(t[17]=(0,r.Lk)("h2",{class:"section-title"},[(0,r.Lk)("i",{class:"bi bi-clock-history me-2"}),(0,r.eW)("My Orders ")],-1)),(0,r.Lk)("div",ms,[(0,r.Lk)("div",ps,[(0,r.Lk)("div",gs,[t[14]||(t[14]=(0,r.Lk)("span",{class:"input-group-text"},[(0,r.Lk)("i",{class:"bi bi-search"})],-1)),(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=e=>i.searchTerm=e),placeholder:"Search orders or products..."},null,512),[[s.Jo,i.searchTerm]]),i.searchTerm?((0,r.uX)(),(0,r.CE)("button",{key:0,class:"btn btn-outline-secondary",type:"button",onClick:t[1]||(t[1]=e=>i.searchTerm="")},t[13]||(t[13]=[(0,r.Lk)("i",{class:"bi bi-x"},null,-1)]))):(0,r.Q3)("",!0)])]),(0,r.Lk)("div",hs,[(0,r.Lk)("div",ks,[t[16]||(t[16]=(0,r.Lk)("label",{class:"input-group-text",for:"sortSelect"},[(0,r.Lk)("i",{class:"bi bi-sort-down"})],-1)),(0,r.bo)((0,r.Lk)("select",{class:"form-select",id:"sortSelect","onUpdate:modelValue":t[2]||(t[2]=e=>i.sortOption=e)},t[15]||(t[15]=[(0,r.Lk)("option",{value:"newest"},"Newest First",-1),(0,r.Lk)("option",{value:"oldest"},"Oldest First",-1),(0,r.Lk)("option",{value:"highest"},"Highest Amount",-1),(0,r.Lk)("option",{value:"lowest"},"Lowest Amount",-1)]),512),[[s.u1,i.sortOption]])])])])]),i.isLoading?((0,r.uX)(),(0,r.CE)("div",bs,t[18]||(t[18]=[(0,r.Fv)('<div class="spinner" data-v-12a93334><div class="bounce1" data-v-12a93334></div><div class="bounce2" data-v-12a93334></div><div class="bounce3" data-v-12a93334></div></div><p class="mt-3" data-v-12a93334>Loading your orders...</p>',2)]))):0===i.orders.length?((0,r.uX)(),(0,r.CE)("div",fs,[t[20]||(t[20]=(0,r.Lk)("i",{class:"bi bi-bag-x"},null,-1)),t[21]||(t[21]=(0,r.Lk)("h3",null,"No orders found",-1)),t[22]||(t[22]=(0,r.Lk)("p",null,"You haven't placed any orders yet.",-1)),(0,r.bF)(c,{to:"/products",class:"btn btn-primary mt-3"},{default:(0,r.k6)((()=>t[19]||(t[19]=[(0,r.Lk)("i",{class:"bi bi-shop me-2"},null,-1),(0,r.eW)("Start Shopping ")]))),_:1})])):0===i.paginatedOrders.length?((0,r.uX)(),(0,r.CE)("div",vs,[t[24]||(t[24]=(0,r.Lk)("i",{class:"bi bi-search"},null,-1)),t[25]||(t[25]=(0,r.Lk)("h3",null,"No matching orders",-1)),t[26]||(t[26]=(0,r.Lk)("p",null,"No orders match your search criteria.",-1)),(0,r.Lk)("button",{class:"btn btn-primary mt-3",onClick:t[3]||(t[3]=e=>i.searchTerm="")},t[23]||(t[23]=[(0,r.Lk)("i",{class:"bi bi-arrow-counterclockwise me-2"},null,-1),(0,r.eW)("Clear Search ")]))])):((0,r.uX)(),(0,r.CE)("div",ys,[i.searchTerm?((0,r.uX)(),(0,r.CE)("div",Ls,[(0,r.Lk)("span",null,[(0,r.Lk)("strong",null,(0,o.v_)(i.filteredOrders.length),1),(0,r.eW)(" "+(0,o.v_)(1===i.filteredOrders.length?"result":"results")+" found ",1),(0,r.Lk)("button",{class:"btn btn-sm btn-link p-0 ms-2",onClick:t[4]||(t[4]=e=>i.searchTerm="")},t[27]||(t[27]=[(0,r.Lk)("i",{class:"bi bi-x-circle"},null,-1),(0,r.eW)(" Clear ")]))])])):(0,r.Q3)("",!0),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.paginatedOrders,(e=>((0,r.uX)(),(0,r.CE)("div",{class:"order-card card mb-4",key:e.id},[(0,r.Lk)("div",ws,[(0,r.Lk)("div",Ps,[(0,r.Lk)("h5",Cs,[t[28]||(t[28]=(0,r.Lk)("i",{class:"bi bi-bag-check me-2"},null,-1)),(0,r.eW)("Order #"+(0,o.v_)(e.id),1)]),(0,r.Lk)("span",xs,(0,o.v_)(i.formatDate(e.date_ordered)),1)])]),(0,r.Lk)("div",Ss,[(0,r.Lk)("div",Ms,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.items,(e=>((0,r.uX)(),(0,r.CE)("div",{class:"order-item",key:e.id},[i.getProductDetails(e.product)?((0,r.uX)(),(0,r.CE)("div",Is,[i.getProductDetails(e.product).image?((0,r.uX)(),(0,r.CE)("img",{key:0,src:i.fullImageUrl(i.getProductDetails(e.product).image),alt:"Product"},null,8,Es)):((0,r.uX)(),(0,r.CE)("div",Os,t[29]||(t[29]=[(0,r.Lk)("i",{class:"bi bi-image"},null,-1)])))])):(0,r.Q3)("",!0),(0,r.Lk)("div",_s,[(0,r.Lk)("h6",Ds,(0,o.v_)(i.getProductDetails(e.product)?i.getProductDetails(e.product).name:`Product #${e.product}`),1),i.getProductDetails(e.product)?((0,r.uX)(),(0,r.CE)("p",Ts," â±"+(0,o.v_)(i.getProductDetails(e.product).price)+" Ã "+(0,o.v_)(e.quantity),1)):(0,r.Q3)("",!0),(0,r.Lk)("p",As," Quantity: "+(0,o.v_)(e.quantity),1),i.getProductDetails(e.product)&&0===i.getProductDetails(e.product).stock?((0,r.uX)(),(0,r.CE)("div",Fs,t[30]||(t[30]=[(0,r.Lk)("i",{class:"bi bi-exclamation-triangle-fill me-1"},null,-1),(0,r.eW)(" Currently out of stock ")]))):(0,r.Q3)("",!0)]),i.getProductDetails(e.product)?((0,r.uX)(),(0,r.CE)("div",Ns," â±"+(0,o.v_)((i.getProductDetails(e.product).price*e.quantity).toFixed(2)),1)):(0,r.Q3)("",!0)])))),128))]),(0,r.Lk)("div",Ws,[(0,r.Lk)("div",Xs,[t[31]||(t[31]=(0,r.Lk)("span",null,"Total:",-1)),(0,r.Lk)("span",null,"â±"+(0,o.v_)(i.calculateOrderTotal(e).toFixed(2)),1)])])]),(0,r.Lk)("div",Rs,[(0,r.Lk)("div",qs,[t[32]||(t[32]=(0,r.Lk)("span",{class:"order-status d-flex align-items-center"},[(0,r.Lk)("i",{class:"bi bi-check-circle-fill text-success me-1"}),(0,r.eW)(" Completed ")],-1)),(0,r.Lk)("button",{class:"btn btn-primary btn-sm",onClick:t=>i.reorderItems(e),disabled:i.isReordering||!i.hasAvailableItems(e)},[i.isReordering?((0,r.uX)(),(0,r.CE)("span",Js)):((0,r.uX)(),(0,r.CE)("i",Bs)),(0,r.eW)(" "+(0,o.v_)(i.isReordering?"Processing...":"Reorder"),1)],8,Hs)]),i.hasAvailableItems(e)?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("div",Qs,t[33]||(t[33]=[(0,r.Lk)("i",{class:"bi bi-exclamation-triangle-fill me-1"},null,-1),(0,r.eW)(" Cannot reorder - all items are out of stock ")])))])])))),128)),i.totalPages>1?((0,r.uX)(),(0,r.CE)("div",Ks,[(0,r.Lk)("nav",zs,[(0,r.Lk)("ul",Zs,[(0,r.Lk)("li",{class:(0,o.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,r.Lk)("button",{class:"page-link",onClick:t[5]||(t[5]=e=>i.currentPage=1),disabled:1===i.currentPage},t[34]||(t[34]=[(0,r.Lk)("i",{class:"bi bi-chevron-double-left"},null,-1)]),8,js)],2),(0,r.Lk)("li",{class:(0,o.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,r.Lk)("button",{class:"page-link",onClick:t[6]||(t[6]=e=>i.currentPage--),disabled:1===i.currentPage},t[35]||(t[35]=[(0,r.Lk)("i",{class:"bi bi-chevron-left"},null,-1)]),8,Us)],2),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.displayedPages,(e=>((0,r.uX)(),(0,r.CE)("li",{key:e,class:(0,o.C4)(["page-item",{active:i.currentPage===e}])},[(0,r.Lk)("button",{class:"page-link",onClick:t=>i.currentPage=e},(0,o.v_)(e),9,Vs)],2)))),128)),(0,r.Lk)("li",{class:(0,o.C4)(["page-item",{disabled:i.currentPage===i.totalPages}])},[(0,r.Lk)("button",{class:"page-link",onClick:t[7]||(t[7]=e=>i.currentPage++),disabled:i.currentPage===i.totalPages},t[36]||(t[36]=[(0,r.Lk)("i",{class:"bi bi-chevron-right"},null,-1)]),8,$s)],2),(0,r.Lk)("li",{class:(0,o.C4)(["page-item",{disabled:i.currentPage===i.totalPages}])},[(0,r.Lk)("button",{class:"page-link",onClick:t[8]||(t[8]=e=>i.currentPage=i.totalPages),disabled:i.currentPage===i.totalPages},t[37]||(t[37]=[(0,r.Lk)("i",{class:"bi bi-chevron-double-right"},null,-1)]),8,Ys)],2)])]),(0,r.Lk)("div",Gs,[t[39]||(t[39]=(0,r.Lk)("span",null,"Items per page:",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>i.itemsPerPage=e),class:"form-select form-select-sm"},t[38]||(t[38]=[(0,r.Lk)("option",{value:5},"5",-1),(0,r.Lk)("option",{value:10},"10",-1),(0,r.Lk)("option",{value:20},"20",-1)]),512),[[s.u1,i.itemsPerPage]])])])):(0,r.Q3)("",!0)])),(0,r.Lk)("div",er,[(0,r.Lk)("div",tr,[(0,r.Lk)("div",ar,[(0,r.Lk)("div",sr,[t[40]||(t[40]=(0,r.Lk)("h5",{class:"modal-title",id:"confirmModalLabel"},[(0,r.Lk)("i",{class:"bi bi-cart-check me-2"}),(0,r.eW)("Confirm ")],-1)),(0,r.Lk)("button",{type:"button",class:"btn-close",onClick:t[10]||(t[10]=(...e)=>i.hideConfirmModal&&i.hideConfirmModal(...e)),"aria-label":"Close"})]),(0,r.Lk)("div",rr,[(0,r.Lk)("div",or,[(0,r.Lk)("p",ir,(0,o.v_)(i.confirmMessage),1),i.orderToReorder?((0,r.uX)(),(0,r.CE)("div",lr,[t[49]||(t[49]=(0,r.Lk)("h6",{class:"preview-heading"},[(0,r.Lk)("i",{class:"bi bi-receipt me-2"}),(0,r.eW)("Order Summary ")],-1)),(0,r.Lk)("div",nr,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.orderToReorder.items,(e=>((0,r.uX)(),(0,r.CE)("div",{class:(0,o.C4)(["preview-item",{unavailable:i.isItemUnavailable(e)}]),key:e.id},[(0,r.Lk)("div",cr,[(0,r.Lk)("span",dr,(0,o.v_)(i.getProductDetails(e.product)?i.getProductDetails(e.product).name:`Product #${e.product}`),1),(0,r.Lk)("span",ur,[(0,r.eW)(" Ã "+(0,o.v_)(e.quantity)+" ",1),i.isItemUnavailable(e)?((0,r.uX)(),(0,r.CE)("span",mr,t[41]||(t[41]=[(0,r.Lk)("i",{class:"bi bi-x-circle-fill"},null,-1),(0,r.eW)(" Out of stock ")]))):i.isItemPartiallyAvailable(e)?((0,r.uX)(),(0,r.CE)("span",pr,[t[42]||(t[42]=(0,r.Lk)("i",{class:"bi bi-exclamation-circle-fill"},null,-1)),(0,r.eW)(" Limited stock ("+(0,o.v_)(i.getProductDetails(e.product).stock)+") ",1)])):(0,r.Q3)("",!0)])]),i.getProductDetails(e.product)?((0,r.uX)(),(0,r.CE)("span",gr," â±"+(0,o.v_)((i.getProductDetails(e.product).price*(i.isItemUnavailable(e)?0:Math.min(e.quantity,i.getProductDetails(e.product).stock))).toFixed(2)),1)):(0,r.Q3)("",!0)],2)))),128))]),(0,r.Lk)("div",hr,[(0,r.Lk)("div",kr,[t[43]||(t[43]=(0,r.Lk)("span",null,"Subtotal:",-1)),(0,r.Lk)("span",null,"â±"+(0,o.v_)(i.calculateAvailableTotal(i.orderToReorder).subtotal.toFixed(2)),1)]),(0,r.Lk)("div",br,[t[44]||(t[44]=(0,r.Lk)("span",null,"Total:",-1)),(0,r.Lk)("span",null,"â±"+(0,o.v_)(i.calculateAvailableTotal(i.orderToReorder).total.toFixed(2)),1)])]),(0,r.Lk)("div",fr,[i.unavailableItems.length>0?((0,r.uX)(),(0,r.CE)("div",vr,[t[46]||(t[46]=(0,r.Lk)("i",{class:"bi bi-exclamation-triangle-fill me-2"},null,-1)),(0,r.Lk)("div",null,[t[45]||(t[45]=(0,r.Lk)("p",{class:"validation-title"},"Some items are unavailable",-1)),(0,r.Lk)("p",yr,(0,o.v_)(i.unavailableItems.length)+" item(s) will be skipped due to stock issues.",1)])])):(0,r.Q3)("",!0),i.partiallyAvailableItems.length>0?((0,r.uX)(),(0,r.CE)("div",Lr,t[47]||(t[47]=[(0,r.Lk)("i",{class:"bi bi-info-circle-fill me-2"},null,-1),(0,r.Lk)("div",null,[(0,r.Lk)("p",{class:"validation-title"},"Limited stock available"),(0,r.Lk)("p",{class:"validation-desc"},"Some items have limited stock and quantities will be adjusted.")],-1)]))):(0,r.Q3)("",!0),0===i.calculateAvailableTotal(i.orderToReorder).total?((0,r.uX)(),(0,r.CE)("div",wr,t[48]||(t[48]=[(0,r.Lk)("i",{class:"bi bi-x-octagon-fill me-2"},null,-1),(0,r.Lk)("div",null,[(0,r.Lk)("p",{class:"validation-title"},"Cannot proceed"),(0,r.Lk)("p",{class:"validation-desc"},"All items in this order are out of stock.")],-1)]))):(0,r.Q3)("",!0)])])):(0,r.Q3)("",!0)])]),(0,r.Lk)("div",Pr,[(0,r.Lk)("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[11]||(t[11]=(...e)=>i.hideConfirmModal&&i.hideConfirmModal(...e))},t[50]||(t[50]=[(0,r.Lk)("i",{class:"bi bi-x me-1"},null,-1),(0,r.eW)("Cancel ")])),(0,r.Lk)("button",{type:"button",class:"btn btn-primary",onClick:t[12]||(t[12]=(...e)=>i.confirmReorder&&i.confirmReorder(...e)),disabled:i.isReordering||i.orderToReorder&&0===i.calculateAvailableTotal(i.orderToReorder).total},[i.isReordering?((0,r.uX)(),(0,r.CE)("span",xr)):((0,r.uX)(),(0,r.CE)("i",Sr)),(0,r.eW)(" "+(0,o.v_)(i.isReordering?"Processing...":"Confirm"),1)],8,Cr)])])])],512)])}var Ir={setup(){const e=(0,E.KR)([]),t=(0,E.KR)([]),a=(0,E.KR)(!0),s=(0,E.KR)(!1),o=(0,E.KR)(null),i=(0,E.KR)(null),l=(0,E.KR)(""),n=(0,E.KR)(null),c=(0,E.KR)([]),d=(0,E.KR)([]),u=Le(),m=(0,E.KR)(""),p=(0,E.KR)("newest"),g=(0,E.KR)(1),h=(0,E.KR)(5);(0,r.wB)([m,p,h],(()=>{g.value=1}));const k=(0,r.EW)((()=>{if(!m.value.trim())return e.value;const t=m.value.toLowerCase().trim();return e.value.filter((e=>!!e.id.toString().includes(t)||!!(e.items&&e.items.length>0)&&e.items.some((e=>{const a=P(e.product);return!(!a||!a.name)&&a.name.toLowerCase().includes(t)}))))})),b=(0,r.EW)((()=>{const e=[...k.value];switch(p.value){case"newest":return e.sort(((e,t)=>new Date(t.date_ordered)-new Date(e.date_ordered)));case"oldest":return e.sort(((e,t)=>new Date(e.date_ordered)-new Date(t.date_ordered)));case"highest":return e.sort(((e,t)=>C(t)-C(e)));case"lowest":return e.sort(((e,t)=>C(e)-C(t)));default:return e}})),f=(0,r.EW)((()=>Math.ceil(b.value.length/h.value))),v=(0,r.EW)((()=>{const e=[],t=5;if(f.value<=t)for(let a=1;a<=f.value;a++)e.push(a);else{e.push(1);let t=Math.max(2,g.value-1),a=Math.min(f.value-1,g.value+1);g.value<=3&&(a=4),g.value>=f.value-2&&(t=f.value-3),t>2&&e.push("...");for(let s=t;s<=a;s++)e.push(s);a<f.value-1&&e.push("..."),e.push(f.value)}return e})),y=(0,r.EW)((()=>{const e=(g.value-1)*h.value,t=e+h.value;return b.value.slice(e,t)})),L=e=>{const t={year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(e).toLocaleDateString(void 0,t)},w=e=>e?e.startsWith("http")?e:`http://127.0.0.1:8000${e.startsWith("/")?e:"/media/"+e}`:"",P=e=>t.value.find((t=>t.id===e)),C=e=>{let t=0;return e.items&&e.items.forEach((e=>{const a=P(e.product);a&&(t+=a.price*e.quantity)})),t},x=e=>!(!e.items||0===e.items.length)&&e.items.some((e=>{const t=P(e.product);return t&&t.stock>0})),S=e=>{if(!e.items)return[];const t=[];return e.items.forEach((e=>{const a=P(e.product);a&&0===a.stock&&t.push({id:a.id,name:a.name})})),t},M=e=>{if(!e.items)return[];const t=[];return e.items.forEach((e=>{const a=P(e.product);a&&a.stock>0&&a.stock<e.quantity&&t.push({id:a.id,name:a.name,requestedQty:e.quantity,availableQty:a.stock})})),t},I=e=>{const t=P(e.product);return!t||0===t.stock},O=e=>{const t=P(e.product);return t&&t.stock>0&&t.stock<e.quantity},_=e=>{let t=0;return e&&e.items&&e.items.forEach((e=>{const a=P(e.product);if(a&&a.stock>0){const s=Math.min(e.quantity,a.stock);t+=a.price*s}})),{subtotal:t,total:t}},D=e=>{x(e)?(n.value=e,c.value=S(e),d.value=M(e),c.value.length>0?l.value="Some items in this order are out of stock and will be skipped. Do you want to continue with the reorder?":l.value="Are you sure you want to reorder these items?",N()):u.error("Cannot reorder - all items are out of stock")},T=async()=>{if(n.value){s.value=!0;try{const e=await de.get("user/"),t=await de.post("orders/",{customer:e.data.id,complete:!0}),a=t.data.id;let s=0;for(const r of n.value.items){const e=P(r.product);if(!e||e.stock<1)continue;const t=Math.min(r.quantity,e.stock);await de.post("order-items/",{order:a,product:r.product,quantity:t}),s++}s>0?(u.success("Order placed successfully!"),setTimeout((()=>{A()}),1e3)):u.error("No items could be added to your order."),W()}catch(e){console.error(e),u.error("Failed to reorder. Please try again.")}finally{s.value=!1}}},A=async()=>{try{const t=await de.get("orders/");e.value=t.data}catch(t){u.error("Failed to load orders."),console.error(t)}},F=async()=>{try{const e=await de.get("products/");t.value=e.data}catch(e){console.error("Failed to load products:",e)}finally{a.value=!1}},N=()=>{i.value?i.value.show():o.value&&(i.value=new Me.aF(o.value),i.value.show())},W=()=>{i.value&&i.value.hide()},X=async()=>{try{await A(),await F()}catch(e){console.error(e),a.value=!1}};return X(),{orders:e,isLoading:a,isReordering:s,confirmModal:o,confirmMessage:l,orderToReorder:n,unavailableItems:c,partiallyAvailableItems:d,searchTerm:m,sortOption:p,currentPage:g,itemsPerPage:h,filteredOrders:k,sortedOrders:b,paginatedOrders:y,totalPages:f,displayedPages:v,formatDate:L,fullImageUrl:w,getProductDetails:P,calculateOrderTotal:C,hasAvailableItems:x,isItemUnavailable:I,isItemPartiallyAvailable:O,calculateAvailableTotal:_,reorderItems:D,confirmReorder:T,hideConfirmModal:W}}};const Er=(0,Ce.A)(Ir,[["render",Mr],["__scopeId","data-v-12a93334"]]);var Or=Er;const _r={class:"container"},Dr={class:"admin-header mb-3 mb-md-4"},Tr=["disabled"],Ar={key:0,class:"spinner-border spinner-border-sm me-1",role:"status"},Fr={key:1,class:"bi bi-arrow-clockwise me-1"},Nr={class:"row g-3 mb-3 mb-md-4"},Wr={class:"col-12 col-md-4"},Xr={class:"stat-card card h-100"},Rr={class:"card-body"},qr={class:"stat-info"},Hr={class:"col-12 col-md-4"},Jr={class:"stat-card card h-100"},Br={class:"card-body"},Qr={class:"stat-info"},Kr={class:"col-12 col-md-4"},zr={class:"stat-card card h-100"},Zr={class:"card-body"},jr={class:"stat-info"},Ur={class:"card mb-3"},Vr={class:"card-body"},$r={class:"row g-2"},Yr={class:"col-12 col-md-4"},Gr={class:"form-group"},eo={class:"input-group"},to={class:"col-12 col-md-4"},ao={class:"form-group"},so={class:"d-flex gap-2"},ro={class:"input-group"},oo={class:"input-group"},io={class:"col-12 col-md-4"},lo={class:"form-group"},no={class:"d-flex justify-content-end mt-3"},co={class:"card mb-3 mb-md-4"},uo={class:"card-header d-flex flex-column flex-md-row justify-content-between align-items-md-center"},mo={class:"mb-2 mb-md-0"},po={class:"mobile-pagination-select d-md-none"},go={class:"per-page-selector"},ho={class:"d-none d-md-flex align-items-center"},ko={class:"me-2 text-muted"},bo={class:"per-page-selector ms-2"},fo={key:0,class:"loading-container py-5"},vo={key:1,class:"d-md-none"},yo={key:0,class:"text-center py-4"},Lo={key:1,class:"mobile-orders-list"},wo=["onClick"],Po={class:"d-flex justify-content-between align-items-center mb-2"},Co={class:"order-id"},xo={class:"text-muted small mb-2"},So={class:"mb-2"},Mo={class:"d-flex justify-content-between"},Io={key:0,class:"mobile-pagination"},Eo={class:"pagination-info"},Oo={class:"pagination-controls"},_o=["disabled"],Do=["disabled"],To={key:2,class:"table-responsive d-none d-md-block"},Ao={class:"table table-hover mb-0"},Fo={key:0},No={class:"order-id"},Wo=["onClick"],Xo={key:3,class:"card-footer d-none d-md-flex justify-content-between align-items-center"},Ro={class:"pagination-info"},qo={"aria-label":"Orders pagination"},Ho={class:"pagination pagination-sm mb-0"},Jo=["disabled"],Bo={key:0,class:"page-link",disabled:""},Qo=["onClick"],Ko=["disabled"],zo={class:"modal fade",ref:"orderModal",id:"orderModal",tabindex:"-1"},Zo={class:"modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable"},jo={class:"modal-content"},Uo={class:"modal-header"},Vo={class:"modal-title"},$o={key:0,class:"modal-body"},Yo={class:"order-info mb-4"},Go={class:"row"},ei={class:"col-md-6 mb-3 mb-md-0"},ti={class:"col-md-6"},ai={class:"table-responsive"},si={class:"table table-bordered mb-0"},ri={class:"d-flex align-items-center"},oi={key:0,class:"order-item-image me-2"},ii=["src"],li={key:1,class:"image-placeholder"},ni={class:"text-center"},ci={class:"text-center"},di={class:"text-center"},ui={class:"text-center"},mi={class:"modal-footer"};function pi(e,t,a,i,l,n){return(0,r.uX)(),(0,r.CE)("div",_r,[(0,r.Lk)("div",Dr,[t[15]||(t[15]=(0,r.Lk)("h2",{class:"section-title"},[(0,r.Lk)("i",{class:"bi bi-clipboard-check me-2"}),(0,r.eW)("Checkout Monitor ")],-1)),(0,r.Lk)("button",{class:"btn btn-sm btn-outline-secondary",onClick:t[0]||(t[0]=(...e)=>n.refreshData&&n.refreshData(...e)),disabled:l.isRefreshing},[l.isRefreshing?((0,r.uX)(),(0,r.CE)("span",Ar)):((0,r.uX)(),(0,r.CE)("i",Fr)),(0,r.eW)(" "+(0,o.v_)(l.isRefreshing?"Refreshing...":"Refresh Data"),1)],8,Tr)]),(0,r.Lk)("div",Nr,[(0,r.Lk)("div",Wr,[(0,r.Lk)("div",Xr,[(0,r.Lk)("div",Rr,[t[17]||(t[17]=(0,r.Lk)("div",{class:"stat-icon"},[(0,r.Lk)("i",{class:"bi bi-cart-check"})],-1)),(0,r.Lk)("div",qr,[(0,r.Lk)("h3",null,(0,o.v_)(l.orders.length),1),t[16]||(t[16]=(0,r.Lk)("p",null,"Total Orders",-1))])])])]),(0,r.Lk)("div",Hr,[(0,r.Lk)("div",Jr,[(0,r.Lk)("div",Br,[t[19]||(t[19]=(0,r.Lk)("div",{class:"stat-icon"},[(0,r.Lk)("span",null,"â±")],-1)),(0,r.Lk)("div",Qr,[(0,r.Lk)("h3",null,"â±"+(0,o.v_)(n.calculateTotalSales()),1),t[18]||(t[18]=(0,r.Lk)("p",null,"Total Sales",-1))])])])]),(0,r.Lk)("div",Kr,[(0,r.Lk)("div",zr,[(0,r.Lk)("div",Zr,[t[21]||(t[21]=(0,r.Lk)("div",{class:"stat-icon"},[(0,r.Lk)("i",{class:"bi bi-people"})],-1)),(0,r.Lk)("div",jr,[(0,r.Lk)("h3",null,(0,o.v_)(n.uniqueCustomers.length),1),t[20]||(t[20]=(0,r.Lk)("p",null,"Unique Customers",-1))])])])])]),(0,r.Lk)("div",Ur,[(0,r.Lk)("div",Vr,[t[30]||(t[30]=(0,r.Lk)("h5",{class:"filter-title mb-3"},[(0,r.Lk)("i",{class:"bi bi-funnel me-2"}),(0,r.eW)("Search & Filter")],-1)),(0,r.Lk)("div",$r,[(0,r.Lk)("div",Yr,[(0,r.Lk)("div",Gr,[t[23]||(t[23]=(0,r.Lk)("label",{class:"form-label"},"Search",-1)),(0,r.Lk)("div",eo,[t[22]||(t[22]=(0,r.Lk)("span",{class:"input-group-text"},[(0,r.Lk)("i",{class:"bi bi-search"})],-1)),(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>l.searchQuery=e),class:"form-control",placeholder:"Order ID..."},null,512),[[s.Jo,l.searchQuery]])])])]),(0,r.Lk)("div",to,[(0,r.Lk)("div",ao,[t[26]||(t[26]=(0,r.Lk)("label",{class:"form-label"},"Date Range",-1)),(0,r.Lk)("div",so,[(0,r.Lk)("div",ro,[t[24]||(t[24]=(0,r.Lk)("span",{class:"input-group-text"},[(0,r.Lk)("i",{class:"bi bi-calendar3"})],-1)),(0,r.bo)((0,r.Lk)("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=e=>l.dateFrom=e),class:"form-control",placeholder:"From"},null,512),[[s.Jo,l.dateFrom]])]),(0,r.Lk)("div",oo,[t[25]||(t[25]=(0,r.Lk)("span",{class:"input-group-text"},[(0,r.Lk)("i",{class:"bi bi-calendar3"})],-1)),(0,r.bo)((0,r.Lk)("input",{type:"date","onUpdate:modelValue":t[3]||(t[3]=e=>l.dateTo=e),class:"form-control",placeholder:"To"},null,512),[[s.Jo,l.dateTo]])])])])]),(0,r.Lk)("div",io,[(0,r.Lk)("div",lo,[t[28]||(t[28]=(0,r.Lk)("label",{class:"form-label"},"Sort By",-1)),(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.sortBy=e),class:"form-select"},t[27]||(t[27]=[(0,r.Lk)("option",{value:"date_desc"},"Newest First",-1),(0,r.Lk)("option",{value:"date_asc"},"Oldest First",-1),(0,r.Lk)("option",{value:"amount_desc"},"Highest Amount",-1),(0,r.Lk)("option",{value:"amount_asc"},"Lowest Amount",-1)]),512),[[s.u1,l.sortBy]])])])]),(0,r.Lk)("div",no,[(0,r.Lk)("button",{class:"btn btn-outline-secondary me-2",onClick:t[5]||(t[5]=(...e)=>n.resetFilters&&n.resetFilters(...e))},t[29]||(t[29]=[(0,r.Lk)("i",{class:"bi bi-x-circle me-1"},null,-1),(0,r.eW)("Reset ")]))])])]),(0,r.Lk)("div",co,[(0,r.Lk)("div",uo,[(0,r.Lk)("h5",mo,[t[32]||(t[32]=(0,r.Lk)("i",{class:"bi bi-list-check me-2"},null,-1)),t[33]||(t[33]=(0,r.eW)("Recent Orders ")),(0,r.Lk)("div",po,[(0,r.Lk)("div",go,[(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.perPage=e),class:"form-select form-select-sm","aria-label":"Items per page"},t[31]||(t[31]=[(0,r.Lk)("option",{value:5},"5",-1),(0,r.Lk)("option",{value:10},"10",-1),(0,r.Lk)("option",{value:25},"25",-1),(0,r.Lk)("option",{value:50},"50",-1)]),512),[[s.u1,l.perPage]])])])]),(0,r.Lk)("div",ho,[(0,r.Lk)("span",ko,(0,o.v_)(n.filteredOrders.length)+" orders found",1),(0,r.Lk)("div",bo,[(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>l.perPage=e),class:"form-select form-select-sm","aria-label":"Items per page"},t[34]||(t[34]=[(0,r.Lk)("option",{value:5},"5",-1),(0,r.Lk)("option",{value:10},"10",-1),(0,r.Lk)("option",{value:25},"25",-1),(0,r.Lk)("option",{value:50},"50",-1)]),512),[[s.u1,l.perPage]])])])]),l.isLoading?((0,r.uX)(),(0,r.CE)("div",fo,t[35]||(t[35]=[(0,r.Lk)("div",{class:"spinner"},[(0,r.Lk)("div",{class:"bounce1"}),(0,r.Lk)("div",{class:"bounce2"}),(0,r.Lk)("div",{class:"bounce3"})],-1),(0,r.Lk)("p",null,"Loading orders...",-1)]))):l.isLoading?((0,r.uX)(),(0,r.CE)("div",To,[(0,r.Lk)("table",Ao,[t[43]||(t[43]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",{scope:"col"},"Order ID"),(0,r.Lk)("th",{scope:"col"},"Date"),(0,r.Lk)("th",{scope:"col"},"Customer"),(0,r.Lk)("th",{scope:"col"},"Items"),(0,r.Lk)("th",{scope:"col"},"Total"),(0,r.Lk)("th",{scope:"col"},"Status"),(0,r.Lk)("th",{scope:"col"},"Actions")])],-1)),(0,r.Lk)("tbody",null,[0===n.filteredOrders.length?((0,r.uX)(),(0,r.CE)("tr",Fo,t[40]||(t[40]=[(0,r.Lk)("td",{colspan:"7",class:"text-center py-4"},[(0,r.Lk)("i",{class:"bi bi-search text-muted",style:{"font-size":"2rem"}}),(0,r.Lk)("p",{class:"mt-2 text-muted"},"No orders found")],-1)]))):(0,r.Q3)("",!0),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.paginatedOrders,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:`desktop-${e.id}`},[(0,r.Lk)("td",null,[(0,r.Lk)("span",No,"#"+(0,o.v_)(e.id),1)]),(0,r.Lk)("td",null,(0,o.v_)(n.formatDate(e.date_ordered)),1),(0,r.Lk)("td",null,(0,o.v_)(e.customer),1),(0,r.Lk)("td",null,(0,o.v_)(e.items?e.items.length:0)+" items",1),(0,r.Lk)("td",null,"â±"+(0,o.v_)(n.calculateOrderTotal(e).toFixed(2)),1),t[42]||(t[42]=(0,r.Lk)("td",null,[(0,r.Lk)("span",{class:"badge bg-success"},"Completed")],-1)),(0,r.Lk)("td",null,[(0,r.Lk)("button",{class:"btn btn-sm btn-primary btn-view",onClick:t=>n.viewOrderDetails(e)},t[41]||(t[41]=[(0,r.Lk)("i",{class:"bi bi-eye"},null,-1)]),8,Wo)])])))),128))])])])):((0,r.uX)(),(0,r.CE)("div",vo,[0===n.filteredOrders.length?((0,r.uX)(),(0,r.CE)("div",yo,t[36]||(t[36]=[(0,r.Lk)("i",{class:"bi bi-search text-muted",style:{"font-size":"2rem"}},null,-1),(0,r.Lk)("p",{class:"mt-2 text-muted"},"No orders found",-1)]))):((0,r.uX)(),(0,r.CE)("div",Lo,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.paginatedOrders,(e=>((0,r.uX)(),(0,r.CE)("div",{key:`mobile-${e.id}`,class:"mobile-order-item",onClick:t=>n.viewOrderDetails(e)},[(0,r.Lk)("div",Po,[(0,r.Lk)("strong",Co,"#"+(0,o.v_)(e.id),1),t[37]||(t[37]=(0,r.Lk)("span",{class:"badge bg-success"},"Completed",-1))]),(0,r.Lk)("div",xo,(0,o.v_)(n.formatDate(e.date_ordered)),1),(0,r.Lk)("div",So,(0,o.v_)(e.customer),1),(0,r.Lk)("div",Mo,[(0,r.Lk)("span",null,(0,o.v_)(e.items?e.items.length:0)+" items",1),(0,r.Lk)("strong",null,"â±"+(0,o.v_)(n.calculateOrderTotal(e).toFixed(2)),1)])],8,wo)))),128)),n.totalPages>1?((0,r.uX)(),(0,r.CE)("div",Io,[(0,r.Lk)("div",Eo," Page "+(0,o.v_)(l.currentPage)+" of "+(0,o.v_)(n.totalPages),1),(0,r.Lk)("div",Oo,[(0,r.Lk)("button",{class:"btn btn-sm btn-outline-primary",disabled:1===l.currentPage,onClick:t[8]||(t[8]=e=>n.changePage(l.currentPage-1))},t[38]||(t[38]=[(0,r.Lk)("i",{class:"bi bi-chevron-left"},null,-1)]),8,_o),(0,r.Lk)("button",{class:"btn btn-sm btn-outline-primary",disabled:l.currentPage===n.totalPages,onClick:t[9]||(t[9]=e=>n.changePage(l.currentPage+1))},t[39]||(t[39]=[(0,r.Lk)("i",{class:"bi bi-chevron-right"},null,-1)]),8,Do)])])):(0,r.Q3)("",!0)]))])),n.filteredOrders.length>0?((0,r.uX)(),(0,r.CE)("div",Xo,[(0,r.Lk)("div",Ro," Showing "+(0,o.v_)(n.paginationInfo.from)+" to "+(0,o.v_)(n.paginationInfo.to)+" of "+(0,o.v_)(n.filteredOrders.length)+" orders ",1),(0,r.Lk)("nav",qo,[(0,r.Lk)("ul",Ho,[(0,r.Lk)("li",{class:(0,o.C4)(["page-item",{disabled:1===l.currentPage}])},[(0,r.Lk)("button",{class:"page-link",onClick:t[10]||(t[10]=e=>n.changePage(l.currentPage-1)),disabled:1===l.currentPage,"aria-label":"Previous page"},t[44]||(t[44]=[(0,r.Lk)("i",{class:"bi bi-chevron-left"},null,-1)]),8,Jo)],2),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.getPageNumbers(),(e=>((0,r.uX)(),(0,r.CE)("li",{key:e,class:(0,o.C4)(["page-item",{active:l.currentPage===e}])},["..."===e?((0,r.uX)(),(0,r.CE)("button",Bo,(0,o.v_)(e),1)):((0,r.uX)(),(0,r.CE)("button",{key:1,class:"page-link",onClick:t=>n.changePage(e)},(0,o.v_)(e),9,Qo))],2)))),128)),(0,r.Lk)("li",{class:(0,o.C4)(["page-item",{disabled:l.currentPage===n.totalPages}])},[(0,r.Lk)("button",{class:"page-link",onClick:t[11]||(t[11]=e=>n.changePage(l.currentPage+1)),disabled:l.currentPage===n.totalPages,"aria-label":"Next page"},t[45]||(t[45]=[(0,r.Lk)("i",{class:"bi bi-chevron-right"},null,-1)]),8,Ko)],2)])])])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",zo,[(0,r.Lk)("div",Zo,[(0,r.Lk)("div",jo,[(0,r.Lk)("div",Uo,[(0,r.Lk)("h5",Vo,"Order Details #"+(0,o.v_)(l.selectedOrder?.id),1),(0,r.Lk)("button",{type:"button",class:"btn-close",onClick:t[12]||(t[12]=(...e)=>n.closeOrderModal&&n.closeOrderModal(...e)),"aria-label":"Close"})]),l.selectedOrder?((0,r.uX)(),(0,r.CE)("div",$o,[(0,r.Lk)("div",Yo,[(0,r.Lk)("div",Go,[(0,r.Lk)("div",ei,[(0,r.Lk)("p",null,[t[46]||(t[46]=(0,r.Lk)("strong",null,"Customer:",-1)),(0,r.eW)(" "+(0,o.v_)(l.selectedOrder.customer),1)]),(0,r.Lk)("p",null,[t[47]||(t[47]=(0,r.Lk)("strong",null,"Date:",-1)),(0,r.eW)(" "+(0,o.v_)(n.formatDate(l.selectedOrder.date_ordered)),1)])]),(0,r.Lk)("div",ti,[t[49]||(t[49]=(0,r.Lk)("p",null,[(0,r.Lk)("strong",null,"Status:"),(0,r.eW)(),(0,r.Lk)("span",{class:"badge bg-success"},"Completed")],-1)),(0,r.Lk)("p",null,[t[48]||(t[48]=(0,r.Lk)("strong",null,"Total:",-1)),(0,r.eW)(" â±"+(0,o.v_)(n.calculateOrderTotal(l.selectedOrder).toFixed(2)),1)])])])]),t[53]||(t[53]=(0,r.Lk)("h6",{class:"mb-3"},"Order Items",-1)),(0,r.Lk)("div",ai,[(0,r.Lk)("table",si,[t[52]||(t[52]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",{scope:"col"},"Product"),(0,r.Lk)("th",{scope:"col",class:"text-center"},"Price"),(0,r.Lk)("th",{scope:"col",class:"text-center"},"Quantity"),(0,r.Lk)("th",{scope:"col",class:"text-center"},"Total")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.selectedOrder.items,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.id},[(0,r.Lk)("td",null,[(0,r.Lk)("div",ri,[n.getProductDetails(e.product)?((0,r.uX)(),(0,r.CE)("div",oi,[n.getProductDetails(e.product).image?((0,r.uX)(),(0,r.CE)("img",{key:0,src:n.fullImageUrl(n.getProductDetails(e.product).image),alt:"Product"},null,8,ii)):((0,r.uX)(),(0,r.CE)("div",li,t[50]||(t[50]=[(0,r.Lk)("i",{class:"bi bi-image"},null,-1)])))])):(0,r.Q3)("",!0),(0,r.Lk)("span",null,(0,o.v_)(n.getProductDetails(e.product)?n.getProductDetails(e.product).name:`Product #${e.product}`),1)])]),(0,r.Lk)("td",ni,"â±"+(0,o.v_)(n.getProductDetails(e.product)?n.getProductDetails(e.product).price:"N/A"),1),(0,r.Lk)("td",ci,(0,o.v_)(e.quantity),1),(0,r.Lk)("td",di,"â±"+(0,o.v_)(n.getProductDetails(e.product)?(n.getProductDetails(e.product).price*e.quantity).toFixed(2):"N/A"),1)])))),128))]),(0,r.Lk)("tfoot",null,[(0,r.Lk)("tr",null,[t[51]||(t[51]=(0,r.Lk)("td",{colspan:"3",class:"text-end"},[(0,r.Lk)("strong",null,"Total:")],-1)),(0,r.Lk)("td",ui,"â±"+(0,o.v_)(n.calculateOrderTotal(l.selectedOrder).toFixed(2)),1)])])])])])):(0,r.Q3)("",!0),(0,r.Lk)("div",mi,[(0,r.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[13]||(t[13]=(...e)=>n.closeOrderModal&&n.closeOrderModal(...e))},"Close"),(0,r.Lk)("button",{type:"button",class:"btn btn-primary btn-view",onClick:t[14]||(t[14]=(...e)=>n.printOrder&&n.printOrder(...e))},t[54]||(t[54]=[(0,r.Lk)("i",{class:"bi bi-printer me-2"},null,-1),(0,r.eW)("Print ")]))])])])],512)])}var gi={data(){return{orders:[],products:[],selectedOrder:null,modalInstance:null,searchQuery:"",dateFrom:"",dateTo:"",sortBy:"date_desc",currentPage:1,perPage:10,isLoading:!0,isRefreshing:!1,cachedOrderTotals:{}}},computed:{filteredOrders(){let e=[...this.orders];if(this.searchQuery){const t=this.searchQuery.toLowerCase();e=e.filter((e=>e.id.toString().includes(t)||e.customer.toString().toLowerCase().includes(t)))}if(this.dateFrom){const t=new Date(this.dateFrom);t.setHours(0,0,0,0),e=e.filter((e=>new Date(e.date_ordered)>=t))}if(this.dateTo){const t=new Date(this.dateTo);t.setHours(23,59,59,999),e=e.filter((e=>new Date(e.date_ordered)<=t))}return"date_desc"===this.sortBy?e.sort(((e,t)=>new Date(t.date_ordered)-new Date(e.date_ordered))):"date_asc"===this.sortBy?e.sort(((e,t)=>new Date(e.date_ordered)-new Date(t.date_ordered))):"amount_desc"===this.sortBy?e.sort(((e,t)=>this.getOrderTotal(t)-this.getOrderTotal(e))):"amount_asc"===this.sortBy&&e.sort(((e,t)=>this.getOrderTotal(e)-this.getOrderTotal(t))),e},paginatedOrders(){const e=(this.currentPage-1)*this.perPage,t=e+this.perPage;return this.filteredOrders.slice(e,t)},totalPages(){return Math.ceil(this.filteredOrders.length/this.perPage)},paginationInfo(){const e=0===this.filteredOrders.length?0:(this.currentPage-1)*this.perPage+1,t=Math.min(this.currentPage*this.perPage,this.filteredOrders.length);return{from:e,to:t}},uniqueCustomers(){const e=new Set;return this.orders.forEach((t=>e.add(t.customer))),Array.from(e)}},methods:{fullImageUrl(e){return e?e.startsWith("http")?e:`http://127.0.0.1:8000${e.startsWith("/")?e:"/media/"+e}`:""},formatDate(e){const t={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(e).toLocaleDateString(void 0,t)},getProductDetails(e){return this.products.find((t=>t.id===e))},calculateOrderTotal(e){let t=0;return e.items&&e.items.forEach((e=>{const a=this.getProductDetails(e.product);a&&(t+=a.price*e.quantity)})),t},getOrderTotal(e){if(void 0!==this.cachedOrderTotals[e.id])return this.cachedOrderTotals[e.id];const t=this.calculateOrderTotal(e);return this.cachedOrderTotals[e.id]=t,t},calculateTotalSales(){let e=0;return this.orders.forEach((t=>{e+=this.calculateOrderTotal(t)})),e.toFixed(2)},viewOrderDetails(e){this.selectedOrder=e,this.modalInstance=new Me.aF(this.$refs.orderModal),this.modalInstance.show()},closeOrderModal(){this.modalInstance&&this.modalInstance.hide()},changePage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e,setTimeout((()=>{const e=document.querySelector(".card");e&&e.scrollIntoView({behavior:"smooth",block:"start"})}),100))},getPageNumbers(){const e=[],t=5;if(this.totalPages<=t)for(let a=1;a<=this.totalPages;a++)e.push(a);else{e.push(1);let t=Math.max(2,this.currentPage-1),a=Math.min(this.totalPages-1,t+2);a===this.totalPages-1&&(t=Math.max(2,a-2)),t>2&&e.push("...");for(let s=t;s<=a;s++)e.push(s);a<this.totalPages-1&&e.push("..."),e.push(this.totalPages)}return e},resetFilters(){this.searchQuery="",this.dateFrom="",this.dateTo="",this.sortBy="date_desc",this.currentPage=1,this.showNotification("info","Filters have been reset")},printOrder(){const e=window.open("","_blank","width=800,height=600"),t=this.generatePrintContent();e.document.open(),e.document.write(t),e.document.close(),e.focus()},generatePrintContent(){let e="<!DOCTYPE html>\n";e+="<html>\n",e+="<head>\n",e+="  <title>Order #"+this.selectedOrder.id+" - Invoice</title>\n",e+='  <meta charset="utf-8">\n',e+='  <meta name="viewport" content="width=device-width, initial-scale=1">\n',e+="  <style>\n",e+="    body { font-family: Arial, sans-serif; padding: 20px; color: #333; line-height: 1.4; }\n",e+="    .print-container { max-width: 800px; margin: 0 auto; padding: 20px; }\n",e+="    .print-header { text-align: center; margin-bottom: 30px; padding-bottom: 15px; border-bottom: 2px solid #eee; }\n",e+="    .print-header h2 { margin-bottom: 5px; font-size: 24px; }\n",e+="    .print-header h3 { margin-top: 0; font-size: 18px; color: #666; }\n",e+="    .print-order-details { margin-bottom: 30px; }\n",e+="    .print-row { display: flex; margin: 0 -15px; }\n",e+="    .print-col { flex: 1; padding: 0 15px; }\n",e+="    .print-items h4 { margin-bottom: 15px; font-size: 18px; border-bottom: 1px solid #eee; padding-bottom: 8px; }\n",e+="    .print-table { width: 100%; border-collapse: collapse; margin-bottom: 30px; }\n",e+="    .print-table th, .print-table td { border: 1px solid #ddd; padding: 8px 12px; text-align: left; }\n",e+="    .print-table th { background-color: #f5f5f5; }\n",e+="    .print-table tfoot { font-weight: bold; }\n",e+="    .print-footer { margin-top: 50px; text-align: center; font-style: italic; color: #666; padding-top: 15px; border-top: 1px solid #eee; }\n",e+="    @media print { .no-print { display: none; } }\n",e+="    .print-button { background-color: #007bff; color: white; border: none; padding: 10px 15px; border-radius: 4px; cursor: pointer; margin: 20px 0; font-size: 14px; }\n",e+="    .print-button:hover { background-color: #0069d9; }\n",e+="  </style>\n",e+="</head>\n",e+="<body>\n",e+='  <div class="print-container">\n',e+='    <div class="print-header">\n',e+="      <h2>Order Invoice</h2>\n",e+="      <h3>Order #"+this.selectedOrder.id+"</h3>\n",e+="    </div>\n",e+='    <div class="print-order-details">\n',e+='      <div class="print-row">\n',e+='        <div class="print-col">\n',e+="          <p><strong>Customer:</strong> "+this.selectedOrder.customer+"</p>\n",e+="          <p><strong>Date:</strong> "+this.formatDate(this.selectedOrder.date_ordered)+"</p>\n",e+="        </div>\n",e+='        <div class="print-col">\n',e+="          <p><strong>Status:</strong> Completed</p>\n",e+="          <p><strong>Total:</strong> â±"+this.calculateOrderTotal(this.selectedOrder).toFixed(2)+"</p>\n",e+="        </div>\n",e+="      </div>\n",e+="    </div>\n",e+='    <div class="print-items">\n',e+="      <h4>Order Items</h4>\n",e+='      <table class="print-table">\n',e+="        <thead>\n",e+="          <tr>\n",e+="            <th>Product</th>\n",e+='            <th style="text-align: center">Price</th>\n',e+='            <th style="text-align: center">Quantity</th>\n',e+='            <th style="text-align: center">Total</th>\n',e+="          </tr>\n",e+="        </thead>\n",e+="        <tbody>\n",this.selectedOrder.items.forEach((t=>{const a=this.getProductDetails(t.product),s=a?a.name:`Product #${t.product}`,r=a?a.price:"N/A",o=a?(a.price*t.quantity).toFixed(2):"N/A";e+="          <tr>\n",e+="            <td>"+s+"</td>\n",e+='            <td style="text-align: center">â±'+r+"</td>\n",e+='            <td style="text-align: center">'+t.quantity+"</td>\n",e+='            <td style="text-align: center">â±'+o+"</td>\n",e+="          </tr>\n"})),e+="        </tbody>\n",e+="        <tfoot>\n",e+="          <tr>\n",e+='            <td colspan="3" style="text-align: right"><strong>Total:</strong></td>\n',e+='            <td style="text-align: center">â±'+this.calculateOrderTotal(this.selectedOrder).toFixed(2)+"</td>\n",e+="          </tr>\n",e+="        </tfoot>\n",e+="      </table>\n",e+="    </div>\n",e+='    <div class="print-footer">\n',e+="      <p>Thank you for your business!</p>\n",e+="    </div>\n",e+='    <div class="no-print" style="text-align: center; margin-top: 30px;">\n',e+='      <button class="print-button" onclick="window.print(); window.close();">Print Invoice</button>\n',e+='      <button class="print-button" style="background-color: #6c757d;" onclick="window.close();">Close</button>\n',e+="    </div>\n",e+="  </div>\n";const t="script",a="body",s="html";return e+="  <"+t+">\n",e+="    window.onload = function() { /* Auto-print is optional */ }\n",e+="  </"+t+">\n",e+="</"+a+">\n",e+="</"+s+">",e},async fetchOrders(){try{$(),await new Promise((e=>setTimeout(e,100)));const e=await de.get("orders/");this.orders=e.data||[],0===this.orders.length?console.warn("No admin orders received from API"):console.log("â Loaded",this.orders.length,"admin orders")}catch(e){console.error("Error fetching admin orders:",e),this.showNotification("error","Failed to load orders.");try{const e=JSON.parse(localStorage.getItem("adminMockOrders")||"[]");e.length>0&&(this.orders=e,this.showNotification("info","Loaded orders from cache."))}catch(t){console.error("Orders fallback loading failed:",t)}}},async fetchProducts(){try{$(),await new Promise((e=>setTimeout(e,100)));const e=await de.get("products/");this.products=e.data||[],0===this.products.length?console.warn("No admin products received from API"):console.log("â Loaded",this.products.length,"admin products for order details")}catch(e){console.error("Error fetching admin products:",e),this.showNotification("error","Failed to load products.");try{const e=JSON.parse(localStorage.getItem("adminMockProducts")||"[]");e.length>0&&(this.products=e)}catch(t){console.error("Products fallback loading failed:",t)}}},async refreshData(){this.isRefreshing=!0;try{await Promise.all([this.fetchOrders(),this.fetchProducts()]),this.showNotification("success","Data refreshed successfully!")}catch(e){console.error("Error refreshing data:",e),this.showNotification("error","Failed to refresh data.")}finally{this.isRefreshing=!1}},showNotification(e,t){const a=document.createElement("div");a.className=`notification notification-${e}`;let s="bi-info-circle";"success"===e&&(s="bi-check-circle"),"warning"===e&&(s="bi-exclamation-triangle"),"error"===e&&(s="bi-x-circle"),a.innerHTML=`<i class="bi ${s}"></i> ${t}`,document.body.appendChild(a),setTimeout((()=>{a.classList.add("show")}),10),setTimeout((()=>{a.classList.remove("show"),setTimeout((()=>{document.body.removeChild(a)}),300)}),3e3)}},watch:{searchQuery(){this.currentPage=1},sortBy(){this.currentPage=1,this.cachedOrderTotals={}},perPage(){this.currentPage=1},dateFrom(){this.currentPage=1},dateTo(){this.currentPage=1}},async mounted(){this.isLoading=!0;try{await Promise.all([this.fetchOrders(),this.fetchProducts()])}catch(e){console.error("Error loading initial data:",e)}finally{this.isLoading=!1}}};const hi=(0,Ce.A)(gi,[["render",pi],["__scopeId","data-v-77eeaac4"]]);var ki=hi;const bi={class:"container"},fi={class:"admin-header mb-4"},vi={class:"admin-actions"},yi={class:"row mb-4"},Li={class:"col-md-4"},wi={class:"stat-card card"},Pi={class:"card-body"},Ci={class:"stat-info"},xi={class:"col-md-4"},Si={class:"stat-card card"},Mi={class:"card-body"},Ii={class:"stat-info"},Ei={class:"col-md-4"},Oi={class:"stat-card card"},_i={class:"card-body"},Di={class:"stat-info"},Ti={class:"card mb-4"},Ai={class:"card-header d-flex justify-content-between align-items-center flex-wrap gap-2"},Fi={class:"d-flex align-items-center gap-2"},Ni={class:"search-container"},Wi=["disabled"],Xi={key:0,class:"spinner-border spinner-border-sm me-1",role:"status"},Ri={key:1,class:"bi bi-arrow-clockwise me-1"},qi={key:0,class:"loading-container py-5"},Hi={key:1,class:"empty-products py-5"},Ji={key:2,class:"table-responsive"},Bi={class:"table table-hover"},Qi={class:"product-image"},Ki=["src","alt"],zi={key:1,class:"image-placeholder"},Zi={class:"product-name"},ji={class:"product-description"},Ui={class:"btn-group"},Vi=["onClick"],$i=["onClick"],Yi={key:3,class:"card-footer"},Gi={"aria-label":"Product pagination"},el={class:"pagination justify-content-center mb-0"},tl=["disabled"],al={key:0,class:"page-link",disabled:""},sl=["onClick"],rl=["disabled"],ol={class:"card"},il={class:"table-responsive"},ll={class:"table"},nl={key:0},cl={class:"modal fade",ref:"editModal",id:"editModal",tabindex:"-1","aria-labelledby":"editModalLabel","aria-hidden":"true"},dl={class:"modal-dialog modal-dialog-centered modal-lg"},ul={class:"modal-content"},ml={class:"modal-header"},pl={class:"modal-body"},gl={class:"modal-body-scrollable"},hl={key:0,class:"text-center mb-4"},kl={class:"product-image-preview"},bl=["src","alt"],fl={class:"form-group mb-3"},vl={key:0,class:"invalid-feedback"},yl={class:"form-group mb-3"},Ll={key:0,class:"invalid-feedback"},wl={class:"row mb-3"},Pl={class:"col-12 col-sm-6 mb-3 mb-sm-0"},Cl={class:"input-group"},xl={key:0,class:"invalid-feedback"},Sl={class:"col-12 col-sm-6"},Ml={class:"input-group"},Il={key:0,class:"invalid-feedback"},El={class:"form-group mb-3"},Ol={class:"custom-file-upload"},_l={class:"modal-footer"},Dl=["disabled"],Tl={key:0,class:"spinner-border spinner-border-sm me-1",role:"status"},Al={key:1,class:"bi bi-check-circle me-1"},Fl={class:"modal fade confirm-modal",ref:"confirmModal",tabindex:"-1","aria-labelledby":"confirmModalLabel","aria-hidden":"true"},Nl={class:"modal-dialog modal-dialog-centered modal-sm"},Wl={class:"modal-content"},Xl={class:"modal-header"},Rl={class:"modal-footer"},ql=["disabled"],Hl={key:0,class:"spinner-border spinner-border-sm me-1",role:"status"},Jl={key:1,class:"bi bi-trash me-1"};function Bl(e,t,a,i,l,n){const c=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",bi,[(0,r.Lk)("div",fi,[t[21]||(t[21]=(0,r.Lk)("h2",{class:"section-title"},[(0,r.Lk)("i",{class:"bi bi-box-seam me-2"}),(0,r.eW)("Product Inventory ")],-1)),(0,r.Lk)("div",vi,[(0,r.bF)(c,{to:"/add-product",class:"btn btn-add"},{default:(0,r.k6)((()=>t[20]||(t[20]=[(0,r.Lk)("i",{class:"bi bi-plus-circle me-2"},null,-1),(0,r.eW)("Add New Product ")]))),_:1})])]),(0,r.Lk)("div",yi,[(0,r.Lk)("div",Li,[(0,r.Lk)("div",wi,[(0,r.Lk)("div",Pi,[t[23]||(t[23]=(0,r.Lk)("div",{class:"stat-icon"},[(0,r.Lk)("i",{class:"bi bi-box-seam"})],-1)),(0,r.Lk)("div",Ci,[(0,r.Lk)("h3",null,(0,o.v_)(i.products.length),1),t[22]||(t[22]=(0,r.Lk)("p",null,"Total Products",-1))])])])]),(0,r.Lk)("div",xi,[(0,r.Lk)("div",Si,[(0,r.Lk)("div",Mi,[t[25]||(t[25]=(0,r.Lk)("div",{class:"stat-icon"},[(0,r.Lk)("i",{class:"bi bi-exclamation-triangle"})],-1)),(0,r.Lk)("div",Ii,[(0,r.Lk)("h3",null,(0,o.v_)(i.lowStockCount),1),t[24]||(t[24]=(0,r.Lk)("p",null,"Low Stock Items",-1))])])])]),(0,r.Lk)("div",Ei,[(0,r.Lk)("div",Oi,[(0,r.Lk)("div",_i,[t[27]||(t[27]=(0,r.Lk)("div",{class:"stat-icon"},[(0,r.Lk)("i",{class:"bi bi-cart-check"})],-1)),(0,r.Lk)("div",Di,[(0,r.Lk)("h3",null,(0,o.v_)(i.orders.length),1),t[26]||(t[26]=(0,r.Lk)("p",null,"Total Orders",-1))])])])])]),(0,r.Lk)("div",Ti,[(0,r.Lk)("div",Ai,[t[29]||(t[29]=(0,r.Lk)("h5",{class:"mb-0"},"Product Inventory",-1)),(0,r.Lk)("div",Fi,[(0,r.Lk)("div",Ni,[(0,r.bo)((0,r.Lk)("input",{type:"text",class:"form-control search-input",placeholder:"Search products...","onUpdate:modelValue":t[0]||(t[0]=e=>i.searchQuery=e),"aria-label":"Search products"},null,512),[[s.Jo,i.searchQuery]]),t[28]||(t[28]=(0,r.Lk)("i",{class:"bi bi-search search-icon"},null,-1))]),(0,r.Lk)("button",{class:"btn btn-sm btn-outline-secondary",onClick:t[1]||(t[1]=(...e)=>i.refreshProducts&&i.refreshProducts(...e)),disabled:i.isRefreshing},[i.isRefreshing?((0,r.uX)(),(0,r.CE)("span",Xi)):((0,r.uX)(),(0,r.CE)("i",Ri)),(0,r.eW)(" "+(0,o.v_)(i.isRefreshing?"Refreshing...":"Refresh"),1)],8,Wi)])]),i.isLoading?((0,r.uX)(),(0,r.CE)("div",qi,t[30]||(t[30]=[(0,r.Lk)("div",{class:"spinner"},[(0,r.Lk)("div",{class:"bounce1"}),(0,r.Lk)("div",{class:"bounce2"}),(0,r.Lk)("div",{class:"bounce3"})],-1),(0,r.Lk)("p",null,"Loading products...",-1)]))):0===i.filteredProducts.length?((0,r.uX)(),(0,r.CE)("div",Hi,[t[32]||(t[32]=(0,r.Lk)("i",{class:"bi bi-search-heart"},null,-1)),t[33]||(t[33]=(0,r.Lk)("h3",null,"No products found",-1)),t[34]||(t[34]=(0,r.Lk)("p",null,"Try adjusting your search criteria.",-1)),(0,r.Lk)("button",{class:"btn btn-primary mt-3",onClick:t[2]||(t[2]=(...e)=>i.resetSearch&&i.resetSearch(...e))},t[31]||(t[31]=[(0,r.Lk)("i",{class:"bi bi-arrow-counterclockwise me-2"},null,-1),(0,r.eW)("Reset Search ")]))])):((0,r.uX)(),(0,r.CE)("div",Ji,[(0,r.Lk)("table",Bi,[t[38]||(t[38]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"Image"),(0,r.Lk)("th",null,"Name"),(0,r.Lk)("th",null,"Price"),(0,r.Lk)("th",null,"Stock"),(0,r.Lk)("th",null,"Actions")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.paginatedProducts,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.id},[(0,r.Lk)("td",null,[(0,r.Lk)("div",Qi,[e.image?((0,r.uX)(),(0,r.CE)("img",{key:0,src:i.fullImageUrl(e.image),alt:e.name,loading:"lazy"},null,8,Ki)):((0,r.uX)(),(0,r.CE)("div",zi,t[35]||(t[35]=[(0,r.Lk)("i",{class:"bi bi-image"},null,-1)])))])]),(0,r.Lk)("td",null,[(0,r.Lk)("div",Zi,(0,o.v_)(e.name),1),(0,r.Lk)("div",ji,(0,o.v_)(i.truncate(e.description,50)),1)]),(0,r.Lk)("td",null,"â±"+(0,o.v_)(i.formatPrice(e.price)),1),(0,r.Lk)("td",null,[(0,r.Lk)("span",{class:(0,o.C4)(["stock-badge",{"bg-danger":0===e.stock,"bg-warning":e.stock>0&&e.stock<5,"bg-success":e.stock>=5}])},(0,o.v_)(e.stock),3)]),(0,r.Lk)("td",null,[(0,r.Lk)("div",Ui,[(0,r.Lk)("button",{class:"btn btn-sm btn-primary",onClick:t=>i.openEditModal(e),"aria-label":"Edit product"},t[36]||(t[36]=[(0,r.Lk)("i",{class:"bi bi-pencil"},null,-1)]),8,Vi),(0,r.Lk)("button",{class:"btn btn-sm btn-danger",onClick:t=>i.confirmDeleteProduct(e.id),"aria-label":"Delete product"},t[37]||(t[37]=[(0,r.Lk)("i",{class:"bi bi-trash"},null,-1)]),8,$i)])])])))),128))])])])),i.totalPages>1?((0,r.uX)(),(0,r.CE)("div",Yi,[(0,r.Lk)("nav",Gi,[(0,r.Lk)("ul",el,[(0,r.Lk)("li",{class:(0,o.C4)(["page-item",{disabled:1===i.currentPage}])},[(0,r.Lk)("button",{class:"page-link",onClick:t[3]||(t[3]=e=>i.changePage(i.currentPage-1)),disabled:1===i.currentPage,"aria-label":"Previous page"},t[39]||(t[39]=[(0,r.Lk)("i",{class:"bi bi-chevron-left"},null,-1)]),8,tl)],2),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.getPageNumbers(),(e=>((0,r.uX)(),(0,r.CE)("li",{key:e,class:(0,o.C4)(["page-item",{active:i.currentPage===e}])},["..."===e?((0,r.uX)(),(0,r.CE)("button",al,(0,o.v_)(e),1)):((0,r.uX)(),(0,r.CE)("button",{key:1,class:"page-link",onClick:t=>i.changePage(e)},(0,o.v_)(e),9,sl))],2)))),128)),(0,r.Lk)("li",{class:(0,o.C4)(["page-item",{disabled:i.currentPage===i.totalPages}])},[(0,r.Lk)("button",{class:"page-link",onClick:t[4]||(t[4]=e=>i.changePage(i.currentPage+1)),disabled:i.currentPage===i.totalPages,"aria-label":"Next page"},t[40]||(t[40]=[(0,r.Lk)("i",{class:"bi bi-chevron-right"},null,-1)]),8,rl)],2)])])])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",ol,[t[44]||(t[44]=(0,r.Lk)("div",{class:"card-header"},[(0,r.Lk)("h5",{class:"mb-0"},"Recent Orders")],-1)),(0,r.Lk)("div",il,[(0,r.Lk)("table",ll,[t[43]||(t[43]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"Order ID"),(0,r.Lk)("th",null,"Date"),(0,r.Lk)("th",null,"Customer"),(0,r.Lk)("th",null,"Items"),(0,r.Lk)("th",null,"Status")])],-1)),(0,r.Lk)("tbody",null,[0===i.orders.length?((0,r.uX)(),(0,r.CE)("tr",nl,t[41]||(t[41]=[(0,r.Lk)("td",{colspan:"5",class:"text-center py-4"},"No orders found",-1)]))):(0,r.Q3)("",!0),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.recentOrders,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.id},[(0,r.Lk)("td",null,"#"+(0,o.v_)(e.id),1),(0,r.Lk)("td",null,(0,o.v_)(i.formatDate(e.date_ordered)),1),(0,r.Lk)("td",null,(0,o.v_)(e.customer),1),(0,r.Lk)("td",null,(0,o.v_)(e.items?e.items.length:0)+" items",1),t[42]||(t[42]=(0,r.Lk)("td",null,[(0,r.Lk)("span",{class:"badge bg-success"},"Completed")],-1))])))),128))])])])]),(0,r.Lk)("div",cl,[(0,r.Lk)("div",dl,[(0,r.Lk)("div",ul,[(0,r.Lk)("form",{onSubmit:t[16]||(t[16]=(0,s.D$)(((...e)=>i.validateAndSubmitEdit&&i.validateAndSubmitEdit(...e)),["prevent"])),novalidate:""},[(0,r.Lk)("div",ml,[t[45]||(t[45]=(0,r.Lk)("h5",{class:"modal-title",id:"editModalLabel"},[(0,r.Lk)("i",{class:"bi bi-pencil-square me-2"}),(0,r.eW)("Edit Product ")],-1)),(0,r.Lk)("button",{type:"button",class:"btn-close",onClick:t[5]||(t[5]=(...e)=>i.closeEditModal&&i.closeEditModal(...e)),"aria-label":"Close"})]),(0,r.Lk)("div",pl,[(0,r.Lk)("div",gl,[i.editProduct.image?((0,r.uX)(),(0,r.CE)("div",hl,[(0,r.Lk)("div",kl,[(0,r.Lk)("img",{src:i.fullImageUrl(i.editProduct.image),alt:i.editProduct.name,class:"img-fluid rounded"},null,8,bl)]),t[46]||(t[46]=(0,r.Lk)("p",{class:"image-caption mt-2"},"Current image",-1))])):(0,r.Q3)("",!0),(0,r.Lk)("div",fl,[t[47]||(t[47]=(0,r.Lk)("label",{class:"form-label fw-medium"},"Product Name",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>i.editProduct.name=e),class:(0,o.C4)(["form-control",{"is-invalid":i.errors.name}]),required:"",onBlur:t[7]||(t[7]=(...e)=>i.validateName&&i.validateName(...e)),placeholder:"Enter product name"},null,34),[[s.Jo,i.editProduct.name]]),i.errors.name?((0,r.uX)(),(0,r.CE)("div",vl,(0,o.v_)(i.errors.name),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",yl,[t[48]||(t[48]=(0,r.Lk)("label",{class:"form-label fw-medium"},"Description",-1)),(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":t[8]||(t[8]=e=>i.editProduct.description=e),class:(0,o.C4)(["form-control",{"is-invalid":i.errors.description}]),rows:"3",required:"",onBlur:t[9]||(t[9]=(...e)=>i.validateDescription&&i.validateDescription(...e)),placeholder:"Enter product description"},null,34),[[s.Jo,i.editProduct.description]]),i.errors.description?((0,r.uX)(),(0,r.CE)("div",Ll,(0,o.v_)(i.errors.description),1)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",wl,[(0,r.Lk)("div",Pl,[t[50]||(t[50]=(0,r.Lk)("label",{class:"form-label fw-medium"},"Price (â±)",-1)),(0,r.Lk)("div",Cl,[t[49]||(t[49]=(0,r.Lk)("span",{class:"input-group-text"},"â±",-1)),(0,r.bo)((0,r.Lk)("input",{type:"number","onUpdate:modelValue":t[10]||(t[10]=e=>i.editProduct.price=e),class:(0,o.C4)(["form-control",{"is-invalid":i.errors.price}]),min:"0",step:"0.01",required:"",onBlur:t[11]||(t[11]=(...e)=>i.validatePrice&&i.validatePrice(...e)),placeholder:"0.00"},null,34),[[s.Jo,i.editProduct.price,void 0,{number:!0}]]),i.errors.price?((0,r.uX)(),(0,r.CE)("div",xl,(0,o.v_)(i.errors.price),1)):(0,r.Q3)("",!0)])]),(0,r.Lk)("div",Sl,[t[52]||(t[52]=(0,r.Lk)("label",{class:"form-label fw-medium"},"Stock",-1)),(0,r.Lk)("div",Ml,[t[51]||(t[51]=(0,r.Lk)("span",{class:"input-group-text"},[(0,r.Lk)("i",{class:"bi bi-box-seam"})],-1)),(0,r.bo)((0,r.Lk)("input",{type:"number","onUpdate:modelValue":t[12]||(t[12]=e=>i.editProduct.stock=e),class:(0,o.C4)(["form-control",{"is-invalid":i.errors.stock}]),min:"0",required:"",onBlur:t[13]||(t[13]=(...e)=>i.validateStock&&i.validateStock(...e)),placeholder:"0"},null,34),[[s.Jo,i.editProduct.stock,void 0,{number:!0}]]),i.errors.stock?((0,r.uX)(),(0,r.CE)("div",Il,(0,o.v_)(i.errors.stock),1)):(0,r.Q3)("",!0)])])]),(0,r.Lk)("div",El,[t[54]||(t[54]=(0,r.Lk)("label",{class:"form-label fw-medium"},"Product Image",-1)),(0,r.Lk)("div",Ol,[(0,r.Lk)("input",{type:"file",id:"productImage",onChange:t[14]||(t[14]=(...e)=>i.handleEditImage&&i.handleEditImage(...e)),class:"form-control",accept:"image/*"},null,32),t[53]||(t[53]=(0,r.Lk)("label",{for:"productImage",class:"file-upload-label"},[(0,r.Lk)("i",{class:"bi bi-cloud-arrow-up me-2"}),(0,r.eW)(" Choose a new image ")],-1))]),t[55]||(t[55]=(0,r.Lk)("small",{class:"text-muted d-block mt-1"}," Recommended size: 800x800px, max 2MB ",-1))])])]),(0,r.Lk)("div",_l,[(0,r.Lk)("button",{type:"button",class:"btn btn-outline-secondary",onClick:t[15]||(t[15]=(...e)=>i.closeEditModal&&i.closeEditModal(...e))},t[56]||(t[56]=[(0,r.Lk)("i",{class:"bi bi-x-circle me-1"},null,-1),(0,r.eW)("Cancel ")])),(0,r.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:i.isSubmitting},[i.isSubmitting?((0,r.uX)(),(0,r.CE)("span",Tl)):((0,r.uX)(),(0,r.CE)("i",Al)),(0,r.eW)(" "+(0,o.v_)(i.isSubmitting?"Saving...":"Save Changes"),1)],8,Dl)])],32)])])],512),(0,r.Lk)("div",Fl,[(0,r.Lk)("div",Nl,[(0,r.Lk)("div",Wl,[(0,r.Lk)("div",Xl,[t[57]||(t[57]=(0,r.Lk)("h5",{class:"modal-title",id:"confirmModalLabel"},"Confirm Deletion",-1)),(0,r.Lk)("button",{type:"button",class:"btn-close",onClick:t[17]||(t[17]=(...e)=>i.hideConfirmModal&&i.hideConfirmModal(...e)),"aria-label":"Close"})]),t[58]||(t[58]=(0,r.Lk)("div",{class:"modal-body"},[(0,r.Lk)("i",{class:"bi bi-exclamation-triangle-fill text-danger mb-3",style:{"font-size":"2rem"}}),(0,r.Lk)("p",null,"Are you sure you want to delete this product? This action cannot be undone.")],-1)),(0,r.Lk)("div",Rl,[(0,r.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[18]||(t[18]=(...e)=>i.hideConfirmModal&&i.hideConfirmModal(...e))},"Cancel"),(0,r.Lk)("button",{type:"button",class:"btn btn-danger",onClick:t[19]||(t[19]=(...e)=>i.deleteProduct&&i.deleteProduct(...e)),disabled:i.isDeleting},[i.isDeleting?((0,r.uX)(),(0,r.CE)("span",Hl)):((0,r.uX)(),(0,r.CE)("i",Jl)),(0,r.eW)(" "+(0,o.v_)(i.isDeleting?"Deleting...":"Delete"),1)],8,ql)])])])],512)])}var Ql={setup(){const e=(0,E.KR)([]),t=(0,E.KR)(1),a=(0,E.KR)(5),s=(0,E.Kh)({id:null,name:"",description:"",price:0,stock:0,image:null}),o=(0,E.KR)(null),i=(0,E.KR)(null),l=(0,E.KR)(null),n=(0,E.KR)([]),c=(0,E.KR)(""),d=(0,E.KR)(null),u=(0,E.KR)(null),m=(0,E.KR)(null),p=(0,E.KR)(!0),g=(0,E.KR)(!1),h=(0,E.KR)(!1),k=(0,E.KR)(!1),{success:b,error:f}=Le(),v=(0,E.Kh)({name:"",description:"",price:"",stock:""}),y=(0,r.EW)((()=>[...n.value].sort(((e,t)=>t.id-e.id)).slice(0,5))),L=()=>s.name.trim()?(v.name="",!0):(v.name="Product name is required",!1),w=()=>s.description.trim()?(v.description="",!0):(v.description="Product description is required",!1),P=()=>null===s.price||void 0===s.price?(v.price="Price is required",!1):s.price<0?(v.price="Price cannot be negative",!1):(v.price="",!0),C=()=>null===s.stock||void 0===s.stock?(v.stock="Stock quantity is required",!1):s.stock<0?(v.stock="Stock cannot be negative",!1):(v.stock="",!0),x=()=>{const e=L(),t=w(),a=P(),s=C();return e&&t&&a&&s},S=(0,r.EW)((()=>{let t=[...e.value];if(c.value){const e=c.value.toLowerCase();t=t.filter((t=>t.name.toLowerCase().includes(e)||t.description.toLowerCase().includes(e)))}return t})),M=(0,r.EW)((()=>Math.ceil(S.value.length/a.value))),I=(0,r.EW)((()=>{const e=(t.value-1)*a.value;return S.value.slice(e,e+a.value)})),O=(0,r.EW)((()=>e.value.filter((e=>e.stock<5)).length)),_=e=>e?e.startsWith("http")?e:`http://127.0.0.1:8000${e.startsWith("/")?e:"/media/"+e}`:"",D=e=>parseFloat(e).toFixed(2),T=(e,t)=>e?e.length>t?e.substring(0,t)+"...":e:"",A=e=>{const t={year:"numeric",month:"short",day:"numeric"};return new Date(e).toLocaleDateString(void 0,t)},F=e=>{e>=1&&e<=M.value&&(t.value=e,setTimeout((()=>{const e=document.querySelector(".card");e&&e.scrollIntoView({behavior:"smooth",block:"start"})}),100))},N=()=>{const e=[],a=5;if(M.value<=a)for(let t=1;t<=M.value;t++)e.push(t);else{e.push(1);let a=Math.max(2,t.value-1),s=Math.min(M.value-1,a+2);s===M.value-1&&(a=Math.max(2,s-2)),a>2&&e.push("...");for(let t=a;t<=s;t++)e.push(t);s<M.value-1&&e.push("..."),e.push(M.value)}return e},W=()=>{c.value="",t.value=1},X=async(t=!0)=>{t?p.value=!0:g.value=!0;try{$(),await new Promise((e=>setTimeout(e,100)));const t=await de.get("products/");e.value=t.data||[],0===e.value.length?(console.warn("No admin products received from API"),f("No products available at the moment.")):console.log("â Loaded",e.value.length,"admin products")}catch(a){console.error("Error fetching admin products:",a),f("Failed to load products. Please try refreshing the page.");try{const t=JSON.parse(localStorage.getItem("adminMockProducts")||"[]");t.length>0&&(e.value=t,b("Loaded products from cache."))}catch(s){console.error("Fallback loading failed:",s)}}finally{p.value=!1,g.value=!1}},R=async()=>{await X(!1),b("Products refreshed successfully!")},q=async()=>{try{$(),await new Promise((e=>setTimeout(e,100)));const e=await de.get("orders/");n.value=e.data||[],0===n.value.length?console.warn("No admin orders received from API"):console.log("â Loaded",n.value.length,"admin orders")}catch(e){console.error("Error fetching admin orders:",e),f("Failed to load orders.");try{const e=JSON.parse(localStorage.getItem("adminMockOrders")||"[]");e.length>0&&(n.value=e)}catch(t){console.error("Orders fallback loading failed:",t)}}},H=e=>{Object.keys(v).forEach((e=>{v[e]=""})),s.id=e.id,s.name=e.name,s.description=e.description,s.price=e.price,s.stock=e.stock,s.image=e.image,o.value=null,i.value?i.value.show():d.value&&(i.value=new Me.aF(d.value),i.value.show())},J=()=>{i.value&&i.value.hide()},B=e=>{o.value=e.target.files[0]},Q=()=>{x()?K():f("Please fix the errors in the form")},K=async()=>{h.value=!0;const e=new FormData;e.append("name",s.name),e.append("description",s.description),e.append("price",s.price),e.append("stock",s.stock),o.value&&e.append("image",o.value);try{await de.patch(`products/${s.id}/`,e,{headers:{"Content-Type":"multipart/form-data"}}),b("Product updated successfully!"),X(),J()}catch(t){if(console.error("Error updating product:",t),f("Failed to update product."),t.response&&t.response.data){const e=t.response.data;Object.keys(e).forEach((t=>{t in v&&(v[t]=e[t][0])}))}}finally{h.value=!1}},z=e=>{m.value=e,l.value?l.value.show():u.value&&(l.value=new Me.aF(u.value),l.value.show())},Z=()=>{l.value&&l.value.hide()},j=async()=>{if(m.value){k.value=!0;try{await de.delete(`products/${m.value}/`),b("Product deleted successfully."),X(),Z()}catch(e){console.error("Error deleting product:",e),e.response&&e.response.data&&e.response.data.error?f(e.response.data.error):f("Cannot delete product. It may be in an order.")}finally{k.value=!1}}};return(0,r.sV)((async()=>{d.value&&(i.value=new Me.aF(d.value)),u.value&&(l.value=new Me.aF(u.value));const e=localStorage.getItem("access"),t="true"===localStorage.getItem("is_staff");if(!e||!t)return f("Access denied. Staff only."),void(window.location.href="/login");ue.waitForInitialization&&await ue.waitForInitialization(),await X(),await q()})),(0,r.wB)((()=>ue.isLoggedIn),(async e=>{e&&ue.isInitialized&&ue.isStaff&&(await X(),await q())})),{products:e,filteredProducts:S,paginatedProducts:I,currentPage:t,totalPages:M,editProduct:s,editModal:d,confirmModal:u,orders:n,recentOrders:y,searchQuery:c,lowStockCount:O,isLoading:p,isRefreshing:g,isSubmitting:h,isDeleting:k,errors:v,fullImageUrl:_,formatPrice:D,truncate:T,formatDate:A,changePage:F,getPageNumbers:N,resetSearch:W,refreshProducts:R,openEditModal:H,closeEditModal:J,handleEditImage:B,validateAndSubmitEdit:Q,confirmDeleteProduct:z,hideConfirmModal:Z,deleteProduct:j,validateName:L,validateDescription:w,validatePrice:P,validateStock:C}}};const Kl=(0,Ce.A)(Ql,[["render",Bl],["__scopeId","data-v-654f80e6"]]);var zl=Kl;const Zl={class:"container"},jl={class:"admin-header mb-3 mb-md-4"},Ul={class:"admin-actions ms-auto"},Vl={class:"row"},$l={class:"col-12 col-lg-8 mx-auto"},Yl={class:"card"},Gl={class:"card-body p-3 p-md-4"},en={class:"mb-3"},tn={class:"mb-3"},an={class:"row g-2 mb-3"},sn={class:"col-12 col-md-6"},rn={class:"input-group"},on={class:"col-12 col-md-6"},ln={class:"mb-4"},nn={key:0,class:"image-preview mt-3"},cn=["src"],dn={class:"d-grid"},un=["disabled"],mn={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},pn={key:1,class:"bi bi-plus-circle me-1 me-md-2"};function gn(e,t,a,i,l,n){const c=(0,r.g2)("router-link");return(0,r.uX)(),(0,r.CE)("div",Zl,[(0,r.Lk)("div",jl,[t[7]||(t[7]=(0,r.Lk)("h2",{class:"section-title"},[(0,r.Lk)("i",{class:"bi bi-plus-circle me-2"}),(0,r.eW)("Add New Product ")],-1)),(0,r.Lk)("div",Ul,[(0,r.bF)(c,{to:"/monitor-products",class:"btn btn-outline-primary btn-back"},{default:(0,r.k6)((()=>t[6]||(t[6]=[(0,r.Lk)("i",{class:"bi bi-arrow-left me-1 me-md-2"},null,-1),(0,r.Lk)("span",{class:"btn-text"},"Back to Products",-1)]))),_:1})])]),(0,r.Lk)("div",Vl,[(0,r.Lk)("div",$l,[(0,r.Lk)("div",Yl,[(0,r.Lk)("div",Gl,[(0,r.Lk)("form",{onSubmit:t[5]||(t[5]=(0,s.D$)(((...e)=>n.submitProduct&&n.submitProduct(...e)),["prevent"])),enctype:"multipart/form-data"},[(0,r.Lk)("div",en,[t[8]||(t[8]=(0,r.Lk)("label",{class:"form-label"},"Product Name",-1)),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.product.name=e),class:"form-control form-control-md",placeholder:"Enter product name",required:""},null,512),[[s.Jo,l.product.name]])]),(0,r.Lk)("div",tn,[t[9]||(t[9]=(0,r.Lk)("label",{class:"form-label"},"Description",-1)),(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.product.description=e),class:"form-control form-control-md",placeholder:"Enter product description",rows:"4",required:""},null,512),[[s.Jo,l.product.description]])]),(0,r.Lk)("div",an,[(0,r.Lk)("div",sn,[t[11]||(t[11]=(0,r.Lk)("label",{class:"form-label"},"Price (â±)",-1)),(0,r.Lk)("div",rn,[t[10]||(t[10]=(0,r.Lk)("span",{class:"input-group-text"},"â±",-1)),(0,r.bo)((0,r.Lk)("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=e=>l.product.price=e),class:"form-control form-control-md",placeholder:"0.00",min:"0",step:"0.01",required:""},null,512),[[s.Jo,l.product.price,void 0,{number:!0}]])])]),(0,r.Lk)("div",on,[t[12]||(t[12]=(0,r.Lk)("label",{class:"form-label"},"Stock Quantity",-1)),(0,r.bo)((0,r.Lk)("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=e=>l.product.stock=e),class:"form-control form-control-md",placeholder:"0",min:"0",required:""},null,512),[[s.Jo,l.product.stock,void 0,{number:!0}]])])]),(0,r.Lk)("div",ln,[t[13]||(t[13]=(0,r.Lk)("label",{class:"form-label"},"Product Image",-1)),(0,r.Lk)("input",{type:"file",onChange:t[4]||(t[4]=(...e)=>n.handleImage&&n.handleImage(...e)),class:"form-control form-control-md",accept:"image/*"},null,32),l.imagePreview?((0,r.uX)(),(0,r.CE)("div",nn,[(0,r.Lk)("img",{src:l.imagePreview,alt:"Preview",class:"img-thumbnail"},null,8,cn)])):(0,r.Q3)("",!0)]),(0,r.Lk)("div",dn,[(0,r.Lk)("button",{type:"submit",class:"btn btn-primary btn-md btn-lg btn-add",disabled:l.isSubmitting},[l.isSubmitting?((0,r.uX)(),(0,r.CE)("span",mn)):((0,r.uX)(),(0,r.CE)("i",pn)),(0,r.eW)(" "+(0,o.v_)(l.isSubmitting?"Adding...":"Add Product"),1)],8,un)])],32)])])])])])}var hn={data(){return{product:{name:"",description:"",price:0,stock:0},image:null,imagePreview:null,isSubmitting:!1}},methods:{handleImage(e){if(this.image=e.target.files[0],this.image){const e=new FileReader;e.onload=e=>{this.imagePreview=e.target.result},e.readAsDataURL(this.image)}else this.imagePreview=null},async submitProduct(){this.isSubmitting=!0;const e=new FormData;for(let a in this.product)e.append(a,this.product[a]);this.image&&e.append("image",this.image);try{await de.post("products/",e,{headers:{"Content-Type":"multipart/form-data"}}),this.showNotification("success","Product added successfully!"),this.product={name:"",description:"",price:0,stock:0},this.image=null,this.imagePreview=null,setTimeout((()=>{this.$router.push("/monitor-products")}),1500)}catch(t){this.showNotification("error","Failed to add product."),console.error(t)}finally{this.isSubmitting=!1}},showNotification(e,t){const a=document.createElement("div");a.className=`notification notification-${e}`;let s="bi-info-circle";"success"===e&&(s="bi-check-circle"),"warning"===e&&(s="bi-exclamation-triangle"),"error"===e&&(s="bi-x-circle"),a.innerHTML=`<i class="bi ${s}"></i> ${t}`,document.body.appendChild(a),setTimeout((()=>{a.classList.add("show")}),10),setTimeout((()=>{a.classList.remove("show"),setTimeout((()=>{document.body.removeChild(a)}),300)}),3e3)}},mounted(){const e=localStorage.getItem("access"),t="true"===localStorage.getItem("is_staff");e&&t||(this.showNotification("error","Access denied. Staff only."),this.$router.push("/login"))}};const kn=(0,Ce.A)(hn,[["render",gn],["__scopeId","data-v-b33398bc"]]);var bn=kn;const fn=[{path:"/",redirect:"/login"},{path:"/login",component:He},{path:"/register",component:kt},{path:"/products",component:la},{path:"/cart",component:cs},{path:"/orders",component:Or},{path:"/monitor",component:ki},{path:"/monitor-products",component:zl},{path:"/add-product",component:bn}],vn=(0,me.aE)({history:(0,me.Bt)(),routes:fn});vn.beforeEach(((e,t,a)=>{const s=!!localStorage.getItem("access"),r="true"===localStorage.getItem("is_staff"),o=["/login","/register"],i=["/monitor"],l=["/products","/cart","/orders"];return s||o.includes(e.path)?s&&o.includes(e.path)?a(r?"/monitor":"/products"):s&&r&&l.includes(e.path)?a("/monitor"):s&&!r&&i.includes(e.path)?a("/products"):void a():a("/login")}));var yn=vn;const Ln=window.location.hostname.includes("github.io")||!0;Ln&&(console.log("ð Running in demo mode with comprehensive mock data"),T(),V(),console.log("ð Mock data initialized:"),console.log("- Products:",JSON.parse(localStorage.getItem("adminMockProducts")||"[]").length),console.log("- Orders:",JSON.parse(localStorage.getItem("adminMockOrders")||"[]").length),console.log("- Demo Credentials:"),console.log('  Admin: username="admin", password="admin"'),console.log('  Customer: username="user", password="user"'));const wn=(0,s.Ef)(Oe);wn.use(yn),wn.provide("auth",ue),wn.mount("#app")}},t={};function a(s){var r=t[s];if(void 0!==r)return r.exports;var o=t[s]={exports:{}};return e[s].call(o.exports,o,o.exports,a),o.exports}a.m=e,function(){var e=[];a.O=function(t,s,r,o){if(!s){var i=1/0;for(d=0;d<e.length;d++){s=e[d][0],r=e[d][1],o=e[d][2];for(var l=!0,n=0;n<s.length;n++)(!1&o||i>=o)&&Object.keys(a.O).every((function(e){return a.O[e](s[n])}))?s.splice(n--,1):(l=!1,o<i&&(i=o));if(l){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[s,r,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var r,o,i=s[0],l=s[1],n=s[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(r in l)a.o(l,r)&&(a.m[r]=l[r]);if(n)var d=n(a)}for(t&&t(s);c<i.length;c++)o=i[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(d)},s=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[504],(function(){return a(3602)}));s=a.O(s)})();
//# sourceMappingURL=app.544a97f0.js.map